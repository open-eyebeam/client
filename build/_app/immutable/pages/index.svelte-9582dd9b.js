import{S as ne,i as ie,s as re,e as A,k as P,c as I,a as E,m as M,d as b,_ as J,b as m,H as R,g as j,I as y,O as C,a1 as Sn,Q as we,t as G,h as N,E as oe,R as Le,a2 as me,v as ge,l as H,Y as Dn,Z as $n,a3 as Be,w as W,x as Z,y as K,q as T,o as x,B as Q,n as U,p as q,M as X,T as Vn,U as On,V as Pn,W as Mn,J as de,K as ce,a4 as ve,a5 as qe,a6 as Xe,a7 as _n,F as Ge,G as Ne,f as pn,j as pe,L as Ye,a8 as Fn,u as Ln,a9 as Rn}from"../chunks/index-b082bdf4.js";import{w as tt}from"../chunks/index-08e8c6c3.js";import{K as Hn,e as Ve,g as mn,s as Ce,r as Fe,j as ae,k as Te,m as vn,n as Bn,o as gn,f as le,q as bn,v as xe,G as fe,c as Oe,d as Me,w as nt,b as Ie,B as We,x as Ee,y as Pe,z as ze,P as Gn,h as he,C as it,D as rt,E as ot,l as kn,F as Nn,H as yn,t as wn,I as Cn,J as Un,L as An,M as qn,S as Ue,N as ye,O as Xn,Q as Yn,R as lt,T as Wn,u as Qe,U as Zn,V as Kn,p as Qn,W as Jn,X as Je,Y as st,Z as ei,_ as $e,$ as ti,a0 as ni,a1 as ii,a2 as ri,a3 as oi,a4 as li,a5 as si,a6 as ai}from"../chunks/movement-c9f1790e.js";function et(l){return Math.pow(l-1,3)*(1-l)+1}const In=tt(!1),Tn=tt(!1);let He={};const ci=async()=>new Promise((l,e)=>{He=new Hn({url:"https://hello.undersco.re/auth/",realm:"undersco_re",clientId:"underscore_openeyebeam"}),He.init({}).then(t=>{In.set(t),t?(console.log("Authenticated"),Ve.set("open-eyebeam-logged-in",!0),He.loadUserProfile().then(async n=>{console.log("p",n);const i=await fi(n);Tn.set(i)}).catch(()=>{mn("Failed to load user profile")}).finally(()=>{l()})):l()}).catch(t=>{console.log("error in auth ->",t),e(t)})}),ui=async()=>{He.login({redirectUri:window.location.origin})},fi=l=>new Promise(async(e,t)=>{const n=new Headers;n.append("Content-Type","application/json");const i={method:"POST",headers:n,body:JSON.stringify(l),redirect:"follow"},o=await fetch("/api/update-user",i);if(!o.ok){const s=`An error has occured: ${o.status}`;throw new Error(s)}const c=await o.json();e(c)});function at(l,e,t){const n=l.slice();return n[5]=e[t],n[7]=t,n}function ct(l){let e,t,n,i,o,c,s;function a(...f){return l[3](l[5],...f)}return{c(){e=A("div"),t=A("img"),o=P(),this.h()},l(f){e=I(f,"DIV",{class:!0,tabindex:!0});var _=E(e);t=I(_,"IMG",{src:!0,alt:!0}),o=M(_),_.forEach(b),this.h()},h(){J(t.src,n=l[5].imageUrl)||m(t,"src",n),m(t,"alt",i=l[5].alt),m(e,"class","avatar svelte-i1o3ve"),m(e,"tabindex","0"),R(e,"selected",l[1]==l[5]._id)},m(f,_){j(f,e,_),y(e,t),y(e,o),c||(s=[C(e,"click",function(){Sn(l[2](l[5]))&&l[2](l[5]).apply(this,arguments)}),C(e,"keydown",a)],c=!0)},p(f,_){l=f,_&1&&!J(t.src,n=l[5].imageUrl)&&m(t,"src",n),_&1&&i!==(i=l[5].alt)&&m(t,"alt",i),_&3&&R(e,"selected",l[1]==l[5]._id)},d(f){f&&b(e),c=!1,we(s)}}}function di(l){let e,t,n,i,o,c=l[0],s=[];for(let a=0;a<c.length;a+=1)s[a]=ct(at(l,c,a));return{c(){e=A("div"),t=A("div"),n=G("Select your avatar"),i=P(),o=A("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0});var f=E(e);t=I(f,"DIV",{});var _=E(t);n=N(_,"Select your avatar"),_.forEach(b),i=M(f),o=I(f,"DIV",{class:!0});var r=E(o);for(let u=0;u<s.length;u+=1)s[u].l(r);r.forEach(b),f.forEach(b),this.h()},h(){m(o,"class","inner svelte-i1o3ve"),m(e,"class","avatar-picker")},m(a,f){j(a,e,f),y(e,t),y(t,n),y(e,i),y(e,o);for(let _=0;_<s.length;_+=1)s[_].m(o,null)},p(a,[f]){if(f&7){c=a[0];let _;for(_=0;_<c.length;_+=1){const r=at(a,c,_);s[_]?s[_].p(r,f):(s[_]=ct(r),s[_].c(),s[_].m(o,null))}for(;_<s.length;_+=1)s[_].d(1);s.length=c.length}},i:oe,o:oe,d(a){a&&b(e),Le(s,a)}}}function hi(l,e,t){const n=me();let{avatars:i=[]}=e,o=Ce(i)._id;ge(async()=>{n("select",{id:o})});const c=a=>{t(1,o=a._id),n("select",{id:a._id})},s=(a,f)=>f.key==="Enter"&&c(a);return l.$$set=a=>{"avatars"in a&&t(0,i=a.avatars)},[i,o,c,s]}class _i extends ne{constructor(e){super(),ie(this,e,hi,di,re,{avatars:0})}}function ut(l,e,t){const n=l.slice();return n[18]=e[t],n[20]=t,n}function ft(l){let e,t=l[1],n=[];for(let i=0;i<t.length;i+=1)n[i]=_t(ut(l,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=H()},m(i,o){for(let c=0;c<n.length;c+=1)n[c].m(i,o);j(i,e,o)},p(i,o){if(o&102){t=i[1];let c;for(c=0;c<t.length;c+=1){const s=ut(i,t,c);n[c]?n[c].p(s,o):(n[c]=_t(s),n[c].c(),n[c].m(e.parentNode,e))}for(;c<n.length;c+=1)n[c].d(1);n.length=t.length}},d(i){Le(n,i),i&&b(e)}}}function dt(l){let e,t,n=Fe(ae(l[18],"content.content",[]))+"",i,o,c,s,a,f,_,r=l[20]===l[1].length-1&&l[5]&&ht();return{c(){e=A("div"),t=new Dn(!1),i=P(),r&&r.c(),o=P(),c=A("button"),s=G("Next"),a=P(),this.h()},l(u){e=I(u,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var d=E(e);t=$n(d,!1),i=M(d),r&&r.l(d),o=M(d),c=I(d,"BUTTON",{class:!0});var h=E(c);s=N(h,"Next"),h.forEach(b),a=M(d),d.forEach(b),this.h()},h(){t.a=i,m(c,"class","btn next svelte-1r2hhvy"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(u,d){j(u,e,d),t.m(n,e),y(e,i),r&&r.m(e,null),y(e,o),y(e,c),y(c,s),y(e,a),f||(_=[C(c,"click",l[6]),C(c,"keydown",l[8]),C(e,"keydown",l[9])],f=!0)},p(u,d){d&2&&n!==(n=Fe(ae(u[18],"content.content",[]))+"")&&t.p(n),u[20]===u[1].length-1&&u[5]?r||(r=ht(),r.c(),r.m(e,o)):r&&(r.d(1),r=null)},d(u){u&&b(e),r&&r.d(),f=!1,we(_)}}}function ht(l){let e,t,n;return{c(){e=A("p"),t=A("strong"),n=G("This website is best experienced on a laptop or desktop computer. Some content may not be accessible on phones or tablets.")},l(i){e=I(i,"P",{});var o=E(e);t=I(o,"STRONG",{});var c=E(t);n=N(c,"This website is best experienced on a laptop or desktop computer. Some content may not be accessible on phones or tablets."),c.forEach(b),o.forEach(b)},m(i,o){j(i,e,o),y(e,t),y(t,n)},d(i){i&&b(e)}}}function _t(l){let e,t=l[20]===l[2]&&dt(l);return{c(){t&&t.c(),e=H()},l(n){t&&t.l(n),e=H()},m(n,i){t&&t.m(n,i),j(n,e,i)},p(n,i){n[20]===n[2]?t?t.p(n,i):(t=dt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&b(e)}}}function pt(l){let e,t,n,i,o,c,s,a,f,_,r;return{c(){e=A("div"),t=A("div"),n=G("What would you like to be called?"),i=P(),o=A("div"),c=A("input"),s=P(),a=A("button"),f=G("Next"),this.h()},l(u){e=I(u,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var d=E(e);t=I(d,"DIV",{class:!0});var h=E(t);n=N(h,"What would you like to be called?"),h.forEach(b),i=M(d),o=I(d,"DIV",{class:!0});var g=E(o);c=I(g,"INPUT",{class:!0,type:!0,placeholder:!0,minlength:!0}),g.forEach(b),s=M(d),a=I(d,"BUTTON",{class:!0,tabindex:!0});var v=E(a);f=N(v,"Next"),v.forEach(b),d.forEach(b),this.h()},h(){m(t,"class","name svelte-1r2hhvy"),m(c,"class","name svelte-1r2hhvy"),m(c,"type","text"),m(c,"placeholder","Name"),c.autofocus=!0,m(c,"minlength","1"),m(o,"class","input-container"),m(a,"class","btn next svelte-1r2hhvy"),m(a,"tabindex","0"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(u,d){j(u,e,d),y(e,t),y(t,n),y(e,i),y(e,o),y(o,c),Be(c,l[3]),y(e,s),y(e,a),y(a,f),c.focus(),_||(r=[C(c,"input",l[10]),C(c,"keydown",l[11]),C(a,"keydown",l[12]),C(a,"click",l[6]),C(e,"keydown",l[13])],_=!0)},p(u,d){d&8&&c.value!==u[3]&&Be(c,u[3])},d(u){u&&b(e),_=!1,we(r)}}}function mt(l){let e,t,n,i,o,c,s,a,f;return n=new _i({props:{avatars:l[0]}}),n.$on("select",l[14]),{c(){e=A("div"),t=A("div"),W(n.$$.fragment),i=P(),o=A("div"),c=G("Enter"),this.h()},l(_){e=I(_,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var r=E(e);t=I(r,"DIV",{class:!0});var u=E(t);Z(n.$$.fragment,u),u.forEach(b),i=M(r),o=I(r,"DIV",{class:!0});var d=E(o);c=N(d,"Enter"),d.forEach(b),r.forEach(b),this.h()},h(){m(t,"class","name svelte-1r2hhvy"),m(o,"class","btn next svelte-1r2hhvy"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(_,r){j(_,e,r),y(e,t),K(n,t,null),y(e,i),y(e,o),y(o,c),s=!0,a||(f=[C(o,"click",l[7]),C(e,"keydown",l[15])],a=!0)},p(_,r){const u={};r&1&&(u.avatars=_[0]),n.$set(u)},i(_){s||(T(n.$$.fragment,_),s=!0)},o(_){x(n.$$.fragment,_),s=!1},d(_){_&&b(e),Q(n),a=!1,we(f)}}}function pi(l){let e,t,n,i,o,c=l[1]&&ft(l),s=l[2]===l[1].length&&pt(l),a=l[2]===l[1].length+1&&mt(l);return{c(){e=A("div"),t=A("div"),c&&c.c(),n=P(),s&&s.c(),i=P(),a&&a.c(),this.h()},l(f){e=I(f,"DIV",{class:!0});var _=E(e);t=I(_,"DIV",{class:!0});var r=E(t);c&&c.l(r),n=M(r),s&&s.l(r),i=M(r),a&&a.l(r),r.forEach(b),_.forEach(b),this.h()},h(){m(t,"class","box svelte-1r2hhvy"),m(e,"class","onboarding-screen svelte-1r2hhvy")},m(f,_){j(f,e,_),y(e,t),c&&c.m(t,null),y(t,n),s&&s.m(t,null),y(t,i),a&&a.m(t,null),o=!0},p(f,[_]){f[1]?c?c.p(f,_):(c=ft(f),c.c(),c.m(t,n)):c&&(c.d(1),c=null),f[2]===f[1].length?s?s.p(f,_):(s=pt(f),s.c(),s.m(t,i)):s&&(s.d(1),s=null),f[2]===f[1].length+1?a?(a.p(f,_),_&6&&T(a,1)):(a=mt(f),a.c(),T(a,1),a.m(t,null)):a&&(U(),x(a,1,1,()=>{a=null}),q())},i(f){o||(T(a),o=!0)},o(f){x(a),o=!1},d(f){f&&b(e),c&&c.d(),s&&s.d(),a&&a.d()}}}function mi(l,e,t){let n;X(l,Te,S=>t(5,n=S));const i=me();let{avatars:o=[]}=e;Te.set(vn());let c={},s=!1,a=0,f="",_="";const r=()=>t(2,a++,a),u=()=>{i("finish",{name:f,avatar:_})};ge(async()=>{c=await Bn(),t(1,s=c.tutorialSlides)});const d=S=>S.key==="Enter"&&r,h=S=>S.key==="Enter"&&r();function g(){f=this.value,t(3,f)}const v=S=>S.key==="Enter"&&r(),p=S=>S.key==="Enter"&&r(),k=S=>S.key==="Enter"&&r(),w=S=>{t(4,_=S.detail.id)},D=S=>S.key==="Enter"&&u();return l.$$set=S=>{"avatars"in S&&t(0,o=S.avatars)},[o,s,a,f,_,n,r,u,d,h,g,v,p,k,w,D]}class vi extends ne{constructor(e){super(),ie(this,e,mi,pi,re,{avatars:0})}}function vt(l){let e,t;return{c(){e=A("video"),this.h()},l(n){e=I(n,"VIDEO",{src:!0,class:!0}),E(e).forEach(b),this.h()},h(){J(e.src,t=l[0].bgVideoUrl)||m(e,"src",t),e.autoplay=!0,e.loop=!0,e.muted=!0,m(e,"class","svelte-f2n19i")},m(n,i){j(n,e,i)},p(n,i){i&1&&!J(e.src,t=n[0].bgVideoUrl)&&m(e,"src",t)},d(n){n&&b(e)}}}function gt(l){let e,t;return{c(){e=A("iframe"),this.h()},l(n){e=I(n,"IFRAME",{id:!0,src:!0,class:!0}),E(e).forEach(b),this.h()},h(){m(e,"id","bg-iframe"),J(e.src,t=l[0].backgroundLink)||m(e,"src",t),m(e,"class","svelte-f2n19i")},m(n,i){j(n,e,i)},p(n,i){i&1&&!J(e.src,t=n[0].backgroundLink)&&m(e,"src",t)},d(n){n&&b(e)}}}function gi(l){let e,t,n,i,o;const c=l[3].default,s=Vn(c,l,l[2],null);let a=l[0].bgVideoUrl&&vt(l),f=l[0].backgroundLink&&gt(l);return{c(){e=A("div"),s&&s.c(),t=P(),a&&a.c(),n=P(),f&&f.c(),this.h()},l(_){e=I(_,"DIV",{class:!0,id:!0,style:!0,"aria-live":!0});var r=E(e);s&&s.l(r),t=M(r),a&&a.l(r),n=M(r),f&&f.l(r),r.forEach(b),this.h()},h(){m(e,"class","room svelte-f2n19i"),m(e,"id","room"),m(e,"style",i=`${l[0].inlineStyles} ${l[1]}`),m(e,"aria-live","polite")},m(_,r){j(_,e,r),s&&s.m(e,null),y(e,t),a&&a.m(e,null),y(e,n),f&&f.m(e,null),o=!0},p(_,[r]){s&&s.p&&(!o||r&4)&&On(s,c,_,_[2],o?Mn(c,_[2],r,null):Pn(_[2]),null),_[0].bgVideoUrl?a?a.p(_,r):(a=vt(_),a.c(),a.m(e,n)):a&&(a.d(1),a=null),_[0].backgroundLink?f?f.p(_,r):(f=gt(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!o||r&3&&i!==(i=`${_[0].inlineStyles} ${_[1]}`))&&m(e,"style",i)},i(_){o||(T(s,_),o=!0)},o(_){x(s,_),o=!1},d(_){_&&b(e),s&&s.d(_),a&&a.d(),f&&f.d()}}}function bi(l,e,t){let n;X(l,gn,s=>t(1,n=s));let{$$slots:i={},$$scope:o}=e,{room:c={}}=e;return l.$$set=s=>{"room"in s&&t(0,c=s.room),"$$scope"in s&&t(2,o=s.$$scope)},[c,n,o,i]}class ki extends ne{constructor(e){super(),ie(this,e,bi,gi,re,{room:0})}}function yi(l){let e,t,n,i,o,c,s,a;return{c(){e=A("div"),t=A("img"),this.h()},l(f){e=I(f,"DIV",{class:!0,id:!0,alt:!0,style:!0,role:!0});var _=E(e);t=I(_,"IMG",{src:!0,alt:!0,class:!0}),_.forEach(b),this.h()},h(){J(t.src,n=l[4]&&l[4].imageUrl?l[4].imageUrl:Ce(l[1]).imageUrl)||m(t,"src",n),m(t,"alt",i=l[4].alt),m(t,"class","svelte-evpsr2"),m(e,"class","avatar svelte-evpsr2"),m(e,"id",l[2]),m(e,"alt",o=l[0].name),m(e,"style",c="transform: translateY("+l[5]+"px) translateX("+l[6]+"px)"),m(e,"role","uiitem"),R(e,"shown",!l[7]||l[0].self),R(e,"self",l[0].self),R(e,"blinking",l[7]&&l[0].self)},m(f,_){j(f,e,_),y(e,t),l[9](e),a=!0},p(f,[_]){(!a||_&18&&!J(t.src,n=f[4]&&f[4].imageUrl?f[4].imageUrl:Ce(f[1]).imageUrl))&&m(t,"src",n),(!a||_&16&&i!==(i=f[4].alt))&&m(t,"alt",i),(!a||_&4)&&m(e,"id",f[2]),(!a||_&1&&o!==(o=f[0].name))&&m(e,"alt",o),(!a||_&96&&c!==(c="transform: translateY("+f[5]+"px) translateX("+f[6]+"px)"))&&m(e,"style",c),_&129&&R(e,"shown",!f[7]||f[0].self),_&1&&R(e,"self",f[0].self),_&129&&R(e,"blinking",f[7]&&f[0].self)},i(f){a||(de(()=>{s||(s=ce(e,le,{},!0)),s.run(1)}),a=!0)},o(f){s||(s=ce(e,le,{},!1)),s.run(0),a=!1},d(f){f&&b(e),l[9](null),f&&s&&s.end()}}}function wi(l,e,t){let n,i,o;X(l,Te,w=>t(12,n=w)),X(l,bn,w=>t(8,i=w)),X(l,xe,w=>t(7,o=w));let c={},s={};const a=w=>{c.popper&&(c.hide(),c.destroy(),clearTimeout(s)),u&&u.nodeName&&(c=tippy(u,{content:w.text,arrow:!1,offset:[0,5],sticky:!0,animation:"fade",inertia:!0,theme:"chat",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}),c.show(),s=setTimeout(()=>{c.hide(),setTimeout(()=>{c.destroy()},500)},4e3))};let{player:f={}}=e,{avatars:_=[]}=e,{key:r=""}=e,u={},d=_.find(w=>w._id===f.shape);d===void 0&&(d=Ce(_));let h,g;const v=()=>{if(u&&u.parentElement){let w=u.getBoundingClientRect();if(w.left<(n?40:100)||w.top<(n?120:100)||w.right>window.innerWidth-(n?40:100)||w.bottom>window.innerHeight-(n?180:100))return!0}return!1},p=()=>{gn.set(`transform: translateX(-${g}px) translateY(-${h}px);`)};ge(async()=>{f.self||tippy(u,{content:f.name,arrow:!1,offset:[0,5],theme:"name",hideOnClick:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}),f.self&&p()});function k(w){ve[w?"unshift":"push"](()=>{u=w,t(3,u)})}return l.$$set=w=>{"player"in w&&t(0,f=w.player),"avatars"in w&&t(1,_=w.avatars),"key"in w&&t(2,r=w.key)},l.$$.update=()=>{if(l.$$.dirty&260){let w=i[i.length-1];w&&w.uuid==r&&Date.now()-w.timestamp<5e3&&a(w)}l.$$.dirty&1&&(t(5,h=f.y*fe),t(6,g=f.x*fe)),l.$$.dirty&1&&f.self&&(f.x||f.y)&&v()&&p()},[f,_,r,u,d,h,g,o,i,k]}class Ai extends ne{constructor(e){super(),ie(this,e,wi,yi,re,{player:0,avatars:1,key:2})}}function bt(l,e,t){const n=l.slice();return n[3]=e[t][0],n[4]=e[t][1],n}function kt(l){let e,t;return e=new Ai({props:{player:l[4],key:l[3],avatars:l[2]}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.player=n[4]),i&1&&(o.key=n[3]),i&4&&(o.avatars=n[2]),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function yt(l,e){let t,n,i,o=e[4].room===e[1]&&!e[4].inTransit&&kt(e);return{key:l,first:null,c(){t=H(),o&&o.c(),n=H(),this.h()},l(c){t=H(),o&&o.l(c),n=H(),this.h()},h(){this.first=t},m(c,s){j(c,t,s),o&&o.m(c,s),j(c,n,s),i=!0},p(c,s){e=c,e[4].room===e[1]&&!e[4].inTransit?o?(o.p(e,s),s&3&&T(o,1)):(o=kt(e),o.c(),T(o,1),o.m(n.parentNode,n)):o&&(U(),x(o,1,1,()=>{o=null}),q())},i(c){i||(T(o),i=!0)},o(c){x(o),i=!1},d(c){c&&b(t),o&&o.d(c),c&&b(n)}}}function Ii(l){let e,t=[],n=new Map,i,o=Object.entries(l[0]);const c=s=>s[3];for(let s=0;s<o.length;s+=1){let a=bt(l,o,s),f=c(a);n.set(f,t[s]=yt(f,a))}return{c(){e=A("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=I(s,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(s,a){j(s,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(s,[a]){a&7&&(o=Object.entries(s[0]),U(),t=qe(t,a,c,1,s,o,n,e,Xe,yt,null,bt),q())},i(s){if(!i){for(let a=0;a<o.length;a+=1)T(t[a]);i=!0}},o(s){for(let a=0;a<t.length;a+=1)x(t[a]);i=!1},d(s){s&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ti(l,e,t){let{players:n={}}=e,{currentRoomId:i=""}=e,{avatars:o=[]}=e;return l.$$set=c=>{"players"in c&&t(0,n=c.players),"currentRoomId"in c&&t(1,i=c.currentRoomId),"avatars"in c&&t(2,o=c.avatars)},[n,i,o]}class Ei extends ne{constructor(e){super(),ie(this,e,Ti,Ii,re,{players:0,currentRoomId:1,avatars:2})}}function zi(l){let e,t,n,i;return t=new We({props:{blocks:l[0].content.content}}),{c(){e=A("div"),W(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var c=E(e);Z(t.$$.fragment,c),c.forEach(b),this.h()},h(){m(e,"class","object svelte-y80ji7"),m(e,"style",l[2]),R(e,"static",l[0].static)},m(o,c){j(o,e,c),K(t,e,null),i=!0},p(o,c){const s={};c&1&&(s.blocks=o[0].content.content),t.$set(s),c&1&&R(e,"static",o[0].static)},i(o){i||(T(t.$$.fragment,o),de(()=>{n||(n=ce(e,le,{},!0)),n.run(1)}),i=!0)},o(o){x(t.$$.fragment,o),n||(n=ce(e,le,{},!1)),n.run(0),i=!1},d(o){o&&b(e),Q(t),o&&n&&n.end()}}}function ji(l){let e,t,n,i,o,c,s,a=l[0].iconImage&&wt(l);return{c(){e=A("div"),a&&a.c(),this.h()},l(f){e=I(f,"DIV",{class:!0,id:!0,style:!0,tabindex:!0,"aria-label":!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","object svelte-y80ji7"),m(e,"id",t=l[0]._id),m(e,"style",l[2]),m(e,"tabindex","0"),m(e,"aria-label",n=l[0].static?"A static image of a "+l[0].title:"Inspect "+l[0].title),m(e,"role","uiitem"),R(e,"static",l[0].static),R(e,"image",l[0].iconImage)},m(f,_){j(f,e,_),a&&a.m(e,null),l[6](e),o=!0,c||(s=[C(e,"click",Si),C(e,"keydown",l[3])],c=!0)},p(f,_){f[0].iconImage?a?a.p(f,_):(a=wt(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n=f[0].static?"A static image of a "+f[0].title:"Inspect "+f[0].title))&&m(e,"aria-label",n),_&1&&R(e,"static",f[0].static),_&1&&R(e,"image",f[0].iconImage)},i(f){o||(de(()=>{i||(i=ce(e,le,{},!0)),i.run(1)}),o=!0)},o(f){i||(i=ce(e,le,{},!1)),i.run(0),o=!1},d(f){f&&b(e),a&&a.d(),l[6](null),f&&i&&i.end(),c=!1,we(s)}}}function wt(l){let e,t,n;return{c(){e=A("img"),this.h()},l(i){e=I(i,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){J(e.src,t=Ee(l[0].iconImage.asset._ref).url())||m(e,"src",t),m(e,"alt",n=l[0].alt),m(e,"class","svelte-y80ji7")},m(i,o){j(i,e,o)},p(i,o){o&1&&!J(e.src,t=Ee(i[0].iconImage.asset._ref).url())&&m(e,"src",t),o&1&&n!==(n=i[0].alt)&&m(e,"alt",n)},d(i){i&&b(e)}}}function xi(l){let e,t,n,i;const o=[ji,zi],c=[];function s(a,f){return a[0].iframeEmbed?a[0].externalLink?-1:1:0}return~(e=s(l))&&(t=c[e]=o[e](l)),{c(){t&&t.c(),n=H()},l(a){t&&t.l(a),n=H()},m(a,f){~e&&c[e].m(a,f),j(a,n,f),i=!0},p(a,[f]){let _=e;e=s(a),e===_?~e&&c[e].p(a,f):(t&&(U(),x(c[_],1,1,()=>{c[_]=null}),q()),~e?(t=c[e],t?t.p(a,f):(t=c[e]=o[e](a),t.c()),T(t,1),t.m(n.parentNode,n)):t=null)},i(a){i||(T(t),i=!0)},o(a){x(t),i=!1},d(a){~e&&c[e].d(a),a&&b(n)}}}const Si=()=>{};function Di(l,e,t){let n,i;X(l,Oe,v=>t(7,n=v)),X(l,Me,v=>t(5,i=v));let{object:o={}}=e,c={},s={},a=o.y*fe,f=o.x*fe,_=ae(o,"dimensions.width",1)*fe,r=ae(o,"dimensions.height",1)*fe;console.log("icon image: ",o.iconImage);const u=`transform: translateY(${a}px) translateX(${f}px); width: ${_}px; height: ${r}px;`;ge(async()=>{const v=nt;v.content=o.title,v.appendTo=c.parentElement,v.theme=o.static?"static":"name",t(4,s=tippy(c,v))});const d=me();function h(v){v.key==="Enter"&&!o.static&&!o.contentType=="externalLink"&&(d("object",{objectId:o._id}),Ie.set(n.objects.find(p=>p._id==o._id))),v.key==="Enter"&&o.contentType==="externalLink"&&window.open(o.url,"_blank").focus()}function g(v){ve[v?"unshift":"push"](()=>{c=v,t(1,c)})}return l.$$set=v=>{"object"in v&&t(0,o=v.object)},l.$$.update=()=>{l.$$.dirty&48&&s.popper&&(i?s.show():s.hide()),l.$$.dirty&1},[o,c,u,h,s,i,g]}class $i extends ne{constructor(e){super(),ie(this,e,Di,xi,re,{object:0})}}function At(l,e,t){const n=l.slice();return n[2]=e[t],n}function It(l){let e,t=[],n=new Map,i,o=l[0];const c=s=>s[2]._id;for(let s=0;s<o.length;s+=1){let a=At(l,o,s),f=c(a);n.set(f,t[s]=Tt(f,a))}return{c(){e=A("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=I(s,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(s,a){j(s,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(s,a){a&1&&(o=s[0],U(),t=qe(t,a,c,1,s,o,n,e,Xe,Tt,null,At),q())},i(s){if(!i){for(let a=0;a<o.length;a+=1)T(t[a]);i=!0}},o(s){for(let a=0;a<t.length;a+=1)x(t[a]);i=!1},d(s){s&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Tt(l,e){let t,n,i;return n=new $i({props:{object:e[2]}}),{key:l,first:null,c(){t=H(),W(n.$$.fragment),this.h()},l(o){t=H(),Z(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,c){j(o,t,c),K(n,o,c),i=!0},p(o,c){e=o;const s={};c&1&&(s.object=e[2]),n.$set(s)},i(o){i||(T(n.$$.fragment,o),i=!0)},o(o){x(n.$$.fragment,o),i=!1},d(o){o&&b(t),Q(n,o)}}}function Vi(l){let e,t,n=!l[1]&&It(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,[o]){i[1]?n&&(U(),x(n,1,1,()=>{n=null}),q()):n?(n.p(i,o),o&2&&T(n,1)):(n=It(i),n.c(),T(n,1),n.m(e.parentNode,e))},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function Oi(l,e,t){let n;X(l,xe,o=>t(1,n=o));let{objects:i={}}=e;return l.$$set=o=>{"objects"in o&&t(0,i=o.objects)},[i,n]}class Pi extends ne{constructor(e){super(),ie(this,e,Oi,Vi,re,{objects:0})}}function Mi(l){let e,t;return{c(){e=A("img"),this.h()},l(n){e=I(n,"IMG",{src:!0,class:!0}),this.h()},h(){J(e.src,t=Ee(l[0].backgroundImage).quality(100).url())||m(e,"src",t),m(e,"class","svelte-8z8z6b")},m(n,i){j(n,e,i)},p(n,i){i&1&&!J(e.src,t=Ee(n[0].backgroundImage).quality(100).url())&&m(e,"src",t)},d(n){n&&b(e)}}}function Fi(l){let e,t;return{c(){e=A("video"),this.h()},l(n){e=I(n,"VIDEO",{src:!0,class:!0}),E(e).forEach(b),this.h()},h(){J(e.src,t=l[0].bgVideoUrl)||m(e,"src",t),e.autoplay=!0,e.loop=!0,e.muted=!0,m(e,"class","svelte-8z8z6b")},m(n,i){j(n,e,i)},p(n,i){i&1&&!J(e.src,t=n[0].bgVideoUrl)&&m(e,"src",t)},d(n){n&&b(e)}}}function Li(l){let e,t,n,i,o;function c(f,_){if(f[0].bgVideoUrl)return Fi;if(f[0].backgroundImage)return Mi}let s=c(l),a=s&&s(l);return{c(){e=A("div"),a&&a.c(),this.h()},l(f){e=I(f,"DIV",{class:!0,id:!0,alt:!0,style:!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","zone svelte-8z8z6b"),m(e,"id",t=l[0]._id),m(e,"alt",n=l[0].title),m(e,"style",l[2]),m(e,"role","uiitem")},m(f,_){j(f,e,_),a&&a.m(e,null),l[5](e),o=!0},p(f,[_]){s===(s=c(f))&&a?a.p(f,_):(a&&a.d(1),a=s&&s(f),a&&(a.c(),a.m(e,null))),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n=f[0].title))&&m(e,"alt",n)},i(f){o||(de(()=>{i||(i=ce(e,le,{},!0)),i.run(1)}),o=!0)},o(f){i||(i=ce(e,le,{},!1)),i.run(0),o=!1},d(f){f&&b(e),a&&a.d(),l[5](null),f&&i&&i.end()}}}function Ri(l,e,t){let n;X(l,Me,d=>t(4,n=d));let{zone:i={}}=e,o={},c={},s=i.y*fe,a=i.x*fe,f=ae(i,"dimensions.width",1)*fe,_=ae(i,"dimensions.height",1)*fe;const r=`transform: translateY(${s}px) translateX(${a}px); width: ${f}px; height: ${_}px;};`;ge(async()=>{const d=nt;d.content=i.title,d.appendTo=o.parentElement,d.theme="name",t(3,c=tippy(o,d))});function u(d){ve[d?"unshift":"push"](()=>{o=d,t(1,o)})}return l.$$set=d=>{"zone"in d&&t(0,i=d.zone)},l.$$.update=()=>{l.$$.dirty&24&&c.popper&&(n?c.show():c.hide())},[i,o,r,c,n,u]}class Hi extends ne{constructor(e){super(),ie(this,e,Ri,Li,re,{zone:0})}}function Et(l,e,t){const n=l.slice();return n[2]=e[t],n}function zt(l){let e,t=[],n=new Map,i,o=l[0];const c=s=>s[2]._id;for(let s=0;s<o.length;s+=1){let a=Et(l,o,s),f=c(a);n.set(f,t[s]=jt(f,a))}return{c(){e=A("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=I(s,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(s,a){j(s,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);i=!0},p(s,a){a&1&&(o=s[0],U(),t=qe(t,a,c,1,s,o,n,e,Xe,jt,null,Et),q())},i(s){if(!i){for(let a=0;a<o.length;a+=1)T(t[a]);i=!0}},o(s){for(let a=0;a<t.length;a+=1)x(t[a]);i=!1},d(s){s&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function jt(l,e){let t,n,i;return n=new Hi({props:{zone:e[2]}}),{key:l,first:null,c(){t=H(),W(n.$$.fragment),this.h()},l(o){t=H(),Z(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,c){j(o,t,c),K(n,o,c),i=!0},p(o,c){e=o;const s={};c&1&&(s.zone=e[2]),n.$set(s)},i(o){i||(T(n.$$.fragment,o),i=!0)},o(o){x(n.$$.fragment,o),i=!1},d(o){o&&b(t),Q(n,o)}}}function Bi(l){let e,t,n=!l[1]&&zt(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,[o]){i[1]?n&&(U(),x(n,1,1,()=>{n=null}),q()):n?(n.p(i,o),o&2&&T(n,1)):(n=zt(i),n.c(),T(n,1),n.m(e.parentNode,e))},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function Gi(l,e,t){let n;X(l,xe,o=>t(1,n=o));let{zones:i={}}=e;return l.$$set=o=>{"zones"in o&&t(0,i=o.zones)},[i,n]}class Ni extends ne{constructor(e){super(),ie(this,e,Gi,Bi,re,{zones:0})}}var En={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(l){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var u=this||t;if(r=parseFloat(r),u.ctx||_(),typeof r!="undefined"&&r>=0&&r<=1){if(u._volume=r,u._muted)return u;u.usingWebAudio&&u.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var d=0;d<u._howls.length;d++)if(!u._howls[d]._webAudio)for(var h=u._howls[d]._getSoundIds(),g=0;g<h.length;g++){var v=u._howls[d]._soundById(h[g]);v&&v._node&&(v._node.volume=v._volume*r)}return u}return u._volume},mute:function(r){var u=this||t;u.ctx||_(),u._muted=r,u.usingWebAudio&&u.masterGain.gain.setValueAtTime(r?0:u._volume,t.ctx.currentTime);for(var d=0;d<u._howls.length;d++)if(!u._howls[d]._webAudio)for(var h=u._howls[d]._getSoundIds(),g=0;g<h.length;g++){var v=u._howls[d]._soundById(h[g]);v&&v._node&&(v._node.muted=r?!0:v._muted)}return u},stop:function(){for(var r=this||t,u=0;u<r._howls.length;u++)r._howls[u].stop();return r},unload:function(){for(var r=this||t,u=r._howls.length-1;u>=0;u--)r._howls[u].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close!="undefined"&&(r.ctx.close(),r.ctx=null,_()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio!="undefined")try{var u=new Audio;typeof u.oncanplaythrough=="undefined"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var u=new Audio;u.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,u=null;try{u=typeof Audio!="undefined"?new Audio:null}catch{return r}if(!u||typeof u.canPlayType!="function")return r;var d=u.canPlayType("audio/mpeg;").replace(/^no$/,""),h=r._navigator?r._navigator.userAgent:"",g=h.match(/OPR\/([0-6].)/g),v=g&&parseInt(g[0].split("/")[1],10)<33,p=h.indexOf("Safari")!==-1&&h.indexOf("Chrome")===-1,k=h.match(/Version\/(.*?) /),w=p&&k&&parseInt(k[1],10)<15;return r._codecs={mp3:!!(!v&&(d||u.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(u.canPlayType('audio/wav; codecs="1"')||u.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!u.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(u.canPlayType("audio/x-m4b;")||u.canPlayType("audio/m4b;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!u.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(u.canPlayType("audio/x-flac;")||u.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var u=function(d){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var h=new Audio;h._unlocked=!0,r._releaseHtml5Audio(h)}catch{r.noAudio=!0;break}for(var g=0;g<r._howls.length;g++)if(!r._howls[g]._webAudio)for(var v=r._howls[g]._getSoundIds(),p=0;p<v.length;p++){var k=r._howls[g]._soundById(v[p]);k&&k._node&&!k._node._unlocked&&(k._node._unlocked=!0,k._node.load())}r._autoResume();var w=r.ctx.createBufferSource();w.buffer=r._scratchBuffer,w.connect(r.ctx.destination),typeof w.start=="undefined"?w.noteOn(0):w.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),w.onended=function(){w.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),document.removeEventListener("keydown",u,!0);for(var D=0;D<r._howls.length;D++)r._howls[D]._emit("unlock")}};return document.addEventListener("touchstart",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),document.addEventListener("keydown",u,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var u=new Audio().play();return u&&typeof Promise!="undefined"&&(u instanceof Promise||typeof u.then=="function")&&u.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var u=this||t;return r._unlocked&&u._html5AudioPool.push(r),u},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var u=0;u<r._howls.length;u++)if(r._howls[u]._webAudio){for(var d=0;d<r._howls[u]._sounds.length;d++)if(!r._howls[u]._sounds[d]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(!!r.autoSuspend){r._suspendTimer=null,r.state="suspending";var h=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(h,h)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume=="undefined"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var u=0;u<r._howls.length;u++)r._howls[u]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,n=function(r){var u=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}u.init(r)};n.prototype={init:function(r){var u=this;return t.ctx||_(),u._autoplay=r.autoplay||!1,u._format=typeof r.format!="string"?r.format:[r.format],u._html5=r.html5||!1,u._muted=r.mute||!1,u._loop=r.loop||!1,u._pool=r.pool||5,u._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,u._rate=r.rate||1,u._sprite=r.sprite||{},u._src=typeof r.src!="string"?r.src:[r.src],u._volume=r.volume!==void 0?r.volume:1,u._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},u._duration=0,u._state="unloaded",u._sounds=[],u._endTimers={},u._queue=[],u._playLock=!1,u._onend=r.onend?[{fn:r.onend}]:[],u._onfade=r.onfade?[{fn:r.onfade}]:[],u._onload=r.onload?[{fn:r.onload}]:[],u._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],u._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],u._onpause=r.onpause?[{fn:r.onpause}]:[],u._onplay=r.onplay?[{fn:r.onplay}]:[],u._onstop=r.onstop?[{fn:r.onstop}]:[],u._onmute=r.onmute?[{fn:r.onmute}]:[],u._onvolume=r.onvolume?[{fn:r.onvolume}]:[],u._onrate=r.onrate?[{fn:r.onrate}]:[],u._onseek=r.onseek?[{fn:r.onseek}]:[],u._onunlock=r.onunlock?[{fn:r.onunlock}]:[],u._onresume=[],u._webAudio=t.usingWebAudio&&!u._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(u),u._autoplay&&u._queue.push({event:"play",action:function(){u.play()}}),u._preload&&u._preload!=="none"&&u.load(),u},load:function(){var r=this,u=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var d=0;d<r._src.length;d++){var h,g;if(r._format&&r._format[d])h=r._format[d];else{if(g=r._src[d],typeof g!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}h=/^data:audio\/([^;,]+);/i.exec(g),h||(h=/\.([^.]+)$/.exec(g.split("?",1)[0])),h&&(h=h[1].toLowerCase())}if(h||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),h&&t.codecs(h)){u=r._src[d];break}}if(!u){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=u,r._state="loading",window.location.protocol==="https:"&&u.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&c(r),r},play:function(r,u){var d=this,h=null;if(typeof r=="number")h=r,r=null;else{if(typeof r=="string"&&d._state==="loaded"&&!d._sprite[r])return null;if(typeof r=="undefined"&&(r="__default",!d._playLock)){for(var g=0,v=0;v<d._sounds.length;v++)d._sounds[v]._paused&&!d._sounds[v]._ended&&(g++,h=d._sounds[v]._id);g===1?r=null:h=null}}var p=h?d._soundById(h):d._inactiveSound();if(!p)return null;if(h&&!r&&(r=p._sprite||"__default"),d._state!=="loaded"){p._sprite=r,p._ended=!1;var k=p._id;return d._queue.push({event:"play",action:function(){d.play(k)}}),k}if(h&&!p._paused)return u||d._loadQueue("play"),p._id;d._webAudio&&t._autoResume();var w=Math.max(0,p._seek>0?p._seek:d._sprite[r][0]/1e3),D=Math.max(0,(d._sprite[r][0]+d._sprite[r][1])/1e3-w),S=D*1e3/Math.abs(p._rate),F=d._sprite[r][0]/1e3,L=(d._sprite[r][0]+d._sprite[r][1])/1e3;p._sprite=r,p._ended=!1;var B=function(){p._paused=!1,p._seek=w,p._start=F,p._stop=L,p._loop=!!(p._loop||d._sprite[r][2])};if(w>=L){d._ended(p);return}var O=p._node;if(d._webAudio){var Y=function(){d._playLock=!1,B(),d._refreshBuffer(p);var te=p._muted||d._muted?0:p._volume;O.gain.setValueAtTime(te,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof O.bufferSource.start=="undefined"?p._loop?O.bufferSource.noteGrainOn(0,w,86400):O.bufferSource.noteGrainOn(0,w,D):p._loop?O.bufferSource.start(0,w,86400):O.bufferSource.start(0,w,D),S!==1/0&&(d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S)),u||setTimeout(function(){d._emit("play",p._id),d._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Y():(d._playLock=!0,d.once("resume",Y),d._clearTimer(p._id))}else{var z=function(){O.currentTime=w,O.muted=p._muted||d._muted||t._muted||O.muted,O.volume=p._volume*t.volume(),O.playbackRate=p._rate;try{var te=O.play();if(te&&typeof Promise!="undefined"&&(te instanceof Promise||typeof te.then=="function")?(d._playLock=!0,B(),te.then(function(){d._playLock=!1,O._unlocked=!0,u?d._loadQueue():d._emit("play",p._id)}).catch(function(){d._playLock=!1,d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):u||(d._playLock=!1,B(),d._emit("play",p._id)),O.playbackRate=p._rate,O.paused){d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||p._loop?d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S):(d._endTimers[p._id]=function(){d._ended(p),O.removeEventListener("ended",d._endTimers[p._id],!1)},O.addEventListener("ended",d._endTimers[p._id],!1))}catch(ue){d._emit("playerror",p._id,ue)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=d._src,O.load());var V=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||V)z();else{d._playLock=!0,d._state="loading";var ee=function(){d._state="loaded",z(),O.removeEventListener(t._canPlayEvent,ee,!1)};O.addEventListener(t._canPlayEvent,ee,!1),d._clearTimer(p._id)}}return p._id},pause:function(r){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"pause",action:function(){u.pause(r)}}),u;for(var d=u._getSoundIds(r),h=0;h<d.length;h++){u._clearTimer(d[h]);var g=u._soundById(d[h]);if(g&&!g._paused&&(g._seek=u.seek(d[h]),g._rateSeek=0,g._paused=!0,u._stopFade(d[h]),g._node))if(u._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop=="undefined"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),u._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||u._emit("pause",g?g._id:null)}return u},stop:function(r,u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(r)}}),d;for(var h=d._getSoundIds(r),g=0;g<h.length;g++){d._clearTimer(h[g]);var v=d._soundById(h[g]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,d._stopFade(h[g]),v._node&&(d._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop=="undefined"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&d._clearSound(v._node))),u||d._emit("stop",v._id))}return d},mute:function(r,u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(r,u)}}),d;if(typeof u=="undefined")if(typeof r=="boolean")d._muted=r;else return d._muted;for(var h=d._getSoundIds(u),g=0;g<h.length;g++){var v=d._soundById(h[g]);v&&(v._muted=r,v._interval&&d._stopFade(v._id),d._webAudio&&v._node?v._node.gain.setValueAtTime(r?0:v._volume,t.ctx.currentTime):v._node&&(v._node.muted=t._muted?!0:r),d._emit("mute",v._id))}return d},volume:function(){var r=this,u=arguments,d,h;if(u.length===0)return r._volume;if(u.length===1||u.length===2&&typeof u[1]=="undefined"){var g=r._getSoundIds(),v=g.indexOf(u[0]);v>=0?h=parseInt(u[0],10):d=parseFloat(u[0])}else u.length>=2&&(d=parseFloat(u[0]),h=parseInt(u[1],10));var p;if(typeof d!="undefined"&&d>=0&&d<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,u)}}),r;typeof h=="undefined"&&(r._volume=d),h=r._getSoundIds(h);for(var k=0;k<h.length;k++)p=r._soundById(h[k]),p&&(p._volume=d,u[2]||r._stopFade(h[k]),r._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(d,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=d*t.volume()),r._emit("volume",p._id))}else return p=h?r._soundById(h):r._sounds[0],p?p._volume:0;return r},fade:function(r,u,d,h){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(r,u,d,h)}}),g;r=Math.min(Math.max(0,parseFloat(r)),1),u=Math.min(Math.max(0,parseFloat(u)),1),d=parseFloat(d),g.volume(r,h);for(var v=g._getSoundIds(h),p=0;p<v.length;p++){var k=g._soundById(v[p]);if(k){if(h||g._stopFade(v[p]),g._webAudio&&!k._muted){var w=t.ctx.currentTime,D=w+d/1e3;k._volume=r,k._node.gain.setValueAtTime(r,w),k._node.gain.linearRampToValueAtTime(u,D)}g._startFadeInterval(k,r,u,d,v[p],typeof h=="undefined")}}return g},_startFadeInterval:function(r,u,d,h,g,v){var p=this,k=u,w=d-u,D=Math.abs(w/.01),S=Math.max(4,D>0?h/D:h),F=Date.now();r._fadeTo=d,r._interval=setInterval(function(){var L=(Date.now()-F)/h;F=Date.now(),k+=w*L,k=Math.round(k*100)/100,w<0?k=Math.max(d,k):k=Math.min(d,k),p._webAudio?r._volume=k:p.volume(k,r._id,!0),v&&(p._volume=k),(d<u&&k<=d||d>u&&k>=d)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,p.volume(d,r._id),p._emit("fade",r._id))},S)},_stopFade:function(r){var u=this,d=u._soundById(r);return d&&d._interval&&(u._webAudio&&d._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(d._interval),d._interval=null,u.volume(d._fadeTo,r),d._fadeTo=null,u._emit("fade",r)),u},loop:function(){var r=this,u=arguments,d,h,g;if(u.length===0)return r._loop;if(u.length===1)if(typeof u[0]=="boolean")d=u[0],r._loop=d;else return g=r._soundById(parseInt(u[0],10)),g?g._loop:!1;else u.length===2&&(d=u[0],h=parseInt(u[1],10));for(var v=r._getSoundIds(h),p=0;p<v.length;p++)g=r._soundById(v[p]),g&&(g._loop=d,r._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=d,d&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,r.playing(v[p])&&(r.pause(v[p],!0),r.play(v[p],!0)))));return r},rate:function(){var r=this,u=arguments,d,h;if(u.length===0)h=r._sounds[0]._id;else if(u.length===1){var g=r._getSoundIds(),v=g.indexOf(u[0]);v>=0?h=parseInt(u[0],10):d=parseFloat(u[0])}else u.length===2&&(d=parseFloat(u[0]),h=parseInt(u[1],10));var p;if(typeof d=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,u)}}),r;typeof h=="undefined"&&(r._rate=d),h=r._getSoundIds(h);for(var k=0;k<h.length;k++)if(p=r._soundById(h[k]),p){r.playing(h[k])&&(p._rateSeek=r.seek(h[k]),p._playStart=r._webAudio?t.ctx.currentTime:p._playStart),p._rate=d,r._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(d,t.ctx.currentTime):p._node&&(p._node.playbackRate=d);var w=r.seek(h[k]),D=(r._sprite[p._sprite][0]+r._sprite[p._sprite][1])/1e3-w,S=D*1e3/Math.abs(p._rate);(r._endTimers[h[k]]||!p._paused)&&(r._clearTimer(h[k]),r._endTimers[h[k]]=setTimeout(r._ended.bind(r,p),S)),r._emit("rate",p._id)}}else return p=r._soundById(h),p?p._rate:r._rate;return r},seek:function(){var r=this,u=arguments,d,h;if(u.length===0)r._sounds.length&&(h=r._sounds[0]._id);else if(u.length===1){var g=r._getSoundIds(),v=g.indexOf(u[0]);v>=0?h=parseInt(u[0],10):r._sounds.length&&(h=r._sounds[0]._id,d=parseFloat(u[0]))}else u.length===2&&(d=parseFloat(u[0]),h=parseInt(u[1],10));if(typeof h=="undefined")return 0;if(typeof d=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,u)}}),r;var p=r._soundById(h);if(p)if(typeof d=="number"&&d>=0){var k=r.playing(h);k&&r.pause(h,!0),p._seek=d,p._ended=!1,r._clearTimer(h),!r._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=d);var w=function(){k&&r.play(h,!0),r._emit("seek",h)};if(k&&!r._webAudio){var D=function(){r._playLock?setTimeout(D,0):w()};setTimeout(D,0)}else w()}else if(r._webAudio){var S=r.playing(h)?t.ctx.currentTime-p._playStart:0,F=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(F+S*Math.abs(p._rate))}else return p._node.currentTime;return r},playing:function(r){var u=this;if(typeof r=="number"){var d=u._soundById(r);return d?!d._paused:!1}for(var h=0;h<u._sounds.length;h++)if(!u._sounds[h]._paused)return!0;return!1},duration:function(r){var u=this,d=u._duration,h=u._soundById(r);return h&&(d=u._sprite[h._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var r=this,u=r._sounds,d=0;d<u.length;d++)u[d]._paused||r.stop(u[d]._id),r._webAudio||(r._clearSound(u[d]._node),u[d]._node.removeEventListener("error",u[d]._errorFn,!1),u[d]._node.removeEventListener(t._canPlayEvent,u[d]._loadFn,!1),u[d]._node.removeEventListener("ended",u[d]._endFn,!1),t._releaseHtml5Audio(u[d]._node)),delete u[d]._node,r._clearTimer(u[d]._id);var h=t._howls.indexOf(r);h>=0&&t._howls.splice(h,1);var g=!0;for(d=0;d<t._howls.length;d++)if(t._howls[d]._src===r._src||r._src.indexOf(t._howls[d]._src)>=0){g=!1;break}return o&&g&&delete o[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,u,d,h){var g=this,v=g["_on"+r];return typeof u=="function"&&v.push(h?{id:d,fn:u,once:h}:{id:d,fn:u}),g},off:function(r,u,d){var h=this,g=h["_on"+r],v=0;if(typeof u=="number"&&(d=u,u=null),u||d)for(v=0;v<g.length;v++){var p=d===g[v].id;if(u===g[v].fn&&p||!u&&p){g.splice(v,1);break}}else if(r)h["_on"+r]=[];else{var k=Object.keys(h);for(v=0;v<k.length;v++)k[v].indexOf("_on")===0&&Array.isArray(h[k[v]])&&(h[k[v]]=[])}return h},once:function(r,u,d){var h=this;return h.on(r,u,d,1),h},_emit:function(r,u,d){for(var h=this,g=h["_on"+r],v=g.length-1;v>=0;v--)(!g[v].id||g[v].id===u||r==="load")&&(setTimeout(function(p){p.call(this,u,d)}.bind(h,g[v].fn),0),g[v].once&&h.off(r,g[v].fn,g[v].id));return h._loadQueue(r),h},_loadQueue:function(r){var u=this;if(u._queue.length>0){var d=u._queue[0];d.event===r&&(u._queue.shift(),u._loadQueue()),r||d.action()}return u},_ended:function(r){var u=this,d=r._sprite;if(!u._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(u._ended.bind(u,r),100),u;var h=!!(r._loop||u._sprite[d][2]);if(u._emit("end",r._id),!u._webAudio&&h&&u.stop(r._id,!0).play(r._id),u._webAudio&&h){u._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var g=(r._stop-r._start)*1e3/Math.abs(r._rate);u._endTimers[r._id]=setTimeout(u._ended.bind(u,r),g)}return u._webAudio&&!h&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,u._clearTimer(r._id),u._cleanBuffer(r._node),t._autoSuspend()),!u._webAudio&&!h&&u.stop(r._id,!0),u},_clearTimer:function(r){var u=this;if(u._endTimers[r]){if(typeof u._endTimers[r]!="function")clearTimeout(u._endTimers[r]);else{var d=u._soundById(r);d&&d._node&&d._node.removeEventListener("ended",u._endTimers[r],!1)}delete u._endTimers[r]}return u},_soundById:function(r){for(var u=this,d=0;d<u._sounds.length;d++)if(r===u._sounds[d]._id)return u._sounds[d];return null},_inactiveSound:function(){var r=this;r._drain();for(var u=0;u<r._sounds.length;u++)if(r._sounds[u]._ended)return r._sounds[u].reset();return new i(r)},_drain:function(){var r=this,u=r._pool,d=0,h=0;if(!(r._sounds.length<u)){for(h=0;h<r._sounds.length;h++)r._sounds[h]._ended&&d++;for(h=r._sounds.length-1;h>=0;h--){if(d<=u)return;r._sounds[h]._ended&&(r._webAudio&&r._sounds[h]._node&&r._sounds[h]._node.disconnect(0),r._sounds.splice(h,1),d--)}}},_getSoundIds:function(r){var u=this;if(typeof r=="undefined"){for(var d=[],h=0;h<u._sounds.length;h++)d.push(u._sounds[h]._id);return d}else return[r]},_refreshBuffer:function(r){var u=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=o[u._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),u},_cleanBuffer:function(r){var u=this,d=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),d))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,u},_clearSound:function(r){var u=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);u||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,u=r._parent;return r._muted=u._muted,r._loop=u._loop,r._volume=u._volume,r._rate=u._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,u._sounds.push(r),r.create(),r},create:function(){var r=this,u=r._parent,d=t._muted||r._muted||r._parent._muted?0:r._volume;return u._webAudio?(r._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(d,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=u._src,r._node.preload=u._preload===!0?"auto":u._preload,r._node.volume=d*t.volume(),r._node.load()),r},reset:function(){var r=this,u=r._parent;return r._muted=u._muted,r._loop=u._loop,r._volume=u._volume,r._rate=u._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,u=r._parent;u._duration=Math.ceil(r._node.duration*10)/10,Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,u=r._parent;u._duration===1/0&&(u._duration=Math.ceil(r._node.duration*10)/10,u._sprite.__default[1]===1/0&&(u._sprite.__default[1]=u._duration*1e3),u._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var o={},c=function(r){var u=r._src;if(o[u]){r._duration=o[u].duration,f(r);return}if(/^data:[^;]+;base64,/.test(u)){for(var d=atob(u.split(",")[1]),h=new Uint8Array(d.length),g=0;g<d.length;++g)h[g]=d.charCodeAt(g);a(h.buffer,r)}else{var v=new XMLHttpRequest;v.open(r._xhr.method,u,!0),v.withCredentials=r._xhr.withCredentials,v.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(p){v.setRequestHeader(p,r._xhr.headers[p])}),v.onload=function(){var p=(v.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}a(v.response,r)},v.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete o[u],r.load())},s(v)}},s=function(r){try{r.send()}catch{r.onerror()}},a=function(r,u){var d=function(){u._emit("loaderror",null,"Decoding audio data failed.")},h=function(g){g&&u._sounds.length>0?(o[u._src]=g,f(u,g)):d()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(h).catch(d):t.ctx.decodeAudioData(r,h,d)},f=function(r,u){u&&!r._duration&&(r._duration=u.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},_=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),u=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=u?parseInt(u[1],10):null;if(r&&d&&d<9){var h=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!h&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};l.Howler=t,l.Howl=n,typeof Pe!="undefined"?(Pe.HowlerGlobal=e,Pe.Howler=t,Pe.Howl=n,Pe.Sound=i):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,i=typeof i!="number"?o._pos[2]:i,typeof t=="number")o._pos=[t,n,i],typeof o.ctx.listener.positionX!="undefined"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(t,n,i,o,c,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;var f=a._orientation;if(n=typeof n!="number"?f[1]:n,i=typeof i!="number"?f[2]:i,o=typeof o!="number"?f[3]:o,c=typeof c!="number"?f[4]:c,s=typeof s!="number"?f[5]:s,typeof t=="number")a._orientation=[t,n,i,o,c,s],typeof a.ctx.listener.forwardX!="undefined"?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,n,i,o,c,s);else return f;return a},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle!="undefined"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle!="undefined"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain!="undefined"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel!="undefined"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance!="undefined"?n.maxDistance:1e4,panningModel:typeof n.panningModel!="undefined"?n.panningModel:"HRTF",refDistance:typeof n.refDistance!="undefined"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor!="undefined"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var o=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof n=="undefined")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var c=i._getSoundIds(n),s=0;s<c.length;s++){var a=i._soundById(c[s]);if(a)if(typeof t=="number")a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",(!a._panner||!a._panner.pan)&&e(a,o),o==="spatial"?typeof a._panner.positionX!="undefined"?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",a._id);else return a._stereo}return i},Howl.prototype.pos=function(t,n,i,o){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(t,n,i,o)}}),c;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof o=="undefined")if(typeof t=="number")c._pos=[t,n,i];else return c._pos;for(var s=c._getSoundIds(o),a=0;a<s.length;a++){var f=c._soundById(s[a]);if(f)if(typeof t=="number")f._pos=[t,n,i],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX!="undefined"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):f._panner.setPosition(t,n,i)),c._emit("pos",f._id);else return f._pos}return c},Howl.prototype.orientation=function(t,n,i,o){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(t,n,i,o)}}),c;if(n=typeof n!="number"?c._orientation[1]:n,i=typeof i!="number"?c._orientation[2]:i,typeof o=="undefined")if(typeof t=="number")c._orientation=[t,n,i];else return c._orientation;for(var s=c._getSoundIds(o),a=0;a<s.length;a++){var f=c._soundById(s[a]);if(f)if(typeof t=="number")f._orientation=[t,n,i],f._node&&(f._panner||(f._pos||(f._pos=c._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX!="undefined"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):f._panner.setOrientation(t,n,i)),c._emit("orientation",f._id);else return f._orientation}return c},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,o,c;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof o=="undefined"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle!="undefined"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle!="undefined"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain!="undefined"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel!="undefined"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance!="undefined"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance!="undefined"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor!="undefined"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel!="undefined"?i.pannerAttr.panningModel:t._panningModel});else return c=t._soundById(parseInt(n[0],10)),c?c._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],o=parseInt(n[1],10));for(var s=t._getSoundIds(o),a=0;a<s.length;a++)if(c=t._soundById(s[a]),c){var f=c._pannerAttr;f={coneInnerAngle:typeof i.coneInnerAngle!="undefined"?i.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle!="undefined"?i.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain!="undefined"?i.coneOuterGain:f.coneOuterGain,distanceModel:typeof i.distanceModel!="undefined"?i.distanceModel:f.distanceModel,maxDistance:typeof i.maxDistance!="undefined"?i.maxDistance:f.maxDistance,refDistance:typeof i.refDistance!="undefined"?i.refDistance:f.refDistance,rolloffFactor:typeof i.rolloffFactor!="undefined"?i.rolloffFactor:f.rolloffFactor,panningModel:typeof i.panningModel!="undefined"?i.panningModel:f.panningModel};var _=c._panner;_?(_.coneInnerAngle=f.coneInnerAngle,_.coneOuterAngle=f.coneOuterAngle,_.coneOuterGain=f.coneOuterGain,_.distanceModel=f.distanceModel,_.maxDistance=f.maxDistance,_.refDistance=f.refDistance,_.rolloffFactor=f.rolloffFactor,_.panningModel=f.panningModel):(c._pos||(c._pos=t._pos||[0,0,-.5]),e(c,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(En);function Ci(l,e,t){let{soundFile:n=!1}=e,i=!1,o={};const c=()=>{o&&o.playing&&(o.stop(),o.unload(),o={})};return _n(async()=>{c()}),l.$$set=s=>{"soundFile"in s&&t(0,n=s.soundFile)},l.$$.update=()=>{l.$$.dirty&3&&n&&(t(1,i="https://cdn.sanity.io/files/58ueii0w/production/"+ae(n,"asset._ref","").replace("file-","").replace("-mp3",".mp3")),c(),o=new En.Howl({src:[i],loop:!0,autoplay:!0}))},[n,i]}class Ui extends ne{constructor(e){super(),ie(this,e,Ci,null,re,{soundFile:0})}}function xt(l){let e,t,n,i,o,c,s,a=l[0].iconImage&&St(l);return{c(){e=A("div"),a&&a.c(),this.h()},l(f){e=I(f,"DIV",{class:!0,id:!0,style:!0,tabindex:!0,"aria-label":!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","portal svelte-1kgpwjb"),m(e,"id",t=l[0]._id),m(e,"style",l[2]),m(e,"tabindex","0"),m(e,"aria-label",n="Go to "+l[0].title),m(e,"role","uiitem")},m(f,_){j(f,e,_),a&&a.m(e,null),l[5](e),o=!0,c||(s=C(e,"keydown",l[6]),c=!0)},p(f,_){f[0].iconImage?a?a.p(f,_):(a=St(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n="Go to "+f[0].title))&&m(e,"aria-label",n)},i(f){o||(de(()=>{i||(i=ce(e,le,{},!0)),i.run(1)}),o=!0)},o(f){i||(i=ce(e,le,{},!1)),i.run(0),o=!1},d(f){f&&b(e),a&&a.d(),l[5](null),f&&i&&i.end(),c=!1,s()}}}function St(l){let e,t,n;return{c(){e=A("img"),this.h()},l(i){e=I(i,"IMG",{src:!0,alt:!0}),this.h()},h(){J(e.src,t=Ee(l[0].iconImage).quality(100).height(100).url())||m(e,"src",t),m(e,"alt",n=l[0].alt)},m(i,o){j(i,e,o)},p(i,o){o&1&&!J(e.src,t=Ee(i[0].iconImage).quality(100).height(100).url())&&m(e,"src",t),o&1&&n!==(n=i[0].alt)&&m(e,"alt",n)},d(i){i&&b(e)}}}function qi(l){let e,t,n=!l[0].restricted&&xt(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,[o]){i[0].restricted?n&&(U(),x(n,1,1,()=>{n=null}),q()):n?(n.p(i,o),o&1&&T(n,1)):(n=xt(i),n.c(),T(n,1),n.m(e.parentNode,e))},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function Xi(l,e,t){let n;X(l,Oe,d=>t(7,n=d));let{portal:i={}}=e,o={},c={},s=i.y*fe,a=i.x*fe;const f=`transform: translateY(${s}px) translateX(${a}px); width: ${fe}px; height: ${fe}px; background-color: ${ae(i,"backgroundColor.hex","")}; background-image: url("${ae(i,"bgImageUrl","")}");"`,_=me();ge(async()=>{const d=nt;d.content="door to "+ae(i,"targetArea.title",""),n.showTitles||(d.theme="name"),d.appendTo=o.parentElement,t(4,c=tippy(o,d))});function r(d){ve[d?"unshift":"push"](()=>{o=d,t(1,o)})}const u=d=>{d.key==="Enter"&&_("room",{roomId:i.targetArea._id})};return l.$$set=d=>{"portal"in d&&t(0,i=d.portal)},l.$$.update=()=>{l.$$.dirty&16&&c.popper&&c.show()},[i,o,f,_,c,r,u]}class Yi extends ne{constructor(e){super(),ie(this,e,Xi,qi,re,{portal:0})}}function Dt(l,e,t){const n=l.slice();return n[4]=e[t],n}function $t(l){let e=[],t=new Map,n,i,o=l[0];const c=s=>s[4]._id;for(let s=0;s<o.length;s+=1){let a=Dt(l,o,s),f=c(a);t.set(f,e[s]=Vt(f,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=H()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);n=H()},m(s,a){for(let f=0;f<e.length;f+=1)e[f].m(s,a);j(s,n,a),i=!0},p(s,a){a&5&&(o=s[0],U(),e=qe(e,a,c,1,s,o,t,n.parentNode,Xe,Vt,n,Dt),q())},i(s){if(!i){for(let a=0;a<o.length;a+=1)T(e[a]);i=!0}},o(s){for(let a=0;a<e.length;a+=1)x(e[a]);i=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&b(n)}}}function Vt(l,e){let t,n,i,o;return n=new Yi({props:{portal:e[4]}}),n.$on("room",e[3]),{key:l,first:null,c(){t=A("div"),W(n.$$.fragment),i=P(),this.h()},l(c){t=I(c,"DIV",{role:!0});var s=E(t);Z(n.$$.fragment,s),i=M(s),s.forEach(b),this.h()},h(){m(t,"role","group"),this.first=t},m(c,s){j(c,t,s),K(n,t,null),y(t,i),o=!0},p(c,s){e=c;const a={};s&1&&(a.portal=e[4]),n.$set(a)},i(c){o||(T(n.$$.fragment,c),o=!0)},o(c){x(n.$$.fragment,c),o=!1},d(c){c&&b(t),Q(n)}}}function Wi(l){let e,t,n=!l[1]&&$t(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,[o]){i[1]?n&&(U(),x(n,1,1,()=>{n=null}),q()):n?(n.p(i,o),o&2&&T(n,1)):(n=$t(i),n.c(),T(n,1),n.m(e.parentNode,e))},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function Zi(l,e,t){let n;X(l,xe,s=>t(1,n=s));const i=me();let{portals:o={}}=e;const c=s=>{s.detail.roomId&&i("room",{roomId:s.detail.roomId})};return l.$$set=s=>{"portals"in s&&t(0,o=s.portals)},[o,n,i,c]}class Ki extends ne{constructor(e){super(),ie(this,e,Zi,Wi,re,{portals:0})}}function Qi(l){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(n){e=Ne(n,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,class:!0});var i=E(e);t=Ne(i,"path",{d:!0,class:!0}),E(t).forEach(b),i.forEach(b),this.h()},h(){m(t,"d","M17.7,70.4h17.4V12.5H17.7V70.4z M46.6,12.5v57.8H64V12.5H46.6z"),m(t,"class","svelte-192w1ja"),m(e,"version","1.1"),m(e,"id","Layer_1"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),m(e,"x","0px"),m(e,"y","0px"),m(e,"viewBox","0 0 81.7 82.9"),pn(e,"enable-background","new 0 0 81.7 82.9"),m(e,"xml:space","preserve"),m(e,"class","svelte-192w1ja")},m(n,i){j(n,e,i),y(e,t)},p:oe,i:oe,o:oe,d(n){n&&b(e)}}}class Ji extends ne{constructor(e){super(),ie(this,e,null,Qi,re,{})}}function er(l){let e,t,n,i,o,c,s=l[1]&&Ot(l);return{c(){e=A("div"),t=A("iframe"),i=P(),s&&s.c(),o=H(),this.h()},l(a){e=I(a,"DIV",{class:!0});var f=E(e);t=I(f,"IFRAME",{class:!0,width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0}),E(t).forEach(b),f.forEach(b),i=M(a),s&&s.l(a),o=H(),this.h()},h(){m(t,"class","peertube svelte-1hn1v36"),m(t,"width","1920"),m(t,"height","1080"),J(t.src,n=l[0]+"?api=1")||m(t,"src",n),m(t,"frameborder","no"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),m(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,m(e,"class","peertube-container svelte-1hn1v36"),R(e,"hidden",l[1])},m(a,f){j(a,e,f),y(e,t),j(a,i,f),s&&s.m(a,f),j(a,o,f),c=!0},p(a,f){(!c||f&1&&!J(t.src,n=a[0]+"?api=1"))&&m(t,"src",n),f&2&&R(e,"hidden",a[1]),a[1]?s?(s.p(a,f),f&2&&T(s,1)):(s=Ot(a),s.c(),T(s,1),s.m(o.parentNode,o)):s&&(U(),x(s,1,1,()=>{s=null}),q())},i(a){c||(T(s),c=!0)},o(a){x(s),c=!1},d(a){a&&b(e),a&&b(i),s&&s.d(a),a&&b(o)}}}function tr(l){let e,t,n;return{c(){e=A("div"),t=A("iframe"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);t=I(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),J(t.src,n="https://player.vimeo.com/video/"+ze(l[0]).id+"?autoplay=1")||m(t,"src",n),m(t,"frameborder","no"),m(t,"scrolling","no"),m(t,"byline","false"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-1hn1v36"),m(e,"class","vimeo-container svelte-1hn1v36")},m(i,o){j(i,e,o),y(e,t)},p(i,o){o&1&&!J(t.src,n="https://player.vimeo.com/video/"+ze(i[0]).id+"?autoplay=1")&&m(t,"src",n)},i:oe,o:oe,d(i){i&&b(e)}}}function nr(l){let e,t,n;return{c(){e=A("div"),t=A("iframe"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);t=I(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","1920"),m(t,"height","1280"),J(t.src,n="https://www.youtube.com/embed/"+ze(l[0]).id+"?autoplay=1&rel=0&color=white")||m(t,"src",n),m(t,"frameborder","no"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-1hn1v36"),m(e,"class","youtube-container svelte-1hn1v36")},m(i,o){j(i,e,o),y(e,t)},p(i,o){o&1&&!J(t.src,n="https://www.youtube.com/embed/"+ze(i[0]).id+"?autoplay=1&rel=0&color=white")&&m(t,"src",n)},i:oe,o:oe,d(i){i&&b(e)}}}function Ot(l){let e,t,n,i,o,c,s,a,f,_,r,u,d,h,g;const v=[rr,ir],p=[];function k(w,D){return w[3]?0:1}return s=k(l),a=p[s]=v[s](l),{c(){e=A("div"),t=A("div"),n=G(l[2]),i=P(),o=A("div"),c=A("div"),a.c(),f=P(),_=A("div"),r=A("div"),this.h()},l(w){e=I(w,"DIV",{class:!0});var D=E(e);t=I(D,"DIV",{class:!0});var S=E(t);n=N(S,l[2]),S.forEach(b),i=M(D),o=I(D,"DIV",{class:!0});var F=E(o);c=I(F,"DIV",{class:!0});var L=E(c);a.l(L),L.forEach(b),f=M(F),_=I(F,"DIV",{class:!0});var B=E(_);r=I(B,"DIV",{class:!0,style:!0}),E(r).forEach(b),B.forEach(b),F.forEach(b),D.forEach(b),this.h()},h(){m(t,"class","title svelte-1hn1v36"),m(c,"class","control svelte-1hn1v36"),m(r,"class","progress svelte-1hn1v36"),m(r,"style",u="width: "+l[4]+"%;"),m(_,"class","playbar svelte-1hn1v36"),m(o,"class","controls svelte-1hn1v36"),m(e,"class","audio-interface svelte-1hn1v36")},m(w,D){j(w,e,D),y(e,t),y(t,n),y(e,i),y(e,o),y(o,c),p[s].m(c,null),y(o,f),y(o,_),y(_,r),d=!0,h||(g=C(c,"click",l[5]),h=!0)},p(w,D){(!d||D&4)&&pe(n,w[2]);let S=s;s=k(w),s!==S&&(U(),x(p[S],1,1,()=>{p[S]=null}),q(),a=p[s],a||(a=p[s]=v[s](w),a.c()),T(a,1),a.m(c,null)),(!d||D&16&&u!==(u="width: "+w[4]+"%;"))&&m(r,"style",u)},i(w){d||(T(a),d=!0)},o(w){x(a),d=!1},d(w){w&&b(e),p[s].d(),h=!1,g()}}}function ir(l){let e,t;return e=new Gn({}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function rr(l){let e,t;return e=new Ji({}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function or(l){let e,t,n,i,o,c,s,a,f;const _=[nr,tr,er],r=[];function u(d,h){return h&1&&(n=null),h&1&&(i=null),h&1&&(o=null),n==null&&(n=!!(d[0].includes("youtube")||d[0].includes("youtu.be"))),n?0:(i==null&&(i=!!d[0].includes("vimeo")),i?1:(o==null&&(o=!!d[0].includes("undersco.re")),o?2:-1))}return~(c=u(l,-1))&&(s=r[c]=_[c](l)),{c(){e=A("div"),t=A("div"),s&&s.c(),this.h()},l(d){e=I(d,"DIV",{class:!0});var h=E(e);t=I(h,"DIV",{class:!0});var g=E(t);s&&s.l(g),g.forEach(b),h.forEach(b),this.h()},h(){m(t,"class","embed svelte-1hn1v36"),m(e,"class","stream-container svelte-1hn1v36"),R(e,"audio",l[1])},m(d,h){j(d,e,h),y(e,t),~c&&r[c].m(t,null),f=!0},p(d,[h]){l=d;let g=c;c=u(l,h),c===g?~c&&r[c].p(l,h):(s&&(U(),x(r[g],1,1,()=>{r[g]=null}),q()),~c?(s=r[c],s?s.p(l,h):(s=r[c]=_[c](l),s.c()),T(s,1),s.m(t,null)):s=null),h&2&&R(e,"audio",l[1])},i(d){f||(T(s),de(()=>{a||(a=ce(e,le,{duration:300,easing:et},!0)),a.run(1)}),f=!0)},o(d){x(s),a||(a=ce(e,le,{duration:300,easing:et},!1)),a.run(0),f=!1},d(d){d&&b(e),~c&&r[c].d(),d&&a&&a.end()}}}function lr(l,e,t){const n=window.PeerTubePlayer;let{streamUrl:i=""}=e,{audioOnly:o=!1}=e,{title:c=""}=e,s,a=!1,f=0;const _=()=>{a?s.pause():s.play(),t(3,a=!a)};return ge(async()=>{i.includes("undersco.re")&&(s=new n(document.querySelector(".peertube")),await s.ready,s.play(),t(3,a=!0),s.setResolution(2),s.addEventListener("playbackStatusUpdate",r=>{t(4,f=(r.position/r.duration).toFixed(4)*100)}))}),l.$$set=r=>{"streamUrl"in r&&t(0,i=r.streamUrl),"audioOnly"in r&&t(1,o=r.audioOnly),"title"in r&&t(2,c=r.title)},[i,o,c,a,f,_]}class zn extends ne{constructor(e){super(),ie(this,e,lr,or,re,{streamUrl:0,audioOnly:1,title:2})}}function sr(l){let e,t,n;return{c(){e=A("div"),t=A("iframe"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);t=I(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),J(t.src,n=l[0])||m(t,"src",n),m(t,"frameborder","no"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),m(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","peertube-container svelte-rt5t1v")},m(i,o){j(i,e,o),y(e,t)},p(i,o){o&1&&!J(t.src,n=i[0])&&m(t,"src",n)},d(i){i&&b(e)}}}function ar(l){let e,t,n;return{c(){e=A("div"),t=A("iframe"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);t=I(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),J(t.src,n="https://player.vimeo.com/video/"+ze(l[0]).id)||m(t,"src",n),m(t,"frameborder","no"),m(t,"scrolling","no"),m(t,"byline","false"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","vimeo-container svelte-rt5t1v")},m(i,o){j(i,e,o),y(e,t)},p(i,o){o&1&&!J(t.src,n="https://player.vimeo.com/video/"+ze(i[0]).id)&&m(t,"src",n)},d(i){i&&b(e)}}}function cr(l){let e,t,n;return{c(){e=A("div"),t=A("iframe"),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);t=I(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","1920"),m(t,"height","1280"),J(t.src,n="https://www.youtube.com/embed/"+ze(l[0]).id+"?rel=0&color=white")||m(t,"src",n),m(t,"frameborder","no"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","youtube-container svelte-rt5t1v")},m(i,o){j(i,e,o),y(e,t)},p(i,o){o&1&&!J(t.src,n="https://www.youtube.com/embed/"+ze(i[0]).id+"?rel=0&color=white")&&m(t,"src",n)},d(i){i&&b(e)}}}function ur(l){let e,t,n,i,o,c;function s(_,r){if(r&1&&(n=null),r&1&&(i=null),r&1&&(o=null),n==null&&(n=!!(_[0].includes("youtube")||_[0].includes("youtu.be"))),n)return cr;if(i==null&&(i=!!_[0].includes("vimeo")),i)return ar;if(o==null&&(o=!!_[0].includes("undersco.re")),o)return sr}let a=s(l,-1),f=a&&a(l);return{c(){e=A("div"),t=A("div"),f&&f.c(),this.h()},l(_){e=I(_,"DIV",{class:!0});var r=E(e);t=I(r,"DIV",{class:!0});var u=E(t);f&&f.l(u),u.forEach(b),r.forEach(b),this.h()},h(){m(t,"class","embed svelte-rt5t1v"),m(e,"class","stream-container svelte-rt5t1v")},m(_,r){j(_,e,r),y(e,t),f&&f.m(t,null)},p(_,[r]){l=_,a===(a=s(l,r))&&f?f.p(l,r):(f&&f.d(1),f=a&&a(l),f&&(f.c(),f.m(t,null)))},i(_){c||de(()=>{c=Ye(e,le,{duration:300,easing:et}),c.start()})},o:oe,d(_){_&&b(e),f&&f.d()}}}function fr(l,e,t){let{streamUrl:n=""}=e;return l.$$set=i=>{"streamUrl"in i&&t(0,n=i.streamUrl)},[n]}class dr extends ne{constructor(e){super(),ie(this,e,fr,ur,re,{streamUrl:0})}}function hr(l,e,t){var n={},i="",o="...",c=10>e?e:10,s=["img","br"],a=[],f=0,_=i,r='([\\w|-]+\\s*(=\\s*"[^"]*")?\\s*)*',u="\\s*\\/?\\s*",d="\\s*\\/\\s*",h=new RegExp("<\\/?\\w+\\s*"+r+d+">"),g=new RegExp("<\\/?\\w+\\s*"+r+u+">"),v=/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w\-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g,p=new RegExp("<img\\s*"+r+u+">"),k=new RegExp("\\W+","g"),w=!0,D,S,F,L;function B(V){var ee=p.exec(V),te,ue;return ee?(te=ee.index,ue=ee[0].length,V.substring(0,te)+V.substring(te+ue)):V}function O(V){var ee="";return V.reverse().forEach(function(te,ue){s.indexOf(te)===-1&&(ee+="</"+te+">")}),ee}function Y(V){var ee=V.indexOf(" ");if(ee===-1&&(ee=V.indexOf(">"),ee===-1))throw new Error("HTML tag is not well-formed : "+V);return V.substring(1,ee)}function z(V,ee){var te=e-f,ue=te,Re=te<t.slop,Se=Re?te:t.slop-1,De,Ze=Re?0:te-t.slop,Ke=ee||te+t.slop,Ae;if(!t.truncateLastWord){if(De=V.slice(Ze,Ke),ee&&De.length<=ee)ue=De.length;else for(;(Ae=k.exec(De))!==null;)if(Ae.index<Se){if(ue=te-(Se-Ae.index),Ae.index===0&&te<=1)break}else if(Ae.index===Se){ue=te;break}else{ue=te+(Ae.index-Se);break}V.charAt(ue-1).match(/\s$/)&&ue--}return ue}for(t=t||n,t.ellipsis=t.ellipsis!==void 0?t.ellipsis:o,t.truncateLastWord=t.truncateLastWord!==void 0?t.truncateLastWord:!0,t.slop=t.slop!==void 0?t.slop:c;w;){if(w=g.exec(l),!w){if(f>=e)break;if(w=v.exec(l),!w||w.index>=e){_+=l.substring(0,z(l));break}for(;w;)D=w[0],S=w.index,_+=l.substring(0,S+D.length-f),l=l.substring(S+D.length),w=v.exec(l);break}if(D=w[0],S=w.index,f+S>e){_+=l.substring(0,z(l,S));break}else f+=S,_+=l.substring(0,S);D[1]==="/"?(a.pop(),L=null):(L=h.exec(D),L||(F=Y(D),a.push(F))),L?_+=L[0]:_+=D,l=l.substring(S+D.length)}return l.length>e-f&&t.ellipsis&&(_+=t.ellipsis),_+=O(a),t.keepImageTag||(_=B(_)),_}var _r=hr;function Pt(l){let e,t,n,i=l[1].startDate&&rt(l[1].startDate),o,c,s,a=l[1].title+"",f,_,r=he(l[1],"content.content")&&l[1].content.content[0].style!="html",u,d=l[1].mainImage&&Mt(l),h=i&&Ft(),g=l[1].startDate&&Lt(l),v=r&&Rt(l),p=l[0].importEvent&&Ht(l);return{c(){e=A("div"),d&&d.c(),t=P(),n=A("div"),h&&h.c(),o=P(),g&&g.c(),c=P(),s=A("div"),f=G(a),_=P(),v&&v.c(),u=P(),p&&p.c(),this.h()},l(k){e=I(k,"DIV",{class:!0});var w=E(e);d&&d.l(w),t=M(w),n=I(w,"DIV",{class:!0});var D=E(n);h&&h.l(D),o=M(D),g&&g.l(D),c=M(D),s=I(D,"DIV",{class:!0});var S=E(s);f=N(S,a),S.forEach(b),_=M(D),v&&v.l(D),u=M(D),p&&p.l(D),D.forEach(b),w.forEach(b),this.h()},h(){m(s,"class","title svelte-12z4nak"),m(n,"class","text-container svelte-12z4nak"),m(e,"class","event svelte-12z4nak")},m(k,w){j(k,e,w),d&&d.m(e,null),y(e,t),y(e,n),h&&h.m(n,null),y(n,o),g&&g.m(n,null),y(n,c),y(n,s),y(s,f),y(n,_),v&&v.m(n,null),y(n,u),p&&p.m(n,null)},p(k,w){k[1].mainImage?d?d.p(k,w):(d=Mt(k),d.c(),d.m(e,t)):d&&(d.d(1),d=null),w&2&&(i=k[1].startDate&&rt(k[1].startDate)),i?h||(h=Ft(),h.c(),h.m(n,o)):h&&(h.d(1),h=null),k[1].startDate?g?g.p(k,w):(g=Lt(k),g.c(),g.m(n,c)):g&&(g.d(1),g=null),w&2&&a!==(a=k[1].title+"")&&pe(f,a),w&2&&(r=he(k[1],"content.content")&&k[1].content.content[0].style!="html"),r?v?v.p(k,w):(v=Rt(k),v.c(),v.m(n,u)):v&&(v.d(1),v=null),k[0].importEvent?p?p.p(k,w):(p=Ht(k),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(k){k&&b(e),d&&d.d(),h&&h.d(),g&&g.d(),v&&v.d(),p&&p.d()}}}function Mt(l){let e,t,n,i;return{c(){e=A("div"),t=A("img"),this.h()},l(o){e=I(o,"DIV",{class:!0});var c=E(e);t=I(c,"IMG",{class:!0,alt:!0,src:!0}),c.forEach(b),this.h()},h(){m(t,"class","image svelte-12z4nak"),m(t,"alt",n=l[1].title),J(t.src,i=l[0].importEvent?it(l[1].mainImage).quality(90).width(500).height(500).url():Ee(l[1].mainImage).quality(90).width(500).height(500).url())||m(t,"src",i),m(e,"class","image-container svelte-12z4nak")},m(o,c){j(o,e,c),y(e,t)},p(o,c){c&2&&n!==(n=o[1].title)&&m(t,"alt",n),c&3&&!J(t.src,i=o[0].importEvent?it(o[1].mainImage).quality(90).width(500).height(500).url():Ee(o[1].mainImage).quality(90).width(500).height(500).url())&&m(t,"src",i)},d(o){o&&b(e)}}}function Ft(l){let e,t,n;return{c(){e=A("div"),t=A("div"),n=G("Upcoming"),this.h()},l(i){e=I(i,"DIV",{});var o=E(e);t=I(o,"DIV",{class:!0});var c=E(t);n=N(c,"Upcoming"),c.forEach(b),o.forEach(b),this.h()},h(){m(t,"class","upcoming svelte-12z4nak")},m(i,o){j(i,e,o),y(e,t),y(t,n)},d(i){i&&b(e)}}}function Lt(l){let e,t=ot(l[1].startDate)+"",n;return{c(){e=A("div"),n=G(t),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);n=N(o,t),o.forEach(b),this.h()},h(){m(e,"class","date svelte-12z4nak")},m(i,o){j(i,e,o),y(e,n)},p(i,o){o&2&&t!==(t=ot(i[1].startDate)+"")&&pe(n,t)},d(i){i&&b(e)}}}function Rt(l){let e;return{c(){e=A("div"),this.h()},l(t){e=I(t,"DIV",{class:!0});var n=E(e);n.forEach(b),this.h()},h(){m(e,"class","description")},m(t,n){j(t,e,n),e.innerHTML=l[2]},p(t,n){n&4&&(e.innerHTML=t[2])},d(t){t&&b(e)}}}function Ht(l){let e,t,n,i;return{c(){e=A("div"),t=A("a"),n=G("More Information Here"),this.h()},l(o){e=I(o,"DIV",{class:!0});var c=E(e);t=I(c,"A",{href:!0,target:!0});var s=E(t);n=N(s,"More Information Here"),s.forEach(b),c.forEach(b),this.h()},h(){m(t,"href",i="https://eyebeam.netlify.app/events/"+ae(l[1],"slug.current")),m(t,"target","_blank"),m(e,"class","link-to-full")},m(o,c){j(o,e,c),y(e,t),y(t,n)},p(o,c){c&2&&i!==(i="https://eyebeam.netlify.app/events/"+ae(o[1],"slug.current"))&&m(t,"href",i)},d(o){o&&b(e)}}}function Bt(l){let e,t,n,i,o,c;return o=new We({props:{blocks:l[1].content.content}}),{c(){e=A("div"),t=A("h3"),n=G("Messages"),i=P(),W(o.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var a=E(e);t=I(a,"H3",{class:!0});var f=E(t);n=N(f,"Messages"),f.forEach(b),i=M(a),Z(o.$$.fragment,a),a.forEach(b),this.h()},h(){m(t,"class","svelte-12z4nak"),m(e,"class","html-container svelte-12z4nak")},m(s,a){j(s,e,a),y(e,t),y(t,n),y(e,i),K(o,e,null),c=!0},p(s,a){const f={};a&2&&(f.blocks=s[1].content.content),o.$set(f)},i(s){c||(T(o.$$.fragment,s),c=!0)},o(s){x(o.$$.fragment,s),c=!1},d(s){s&&b(e),Q(o)}}}function pr(l){let e,t=he(l[1],"content.content")&&l[1].content.content[0].style=="html",n,i,o=l[1]&&l[1].content.content[0].style!="html"&&Pt(l),c=t&&Bt(l);return{c(){o&&o.c(),e=P(),c&&c.c(),n=H()},l(s){o&&o.l(s),e=M(s),c&&c.l(s),n=H()},m(s,a){o&&o.m(s,a),j(s,e,a),c&&c.m(s,a),j(s,n,a),i=!0},p(s,[a]){s[1]&&s[1].content.content[0].style!="html"?o?o.p(s,a):(o=Pt(s),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a&2&&(t=he(s[1],"content.content")&&s[1].content.content[0].style=="html"),t?c?(c.p(s,a),a&2&&T(c,1)):(c=Bt(s),c.c(),T(c,1),c.m(n.parentNode,n)):c&&(U(),x(c,1,1,()=>{c=null}),q())},i(s){i||(T(c),i=!0)},o(s){x(c),i=!1},d(s){o&&o.d(s),s&&b(e),c&&c.d(s),s&&b(n)}}}function mr(l,e,t){let{event:n={}}=e,i=!1,o="";return ge(async()=>{n.importEvent?(t(1,i=await kn("*[_id == '"+n.importedEvent+"'][0]")),t(2,o=_r(Nn(ae(i,"content.content",[])),800))):(t(1,i=n),t(2,o=Fe(ae(i,"content.content",[]))))}),l.$$set=c=>{"event"in c&&t(0,n=c.event)},l.$$.update=()=>{l.$$.dirty&2&&console.log("post: ",i)},[n,i,o]}class vr extends ne{constructor(e){super(),ie(this,e,mr,pr,re,{event:0})}}function Gt(l,e,t){const n=l.slice();return n[11]=e[t],n}function Nt(l){let e,t;return{c(){e=A("div"),t=G(l[1]),this.h()},l(n){e=I(n,"DIV",{"aria-live":!0,class:!0});var i=E(e);t=N(i,l[1]),i.forEach(b),this.h()},h(){m(e,"aria-live","polite"),m(e,"class","viewer-count svelte-1o7zo20")},m(n,i){j(n,e,i),y(e,t)},p(n,i){i&2&&pe(t,n[1])},d(n){n&&b(e)}}}function gr(l){let e,t,n,i,o,c,s,a,f,_,r,u,d=l[0].events,h=[];for(let v=0;v<d.length;v+=1)h[v]=Ct(Gt(l,d,v));const g=v=>x(h[v],1,1,()=>{h[v]=null});return{c(){e=A("div"),t=A("div"),n=A("h1"),i=G("Bulletin Board"),o=P(),c=A("div"),s=P(),a=A("div");for(let v=0;v<h.length;v+=1)h[v].c();this.h()},l(v){e=I(v,"DIV",{class:!0,"aria-live":!0});var p=E(e);t=I(p,"DIV",{class:!0});var k=E(t);n=I(k,"H1",{class:!0});var w=E(n);i=N(w,"Bulletin Board"),w.forEach(b),o=M(k),c=I(k,"DIV",{class:!0});var D=E(c);D.forEach(b),s=M(k),a=I(k,"DIV",{class:!0});var S=E(a);for(let F=0;F<h.length;F+=1)h[F].l(S);S.forEach(b),k.forEach(b),p.forEach(b),this.h()},h(){m(n,"class","svelte-1o7zo20"),m(c,"class","bulletin-board-actions svelte-1o7zo20"),m(a,"class","bulletin-board-events"),m(t,"class","inner svelte-1o7zo20"),m(e,"class","bulletin-board svelte-1o7zo20"),m(e,"aria-live","polite"),R(e,"pushed",l[3])},m(v,p){j(v,e,p),y(e,t),y(t,n),y(n,i),y(t,o),y(t,c),y(t,s),y(t,a);for(let k=0;k<h.length;k+=1)h[k].m(a,null);_=!0,r||(u=C(e,"click",l[10]),r=!0)},p(v,p){if(p&1){d=v[0].events;let k;for(k=0;k<d.length;k+=1){const w=Gt(v,d,k);h[k]?(h[k].p(w,p),T(h[k],1)):(h[k]=Ct(w),h[k].c(),T(h[k],1),h[k].m(a,null))}for(U(),k=d.length;k<h.length;k+=1)g(k);q()}p&8&&R(e,"pushed",v[3])},i(v){if(!_){for(let p=0;p<d.length;p+=1)T(h[p]);de(()=>{f||(f=ce(e,le,{},!0)),f.run(1)}),_=!0}},o(v){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)x(h[p]);f||(f=ce(e,le,{},!1)),f.run(0),_=!1},d(v){v&&b(e),Le(h,v),v&&f&&f.end(),r=!1,u()}}}function br(l){let e,t,n,i,o,c,s=l[2]&&l[2].title&&Ut(l);return{c(){e=A("div"),t=A("div"),s&&s.c(),this.h()},l(a){e=I(a,"DIV",{class:!0,"aria-live":!0});var f=E(e);t=I(f,"DIV",{class:!0});var _=E(t);s&&s.l(_),_.forEach(b),f.forEach(b),this.h()},h(){m(t,"class","inner svelte-1o7zo20"),m(e,"class","article svelte-1o7zo20"),m(e,"aria-live","polite"),R(e,"pushed",l[3])},m(a,f){j(a,e,f),y(e,t),s&&s.m(t,null),i=!0,o||(c=C(e,"click",l[9]),o=!0)},p(a,f){a[2]&&a[2].title?s?(s.p(a,f),f&4&&T(s,1)):(s=Ut(a),s.c(),T(s,1),s.m(t,null)):s&&(U(),x(s,1,1,()=>{s=null}),q()),f&8&&R(e,"pushed",a[3])},i(a){i||(T(s),de(()=>{n||(n=ce(e,le,{},!0)),n.run(1)}),i=!0)},o(a){x(s),n||(n=ce(e,le,{},!1)),n.run(0),i=!1},d(a){a&&b(e),s&&s.d(),a&&n&&n.end(),o=!1,c()}}}function kr(l){let e=he(l[0],"content.content"),t,n,i=e&&Xt(l);return{c(){i&&i.c(),t=H()},l(o){i&&i.l(o),t=H()},m(o,c){i&&i.m(o,c),j(o,t,c),n=!0},p(o,c){c&1&&(e=he(o[0],"content.content")),e?i?(i.p(o,c),c&1&&T(i,1)):(i=Xt(o),i.c(),T(i,1),i.m(t.parentNode,t)):i&&(U(),x(i,1,1,()=>{i=null}),q())},i(o){n||(T(i),n=!0)},o(o){x(i),n=!1},d(o){i&&i.d(o),o&&b(t)}}}function yr(l){let e,t,n,i,o,c;return t=new dr({props:{streamUrl:l[0].videoUrl}}),{c(){e=A("div"),W(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0,"aria-live":!0});var a=E(e);Z(t.$$.fragment,a),a.forEach(b),this.h()},h(){m(e,"class","video svelte-1o7zo20"),m(e,"aria-live","polite"),R(e,"pushed",l[3])},m(s,a){j(s,e,a),K(t,e,null),i=!0,o||(c=C(e,"click",l[7]),o=!0)},p(s,a){const f={};a&1&&(f.streamUrl=s[0].videoUrl),t.$set(f),a&8&&R(e,"pushed",s[3])},i(s){i||(T(t.$$.fragment,s),de(()=>{n||(n=ce(e,le,{},!0)),n.run(1)}),i=!0)},o(s){x(t.$$.fragment,s),n||(n=ce(e,le,{},!1)),n.run(0),i=!1},d(s){s&&b(e),Q(t),s&&n&&n.end(),o=!1,c()}}}function Ct(l){let e,t;return e=new vr({props:{event:l[11]}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.event=n[11]),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Ut(l){let e=l[2].title+"",t,n,i=he(l[2],"content.content"),o,c,s=i&&qt(l);return{c(){t=G(e),n=P(),s&&s.c(),o=H()},l(a){t=N(a,e),n=M(a),s&&s.l(a),o=H()},m(a,f){j(a,t,f),j(a,n,f),s&&s.m(a,f),j(a,o,f),c=!0},p(a,f){(!c||f&4)&&e!==(e=a[2].title+"")&&pe(t,e),f&4&&(i=he(a[2],"content.content")),i?s?(s.p(a,f),f&4&&T(s,1)):(s=qt(a),s.c(),T(s,1),s.m(o.parentNode,o)):s&&(U(),x(s,1,1,()=>{s=null}),q())},i(a){c||(T(s),c=!0)},o(a){x(s),c=!1},d(a){a&&b(t),a&&b(n),s&&s.d(a),a&&b(o)}}}function qt(l){let e,t;return e=new We({props:{blocks:l[2].content.content,mainSite:!0}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.blocks=n[2].content.content),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Xt(l){let e,t,n,i,o,c,s;return n=new We({props:{blocks:l[0].content.content}}),{c(){e=A("div"),t=A("div"),W(n.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0,"aria-live":!0});var f=E(e);t=I(f,"DIV",{class:!0});var _=E(t);Z(n.$$.fragment,_),_.forEach(b),f.forEach(b),this.h()},h(){m(t,"class","inner svelte-1o7zo20"),m(e,"class","article svelte-1o7zo20"),m(e,"aria-live","polite"),R(e,"pushed",l[3])},m(a,f){j(a,e,f),y(e,t),K(n,t,null),o=!0,c||(s=C(e,"click",l[8]),c=!0)},p(a,f){const _={};f&1&&(_.blocks=a[0].content.content),n.$set(_),f&8&&R(e,"pushed",a[3])},i(a){o||(T(n.$$.fragment,a),de(()=>{i||(i=ce(e,le,{},!0)),i.run(1)}),o=!0)},o(a){x(n.$$.fragment,a),i||(i=ce(e,le,{},!1)),i.run(0),o=!1},d(a){a&&b(e),Q(n),a&&i&&i.end(),c=!1,s()}}}function Yt(l){let e,t=l[0].infoText+"",n;return{c(){e=A("div"),n=G(t),this.h()},l(i){e=I(i,"DIV",{class:!0});var o=E(e);n=N(o,t),o.forEach(b),this.h()},h(){m(e,"class","info-text svelte-1o7zo20")},m(i,o){j(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[0].infoText+"")&&pe(n,t)},d(i){i&&b(e)}}}function wr(l){let e,t,n,i,o,c,s,a,f,_,r,u=l[0].contentType==="video"&&Nt(l);const d=[yr,kr,br,gr],h=[];function g(p,k){return p[0].contentType==="video"?0:p[0].contentType==="text"?1:p[0].contentType==="importedPost"?2:p[0].isBulletinBoard?3:-1}~(o=g(l))&&(c=h[o]=d[o](l));let v=l[0].infoText&&Yt(l);return{c(){u&&u.c(),e=P(),t=A("button"),n=G("Return"),i=P(),c&&c.c(),s=P(),v&&v.c(),a=H(),this.h()},l(p){u&&u.l(p),e=M(p),t=I(p,"BUTTON",{class:!0,"aria-label":!0});var k=E(t);n=N(k,"Return"),k.forEach(b),i=M(p),c&&c.l(p),s=M(p),v&&v.l(p),a=H(),this.h()},h(){m(t,"class","return-button svelte-1o7zo20"),m(t,"aria-label","Return")},m(p,k){u&&u.m(p,k),j(p,e,k),j(p,t,k),y(t,n),j(p,i,k),~o&&h[o].m(p,k),j(p,s,k),v&&v.m(p,k),j(p,a,k),f=!0,_||(r=C(t,"click",l[6]),_=!0)},p(p,[k]){p[0].contentType==="video"?u?u.p(p,k):(u=Nt(p),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);let w=o;o=g(p),o===w?~o&&h[o].p(p,k):(c&&(U(),x(h[w],1,1,()=>{h[w]=null}),q()),~o?(c=h[o],c?c.p(p,k):(c=h[o]=d[o](p),c.c()),T(c,1),c.m(s.parentNode,s)):c=null),p[0].infoText?v?v.p(p,k):(v=Yt(p),v.c(),v.m(a.parentNode,a)):v&&(v.d(1),v=null)},i(p){f||(T(c),f=!0)},o(p){x(c),f=!1},d(p){u&&u.d(p),p&&b(e),p&&b(t),p&&b(i),~o&&h[o].d(p),p&&b(s),v&&v.d(p),p&&b(a),_=!1,r()}}}function Ar(l,e,t){let n,i;X(l,yn,h=>t(5,n=h)),X(l,wn,h=>t(3,i=h));let{article:o={}}=e,c=0,s="",a;ge(async()=>{Cn(o),o.contentType==="importedPost"&&o.importedPost&&t(2,a=await kn("*[_id == '"+o.importedPost+"'][0]"))}),_n(async()=>{Un()});const f=()=>{Ie.set(!1),An()},_=h=>{h.target.classList.contains("video")&&Ie.set(!1)},r=h=>{h.target.classList.contains("article")&&Ie.set(!1)},u=h=>{h.target.classList.contains("article")&&Ie.set(!1)},d=h=>{h.target.classList.contains("bulletin-board")&&Ie.set(!1)};return l.$$set=h=>{"article"in h&&t(0,o=h.article)},l.$$.update=()=>{if(l.$$.dirty&49){t(4,c=0);for(const[h,g]of Object.entries(n))g.viewing===o._id&&t(4,c++,c)}l.$$.dirty&16&&t(1,s=c===1?"You are the only one here.":`${c} people are here.`)},[o,s,a,i,c,n,f,_,r,u,d]}class Ir extends ne{constructor(e){super(),ie(this,e,Ar,wr,re,{article:0})}}function Tr(l){let e,t,n,i,o,c,s,a,f,_,r,u,d,h,g,v;return{c(){e=A("div"),t=A("div"),n=G(l[0]),i=P(),o=A("div"),c=A("div"),s=A("div"),a=G("\u25B8"),f=G(`
      Yes`),_=P(),r=A("div"),u=A("div"),d=G("\u25B8"),h=G(`
      No`),this.h()},l(p){e=I(p,"DIV",{class:!0,"aria-live":!0});var k=E(e);t=I(k,"DIV",{});var w=E(t);n=N(w,l[0]),w.forEach(b),i=M(k),o=I(k,"DIV",{class:!0});var D=E(o);c=I(D,"DIV",{class:!0,tabindex:!0,autofocus:!0});var S=E(c);s=I(S,"DIV",{class:!0});var F=E(s);a=N(F,"\u25B8"),F.forEach(b),f=N(S,`
      Yes`),S.forEach(b),_=M(D),r=I(D,"DIV",{class:!0,tabindex:!0});var L=E(r);u=I(L,"DIV",{class:!0});var B=E(u);d=N(B,"\u25B8"),B.forEach(b),h=N(L,`
      No`),L.forEach(b),D.forEach(b),k.forEach(b),this.h()},h(){m(s,"class","marker svelte-ezln19"),m(c,"class","choice svelte-ezln19"),m(c,"tabindex","0"),m(c,"autofocus",""),m(u,"class","marker svelte-ezln19"),m(r,"class","choice svelte-ezln19"),m(r,"tabindex","0"),m(o,"class","multiple-choice"),m(e,"class","room-dialog-box svelte-ezln19"),m(e,"aria-live","polite"),R(e,"is-mobile",l[2])},m(p,k){j(p,e,k),y(e,t),y(t,n),y(e,i),y(e,o),y(o,c),y(c,s),y(s,a),y(c,f),y(o,_),y(o,r),y(r,u),y(u,d),y(r,h),c.focus(),g||(v=[C(c,"click",l[4]),C(c,"keydown",l[5]),C(r,"click",l[6]),C(r,"keydown",l[7])],g=!0)},p(p,[k]){k&1&&pe(n,p[0]),k&4&&R(e,"is-mobile",p[2])},i:oe,o:oe,d(p){p&&b(e),g=!1,we(v)}}}function Er(l,e,t){let n;X(l,Te,r=>t(2,n=r));const i=me();let{text:o=""}=e,{roomId:c=""}=e;const s=r=>{i("room",{roomId:c})},a=r=>{r.code==="Enter"&&i("room",{roomId:c})},f=r=>{i("room",{roomId:!1})},_=r=>{r.code==="Enter"&&i("room",{roomId:!1})};return l.$$set=r=>{"text"in r&&t(0,o=r.text),"roomId"in r&&t(1,c=r.roomId)},[o,c,n,i,s,a,f,_]}class zr extends ne{constructor(e){super(),ie(this,e,Er,Tr,re,{text:0,roomId:1})}}function jr(l){let e,t,n,i;return t=new zr({props:{text:`Go to ${l[1]}?`,roomId:l[0]}}),t.$on("room",l[3]),{c(){e=A("div"),W(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0,"aria-live":!0});var c=E(e);Z(t.$$.fragment,c),c.forEach(b),this.h()},h(){m(e,"class","caption-container svelte-ukizaq"),m(e,"aria-live","polite")},m(o,c){j(o,e,c),K(t,e,null),i=!0},p(o,[c]){const s={};c&2&&(s.text=`Go to ${o[1]}?`),c&1&&(s.roomId=o[0]),t.$set(s)},i(o){i||(T(t.$$.fragment,o),n||de(()=>{n=Ye(e,le,{}),n.start()}),i=!0)},o(o){x(t.$$.fragment,o),i=!1},d(o){o&&b(e),Q(t)}}}function xr(l,e,t){const n=me();let{roomIntent:i=""}=e,{roomTitle:o=""}=e;const c=s=>{n("room",{roomId:s.detail.roomId})};return l.$$set=s=>{"roomIntent"in s&&t(0,i=s.roomIntent),"roomTitle"in s&&t(1,o=s.roomTitle)},[i,o,n,c]}class Sr extends ne{constructor(e){super(),ie(this,e,xr,jr,re,{roomIntent:0,roomTitle:1})}}function Dr(l){let e,t,n,i,o,c,s,a,f,_,r,u,d,h,g,v;return{c(){e=A("div"),t=A("div"),n=G(l[0]),i=P(),o=A("div"),c=A("div"),s=A("div"),a=G("\u25B8"),f=G(`
      Yes`),_=P(),r=A("div"),u=A("div"),d=G("\u25B8"),h=G(`
      No`),this.h()},l(p){e=I(p,"DIV",{class:!0,"aria-live":!0});var k=E(e);t=I(k,"DIV",{});var w=E(t);n=N(w,l[0]),w.forEach(b),i=M(k),o=I(k,"DIV",{class:!0});var D=E(o);c=I(D,"DIV",{class:!0,tabindex:!0,autofocus:!0});var S=E(c);s=I(S,"DIV",{class:!0});var F=E(s);a=N(F,"\u25B8"),F.forEach(b),f=N(S,`
      Yes`),S.forEach(b),_=M(D),r=I(D,"DIV",{class:!0,tabindex:!0});var L=E(r);u=I(L,"DIV",{class:!0});var B=E(u);d=N(B,"\u25B8"),B.forEach(b),h=N(L,`
      No`),L.forEach(b),D.forEach(b),k.forEach(b),this.h()},h(){m(s,"class","marker svelte-spoley"),m(c,"class","choice svelte-spoley"),m(c,"tabindex","0"),m(c,"autofocus",""),m(u,"class","marker svelte-spoley"),m(r,"class","choice svelte-spoley"),m(r,"tabindex","0"),m(o,"class","multiple-choice"),m(e,"class","object-dialog-box svelte-spoley"),m(e,"aria-live","polite")},m(p,k){j(p,e,k),y(e,t),y(t,n),y(e,i),y(e,o),y(o,c),y(c,s),y(s,a),y(c,f),y(o,_),y(o,r),y(r,u),y(u,d),y(r,h),c.focus(),g||(v=[C(c,"click",l[3]),C(c,"keydown",l[4]),C(r,"click",l[5]),C(r,"keydown",l[6])],g=!0)},p(p,[k]){k&1&&pe(n,p[0])},i:oe,o:oe,d(p){p&&b(e),g=!1,we(v)}}}function $r(l,e,t){const n=me();let{text:i=""}=e,{objectId:o=""}=e;const c=_=>{n("object",{objectId:o})},s=_=>{_.code==="Enter"&&n("object",{objectId:o})},a=_=>{n("object",{objectId:!1})},f=_=>{_.code==="Enter"&&n("object",{objectId:!1})};return l.$$set=_=>{"text"in _&&t(0,i=_.text),"objectId"in _&&t(1,o=_.objectId)},[i,o,n,c,s,a,f]}class Vr extends ne{constructor(e){super(),ie(this,e,$r,Dr,re,{text:0,objectId:1})}}function Or(l){let e,t,n,i,o,c;return i=new Vr({props:{text:`Look at ${l[1]}?`,objectId:l[0]}}),i.$on("object",l[3]),{c(){e=A("div"),t=G(l[1]),n=P(),W(i.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0,"aria-live":!0});var a=E(e);t=N(a,l[1]),n=M(a),Z(i.$$.fragment,a),a.forEach(b),this.h()},h(){m(e,"class","caption-container svelte-ukizaq"),m(e,"aria-live","polite")},m(s,a){j(s,e,a),y(e,t),y(e,n),K(i,e,null),c=!0},p(s,[a]){(!c||a&2)&&pe(t,s[1]);const f={};a&2&&(f.text=`Look at ${s[1]}?`),a&1&&(f.objectId=s[0]),i.$set(f)},i(s){c||(T(i.$$.fragment,s),o||de(()=>{o=Ye(e,le,{}),o.start()}),c=!0)},o(s){x(i.$$.fragment,s),c=!1},d(s){s&&b(e),Q(i)}}}function Pr(l,e,t){const n=me();let{objectIntent:i=""}=e,{objectTitle:o=""}=e;const c=s=>{n("object",{objectId:s.detail.objectId})};return l.$$set=s=>{"objectIntent"in s&&t(0,i=s.objectIntent),"objectTitle"in s&&t(1,o=s.objectTitle)},[i,o,n,c]}class Mr extends ne{constructor(e){super(),ie(this,e,Pr,Or,re,{objectIntent:0,objectTitle:1})}}function Fr(l){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(n){e=Ne(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var i=E(e);t=Ne(i,"path",{d:!0,class:!0}),E(t).forEach(b),i.forEach(b),this.h()},h(){m(t,"d","M4.8474 7.78418L0.703963 0.607532L8.99084 0.607531L4.8474 7.78418Z"),m(t,"class","svelte-fiesz8"),m(e,"width","9"),m(e,"height","8"),m(e,"viewBox","0 0 9 8"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"class","svelte-fiesz8")},m(n,i){j(n,e,i),y(e,t)},p:oe,i:oe,o:oe,d(n){n&&b(e)}}}class Lr extends ne{constructor(e){super(),ie(this,e,null,Fr,re,{})}}function Wt(l){let e,t,n,i,o;return t=new Lr({}),{c(){e=A("div"),W(t.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var s=E(e);Z(t.$$.fragment,s),s.forEach(b),this.h()},h(){m(e,"class","next-caption svelte-ogi99z")},m(c,s){j(c,e,s),K(t,e,null),n=!0,i||(o=C(e,"click",l[7]),i=!0)},p:oe,i(c){n||(T(t.$$.fragment,c),n=!0)},o(c){x(t.$$.fragment,c),n=!1},d(c){c&&b(e),Q(t),i=!1,o()}}}function Rr(l){let e,t,n=Fe(l[2].text.content)+"",i,o,c,s,a,f,_=l[1]<l[0].length-1&&Wt(l);return{c(){e=A("div"),t=A("div"),c=P(),_&&_.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var u=E(e);t=I(u,"DIV",{class:!0,"aria-live":!0});var d=E(t);d.forEach(b),c=M(u),_&&_.l(u),u.forEach(b),this.h()},h(){m(t,"class","caption-box svelte-ogi99z"),m(t,"aria-live","polite"),m(e,"class","caption-container svelte-ogi99z"),R(e,"is-mobile",l[3])},m(r,u){j(r,e,u),y(e,t),t.innerHTML=n,y(e,c),_&&_.m(e,null),s=!0,a||(f=C(t,"click",l[6]),a=!0)},p(r,[u]){l=r,(!s||u&4)&&n!==(n=Fe(l[2].text.content)+"")&&(t.innerHTML=n),l[1]<l[0].length-1?_?(_.p(l,u),u&3&&T(_,1)):(_=Wt(l),_.c(),T(_,1),_.m(e,null)):_&&(U(),x(_,1,1,()=>{_=null}),q()),u&8&&R(e,"is-mobile",l[3])},i(r){s||(de(()=>{o&&o.end(1),i=Ye(t,le,l[5]),i.start()}),T(_),s=!0)},o(r){i&&i.invalidate(),o=Fn(t,le,{duration:100}),x(_),s=!1},d(r){r&&b(e),r&&o&&o.end(),_&&_.d(),a=!1,f()}}}function Hr(l,e,t){let n;X(l,Te,r=>t(3,n=r));const i=me(),o={duration:500};let{text:c=[]}=e,s=0,a=!1;const f=r=>{s<c.length-1?(t(1,s++,s),t(2,a=c[s])):i("close")},_=r=>{t(1,s++,s),t(2,a=c[s])};return l.$$set=r=>{"text"in r&&t(0,c=r.text)},l.$$.update=()=>{l.$$.dirty&3&&c.length>0&&t(2,a=c[s])},[c,s,a,n,i,o,f,_]}class Br extends ne{constructor(e){super(),ie(this,e,Hr,Rr,re,{text:0})}}const Gr=["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"];var Nr={words:Gr},Cr={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1},Ur=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"],qr=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi,Xr={object:Cr,array:Ur,regex:qr};const Yr=Nr.words,Wr=Xr.array;class Zr{constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(Yr,[Wr,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b/,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{const n=new RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&n.test(e)}).length>0||!1}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){return e.split(this.splitRegex).map(t=>this.isProfane(t)?this.replaceWord(t):t).join(this.splitRegex.exec(e)[0])}addWords(){let e=Array.from(arguments);this.list.push(...e),e.map(t=>t.toLowerCase()).forEach(t=>{this.exclude.includes(t)&&this.exclude.splice(this.exclude.indexOf(t),1)})}removeWords(){this.exclude.push(...Array.from(arguments).map(e=>e.toLowerCase()))}}var Kr=Zr;function Zt(l,e,t){const n=l.slice();return n[7]=e[t],n}function Kt(l){let e,t;return{c(){e=A("div"),t=G("The chat is empty, for now."),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=E(e);t=N(i,"The chat is empty, for now."),i.forEach(b),this.h()},h(){m(e,"class","chat-message svelte-fl6iys")},m(n,i){j(n,e,i),y(e,t)},d(n){n&&b(e)}}}function Qt(l){let e,t,n=l[7].name+"",i,o,c,s=l[7]._text+"",a,f;return{c(){e=A("div"),t=A("span"),i=G(n),o=G(": "),c=A("span"),a=G(s),f=P(),this.h()},l(_){e=I(_,"DIV",{class:!0,"aria-live":!0});var r=E(e);t=I(r,"SPAN",{class:!0});var u=E(t);i=N(u,n),o=N(u,": "),u.forEach(b),c=I(r,"SPAN",{class:!0});var d=E(c);a=N(d,s),d.forEach(b),f=M(r),r.forEach(b),this.h()},h(){m(t,"class","username svelte-fl6iys"),m(c,"class","message-text svelte-fl6iys"),m(e,"class","chat-message svelte-fl6iys"),m(e,"aria-live","polite")},m(_,r){j(_,e,r),y(e,t),y(t,i),y(t,o),y(e,c),y(c,a),y(e,f)},p(_,r){r&1&&n!==(n=_[7].name+"")&&pe(i,n),r&1&&s!==(s=_[7]._text+"")&&pe(a,s)},d(_){_&&b(e)}}}function Qr(l){let e,t,n,i,o,c,s,a,f=l[0].length<=0&&Kt(),_=l[0],r=[];for(let u=0;u<_.length;u+=1)r[u]=Qt(Zt(l,_,u));return{c(){e=A("div"),t=A("div"),n=A("span"),i=G("For a less ephemeral conversation, "),o=A("a"),c=G("join our Discord."),s=P(),f&&f.c(),a=P();for(let u=0;u<r.length;u+=1)r[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var d=E(e);t=I(d,"DIV",{class:!0});var h=E(t);n=I(h,"SPAN",{class:!0});var g=E(n);i=N(g,"For a less ephemeral conversation, "),o=I(g,"A",{href:!0,class:!0});var v=E(o);c=N(v,"join our Discord."),v.forEach(b),g.forEach(b),h.forEach(b),s=M(d),f&&f.l(d),a=M(d);for(let p=0;p<r.length;p+=1)r[p].l(d);d.forEach(b),this.h()},h(){m(o,"href","https://discord.gg/QNRHD6Kwhk"),m(o,"class","svelte-fl6iys"),m(n,"class","message-text svelte-fl6iys"),m(t,"class","chat-message chat-pinned svelte-fl6iys"),m(e,"class","chat-log svelte-fl6iys")},m(u,d){j(u,e,d),y(e,t),y(t,n),y(n,i),y(n,o),y(o,c),y(e,s),f&&f.m(e,null),y(e,a);for(let h=0;h<r.length;h+=1)r[h].m(e,null);l[3](e)},p(u,[d]){if(u[0].length<=0?f||(f=Kt(),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d&1){_=u[0];let h;for(h=0;h<_.length;h+=1){const g=Zt(u,_,h);r[h]?r[h].p(g,d):(r[h]=Qt(g),r[h].c(),r[h].m(e,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=_.length}},i:oe,o:oe,d(u){u&&b(e),f&&f.d(),Le(r,u),l[3](null)}}}function Jr(l,e,t){let{messages:n=[]}=e,{room:i={}}=e,o=null;const c=()=>{t(1,o.scrollTop=o.scrollHeight,o)};Ln(()=>{c()});function s(a){ve[a?"unshift":"push"](()=>{o=a,t(1,o)})}return l.$$set=a=>{"messages"in a&&t(0,n=a.messages),"room"in a&&t(2,i=a.room)},[n,o,i,s]}class eo extends ne{constructor(e){super(),ie(this,e,Jr,Qr,re,{messages:0,room:2})}}function Jt(l){let e,t,n=l[4]?"X":"Chat",i,o,c,s,a,f,_;const r=[no,to],u=[];function d(h,g){return h[1].useDiscord!=!0||h[1].discordChannelId==null?0:1}return c=d(l),s=u[c]=r[c](l),{c(){e=A("div"),t=A("button"),i=G(n),o=P(),s.c(),this.h()},l(h){e=I(h,"DIV",{class:!0});var g=E(e);t=I(g,"BUTTON",{class:!0});var v=E(t);i=N(v,n),v.forEach(b),o=M(g),s.l(g),g.forEach(b),this.h()},h(){m(t,"class","mobile-button svelte-1eyiicu"),R(t,"minimize",l[4]),m(e,"class","chat-container svelte-1eyiicu"),R(e,"is-mobile",l[6]),R(e,"minimize",l[6]?!l[4]:!1)},m(h,g){j(h,e,g),y(e,t),y(t,i),y(e,o),u[c].m(e,null),a=!0,f||(_=C(t,"click",l[8]),f=!0)},p(h,g){(!a||g&16)&&n!==(n=h[4]?"X":"Chat")&&pe(i,n),g&16&&R(t,"minimize",h[4]);let v=c;c=d(h),c===v?u[c].p(h,g):(U(),x(u[v],1,1,()=>{u[v]=null}),q(),s=u[c],s?s.p(h,g):(s=u[c]=r[c](h),s.c()),T(s,1),s.m(e,null)),g&64&&R(e,"is-mobile",h[6]),g&80&&R(e,"minimize",h[6]?!h[4]:!1)},i(h){a||(T(s),a=!0)},o(h){x(s),a=!1},d(h){h&&b(e),u[c].d(),f=!1,_()}}}function to(l){let e,t;return{c(){e=A("iframe"),this.h()},l(n){e=I(n,"IFRAME",{class:!0,src:!0,style:!0}),E(e).forEach(b),this.h()},h(){m(e,"class","discord-widget svelte-1eyiicu"),J(e.src,t=l[5])||m(e,"src",t),pn(e,"sidebar","display:none"),R(e,"hidden-mobile",!l[4])},m(n,i){j(n,e,i)},p(n,i){i&32&&!J(e.src,t=n[5])&&m(e,"src",t),i&16&&R(e,"hidden-mobile",!n[4])},i:oe,o:oe,d(n){n&&b(e)}}}function no(l){let e,t,n,i,o,c,s,a,f,_,r;return t=new eo({props:{messages:l[0],room:l[2]}}),{c(){e=A("div"),W(t.$$.fragment),n=P(),i=A("div"),o=A("input"),c=P(),s=A("button"),a=G("Send"),this.h()},l(u){e=I(u,"DIV",{class:!0});var d=E(e);Z(t.$$.fragment,d),n=M(d),i=I(d,"DIV",{class:!0});var h=E(i);o=I(h,"INPUT",{placeholder:!0,type:!0,maxlength:!0,class:!0}),c=M(h),s=I(h,"BUTTON",{class:!0});var g=E(s);a=N(g,"Send"),g.forEach(b),h.forEach(b),d.forEach(b),this.h()},h(){m(o,"placeholder","Write a message..."),m(o,"type","[text]"),m(o,"maxlength","600"),m(o,"class","svelte-1eyiicu"),m(s,"class","svelte-1eyiicu"),m(i,"class","chat-input svelte-1eyiicu"),m(e,"class","chat-content svelte-1eyiicu"),R(e,"hidden-mobile",!l[4])},m(u,d){j(u,e,d),K(t,e,null),y(e,n),y(e,i),y(i,o),Be(o,l[3]),y(i,c),y(i,s),y(s,a),f=!0,_||(r=[C(o,"input",l[9]),C(o,"keydown",l[10]),C(s,"click",l[7])],_=!0)},p(u,d){const h={};d&1&&(h.messages=u[0]),d&4&&(h.room=u[2]),t.$set(h),d&8&&Be(o,u[3]),d&16&&R(e,"hidden-mobile",!u[4])},i(u){f||(T(t.$$.fragment,u),f=!0)},o(u){x(t.$$.fragment,u),f=!1},d(u){u&&b(e),Q(t),_=!1,we(r)}}}function io(l){let e,t,n=l[1]!=null&&l[1].disableChat!=!0&&Jt(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,[o]){i[1]!=null&&i[1].disableChat!=!0?n?(n.p(i,o),o&2&&T(n,1)):(n=Jt(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(U(),x(n,1,1,()=>{n=null}),q())},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function ro(l,e,t){let n,i,o,c;X(l,Oe,p=>t(2,o=p)),X(l,Te,p=>t(6,c=p));const s=me(),a=new Kr;let f="",{chatMessages:_=[]}=e,r=c?!1:null;const u=()=>{s("submit",{text:a.clean(f)}),t(3,f="")};console.log("current room: ",o);const d=`*[_type == 'room' && _id == "${o._id}"]`;console.log("query: ",d),qn.listen(d).subscribe(p=>{console.log("update: ",p),t(1,n=p.result.chatSettings)});const h=()=>{t(4,r=!r)};function g(){f=this.value,t(3,f)}const v=p=>{p.keyCode==13&&u()};return l.$$set=p=>{"chatMessages"in p&&t(0,_=p.chatMessages)},l.$$.update=()=>{l.$$.dirty&4&&t(1,n=o.chatSettings!=null?o.chatSettings:{useDiscord:!1,discordChannelId:void 0}),l.$$.dirty&2&&t(5,i=`https://e.widgetbot.io/channels/806275264807698482/${n.discordChannelId}`)},[_,n,o,f,r,i,c,u,h,g,v]}class oo extends ne{constructor(e){super(),ie(this,e,ro,io,re,{chatMessages:0})}}function lo(l){let e,t,n,i,o,c,s,a,f,_,r,u,d,h,g,v,p,k,w;return{c(){e=A("div"),t=A("div"),n=A("span"),i=G("\u2190"),o=P(),c=A("div"),s=A("div"),a=A("span"),f=G("\u2191"),_=P(),r=A("div"),u=A("span"),d=G("\u2193"),h=P(),g=A("div"),v=A("span"),p=G("\u2192"),this.h()},l(D){e=I(D,"DIV",{class:!0});var S=E(e);t=I(S,"DIV",{class:!0});var F=E(t);n=I(F,"SPAN",{});var L=E(n);i=N(L,"\u2190"),L.forEach(b),F.forEach(b),o=M(S),c=I(S,"DIV",{class:!0});var B=E(c);s=I(B,"DIV",{class:!0});var O=E(s);a=I(O,"SPAN",{class:!0});var Y=E(a);f=N(Y,"\u2191"),Y.forEach(b),O.forEach(b),_=M(B),r=I(B,"DIV",{class:!0});var z=E(r);u=I(z,"SPAN",{class:!0});var V=E(u);d=N(V,"\u2193"),V.forEach(b),z.forEach(b),B.forEach(b),h=M(S),g=I(S,"DIV",{class:!0});var ee=E(g);v=I(ee,"SPAN",{});var te=E(v);p=N(te,"\u2192"),te.forEach(b),ee.forEach(b),S.forEach(b),this.h()},h(){m(t,"class","key left svelte-1gdx3ae"),R(t,"active",l[4]==l[2]),m(a,"class","svelte-1gdx3ae"),m(s,"class","key up svelte-1gdx3ae"),R(s,"active",l[4]==l[0]),m(u,"class","svelte-1gdx3ae"),m(r,"class","key down svelte-1gdx3ae"),R(r,"active",l[4]==l[1]),m(c,"class","vert svelte-1gdx3ae"),m(g,"class","key right svelte-1gdx3ae"),R(g,"active",l[4]==l[3]),m(e,"class","phone-navigation svelte-1gdx3ae")},m(D,S){j(D,e,S),y(e,t),y(t,n),y(n,i),l[8](t),y(e,o),y(e,c),y(c,s),y(s,a),y(a,f),l[10](s),y(c,_),y(c,r),y(r,u),y(u,d),l[12](r),y(e,h),y(e,g),y(g,v),y(v,p),l[14](g),k||(w=[C(t,"touchstart",l[7],{passive:!0}),C(s,"touchstart",l[9],{passive:!0}),C(r,"touchstart",l[11],{passive:!0}),C(g,"touchstart",l[13],{passive:!0})],k=!0)},p(D,[S]){S&20&&R(t,"active",D[4]==D[2]),S&17&&R(s,"active",D[4]==D[0]),S&18&&R(r,"active",D[4]==D[1]),S&24&&R(g,"active",D[4]==D[3])},i:oe,o:oe,d(D){D&&b(e),l[8](null),l[10](null),l[12](null),l[14](null),k=!1,we(w)}}}function so(l,e,t){const n={UP:38,DOWN:40,LEFT:37,RIGHT:39};let i,o,c,s,a;function f(k,w){document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:w}));const D=setInterval(()=>document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:w})),150);t(4,a=k);function S(){clearInterval(D),t(4,a=""),k.removeEventListener("touchend",S,!1)}k.addEventListener("touchend",S,!1)}const _=()=>{f(c,n.LEFT)};function r(k){ve[k?"unshift":"push"](()=>{c=k,t(2,c)})}const u=()=>{f(i,n.UP)};function d(k){ve[k?"unshift":"push"](()=>{i=k,t(0,i)})}const h=()=>{f(o,n.DOWN)};function g(k){ve[k?"unshift":"push"](()=>{o=k,t(1,o)})}const v=()=>{f(s,n.RIGHT)};function p(k){ve[k?"unshift":"push"](()=>{s=k,t(3,s)})}return[i,o,c,s,a,n,f,_,r,u,d,h,g,v,p]}class ao extends ne{constructor(e){super(),ie(this,e,so,lo,re,{})}}function en(l,e,t){const n=l.slice();return n[34]=e[t],n}function tn(l){let e,t;return e=new vi({props:{avatars:l[5]}}),e.$on("finish",l[22]),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&32&&(o.avatars=n[5]),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function nn(l){let e,t,n;return t=new ki({props:{room:l[8],$$slots:{default:[co]},$$scope:{ctx:l}}}),{c(){e=A("div"),W(t.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0,role:!0});var o=E(e);Z(t.$$.fragment,o),o.forEach(b),this.h()},h(){m(e,"class","viewport svelte-pgjlfq"),m(e,"role","ui"),R(e,"pushed",l[10])},m(i,o){j(i,e,o),K(t,e,null),l[24](e),n=!0},p(i,o){const c={};o[0]&256&&(c.room=i[8]),o[0]&296|o[1]&64&&(c.$$scope={dirty:o,ctx:i}),t.$set(c),o[0]&1024&&R(e,"pushed",i[10])},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){i&&b(e),Q(t),l[24](null)}}}function co(l){let e,t,n,i,o,c,s,a;return e=new Ei({props:{players:l[3],currentRoomId:l[8]._id,avatars:l[5]}}),n=new Pi({props:{objects:ae(l[8],"objects",[])}}),o=new Ni({props:{zones:ae(l[8],"zones",[])}}),s=new Ki({props:{portals:ae(l[8],"portals",[])}}),s.$on("room",l[23]),{c(){W(e.$$.fragment),t=P(),W(n.$$.fragment),i=P(),W(o.$$.fragment),c=P(),W(s.$$.fragment)},l(f){Z(e.$$.fragment,f),t=M(f),Z(n.$$.fragment,f),i=M(f),Z(o.$$.fragment,f),c=M(f),Z(s.$$.fragment,f)},m(f,_){K(e,f,_),j(f,t,_),K(n,f,_),j(f,i,_),K(o,f,_),j(f,c,_),K(s,f,_),a=!0},p(f,_){const r={};_[0]&8&&(r.players=f[3]),_[0]&256&&(r.currentRoomId=f[8]._id),_[0]&32&&(r.avatars=f[5]),e.$set(r);const u={};_[0]&256&&(u.objects=ae(f[8],"objects",[])),n.$set(u);const d={};_[0]&256&&(d.zones=ae(f[8],"zones",[])),o.$set(d);const h={};_[0]&256&&(h.portals=ae(f[8],"portals",[])),s.$set(h)},i(f){a||(T(e.$$.fragment,f),T(n.$$.fragment,f),T(o.$$.fragment,f),T(s.$$.fragment,f),a=!0)},o(f){x(e.$$.fragment,f),x(n.$$.fragment,f),x(o.$$.fragment,f),x(s.$$.fragment,f),a=!1},d(f){Q(e,f),f&&b(t),Q(n,f),f&&b(i),Q(o,f),f&&b(c),Q(s,f)}}}function rn(l){let e,t;return e=new Ui({props:{soundFile:l[8].backgroundSound}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&256&&(o.soundFile=n[8].backgroundSound),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function uo(l){let e,t,n=l[2],i=[];for(let c=0;c<n.length;c+=1)i[c]=ln(en(l,n,c));const o=c=>x(i[c],1,1,()=>{i[c]=null});return{c(){for(let c=0;c<i.length;c+=1)i[c].c();e=H()},l(c){for(let s=0;s<i.length;s+=1)i[s].l(c);e=H()},m(c,s){for(let a=0;a<i.length;a+=1)i[a].m(c,s);j(c,e,s),t=!0},p(c,s){if(s[0]&12548){n=c[2];let a;for(a=0;a<n.length;a+=1){const f=en(c,n,a);i[a]?(i[a].p(f,s),T(i[a],1)):(i[a]=ln(f),i[a].c(),T(i[a],1),i[a].m(e.parentNode,e))}for(U(),a=n.length;a<i.length;a+=1)o(a);q()}},i(c){if(!t){for(let s=0;s<n.length;s+=1)T(i[s]);t=!0}},o(c){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)x(i[s]);t=!1},d(c){Le(i,c),c&&b(e)}}}function fo(l){let e,t;return e=new zn({props:{streamUrl:l[1].videoUrl,audioOnly:l[1].audioOnly,title:l[1].title}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&2&&(o.streamUrl=n[1].videoUrl),i[0]&2&&(o.audioOnly=n[1].audioOnly),i[0]&2&&(o.title=n[1].title),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function on(l){let e,t;return e=new zn({props:{streamUrl:l[34].videoUrl,audioOnly:l[34].audioOnly,title:l[34].title}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&4&&(o.streamUrl=n[34].videoUrl),i[0]&4&&(o.audioOnly=n[34].audioOnly),i[0]&4&&(o.title=n[34].title),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ln(l){let e,t,n=!l[12]&&(l[8]._id==l[34].parentArea._ref||l[13]._id==l[34].parentArea._ref)&&on(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,o){!i[12]&&(i[8]._id==i[34].parentArea._ref||i[13]._id==i[34].parentArea._ref)?n?(n.p(i,o),o[0]&12548&&T(n,1)):(n=on(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(U(),x(n,1,1,()=>{n=null}),q())},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function sn(l){let e,t;return e=new Sr({props:{roomIntent:l[14],roomTitle:l[7][l[14]].title}}),e.$on("room",l[25]),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&16384&&(o.roomIntent=n[14]),i[0]&16512&&(o.roomTitle=n[7][n[14]].title),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function an(l){let e,t;return e=new Mr({props:{objectIntent:l[15],objectTitle:l[8].objects.find(l[26]).title}}),e.$on("object",l[27]),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&32768&&(o.objectIntent=n[15]),i[0]&33024&&(o.objectTitle=n[8].objects.find(n[26]).title),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function cn(l){let e,t,n=l[6]&&un(l);return{c(){n&&n.c(),e=H()},l(i){n&&n.l(i),e=H()},m(i,o){n&&n.m(i,o),j(i,e,o),t=!0},p(i,o){i[6]?n?(n.p(i,o),o[0]&64&&T(n,1)):(n=un(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(U(),x(n,1,1,()=>{n=null}),q())},i(i){t||(T(n),t=!0)},o(i){x(n),t=!1},d(i){n&&n.d(i),i&&b(e)}}}function un(l){let e,t;return e=new Br({props:{text:l[6]}}),e.$on("close",l[28]),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&64&&(o.text=n[6]),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function fn(l){let e,t;return e=new Ir({props:{article:l[16]}}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&65536&&(o.article=n[16]),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function dn(l){let e,t;return e=new oo({props:{chatMessages:l[17].filter(l[29])}}),e.$on("submit",l[30]),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i[0]&131328&&(o.chatMessages=n[17].filter(n[29])),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function hn(l){let e,t;return e=new ao({}),{c(){W(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,i){K(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ho(l){let e,t,n=he(l[8],"backgroundSound.asset")&&l[11],i,o,c,s,a,f,_,r,u,d,h,g=l[9]==Ue.ONBOARDING&&tn(l),v=l[8]&&nn(l),p=n&&rn(l);const k=[fo,uo],w=[];function D(z,V){return!z[12]&&z[1]!=null?0:1}o=D(l),c=w[o]=k[o](l);let S=l[14]&&sn(l),F=l[15]&&an(l),L=!l[12]&&!l[10]&&!l[16]&&!l[14]&&!l[15]&&cn(l),B=l[16]&&fn(l),O=!l[12]&&!l[10]&&!l[16]&&dn(l),Y=l[18]&&!l[16]&&hn();return{c(){g&&g.c(),e=P(),v&&v.c(),t=P(),p&&p.c(),i=P(),c.c(),s=P(),S&&S.c(),a=P(),F&&F.c(),f=P(),L&&L.c(),_=P(),B&&B.c(),r=P(),O&&O.c(),u=P(),Y&&Y.c(),d=H()},l(z){g&&g.l(z),e=M(z),v&&v.l(z),t=M(z),p&&p.l(z),i=M(z),c.l(z),s=M(z),S&&S.l(z),a=M(z),F&&F.l(z),f=M(z),L&&L.l(z),_=M(z),B&&B.l(z),r=M(z),O&&O.l(z),u=M(z),Y&&Y.l(z),d=H()},m(z,V){g&&g.m(z,V),j(z,e,V),v&&v.m(z,V),j(z,t,V),p&&p.m(z,V),j(z,i,V),w[o].m(z,V),j(z,s,V),S&&S.m(z,V),j(z,a,V),F&&F.m(z,V),j(z,f,V),L&&L.m(z,V),j(z,_,V),B&&B.m(z,V),j(z,r,V),O&&O.m(z,V),j(z,u,V),Y&&Y.m(z,V),j(z,d,V),h=!0},p(z,V){z[9]==Ue.ONBOARDING?g?(g.p(z,V),V[0]&512&&T(g,1)):(g=tn(z),g.c(),T(g,1),g.m(e.parentNode,e)):g&&(U(),x(g,1,1,()=>{g=null}),q()),z[8]?v?(v.p(z,V),V[0]&256&&T(v,1)):(v=nn(z),v.c(),T(v,1),v.m(t.parentNode,t)):v&&(U(),x(v,1,1,()=>{v=null}),q()),V[0]&2304&&(n=he(z[8],"backgroundSound.asset")&&z[11]),n?p?(p.p(z,V),V[0]&2304&&T(p,1)):(p=rn(z),p.c(),T(p,1),p.m(i.parentNode,i)):p&&(U(),x(p,1,1,()=>{p=null}),q());let ee=o;o=D(z),o===ee?w[o].p(z,V):(U(),x(w[ee],1,1,()=>{w[ee]=null}),q(),c=w[o],c?c.p(z,V):(c=w[o]=k[o](z),c.c()),T(c,1),c.m(s.parentNode,s)),z[14]?S?(S.p(z,V),V[0]&16384&&T(S,1)):(S=sn(z),S.c(),T(S,1),S.m(a.parentNode,a)):S&&(U(),x(S,1,1,()=>{S=null}),q()),z[15]?F?(F.p(z,V),V[0]&32768&&T(F,1)):(F=an(z),F.c(),T(F,1),F.m(f.parentNode,f)):F&&(U(),x(F,1,1,()=>{F=null}),q()),!z[12]&&!z[10]&&!z[16]&&!z[14]&&!z[15]?L?(L.p(z,V),V[0]&119808&&T(L,1)):(L=cn(z),L.c(),T(L,1),L.m(_.parentNode,_)):L&&(U(),x(L,1,1,()=>{L=null}),q()),z[16]?B?(B.p(z,V),V[0]&65536&&T(B,1)):(B=fn(z),B.c(),T(B,1),B.m(r.parentNode,r)):B&&(U(),x(B,1,1,()=>{B=null}),q()),!z[12]&&!z[10]&&!z[16]?O?(O.p(z,V),V[0]&70656&&T(O,1)):(O=dn(z),O.c(),T(O,1),O.m(u.parentNode,u)):O&&(U(),x(O,1,1,()=>{O=null}),q()),z[18]&&!z[16]?Y?V[0]&327680&&T(Y,1):(Y=hn(),Y.c(),T(Y,1),Y.m(d.parentNode,d)):Y&&(U(),x(Y,1,1,()=>{Y=null}),q())},i(z){h||(T(g),T(v),T(p),T(c),T(S),T(F),T(L),T(B),T(O),T(Y),h=!0)},o(z){x(g),x(v),x(p),x(c),x(S),x(F),x(L),x(B),x(O),x(Y),h=!1},d(z){g&&g.d(z),z&&b(e),v&&v.d(z),z&&b(t),p&&p.d(z),z&&b(i),w[o].d(z),z&&b(s),S&&S.d(z),z&&b(a),F&&F.d(z),z&&b(f),L&&L.d(z),z&&b(_),B&&B.d(z),z&&b(r),O&&O.d(z),z&&b(u),Y&&Y.d(z),z&&b(d)}}}function _o(l,e,t){let n,i=oe,o=()=>(i(),i=Rn(V,$=>t(1,n=$)),V),c,s,a,f,_,r,u,d,h,g,v,p,k,w,D,S,F;X(l,Zn,$=>t(2,c=$)),X(l,In,$=>t(31,s=$)),X(l,Kn,$=>t(7,a=$)),X(l,Oe,$=>t(8,f=$)),X(l,Tn,$=>t(32,_=$)),X(l,lt,$=>t(21,r=$)),X(l,yn,$=>t(3,u=$)),X(l,Qe,$=>t(9,d=$)),X(l,wn,$=>t(10,h=$)),X(l,Qn,$=>t(11,g=$)),X(l,xe,$=>t(12,v=$)),X(l,Jn,$=>t(13,p=$)),X(l,Je,$=>t(14,k=$)),X(l,st,$=>t(15,w=$)),X(l,Ie,$=>t(16,D=$)),X(l,bn,$=>t(17,S=$)),X(l,Te,$=>t(18,F=$)),l.$$.on_destroy.push(()=>i());let L={},B=[],O=!1;const Y=async $=>{Me.set(!1),await ei(L);const _e=f._id,se=a[$];Oe.set(se),a[$].mainArea?history.replaceState(null,null," "):history.replaceState(null,null,"#"+ae(a[$],"slug.current",""));let be=$e(4,6),je=$e(4,6);if(se.portals&&se.portals.find(ke=>ke.targetArea._id===_e)){const ke=se.portals.find(xn=>xn.targetArea._id===_e);for(;be=$e(ke.x-2,ke.x+2),je=$e(ke.y-2,ke.y),be<1||je<1||be>se.dimensions.width||je>se.dimensions.height||be==ke.x&&be==ke.x;);}ti({id:se._id,x:be,y:je}),await ni(L),se.showTitles===!1?Me.set(!1):Me.set(!0),he(se,"introductionTexts")?t(6,O=se.introductionTexts):t(6,O=!1)},z=async($,_e)=>{let se={uuid:r.uuid,name:_&&_.name?_.name:$,shape:he(_,"avatar._ref")?_.avatar._ref:_e,onboarded:!0,room:f._id,x:$e(10,30),y:$e(5,15)};if(await ii(se),ye("\u2713 (4) Game server connected"),await ri(),ye("\u2713 (5) Keyboard initialized"),oi(),ye("\u2713 (6) Stream listener initialized"),window.location.hash){const be=window.location.hash.substring(1);for(const[je,ke]of Object.entries(a))if(ae(a[je],"slug.current","")===be){Y(je);break}}he(f,"introductionTexts")&&t(6,O=f.introductionTexts),ye("\u2713 (7) Show main room introduction"),ye("__ => App loaded"),Ve.set("open-eyebeam-name",$),Ve.set("open-eyebeam-avatar",_e),Qe.set(Ue.READY),xe.set(!0),setTimeout(()=>{xe.set(!1)},3e3),Te.set(vn())};ge(async()=>{ye("__ => App starting...");try{await ci()}catch(se){mn("Error in authentication:",se)}ye("\u2713 (1) Auth client configured "),Ve.get("open-eyebeam-logged-in")&&!s&&ui(),await Xn(),ye("\u2713 (2) World built");for(const[se,be]of Object.entries(a))if(a[se].mainArea){Oe.set(a[se]);break}t(5,B=await Yn()),ye("\u2713 (3) Avatars loaded"),lt.update(se=>(se.uuid=Wn(),se));let $=Ve.get("open-eyebeam-name"),_e=Ve.get("open-eyebeam-avatar");!$&&!s?Qe.set(Ue.ONBOARDING):z($,_e)});let{universalStream:V=tt({})}=e;o();function ee(){console.log("getting universal stream: ",c),V.set(c.filter($=>$.showEverywhere==!0)[0])}const te=$=>{z($.detail.name,$.detail.avatar)},ue=$=>{$.detail.roomId&&Y($.detail.roomId),Je.set(!1)};function Re($){ve[$?"unshift":"push"](()=>{L=$,t(4,L)})}const Se=$=>{$.detail.roomId&&Y(k),Je.set(!1)},De=$=>$._id==w,Ze=$=>{if($.detail.objectId){let _e=f.objects.find(se=>se._id==w);_e.contentType!="externalLink"?(console.log("object",_e),Ie.set(_e),st.set(!1)):window.open(_e.url,"_blank").focus()}},Ke=$=>{t(6,O=!1)},Ae=$=>$.room===f._id,jn=$=>{li($,f)};return l.$$set=$=>{"universalStream"in $&&o(t(0,V=$.universalStream))},l.$$.update=()=>{l.$$.dirty[0]&2097160&&u[r.uuid]&&(u[r.uuid].x||u[r.uuid].x)&&(si(),ai(),An()),l.$$.dirty[0]&4&&c&&ee(),l.$$.dirty[0]&2&&n&&ee(),l.$$.dirty[0]&2&&console.log("universal stream: ",n)},[V,n,c,u,L,B,O,a,f,d,h,g,v,p,k,w,D,S,F,Y,z,r,te,ue,Re,Se,De,Ze,Ke,Ae,jn]}class go extends ne{constructor(e){super(),ie(this,e,_o,ho,re,{universalStream:0},null,[-1,-1])}}export{go as default};
