import{S as ee,i as te,s as ne,e as I,k as O,c as T,a as E,m as P,d as b,_ as X,b as m,H as L,g as x,I as w,O as N,a1 as In,Q as we,t as H,h as B,E as se,R as Me,a2 as ve,v as be,l as G,Y as Tn,Z as En,a3 as Re,w as Y,x as W,y as Z,q as z,o as D,B as K,n as U,p as q,M as C,T as zn,U as jn,V as xn,W as Sn,J as _e,K as ce,a4 as ge,a5 as Ce,a6 as Ue,a7 as cn,F as He,G as Be,f as un,j as me,L as qe,a8 as Dn,u as $n}from"../chunks/index-aec5317e.js";import{K as Vn,e as Se,g as fn,s as Ge,r as Pe,j as ae,k as Ie,m as dn,n as On,o as hn,f as ie,q as _n,v as $e,G as he,d as De,c as Oe,w as Ke,b as Ae,B as Xe,x as Te,y as Ve,z as Ee,P as Pn,h as pe,C as Qe,D as Je,E as et,l as pn,F as Mn,H as mn,t as vn,I as Fn,J as Ln,L as gn,S as Ne,M as ye,N as Rn,O as Hn,Q as tt,R as Bn,u as Ye,T as Gn,U as Nn,V as Cn,W as xe,X as Un,Y as qn,Z as Xn,_ as We,$ as nt,a0 as Yn,a1 as Wn,p as Zn,a2 as Kn,a3 as Qn,a4 as Jn,a5 as ei}from"../chunks/movement-268b98ae.js";import{w as bn}from"../chunks/index-e233cb17.js";function ti(s,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in s)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}function Ze(s){return Math.pow(s-1,3)*(1-s)+1}const kn=bn(!1),yn=bn(!1);let Le={};const ni=async()=>new Promise((s,e)=>{Le=new Vn({url:"https://hello.undersco.re/auth/",realm:"undersco_re",clientId:"underscore_openeyebeam"}),Le.init({}).then(t=>{kn.set(t),t?(console.log("Authenticated"),Se.set("open-eyebeam-logged-in",!0),Le.loadUserProfile().then(async n=>{console.log("p",n);const r=await ri(n);yn.set(r)}).catch(()=>{fn("Failed to load user profile")}).finally(()=>{s()})):s()}).catch(t=>{console.log("error in auth ->",t),e(t)})}),ii=async()=>{Le.login({redirectUri:window.location.origin})},ri=s=>new Promise(async(e,t)=>{const n=new Headers;n.append("Content-Type","application/json");const r={method:"POST",headers:n,body:JSON.stringify(s),redirect:"follow"},o=await fetch("/api/update-user",r);if(!o.ok){const l=`An error has occured: ${o.status}`;throw new Error(l)}const u=await o.json();e(u)});function it(s,e,t){const n=s.slice();return n[5]=e[t],n[7]=t,n}function rt(s){let e,t,n,r,o,u,l;function a(...f){return s[3](s[5],...f)}return{c(){e=I("div"),t=I("img"),o=O(),this.h()},l(f){e=T(f,"DIV",{class:!0,tabindex:!0});var _=E(e);t=T(_,"IMG",{src:!0,alt:!0}),o=P(_),_.forEach(b),this.h()},h(){X(t.src,n=s[5].imageUrl)||m(t,"src",n),m(t,"alt",r=s[5].alt),m(e,"class","avatar svelte-i1o3ve"),m(e,"tabindex","0"),L(e,"selected",s[1]==s[5]._id)},m(f,_){x(f,e,_),w(e,t),w(e,o),u||(l=[N(e,"click",function(){In(s[2](s[5]))&&s[2](s[5]).apply(this,arguments)}),N(e,"keydown",a)],u=!0)},p(f,_){s=f,_&1&&!X(t.src,n=s[5].imageUrl)&&m(t,"src",n),_&1&&r!==(r=s[5].alt)&&m(t,"alt",r),_&3&&L(e,"selected",s[1]==s[5]._id)},d(f){f&&b(e),u=!1,we(l)}}}function oi(s){let e,t,n,r,o,u=s[0],l=[];for(let a=0;a<u.length;a+=1)l[a]=rt(it(s,u,a));return{c(){e=I("div"),t=I("div"),n=H("Select your avatar"),r=O(),o=I("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=T(a,"DIV",{class:!0});var f=E(e);t=T(f,"DIV",{});var _=E(t);n=B(_,"Select your avatar"),_.forEach(b),r=P(f),o=T(f,"DIV",{class:!0});var i=E(o);for(let c=0;c<l.length;c+=1)l[c].l(i);i.forEach(b),f.forEach(b),this.h()},h(){m(o,"class","inner svelte-i1o3ve"),m(e,"class","avatar-picker")},m(a,f){x(a,e,f),w(e,t),w(t,n),w(e,r),w(e,o);for(let _=0;_<l.length;_+=1)l[_].m(o,null)},p(a,[f]){if(f&7){u=a[0];let _;for(_=0;_<u.length;_+=1){const i=it(a,u,_);l[_]?l[_].p(i,f):(l[_]=rt(i),l[_].c(),l[_].m(o,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=u.length}},i:se,o:se,d(a){a&&b(e),Me(l,a)}}}function si(s,e,t){const n=ve();let{avatars:r=[]}=e,o=Ge(r)._id;be(async()=>{n("select",{id:o})});const u=a=>{t(1,o=a._id),n("select",{id:a._id})},l=(a,f)=>f.key==="Enter"&&u(a);return s.$$set=a=>{"avatars"in a&&t(0,r=a.avatars)},[r,o,u,l]}class li extends ee{constructor(e){super(),te(this,e,si,oi,ne,{avatars:0})}}function ot(s,e,t){const n=s.slice();return n[18]=e[t],n[20]=t,n}function st(s){let e,t=s[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=ct(ot(s,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=G()},l(r){for(let o=0;o<n.length;o+=1)n[o].l(r);e=G()},m(r,o){for(let u=0;u<n.length;u+=1)n[u].m(r,o);x(r,e,o)},p(r,o){if(o&102){t=r[1];let u;for(u=0;u<t.length;u+=1){const l=ot(r,t,u);n[u]?n[u].p(l,o):(n[u]=ct(l),n[u].c(),n[u].m(e.parentNode,e))}for(;u<n.length;u+=1)n[u].d(1);n.length=t.length}},d(r){Me(n,r),r&&b(e)}}}function lt(s){let e,t,n=Pe(ae(s[18],"content.content",[]))+"",r,o,u,l,a,f,_,i=s[20]===s[1].length-1&&s[5]&&at();return{c(){e=I("div"),t=new Tn(!1),r=O(),i&&i.c(),o=O(),u=I("button"),l=H("Next"),a=O(),this.h()},l(c){e=T(c,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var d=E(e);t=En(d,!1),r=P(d),i&&i.l(d),o=P(d),u=T(d,"BUTTON",{class:!0});var h=E(u);l=B(h,"Next"),h.forEach(b),a=P(d),d.forEach(b),this.h()},h(){t.a=r,m(u,"class","btn next svelte-1r2hhvy"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(c,d){x(c,e,d),t.m(n,e),w(e,r),i&&i.m(e,null),w(e,o),w(e,u),w(u,l),w(e,a),f||(_=[N(u,"click",s[6]),N(u,"keydown",s[8]),N(e,"keydown",s[9])],f=!0)},p(c,d){d&2&&n!==(n=Pe(ae(c[18],"content.content",[]))+"")&&t.p(n),c[20]===c[1].length-1&&c[5]?i||(i=at(),i.c(),i.m(e,o)):i&&(i.d(1),i=null)},d(c){c&&b(e),i&&i.d(),f=!1,we(_)}}}function at(s){let e,t,n;return{c(){e=I("p"),t=I("strong"),n=H("This website is best experienced on a laptop or desktop computer. Some content may not be accessible on phones or tablets.")},l(r){e=T(r,"P",{});var o=E(e);t=T(o,"STRONG",{});var u=E(t);n=B(u,"This website is best experienced on a laptop or desktop computer. Some content may not be accessible on phones or tablets."),u.forEach(b),o.forEach(b)},m(r,o){x(r,e,o),w(e,t),w(t,n)},d(r){r&&b(e)}}}function ct(s){let e,t=s[20]===s[2]&&lt(s);return{c(){t&&t.c(),e=G()},l(n){t&&t.l(n),e=G()},m(n,r){t&&t.m(n,r),x(n,e,r)},p(n,r){n[20]===n[2]?t?t.p(n,r):(t=lt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&b(e)}}}function ut(s){let e,t,n,r,o,u,l,a,f,_,i;return{c(){e=I("div"),t=I("div"),n=H("What would you like to be called?"),r=O(),o=I("div"),u=I("input"),l=O(),a=I("button"),f=H("Next"),this.h()},l(c){e=T(c,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var d=E(e);t=T(d,"DIV",{class:!0});var h=E(t);n=B(h,"What would you like to be called?"),h.forEach(b),r=P(d),o=T(d,"DIV",{class:!0});var g=E(o);u=T(g,"INPUT",{class:!0,type:!0,placeholder:!0,minlength:!0}),g.forEach(b),l=P(d),a=T(d,"BUTTON",{class:!0,tabindex:!0});var v=E(a);f=B(v,"Next"),v.forEach(b),d.forEach(b),this.h()},h(){m(t,"class","name svelte-1r2hhvy"),m(u,"class","name svelte-1r2hhvy"),m(u,"type","text"),m(u,"placeholder","Name"),u.autofocus=!0,m(u,"minlength","1"),m(o,"class","input-container"),m(a,"class","btn next svelte-1r2hhvy"),m(a,"tabindex","0"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(c,d){x(c,e,d),w(e,t),w(t,n),w(e,r),w(e,o),w(o,u),Re(u,s[3]),w(e,l),w(e,a),w(a,f),u.focus(),_||(i=[N(u,"input",s[10]),N(u,"keydown",s[11]),N(a,"keydown",s[12]),N(a,"click",s[6]),N(e,"keydown",s[13])],_=!0)},p(c,d){d&8&&u.value!==c[3]&&Re(u,c[3])},d(c){c&&b(e),_=!1,we(i)}}}function ft(s){let e,t,n,r,o,u,l,a,f;return n=new li({props:{avatars:s[0]}}),n.$on("select",s[14]),{c(){e=I("div"),t=I("div"),Y(n.$$.fragment),r=O(),o=I("div"),u=H("Enter"),this.h()},l(_){e=T(_,"DIV",{class:!0,"aria-live":!0,tabindex:!0});var i=E(e);t=T(i,"DIV",{class:!0});var c=E(t);W(n.$$.fragment,c),c.forEach(b),r=P(i),o=T(i,"DIV",{class:!0});var d=E(o);u=B(d,"Enter"),d.forEach(b),i.forEach(b),this.h()},h(){m(t,"class","name svelte-1r2hhvy"),m(o,"class","btn next svelte-1r2hhvy"),m(e,"class","slide"),m(e,"aria-live","polite"),m(e,"tabindex","0")},m(_,i){x(_,e,i),w(e,t),Z(n,t,null),w(e,r),w(e,o),w(o,u),l=!0,a||(f=[N(o,"click",s[7]),N(e,"keydown",s[15])],a=!0)},p(_,i){const c={};i&1&&(c.avatars=_[0]),n.$set(c)},i(_){l||(z(n.$$.fragment,_),l=!0)},o(_){D(n.$$.fragment,_),l=!1},d(_){_&&b(e),K(n),a=!1,we(f)}}}function ai(s){let e,t,n,r,o,u=s[1]&&st(s),l=s[2]===s[1].length&&ut(s),a=s[2]===s[1].length+1&&ft(s);return{c(){e=I("div"),t=I("div"),u&&u.c(),n=O(),l&&l.c(),r=O(),a&&a.c(),this.h()},l(f){e=T(f,"DIV",{class:!0});var _=E(e);t=T(_,"DIV",{class:!0});var i=E(t);u&&u.l(i),n=P(i),l&&l.l(i),r=P(i),a&&a.l(i),i.forEach(b),_.forEach(b),this.h()},h(){m(t,"class","box svelte-1r2hhvy"),m(e,"class","onboarding-screen svelte-1r2hhvy")},m(f,_){x(f,e,_),w(e,t),u&&u.m(t,null),w(t,n),l&&l.m(t,null),w(t,r),a&&a.m(t,null),o=!0},p(f,[_]){f[1]?u?u.p(f,_):(u=st(f),u.c(),u.m(t,n)):u&&(u.d(1),u=null),f[2]===f[1].length?l?l.p(f,_):(l=ut(f),l.c(),l.m(t,r)):l&&(l.d(1),l=null),f[2]===f[1].length+1?a?(a.p(f,_),_&6&&z(a,1)):(a=ft(f),a.c(),z(a,1),a.m(t,null)):a&&(U(),D(a,1,1,()=>{a=null}),q())},i(f){o||(z(a),o=!0)},o(f){D(a),o=!1},d(f){f&&b(e),u&&u.d(),l&&l.d(),a&&a.d()}}}function ci(s,e,t){let n;C(s,Ie,S=>t(5,n=S));const r=ve();let{avatars:o=[]}=e;Ie.set(dn());let u={},l=!1,a=0,f="",_="";const i=()=>t(2,a++,a),c=()=>{r("finish",{name:f,avatar:_})};be(async()=>{u=await On(),t(1,l=u.tutorialSlides)});const d=S=>S.key==="Enter"&&i,h=S=>S.key==="Enter"&&i();function g(){f=this.value,t(3,f)}const v=S=>S.key==="Enter"&&i(),p=S=>S.key==="Enter"&&i(),k=S=>S.key==="Enter"&&i(),y=S=>{t(4,_=S.detail.id)},j=S=>S.key==="Enter"&&c();return s.$$set=S=>{"avatars"in S&&t(0,o=S.avatars)},[o,l,a,f,_,n,i,c,d,h,g,v,p,k,y,j]}class ui extends ee{constructor(e){super(),te(this,e,ci,ai,ne,{avatars:0})}}function dt(s){let e,t;return{c(){e=I("video"),this.h()},l(n){e=T(n,"VIDEO",{src:!0,class:!0}),E(e).forEach(b),this.h()},h(){X(e.src,t=s[0].bgVideoUrl)||m(e,"src",t),e.autoplay=!0,e.loop=!0,e.muted=!0,m(e,"class","svelte-f2n19i")},m(n,r){x(n,e,r)},p(n,r){r&1&&!X(e.src,t=n[0].bgVideoUrl)&&m(e,"src",t)},d(n){n&&b(e)}}}function ht(s){let e,t;return{c(){e=I("iframe"),this.h()},l(n){e=T(n,"IFRAME",{id:!0,src:!0,class:!0}),E(e).forEach(b),this.h()},h(){m(e,"id","bg-iframe"),X(e.src,t=s[0].backgroundLink)||m(e,"src",t),m(e,"class","svelte-f2n19i")},m(n,r){x(n,e,r)},p(n,r){r&1&&!X(e.src,t=n[0].backgroundLink)&&m(e,"src",t)},d(n){n&&b(e)}}}function fi(s){let e,t,n,r,o;const u=s[3].default,l=zn(u,s,s[2],null);let a=s[0].bgVideoUrl&&dt(s),f=s[0].backgroundLink&&ht(s);return{c(){e=I("div"),l&&l.c(),t=O(),a&&a.c(),n=O(),f&&f.c(),this.h()},l(_){e=T(_,"DIV",{class:!0,id:!0,style:!0,"aria-live":!0});var i=E(e);l&&l.l(i),t=P(i),a&&a.l(i),n=P(i),f&&f.l(i),i.forEach(b),this.h()},h(){m(e,"class","room svelte-f2n19i"),m(e,"id","room"),m(e,"style",r=`${s[0].inlineStyles} ${s[1]}`),m(e,"aria-live","polite")},m(_,i){x(_,e,i),l&&l.m(e,null),w(e,t),a&&a.m(e,null),w(e,n),f&&f.m(e,null),o=!0},p(_,[i]){l&&l.p&&(!o||i&4)&&jn(l,u,_,_[2],o?Sn(u,_[2],i,null):xn(_[2]),null),_[0].bgVideoUrl?a?a.p(_,i):(a=dt(_),a.c(),a.m(e,n)):a&&(a.d(1),a=null),_[0].backgroundLink?f?f.p(_,i):(f=ht(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!o||i&3&&r!==(r=`${_[0].inlineStyles} ${_[1]}`))&&m(e,"style",r)},i(_){o||(z(l,_),o=!0)},o(_){D(l,_),o=!1},d(_){_&&b(e),l&&l.d(_),a&&a.d(),f&&f.d()}}}function di(s,e,t){let n;C(s,hn,l=>t(1,n=l));let{$$slots:r={},$$scope:o}=e,{room:u={}}=e;return s.$$set=l=>{"room"in l&&t(0,u=l.room),"$$scope"in l&&t(2,o=l.$$scope)},[u,n,o,r]}class hi extends ee{constructor(e){super(),te(this,e,di,fi,ne,{room:0})}}function _i(s){let e,t,n,r,o,u,l,a;return{c(){e=I("div"),t=I("img"),this.h()},l(f){e=T(f,"DIV",{class:!0,id:!0,alt:!0,style:!0,role:!0});var _=E(e);t=T(_,"IMG",{src:!0,alt:!0,class:!0}),_.forEach(b),this.h()},h(){X(t.src,n=s[4]&&s[4].imageUrl?s[4].imageUrl:Ge(s[1]).imageUrl)||m(t,"src",n),m(t,"alt",r=s[4].alt),m(t,"class","svelte-evpsr2"),m(e,"class","avatar svelte-evpsr2"),m(e,"id",s[2]),m(e,"alt",o=s[0].name),m(e,"style",u="transform: translateY("+s[5]+"px) translateX("+s[6]+"px)"),m(e,"role","uiitem"),L(e,"shown",!s[7]||s[0].self),L(e,"self",s[0].self),L(e,"blinking",s[7]&&s[0].self)},m(f,_){x(f,e,_),w(e,t),s[9](e),a=!0},p(f,[_]){(!a||_&18&&!X(t.src,n=f[4]&&f[4].imageUrl?f[4].imageUrl:Ge(f[1]).imageUrl))&&m(t,"src",n),(!a||_&16&&r!==(r=f[4].alt))&&m(t,"alt",r),(!a||_&4)&&m(e,"id",f[2]),(!a||_&1&&o!==(o=f[0].name))&&m(e,"alt",o),(!a||_&96&&u!==(u="transform: translateY("+f[5]+"px) translateX("+f[6]+"px)"))&&m(e,"style",u),_&129&&L(e,"shown",!f[7]||f[0].self),_&1&&L(e,"self",f[0].self),_&129&&L(e,"blinking",f[7]&&f[0].self)},i(f){a||(_e(()=>{l||(l=ce(e,ie,{},!0)),l.run(1)}),a=!0)},o(f){l||(l=ce(e,ie,{},!1)),l.run(0),a=!1},d(f){f&&b(e),s[9](null),f&&l&&l.end()}}}function pi(s,e,t){let n,r,o;C(s,Ie,y=>t(12,n=y)),C(s,_n,y=>t(8,r=y)),C(s,$e,y=>t(7,o=y));let u={},l={};const a=y=>{u.popper&&(u.hide(),u.destroy(),clearTimeout(l)),c&&c.nodeName&&(u=tippy(c,{content:y.text,arrow:!1,offset:[0,5],sticky:!0,animation:"fade",inertia:!0,theme:"chat",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}),u.show(),l=setTimeout(()=>{u.hide(),setTimeout(()=>{u.destroy()},500)},4e3))};let{player:f={}}=e,{avatars:_=[]}=e,{key:i=""}=e,c={},d=_.find(y=>y._id===f.shape);d===void 0&&(d=Ge(_));let h,g;const v=()=>{if(c&&c.parentElement){let y=c.getBoundingClientRect();if(y.left<(n?40:100)||y.top<(n?120:100)||y.right>window.innerWidth-(n?40:100)||y.bottom>window.innerHeight-(n?180:100))return!0}return!1},p=()=>{hn.set(`transform: translateX(-${g}px) translateY(-${h}px);`)};be(async()=>{f.self||tippy(c,{content:f.name,arrow:!1,offset:[0,5],theme:"name",hideOnClick:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}),f.self&&p()});function k(y){ge[y?"unshift":"push"](()=>{c=y,t(3,c)})}return s.$$set=y=>{"player"in y&&t(0,f=y.player),"avatars"in y&&t(1,_=y.avatars),"key"in y&&t(2,i=y.key)},s.$$.update=()=>{if(s.$$.dirty&260){let y=r[r.length-1];y&&y.uuid==i&&Date.now()-y.timestamp<5e3&&a(y)}s.$$.dirty&1&&(t(5,h=f.y*he),t(6,g=f.x*he)),s.$$.dirty&1&&f.self&&(f.x||f.y)&&v()&&p()},[f,_,i,c,d,h,g,o,r,k]}class mi extends ee{constructor(e){super(),te(this,e,pi,_i,ne,{player:0,avatars:1,key:2})}}function _t(s,e,t){const n=s.slice();return n[3]=e[t][0],n[4]=e[t][1],n}function pt(s){let e,t;return e=new mi({props:{player:s[4],key:s[3],avatars:s[2]}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r&1&&(o.player=n[4]),r&1&&(o.key=n[3]),r&4&&(o.avatars=n[2]),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function mt(s,e){let t,n,r,o=e[4].room===e[1]&&!e[4].inTransit&&pt(e);return{key:s,first:null,c(){t=G(),o&&o.c(),n=G(),this.h()},l(u){t=G(),o&&o.l(u),n=G(),this.h()},h(){this.first=t},m(u,l){x(u,t,l),o&&o.m(u,l),x(u,n,l),r=!0},p(u,l){e=u,e[4].room===e[1]&&!e[4].inTransit?o?(o.p(e,l),l&3&&z(o,1)):(o=pt(e),o.c(),z(o,1),o.m(n.parentNode,n)):o&&(U(),D(o,1,1,()=>{o=null}),q())},i(u){r||(z(o),r=!0)},o(u){D(o),r=!1},d(u){u&&b(t),o&&o.d(u),u&&b(n)}}}function vi(s){let e,t=[],n=new Map,r,o=Object.entries(s[0]);const u=l=>l[3];for(let l=0;l<o.length;l+=1){let a=_t(s,o,l),f=u(a);n.set(f,t[l]=mt(f,a))}return{c(){e=I("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(l,a){x(l,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);r=!0},p(l,[a]){a&7&&(o=Object.entries(l[0]),U(),t=Ce(t,a,u,1,l,o,n,e,Ue,mt,null,_t),q())},i(l){if(!r){for(let a=0;a<o.length;a+=1)z(t[a]);r=!0}},o(l){for(let a=0;a<t.length;a+=1)D(t[a]);r=!1},d(l){l&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function gi(s,e,t){let{players:n={}}=e,{currentRoomId:r=""}=e,{avatars:o=[]}=e;return s.$$set=u=>{"players"in u&&t(0,n=u.players),"currentRoomId"in u&&t(1,r=u.currentRoomId),"avatars"in u&&t(2,o=u.avatars)},[n,r,o]}class bi extends ee{constructor(e){super(),te(this,e,gi,vi,ne,{players:0,currentRoomId:1,avatars:2})}}function ki(s){let e,t,n,r;return t=new Xe({props:{blocks:s[0].content.content}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0,style:!0});var u=E(e);W(t.$$.fragment,u),u.forEach(b),this.h()},h(){m(e,"class","object svelte-y80ji7"),m(e,"style",s[2]),L(e,"static",s[0].static)},m(o,u){x(o,e,u),Z(t,e,null),r=!0},p(o,u){const l={};u&1&&(l.blocks=o[0].content.content),t.$set(l),u&1&&L(e,"static",o[0].static)},i(o){r||(z(t.$$.fragment,o),_e(()=>{n||(n=ce(e,ie,{},!0)),n.run(1)}),r=!0)},o(o){D(t.$$.fragment,o),n||(n=ce(e,ie,{},!1)),n.run(0),r=!1},d(o){o&&b(e),K(t),o&&n&&n.end()}}}function yi(s){let e,t,n,r,o,u,l,a=s[0].iconImage&&vt(s);return{c(){e=I("div"),a&&a.c(),this.h()},l(f){e=T(f,"DIV",{class:!0,id:!0,style:!0,tabindex:!0,"aria-label":!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","object svelte-y80ji7"),m(e,"id",t=s[0]._id),m(e,"style",s[2]),m(e,"tabindex","0"),m(e,"aria-label",n=s[0].static?"A static image of a "+s[0].title:"Inspect "+s[0].title),m(e,"role","uiitem"),L(e,"static",s[0].static),L(e,"image",s[0].iconImage)},m(f,_){x(f,e,_),a&&a.m(e,null),s[6](e),o=!0,u||(l=[N(e,"click",Ai),N(e,"keydown",s[3])],u=!0)},p(f,_){f[0].iconImage?a?a.p(f,_):(a=vt(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n=f[0].static?"A static image of a "+f[0].title:"Inspect "+f[0].title))&&m(e,"aria-label",n),_&1&&L(e,"static",f[0].static),_&1&&L(e,"image",f[0].iconImage)},i(f){o||(_e(()=>{r||(r=ce(e,ie,{},!0)),r.run(1)}),o=!0)},o(f){r||(r=ce(e,ie,{},!1)),r.run(0),o=!1},d(f){f&&b(e),a&&a.d(),s[6](null),f&&r&&r.end(),u=!1,we(l)}}}function vt(s){let e,t,n;return{c(){e=I("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){X(e.src,t=Te(s[0].iconImage).quality(100).height(300).url())||m(e,"src",t),m(e,"alt",n=s[0].alt),m(e,"class","svelte-y80ji7")},m(r,o){x(r,e,o)},p(r,o){o&1&&!X(e.src,t=Te(r[0].iconImage).quality(100).height(300).url())&&m(e,"src",t),o&1&&n!==(n=r[0].alt)&&m(e,"alt",n)},d(r){r&&b(e)}}}function wi(s){let e,t,n,r;const o=[yi,ki],u=[];function l(a,f){return a[0].iframeEmbed?a[0].externalLink?-1:1:0}return~(e=l(s))&&(t=u[e]=o[e](s)),{c(){t&&t.c(),n=G()},l(a){t&&t.l(a),n=G()},m(a,f){~e&&u[e].m(a,f),x(a,n,f),r=!0},p(a,[f]){let _=e;e=l(a),e===_?~e&&u[e].p(a,f):(t&&(U(),D(u[_],1,1,()=>{u[_]=null}),q()),~e?(t=u[e],t?t.p(a,f):(t=u[e]=o[e](a),t.c()),z(t,1),t.m(n.parentNode,n)):t=null)},i(a){r||(z(t),r=!0)},o(a){D(t),r=!1},d(a){~e&&u[e].d(a),a&&b(n)}}}const Ai=()=>{};function Ii(s,e,t){let n,r;C(s,De,v=>t(7,n=v)),C(s,Oe,v=>t(5,r=v));let{object:o={}}=e,u={},l={},a=o.y*he,f=o.x*he,_=ae(o,"dimensions.width",1)*he,i=ae(o,"dimensions.height",1)*he;const c=`transform: translateY(${a}px) translateX(${f}px); width: ${_}px; height: ${i}px;`;be(async()=>{const v=Ke;v.content=o.title,v.appendTo=u.parentElement,v.theme=o.static?"static":"name",t(4,l=tippy(u,v))});const d=ve();function h(v){v.key==="Enter"&&!o.static&&!o.contentType=="externalLink"&&(d("object",{objectId:o._id}),Ae.set(n.objects.find(p=>p._id==o._id))),v.key==="Enter"&&o.contentType==="externalLink"&&window.open(o.url,"_blank").focus()}function g(v){ge[v?"unshift":"push"](()=>{u=v,t(1,u)})}return s.$$set=v=>{"object"in v&&t(0,o=v.object)},s.$$.update=()=>{s.$$.dirty&48&&l.popper&&(r?l.show():l.hide()),s.$$.dirty&1},[o,u,c,h,l,r,g]}class Ti extends ee{constructor(e){super(),te(this,e,Ii,wi,ne,{object:0})}}function gt(s,e,t){const n=s.slice();return n[2]=e[t],n}function bt(s){let e,t=[],n=new Map,r,o=s[0];const u=l=>l[2]._id;for(let l=0;l<o.length;l+=1){let a=gt(s,o,l),f=u(a);n.set(f,t[l]=kt(f,a))}return{c(){e=I("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(l,a){x(l,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);r=!0},p(l,a){a&1&&(o=l[0],U(),t=Ce(t,a,u,1,l,o,n,e,Ue,kt,null,gt),q())},i(l){if(!r){for(let a=0;a<o.length;a+=1)z(t[a]);r=!0}},o(l){for(let a=0;a<t.length;a+=1)D(t[a]);r=!1},d(l){l&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function kt(s,e){let t,n,r;return n=new Ti({props:{object:e[2]}}),{key:s,first:null,c(){t=G(),Y(n.$$.fragment),this.h()},l(o){t=G(),W(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,u){x(o,t,u),Z(n,o,u),r=!0},p(o,u){e=o;const l={};u&1&&(l.object=e[2]),n.$set(l)},i(o){r||(z(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&b(t),K(n,o)}}}function Ei(s){let e,t,n=!s[1]&&bt(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,[o]){r[1]?n&&(U(),D(n,1,1,()=>{n=null}),q()):n?(n.p(r,o),o&2&&z(n,1)):(n=bt(r),n.c(),z(n,1),n.m(e.parentNode,e))},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function zi(s,e,t){let n;C(s,$e,o=>t(1,n=o));let{objects:r={}}=e;return s.$$set=o=>{"objects"in o&&t(0,r=o.objects)},[r,n]}class ji extends ee{constructor(e){super(),te(this,e,zi,Ei,ne,{objects:0})}}function xi(s){let e,t;return{c(){e=I("img"),this.h()},l(n){e=T(n,"IMG",{src:!0,class:!0}),this.h()},h(){X(e.src,t=Te(s[0].backgroundImage).quality(100).url())||m(e,"src",t),m(e,"class","svelte-8z8z6b")},m(n,r){x(n,e,r)},p(n,r){r&1&&!X(e.src,t=Te(n[0].backgroundImage).quality(100).url())&&m(e,"src",t)},d(n){n&&b(e)}}}function Si(s){let e,t;return{c(){e=I("video"),this.h()},l(n){e=T(n,"VIDEO",{src:!0,class:!0}),E(e).forEach(b),this.h()},h(){X(e.src,t=s[0].bgVideoUrl)||m(e,"src",t),e.autoplay=!0,e.loop=!0,e.muted=!0,m(e,"class","svelte-8z8z6b")},m(n,r){x(n,e,r)},p(n,r){r&1&&!X(e.src,t=n[0].bgVideoUrl)&&m(e,"src",t)},d(n){n&&b(e)}}}function Di(s){let e,t,n,r,o;function u(f,_){if(f[0].bgVideoUrl)return Si;if(f[0].backgroundImage)return xi}let l=u(s),a=l&&l(s);return{c(){e=I("div"),a&&a.c(),this.h()},l(f){e=T(f,"DIV",{class:!0,id:!0,alt:!0,style:!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","zone svelte-8z8z6b"),m(e,"id",t=s[0]._id),m(e,"alt",n=s[0].title),m(e,"style",s[2]),m(e,"role","uiitem")},m(f,_){x(f,e,_),a&&a.m(e,null),s[5](e),o=!0},p(f,[_]){l===(l=u(f))&&a?a.p(f,_):(a&&a.d(1),a=l&&l(f),a&&(a.c(),a.m(e,null))),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n=f[0].title))&&m(e,"alt",n)},i(f){o||(_e(()=>{r||(r=ce(e,ie,{},!0)),r.run(1)}),o=!0)},o(f){r||(r=ce(e,ie,{},!1)),r.run(0),o=!1},d(f){f&&b(e),a&&a.d(),s[5](null),f&&r&&r.end()}}}function $i(s,e,t){let n;C(s,Oe,d=>t(4,n=d));let{zone:r={}}=e,o={},u={},l=r.y*he,a=r.x*he,f=ae(r,"dimensions.width",1)*he,_=ae(r,"dimensions.height",1)*he;const i=`transform: translateY(${l}px) translateX(${a}px); width: ${f}px; height: ${_}px;};`;be(async()=>{const d=Ke;d.content=r.title,d.appendTo=o.parentElement,d.theme="name",t(3,u=tippy(o,d))});function c(d){ge[d?"unshift":"push"](()=>{o=d,t(1,o)})}return s.$$set=d=>{"zone"in d&&t(0,r=d.zone)},s.$$.update=()=>{s.$$.dirty&24&&u.popper&&(n?u.show():u.hide())},[r,o,i,u,n,c]}class Vi extends ee{constructor(e){super(),te(this,e,$i,Di,ne,{zone:0})}}function yt(s,e,t){const n=s.slice();return n[2]=e[t],n}function wt(s){let e,t=[],n=new Map,r,o=s[0];const u=l=>l[2]._id;for(let l=0;l<o.length;l+=1){let a=yt(s,o,l),f=u(a);n.set(f,t[l]=At(f,a))}return{c(){e=I("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"DIV",{role:!0});var a=E(e);for(let f=0;f<t.length;f+=1)t[f].l(a);a.forEach(b),this.h()},h(){m(e,"role","group")},m(l,a){x(l,e,a);for(let f=0;f<t.length;f+=1)t[f].m(e,null);r=!0},p(l,a){a&1&&(o=l[0],U(),t=Ce(t,a,u,1,l,o,n,e,Ue,At,null,yt),q())},i(l){if(!r){for(let a=0;a<o.length;a+=1)z(t[a]);r=!0}},o(l){for(let a=0;a<t.length;a+=1)D(t[a]);r=!1},d(l){l&&b(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function At(s,e){let t,n,r;return n=new Vi({props:{zone:e[2]}}),{key:s,first:null,c(){t=G(),Y(n.$$.fragment),this.h()},l(o){t=G(),W(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,u){x(o,t,u),Z(n,o,u),r=!0},p(o,u){e=o;const l={};u&1&&(l.zone=e[2]),n.$set(l)},i(o){r||(z(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&b(t),K(n,o)}}}function Oi(s){let e,t,n=!s[1]&&wt(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,[o]){r[1]?n&&(U(),D(n,1,1,()=>{n=null}),q()):n?(n.p(r,o),o&2&&z(n,1)):(n=wt(r),n.c(),z(n,1),n.m(e.parentNode,e))},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function Pi(s,e,t){let n;C(s,$e,o=>t(1,n=o));let{zones:r={}}=e;return s.$$set=o=>{"zones"in o&&t(0,r=o.zones)},[r,n]}class Mi extends ee{constructor(e){super(),te(this,e,Pi,Oi,ne,{zones:0})}}var wn={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(s){(function(){var e=function(){this.init()};e.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var c=this||t;if(i=parseFloat(i),c.ctx||_(),typeof i!="undefined"&&i>=0&&i<=1){if(c._volume=i,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var h=c._howls[d]._getSoundIds(),g=0;g<h.length;g++){var v=c._howls[d]._soundById(h[g]);v&&v._node&&(v._node.volume=v._volume*i)}return c}return c._volume},mute:function(i){var c=this||t;c.ctx||_(),c._muted=i,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(i?0:c._volume,t.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var h=c._howls[d]._getSoundIds(),g=0;g<h.length;g++){var v=c._howls[d]._soundById(h[g]);v&&v._node&&(v._node.muted=i?!0:v._muted)}return c},stop:function(){for(var i=this||t,c=0;c<i._howls.length;c++)i._howls[c].stop();return i},unload:function(){for(var i=this||t,c=i._howls.length-1;c>=0;c--)i._howls[c].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close!="undefined"&&(i.ctx.close(),i.ctx=null,_()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio!="undefined")try{var c=new Audio;typeof c.oncanplaythrough=="undefined"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var c=new Audio;c.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,c=null;try{c=typeof Audio!="undefined"?new Audio:null}catch{return i}if(!c||typeof c.canPlayType!="function")return i;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),h=i._navigator?i._navigator.userAgent:"",g=h.match(/OPR\/([0-6].)/g),v=g&&parseInt(g[0].split("/")[1],10)<33,p=h.indexOf("Safari")!==-1&&h.indexOf("Chrome")===-1,k=h.match(/Version\/(.*?) /),y=p&&k&&parseInt(k[1],10)<15;return i._codecs={mp3:!!(!v&&(d||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var c=function(d){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var h=new Audio;h._unlocked=!0,i._releaseHtml5Audio(h)}catch{i.noAudio=!0;break}for(var g=0;g<i._howls.length;g++)if(!i._howls[g]._webAudio)for(var v=i._howls[g]._getSoundIds(),p=0;p<v.length;p++){var k=i._howls[g]._soundById(v[p]);k&&k._node&&!k._node._unlocked&&(k._node._unlocked=!0,k._node.load())}i._autoResume();var y=i.ctx.createBufferSource();y.buffer=i._scratchBuffer,y.connect(i.ctx.destination),typeof y.start=="undefined"?y.noteOn(0):y.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),y.onended=function(){y.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var j=0;j<i._howls.length;j++)i._howls[j]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise!="undefined"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var c=this||t;return i._unlocked&&c._html5AudioPool.push(i),c},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var c=0;c<i._howls.length;c++)if(i._howls[c]._webAudio){for(var d=0;d<i._howls[c]._sounds.length;d++)if(!i._howls[c]._sounds[d]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(!!i.autoSuspend){i._suspendTimer=null,i.state="suspending";var h=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(h,h)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume=="undefined"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var c=0;c<i._howls.length;c++)i._howls[c]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new e,n=function(i){var c=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(i)};n.prototype={init:function(i){var c=this;return t.ctx||_(),c._autoplay=i.autoplay||!1,c._format=typeof i.format!="string"?i.format:[i.format],c._html5=i.html5||!1,c._muted=i.mute||!1,c._loop=i.loop||!1,c._pool=i.pool||5,c._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,c._rate=i.rate||1,c._sprite=i.sprite||{},c._src=typeof i.src!="string"?i.src:[i.src],c._volume=i.volume!==void 0?i.volume:1,c._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=i.onend?[{fn:i.onend}]:[],c._onfade=i.onfade?[{fn:i.onfade}]:[],c._onload=i.onload?[{fn:i.onload}]:[],c._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],c._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],c._onpause=i.onpause?[{fn:i.onpause}]:[],c._onplay=i.onplay?[{fn:i.onplay}]:[],c._onstop=i.onstop?[{fn:i.onstop}]:[],c._onmute=i.onmute?[{fn:i.onmute}]:[],c._onvolume=i.onvolume?[{fn:i.onvolume}]:[],c._onrate=i.onrate?[{fn:i.onrate}]:[],c._onseek=i.onseek?[{fn:i.onseek}]:[],c._onunlock=i.onunlock?[{fn:i.onunlock}]:[],c._onresume=[],c._webAudio=t.usingWebAudio&&!c._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var i=this,c=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var d=0;d<i._src.length;d++){var h,g;if(i._format&&i._format[d])h=i._format[d];else{if(g=i._src[d],typeof g!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}h=/^data:audio\/([^;,]+);/i.exec(g),h||(h=/\.([^.]+)$/.exec(g.split("?",1)[0])),h&&(h=h[1].toLowerCase())}if(h||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),h&&t.codecs(h)){c=i._src[d];break}}if(!c){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=c,i._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new r(i),i._webAudio&&u(i),i},play:function(i,c){var d=this,h=null;if(typeof i=="number")h=i,i=null;else{if(typeof i=="string"&&d._state==="loaded"&&!d._sprite[i])return null;if(typeof i=="undefined"&&(i="__default",!d._playLock)){for(var g=0,v=0;v<d._sounds.length;v++)d._sounds[v]._paused&&!d._sounds[v]._ended&&(g++,h=d._sounds[v]._id);g===1?i=null:h=null}}var p=h?d._soundById(h):d._inactiveSound();if(!p)return null;if(h&&!i&&(i=p._sprite||"__default"),d._state!=="loaded"){p._sprite=i,p._ended=!1;var k=p._id;return d._queue.push({event:"play",action:function(){d.play(k)}}),k}if(h&&!p._paused)return c||d._loadQueue("play"),p._id;d._webAudio&&t._autoResume();var y=Math.max(0,p._seek>0?p._seek:d._sprite[i][0]/1e3),j=Math.max(0,(d._sprite[i][0]+d._sprite[i][1])/1e3-y),S=j*1e3/Math.abs(p._rate),M=d._sprite[i][0]/1e3,F=(d._sprite[i][0]+d._sprite[i][1])/1e3;p._sprite=i,p._ended=!1;var R=function(){p._paused=!1,p._seek=y,p._start=M,p._stop=F,p._loop=!!(p._loop||d._sprite[i][2])};if(y>=F){d._ended(p);return}var A=p._node;if(d._webAudio){var V=function(){d._playLock=!1,R(),d._refreshBuffer(p);var J=p._muted||d._muted?0:p._volume;A.gain.setValueAtTime(J,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof A.bufferSource.start=="undefined"?p._loop?A.bufferSource.noteGrainOn(0,y,86400):A.bufferSource.noteGrainOn(0,y,j):p._loop?A.bufferSource.start(0,y,86400):A.bufferSource.start(0,y,j),S!==1/0&&(d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S)),c||setTimeout(function(){d._emit("play",p._id),d._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?V():(d._playLock=!0,d.once("resume",V),d._clearTimer(p._id))}else{var Q=function(){A.currentTime=y,A.muted=p._muted||d._muted||t._muted||A.muted,A.volume=p._volume*t.volume(),A.playbackRate=p._rate;try{var J=A.play();if(J&&typeof Promise!="undefined"&&(J instanceof Promise||typeof J.then=="function")?(d._playLock=!0,R(),J.then(function(){d._playLock=!1,A._unlocked=!0,c?d._loadQueue():d._emit("play",p._id)}).catch(function(){d._playLock=!1,d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):c||(d._playLock=!1,R(),d._emit("play",p._id)),A.playbackRate=p._rate,A.paused){d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||p._loop?d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),S):(d._endTimers[p._id]=function(){d._ended(p),A.removeEventListener("ended",d._endTimers[p._id],!1)},A.addEventListener("ended",d._endTimers[p._id],!1))}catch(fe){d._emit("playerror",p._id,fe)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=d._src,A.load());var re=window&&window.ejecta||!A.readyState&&t._navigator.isCocoonJS;if(A.readyState>=3||re)Q();else{d._playLock=!0,d._state="loading";var le=function(){d._state="loaded",Q(),A.removeEventListener(t._canPlayEvent,le,!1)};A.addEventListener(t._canPlayEvent,le,!1),d._clearTimer(p._id)}}return p._id},pause:function(i){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(i)}}),c;for(var d=c._getSoundIds(i),h=0;h<d.length;h++){c._clearTimer(d[h]);var g=c._soundById(d[h]);if(g&&!g._paused&&(g._seek=c.seek(d[h]),g._rateSeek=0,g._paused=!0,c._stopFade(d[h]),g._node))if(c._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop=="undefined"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),c._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||c._emit("pause",g?g._id:null)}return c},stop:function(i,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(i)}}),d;for(var h=d._getSoundIds(i),g=0;g<h.length;g++){d._clearTimer(h[g]);var v=d._soundById(h[g]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,d._stopFade(h[g]),v._node&&(d._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop=="undefined"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&d._clearSound(v._node))),c||d._emit("stop",v._id))}return d},mute:function(i,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(i,c)}}),d;if(typeof c=="undefined")if(typeof i=="boolean")d._muted=i;else return d._muted;for(var h=d._getSoundIds(c),g=0;g<h.length;g++){var v=d._soundById(h[g]);v&&(v._muted=i,v._interval&&d._stopFade(v._id),d._webAudio&&v._node?v._node.gain.setValueAtTime(i?0:v._volume,t.ctx.currentTime):v._node&&(v._node.muted=t._muted?!0:i),d._emit("mute",v._id))}return d},volume:function(){var i=this,c=arguments,d,h;if(c.length===0)return i._volume;if(c.length===1||c.length===2&&typeof c[1]=="undefined"){var g=i._getSoundIds(),v=g.indexOf(c[0]);v>=0?h=parseInt(c[0],10):d=parseFloat(c[0])}else c.length>=2&&(d=parseFloat(c[0]),h=parseInt(c[1],10));var p;if(typeof d!="undefined"&&d>=0&&d<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,c)}}),i;typeof h=="undefined"&&(i._volume=d),h=i._getSoundIds(h);for(var k=0;k<h.length;k++)p=i._soundById(h[k]),p&&(p._volume=d,c[2]||i._stopFade(h[k]),i._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(d,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=d*t.volume()),i._emit("volume",p._id))}else return p=h?i._soundById(h):i._sounds[0],p?p._volume:0;return i},fade:function(i,c,d,h){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(i,c,d,h)}}),g;i=Math.min(Math.max(0,parseFloat(i)),1),c=Math.min(Math.max(0,parseFloat(c)),1),d=parseFloat(d),g.volume(i,h);for(var v=g._getSoundIds(h),p=0;p<v.length;p++){var k=g._soundById(v[p]);if(k){if(h||g._stopFade(v[p]),g._webAudio&&!k._muted){var y=t.ctx.currentTime,j=y+d/1e3;k._volume=i,k._node.gain.setValueAtTime(i,y),k._node.gain.linearRampToValueAtTime(c,j)}g._startFadeInterval(k,i,c,d,v[p],typeof h=="undefined")}}return g},_startFadeInterval:function(i,c,d,h,g,v){var p=this,k=c,y=d-c,j=Math.abs(y/.01),S=Math.max(4,j>0?h/j:h),M=Date.now();i._fadeTo=d,i._interval=setInterval(function(){var F=(Date.now()-M)/h;M=Date.now(),k+=y*F,k=Math.round(k*100)/100,y<0?k=Math.max(d,k):k=Math.min(d,k),p._webAudio?i._volume=k:p.volume(k,i._id,!0),v&&(p._volume=k),(d<c&&k<=d||d>c&&k>=d)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,p.volume(d,i._id),p._emit("fade",i._id))},S)},_stopFade:function(i){var c=this,d=c._soundById(i);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(d._interval),d._interval=null,c.volume(d._fadeTo,i),d._fadeTo=null,c._emit("fade",i)),c},loop:function(){var i=this,c=arguments,d,h,g;if(c.length===0)return i._loop;if(c.length===1)if(typeof c[0]=="boolean")d=c[0],i._loop=d;else return g=i._soundById(parseInt(c[0],10)),g?g._loop:!1;else c.length===2&&(d=c[0],h=parseInt(c[1],10));for(var v=i._getSoundIds(h),p=0;p<v.length;p++)g=i._soundById(v[p]),g&&(g._loop=d,i._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=d,d&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,i.playing(v[p])&&(i.pause(v[p],!0),i.play(v[p],!0)))));return i},rate:function(){var i=this,c=arguments,d,h;if(c.length===0)h=i._sounds[0]._id;else if(c.length===1){var g=i._getSoundIds(),v=g.indexOf(c[0]);v>=0?h=parseInt(c[0],10):d=parseFloat(c[0])}else c.length===2&&(d=parseFloat(c[0]),h=parseInt(c[1],10));var p;if(typeof d=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,c)}}),i;typeof h=="undefined"&&(i._rate=d),h=i._getSoundIds(h);for(var k=0;k<h.length;k++)if(p=i._soundById(h[k]),p){i.playing(h[k])&&(p._rateSeek=i.seek(h[k]),p._playStart=i._webAudio?t.ctx.currentTime:p._playStart),p._rate=d,i._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(d,t.ctx.currentTime):p._node&&(p._node.playbackRate=d);var y=i.seek(h[k]),j=(i._sprite[p._sprite][0]+i._sprite[p._sprite][1])/1e3-y,S=j*1e3/Math.abs(p._rate);(i._endTimers[h[k]]||!p._paused)&&(i._clearTimer(h[k]),i._endTimers[h[k]]=setTimeout(i._ended.bind(i,p),S)),i._emit("rate",p._id)}}else return p=i._soundById(h),p?p._rate:i._rate;return i},seek:function(){var i=this,c=arguments,d,h;if(c.length===0)i._sounds.length&&(h=i._sounds[0]._id);else if(c.length===1){var g=i._getSoundIds(),v=g.indexOf(c[0]);v>=0?h=parseInt(c[0],10):i._sounds.length&&(h=i._sounds[0]._id,d=parseFloat(c[0]))}else c.length===2&&(d=parseFloat(c[0]),h=parseInt(c[1],10));if(typeof h=="undefined")return 0;if(typeof d=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,c)}}),i;var p=i._soundById(h);if(p)if(typeof d=="number"&&d>=0){var k=i.playing(h);k&&i.pause(h,!0),p._seek=d,p._ended=!1,i._clearTimer(h),!i._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=d);var y=function(){k&&i.play(h,!0),i._emit("seek",h)};if(k&&!i._webAudio){var j=function(){i._playLock?setTimeout(j,0):y()};setTimeout(j,0)}else y()}else if(i._webAudio){var S=i.playing(h)?t.ctx.currentTime-p._playStart:0,M=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(M+S*Math.abs(p._rate))}else return p._node.currentTime;return i},playing:function(i){var c=this;if(typeof i=="number"){var d=c._soundById(i);return d?!d._paused:!1}for(var h=0;h<c._sounds.length;h++)if(!c._sounds[h]._paused)return!0;return!1},duration:function(i){var c=this,d=c._duration,h=c._soundById(i);return h&&(d=c._sprite[h._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var i=this,c=i._sounds,d=0;d<c.length;d++)c[d]._paused||i.stop(c[d]._id),i._webAudio||(i._clearSound(c[d]._node),c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(t._canPlayEvent,c[d]._loadFn,!1),c[d]._node.removeEventListener("ended",c[d]._endFn,!1),t._releaseHtml5Audio(c[d]._node)),delete c[d]._node,i._clearTimer(c[d]._id);var h=t._howls.indexOf(i);h>=0&&t._howls.splice(h,1);var g=!0;for(d=0;d<t._howls.length;d++)if(t._howls[d]._src===i._src||i._src.indexOf(t._howls[d]._src)>=0){g=!1;break}return o&&g&&delete o[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,c,d,h){var g=this,v=g["_on"+i];return typeof c=="function"&&v.push(h?{id:d,fn:c,once:h}:{id:d,fn:c}),g},off:function(i,c,d){var h=this,g=h["_on"+i],v=0;if(typeof c=="number"&&(d=c,c=null),c||d)for(v=0;v<g.length;v++){var p=d===g[v].id;if(c===g[v].fn&&p||!c&&p){g.splice(v,1);break}}else if(i)h["_on"+i]=[];else{var k=Object.keys(h);for(v=0;v<k.length;v++)k[v].indexOf("_on")===0&&Array.isArray(h[k[v]])&&(h[k[v]]=[])}return h},once:function(i,c,d){var h=this;return h.on(i,c,d,1),h},_emit:function(i,c,d){for(var h=this,g=h["_on"+i],v=g.length-1;v>=0;v--)(!g[v].id||g[v].id===c||i==="load")&&(setTimeout(function(p){p.call(this,c,d)}.bind(h,g[v].fn),0),g[v].once&&h.off(i,g[v].fn,g[v].id));return h._loadQueue(i),h},_loadQueue:function(i){var c=this;if(c._queue.length>0){var d=c._queue[0];d.event===i&&(c._queue.shift(),c._loadQueue()),i||d.action()}return c},_ended:function(i){var c=this,d=i._sprite;if(!c._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(c._ended.bind(c,i),100),c;var h=!!(i._loop||c._sprite[d][2]);if(c._emit("end",i._id),!c._webAudio&&h&&c.stop(i._id,!0).play(i._id),c._webAudio&&h){c._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var g=(i._stop-i._start)*1e3/Math.abs(i._rate);c._endTimers[i._id]=setTimeout(c._ended.bind(c,i),g)}return c._webAudio&&!h&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,c._clearTimer(i._id),c._cleanBuffer(i._node),t._autoSuspend()),!c._webAudio&&!h&&c.stop(i._id,!0),c},_clearTimer:function(i){var c=this;if(c._endTimers[i]){if(typeof c._endTimers[i]!="function")clearTimeout(c._endTimers[i]);else{var d=c._soundById(i);d&&d._node&&d._node.removeEventListener("ended",c._endTimers[i],!1)}delete c._endTimers[i]}return c},_soundById:function(i){for(var c=this,d=0;d<c._sounds.length;d++)if(i===c._sounds[d]._id)return c._sounds[d];return null},_inactiveSound:function(){var i=this;i._drain();for(var c=0;c<i._sounds.length;c++)if(i._sounds[c]._ended)return i._sounds[c].reset();return new r(i)},_drain:function(){var i=this,c=i._pool,d=0,h=0;if(!(i._sounds.length<c)){for(h=0;h<i._sounds.length;h++)i._sounds[h]._ended&&d++;for(h=i._sounds.length-1;h>=0;h--){if(d<=c)return;i._sounds[h]._ended&&(i._webAudio&&i._sounds[h]._node&&i._sounds[h]._node.disconnect(0),i._sounds.splice(h,1),d--)}}},_getSoundIds:function(i){var c=this;if(typeof i=="undefined"){for(var d=[],h=0;h<c._sounds.length;h++)d.push(c._sounds[h]._id);return d}else return[i]},_refreshBuffer:function(i){var c=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=o[c._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),c},_cleanBuffer:function(i){var c=this,d=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),d))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,c},_clearSound:function(i){var c=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);c||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(i){this._parent=i,this.init()};r.prototype={init:function(){var i=this,c=i._parent;return i._muted=c._muted,i._loop=c._loop,i._volume=c._volume,i._rate=c._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,c._sounds.push(i),i.create(),i},create:function(){var i=this,c=i._parent,d=t._muted||i._muted||i._parent._muted?0:i._volume;return c._webAudio?(i._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(d,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=c._src,i._node.preload=c._preload===!0?"auto":c._preload,i._node.volume=d*t.volume(),i._node.load()),i},reset:function(){var i=this,c=i._parent;return i._muted=c._muted,i._loop=c._loop,i._volume=c._volume,i._rate=c._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,c=i._parent;c._duration=Math.ceil(i._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,c=i._parent;c._duration===1/0&&(c._duration=Math.ceil(i._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var o={},u=function(i){var c=i._src;if(o[c]){i._duration=o[c].duration,f(i);return}if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),h=new Uint8Array(d.length),g=0;g<d.length;++g)h[g]=d.charCodeAt(g);a(h.buffer,i)}else{var v=new XMLHttpRequest;v.open(i._xhr.method,c,!0),v.withCredentials=i._xhr.withCredentials,v.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(p){v.setRequestHeader(p,i._xhr.headers[p])}),v.onload=function(){var p=(v.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}a(v.response,i)},v.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete o[c],i.load())},l(v)}},l=function(i){try{i.send()}catch{i.onerror()}},a=function(i,c){var d=function(){c._emit("loaderror",null,"Decoding audio data failed.")},h=function(g){g&&c._sounds.length>0?(o[c._src]=g,f(c,g)):d()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(h).catch(d):t.ctx.decodeAudioData(i,h,d)},f=function(i,c){c&&!i._duration&&(i._duration=c.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},_=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),c=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=c?parseInt(c[1],10):null;if(i&&d&&d<9){var h=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!h&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};s.Howler=t,s.Howl=n,typeof Ve!="undefined"?(Ve.HowlerGlobal=e,Ve.Howler=t,Ve.Howl=n,Ve.Sound=r):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,r=typeof r!="number"?o._pos[2]:r,typeof t=="number")o._pos=[t,n,r],typeof o.ctx.listener.positionX!="undefined"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(t,n,r,o,u,l){var a=this;if(!a.ctx||!a.ctx.listener)return a;var f=a._orientation;if(n=typeof n!="number"?f[1]:n,r=typeof r!="number"?f[2]:r,o=typeof o!="number"?f[3]:o,u=typeof u!="number"?f[4]:u,l=typeof l!="number"?f[5]:l,typeof t=="number")a._orientation=[t,n,r,o,u,l],typeof a.ctx.listener.forwardX!="undefined"?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(u,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,n,r,o,u,l);else return f;return a},Howl.prototype.init=function(t){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle!="undefined"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle!="undefined"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain!="undefined"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel!="undefined"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance!="undefined"?n.maxDistance:1e4,panningModel:typeof n.panningModel!="undefined"?n.panningModel:"HRTF",refDistance:typeof n.refDistance!="undefined"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor!="undefined"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof n=="undefined")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var u=r._getSoundIds(n),l=0;l<u.length;l++){var a=r._soundById(u[l]);if(a)if(typeof t=="number")a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",(!a._panner||!a._panner.pan)&&e(a,o),o==="spatial"?typeof a._panner.positionX!="undefined"?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",a._id);else return a._stereo}return r},Howl.prototype.pos=function(t,n,r,o){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"pos",action:function(){u.pos(t,n,r,o)}}),u;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof o=="undefined")if(typeof t=="number")u._pos=[t,n,r];else return u._pos;for(var l=u._getSoundIds(o),a=0;a<l.length;a++){var f=u._soundById(l[a]);if(f)if(typeof t=="number")f._pos=[t,n,r],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX!="undefined"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):f._panner.setPosition(t,n,r)),u._emit("pos",f._id);else return f._pos}return u},Howl.prototype.orientation=function(t,n,r,o){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"orientation",action:function(){u.orientation(t,n,r,o)}}),u;if(n=typeof n!="number"?u._orientation[1]:n,r=typeof r!="number"?u._orientation[2]:r,typeof o=="undefined")if(typeof t=="number")u._orientation=[t,n,r];else return u._orientation;for(var l=u._getSoundIds(o),a=0;a<l.length;a++){var f=u._soundById(l[a]);if(f)if(typeof t=="number")f._orientation=[t,n,r],f._node&&(f._panner||(f._pos||(f._pos=u._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX!="undefined"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):f._panner.setOrientation(t,n,r)),u._emit("orientation",f._id);else return f._orientation}return u},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,r,o,u;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof o=="undefined"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle!="undefined"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle!="undefined"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain!="undefined"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel!="undefined"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance!="undefined"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance!="undefined"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor!="undefined"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel!="undefined"?r.pannerAttr.panningModel:t._panningModel});else return u=t._soundById(parseInt(n[0],10)),u?u._pannerAttr:t._pannerAttr;else n.length===2&&(r=n[0],o=parseInt(n[1],10));for(var l=t._getSoundIds(o),a=0;a<l.length;a++)if(u=t._soundById(l[a]),u){var f=u._pannerAttr;f={coneInnerAngle:typeof r.coneInnerAngle!="undefined"?r.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle!="undefined"?r.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain!="undefined"?r.coneOuterGain:f.coneOuterGain,distanceModel:typeof r.distanceModel!="undefined"?r.distanceModel:f.distanceModel,maxDistance:typeof r.maxDistance!="undefined"?r.maxDistance:f.maxDistance,refDistance:typeof r.refDistance!="undefined"?r.refDistance:f.refDistance,rolloffFactor:typeof r.rolloffFactor!="undefined"?r.rolloffFactor:f.rolloffFactor,panningModel:typeof r.panningModel!="undefined"?r.panningModel:f.panningModel};var _=u._panner;_?(_.coneInnerAngle=f.coneInnerAngle,_.coneOuterAngle=f.coneOuterAngle,_.coneOuterGain=f.coneOuterGain,_.distanceModel=f.distanceModel,_.maxDistance=f.maxDistance,_.refDistance=f.refDistance,_.rolloffFactor=f.rolloffFactor,_.panningModel=f.panningModel):(u._pos||(u._pos=t._pos||[0,0,-.5]),e(u,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,t.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(wn);function Fi(s,e,t){let{soundFile:n=!1}=e,r=!1,o={};const u=()=>{o&&o.playing&&(o.stop(),o.unload(),o={})};return cn(async()=>{u()}),s.$$set=l=>{"soundFile"in l&&t(0,n=l.soundFile)},s.$$.update=()=>{s.$$.dirty&3&&n&&(t(1,r="https://cdn.sanity.io/files/58ueii0w/production/"+ae(n,"asset._ref","").replace("file-","").replace("-mp3",".mp3")),u(),o=new wn.Howl({src:[r],loop:!0,autoplay:!0}))},[n,r]}class Li extends ee{constructor(e){super(),te(this,e,Fi,null,ne,{soundFile:0})}}function It(s){let e,t,n,r,o,u,l,a=s[0].iconImage&&Tt(s);return{c(){e=I("div"),a&&a.c(),this.h()},l(f){e=T(f,"DIV",{class:!0,id:!0,style:!0,tabindex:!0,"aria-label":!0,role:!0});var _=E(e);a&&a.l(_),_.forEach(b),this.h()},h(){m(e,"class","portal svelte-1kgpwjb"),m(e,"id",t=s[0]._id),m(e,"style",s[2]),m(e,"tabindex","0"),m(e,"aria-label",n="Go to "+s[0].title),m(e,"role","uiitem")},m(f,_){x(f,e,_),a&&a.m(e,null),s[5](e),o=!0,u||(l=N(e,"keydown",s[6]),u=!0)},p(f,_){f[0].iconImage?a?a.p(f,_):(a=Tt(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!o||_&1&&t!==(t=f[0]._id))&&m(e,"id",t),(!o||_&1&&n!==(n="Go to "+f[0].title))&&m(e,"aria-label",n)},i(f){o||(_e(()=>{r||(r=ce(e,ie,{},!0)),r.run(1)}),o=!0)},o(f){r||(r=ce(e,ie,{},!1)),r.run(0),o=!1},d(f){f&&b(e),a&&a.d(),s[5](null),f&&r&&r.end(),u=!1,l()}}}function Tt(s){let e,t,n;return{c(){e=I("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,alt:!0}),this.h()},h(){X(e.src,t=Te(s[0].iconImage).quality(100).height(100).url())||m(e,"src",t),m(e,"alt",n=s[0].alt)},m(r,o){x(r,e,o)},p(r,o){o&1&&!X(e.src,t=Te(r[0].iconImage).quality(100).height(100).url())&&m(e,"src",t),o&1&&n!==(n=r[0].alt)&&m(e,"alt",n)},d(r){r&&b(e)}}}function Ri(s){let e,t,n=!s[0].restricted&&It(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,[o]){r[0].restricted?n&&(U(),D(n,1,1,()=>{n=null}),q()):n?(n.p(r,o),o&1&&z(n,1)):(n=It(r),n.c(),z(n,1),n.m(e.parentNode,e))},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function Hi(s,e,t){let n;C(s,De,d=>t(7,n=d));let{portal:r={}}=e,o={},u={},l=r.y*he,a=r.x*he;const f=`transform: translateY(${l}px) translateX(${a}px); width: ${he}px; height: ${he}px; background-color: ${ae(r,"backgroundColor.hex","")}; background-image: url("${ae(r,"bgImageUrl","")}");"`,_=ve();be(async()=>{const d=Ke;d.content="door to "+ae(r,"targetArea.title",""),n.showTitles||(d.theme="name"),d.appendTo=o.parentElement,t(4,u=tippy(o,d))});function i(d){ge[d?"unshift":"push"](()=>{o=d,t(1,o)})}const c=d=>{d.key==="Enter"&&_("room",{roomId:r.targetArea._id})};return s.$$set=d=>{"portal"in d&&t(0,r=d.portal)},s.$$.update=()=>{s.$$.dirty&16&&u.popper&&u.show()},[r,o,f,_,u,i,c]}class Bi extends ee{constructor(e){super(),te(this,e,Hi,Ri,ne,{portal:0})}}function Et(s,e,t){const n=s.slice();return n[4]=e[t],n}function zt(s){let e=[],t=new Map,n,r,o=s[0];const u=l=>l[4]._id;for(let l=0;l<o.length;l+=1){let a=Et(s,o,l),f=u(a);t.set(f,e[l]=jt(f,a))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=G()},l(l){for(let a=0;a<e.length;a+=1)e[a].l(l);n=G()},m(l,a){for(let f=0;f<e.length;f+=1)e[f].m(l,a);x(l,n,a),r=!0},p(l,a){a&5&&(o=l[0],U(),e=Ce(e,a,u,1,l,o,t,n.parentNode,Ue,jt,n,Et),q())},i(l){if(!r){for(let a=0;a<o.length;a+=1)z(e[a]);r=!0}},o(l){for(let a=0;a<e.length;a+=1)D(e[a]);r=!1},d(l){for(let a=0;a<e.length;a+=1)e[a].d(l);l&&b(n)}}}function jt(s,e){let t,n,r,o;return n=new Bi({props:{portal:e[4]}}),n.$on("room",e[3]),{key:s,first:null,c(){t=I("div"),Y(n.$$.fragment),r=O(),this.h()},l(u){t=T(u,"DIV",{role:!0});var l=E(t);W(n.$$.fragment,l),r=P(l),l.forEach(b),this.h()},h(){m(t,"role","group"),this.first=t},m(u,l){x(u,t,l),Z(n,t,null),w(t,r),o=!0},p(u,l){e=u;const a={};l&1&&(a.portal=e[4]),n.$set(a)},i(u){o||(z(n.$$.fragment,u),o=!0)},o(u){D(n.$$.fragment,u),o=!1},d(u){u&&b(t),K(n)}}}function Gi(s){let e,t,n=!s[1]&&zt(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,[o]){r[1]?n&&(U(),D(n,1,1,()=>{n=null}),q()):n?(n.p(r,o),o&2&&z(n,1)):(n=zt(r),n.c(),z(n,1),n.m(e.parentNode,e))},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function Ni(s,e,t){let n;C(s,$e,l=>t(1,n=l));const r=ve();let{portals:o={}}=e;const u=l=>{l.detail.roomId&&r("room",{roomId:l.detail.roomId})};return s.$$set=l=>{"portals"in l&&t(0,o=l.portals)},[o,n,r,u]}class Ci extends ee{constructor(e){super(),te(this,e,Ni,Gi,ne,{portals:0})}}function Ui(s){let e,t;return{c(){e=He("svg"),t=He("path"),this.h()},l(n){e=Be(n,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,class:!0});var r=E(e);t=Be(r,"path",{d:!0,class:!0}),E(t).forEach(b),r.forEach(b),this.h()},h(){m(t,"d","M17.7,70.4h17.4V12.5H17.7V70.4z M46.6,12.5v57.8H64V12.5H46.6z"),m(t,"class","svelte-192w1ja"),m(e,"version","1.1"),m(e,"id","Layer_1"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),m(e,"x","0px"),m(e,"y","0px"),m(e,"viewBox","0 0 81.7 82.9"),un(e,"enable-background","new 0 0 81.7 82.9"),m(e,"xml:space","preserve"),m(e,"class","svelte-192w1ja")},m(n,r){x(n,e,r),w(e,t)},p:se,i:se,o:se,d(n){n&&b(e)}}}class qi extends ee{constructor(e){super(),te(this,e,null,Ui,ne,{})}}function Xi(s){let e,t,n,r,o,u,l=s[1]&&xt(s);return{c(){e=I("div"),t=I("iframe"),r=O(),l&&l.c(),o=G(),this.h()},l(a){e=T(a,"DIV",{class:!0});var f=E(e);t=T(f,"IFRAME",{class:!0,width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0}),E(t).forEach(b),f.forEach(b),r=P(a),l&&l.l(a),o=G(),this.h()},h(){m(t,"class","peertube svelte-1hn1v36"),m(t,"width","1920"),m(t,"height","1080"),X(t.src,n=s[0]+"?api=1")||m(t,"src",n),m(t,"frameborder","no"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),m(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,m(e,"class","peertube-container svelte-1hn1v36"),L(e,"hidden",s[1])},m(a,f){x(a,e,f),w(e,t),x(a,r,f),l&&l.m(a,f),x(a,o,f),u=!0},p(a,f){(!u||f&1&&!X(t.src,n=a[0]+"?api=1"))&&m(t,"src",n),f&2&&L(e,"hidden",a[1]),a[1]?l?(l.p(a,f),f&2&&z(l,1)):(l=xt(a),l.c(),z(l,1),l.m(o.parentNode,o)):l&&(U(),D(l,1,1,()=>{l=null}),q())},i(a){u||(z(l),u=!0)},o(a){D(l),u=!1},d(a){a&&b(e),a&&b(r),l&&l.d(a),a&&b(o)}}}function Yi(s){let e,t,n;return{c(){e=I("div"),t=I("iframe"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);t=T(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),X(t.src,n="https://player.vimeo.com/video/"+Ee(s[0]).id+"?autoplay=1")||m(t,"src",n),m(t,"frameborder","no"),m(t,"scrolling","no"),m(t,"byline","false"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-1hn1v36"),m(e,"class","vimeo-container svelte-1hn1v36")},m(r,o){x(r,e,o),w(e,t)},p(r,o){o&1&&!X(t.src,n="https://player.vimeo.com/video/"+Ee(r[0]).id+"?autoplay=1")&&m(t,"src",n)},i:se,o:se,d(r){r&&b(e)}}}function Wi(s){let e,t,n;return{c(){e=I("div"),t=I("iframe"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);t=T(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","1920"),m(t,"height","1280"),X(t.src,n="https://www.youtube.com/embed/"+Ee(s[0]).id+"?autoplay=1&rel=0&color=white")||m(t,"src",n),m(t,"frameborder","no"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-1hn1v36"),m(e,"class","youtube-container svelte-1hn1v36")},m(r,o){x(r,e,o),w(e,t)},p(r,o){o&1&&!X(t.src,n="https://www.youtube.com/embed/"+Ee(r[0]).id+"?autoplay=1&rel=0&color=white")&&m(t,"src",n)},i:se,o:se,d(r){r&&b(e)}}}function xt(s){let e,t,n,r,o,u,l,a,f,_,i,c,d,h,g;const v=[Ki,Zi],p=[];function k(y,j){return y[3]?0:1}return l=k(s),a=p[l]=v[l](s),{c(){e=I("div"),t=I("div"),n=H(s[2]),r=O(),o=I("div"),u=I("div"),a.c(),f=O(),_=I("div"),i=I("div"),this.h()},l(y){e=T(y,"DIV",{class:!0});var j=E(e);t=T(j,"DIV",{class:!0});var S=E(t);n=B(S,s[2]),S.forEach(b),r=P(j),o=T(j,"DIV",{class:!0});var M=E(o);u=T(M,"DIV",{class:!0});var F=E(u);a.l(F),F.forEach(b),f=P(M),_=T(M,"DIV",{class:!0});var R=E(_);i=T(R,"DIV",{class:!0,style:!0}),E(i).forEach(b),R.forEach(b),M.forEach(b),j.forEach(b),this.h()},h(){m(t,"class","title svelte-1hn1v36"),m(u,"class","control svelte-1hn1v36"),m(i,"class","progress svelte-1hn1v36"),m(i,"style",c="width: "+s[4]+"%;"),m(_,"class","playbar svelte-1hn1v36"),m(o,"class","controls svelte-1hn1v36"),m(e,"class","audio-interface svelte-1hn1v36")},m(y,j){x(y,e,j),w(e,t),w(t,n),w(e,r),w(e,o),w(o,u),p[l].m(u,null),w(o,f),w(o,_),w(_,i),d=!0,h||(g=N(u,"click",s[5]),h=!0)},p(y,j){(!d||j&4)&&me(n,y[2]);let S=l;l=k(y),l!==S&&(U(),D(p[S],1,1,()=>{p[S]=null}),q(),a=p[l],a||(a=p[l]=v[l](y),a.c()),z(a,1),a.m(u,null)),(!d||j&16&&c!==(c="width: "+y[4]+"%;"))&&m(i,"style",c)},i(y){d||(z(a),d=!0)},o(y){D(a),d=!1},d(y){y&&b(e),p[l].d(),h=!1,g()}}}function Zi(s){let e,t;return e=new Pn({}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Ki(s){let e,t;return e=new qi({}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Qi(s){let e,t,n,r,o,u,l,a,f;const _=[Wi,Yi,Xi],i=[];function c(d,h){return h&1&&(n=null),h&1&&(r=null),h&1&&(o=null),n==null&&(n=!!(d[0].includes("youtube")||d[0].includes("youtu.be"))),n?0:(r==null&&(r=!!d[0].includes("vimeo")),r?1:(o==null&&(o=!!d[0].includes("undersco.re")),o?2:-1))}return~(u=c(s,-1))&&(l=i[u]=_[u](s)),{c(){e=I("div"),t=I("div"),l&&l.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var h=E(e);t=T(h,"DIV",{class:!0});var g=E(t);l&&l.l(g),g.forEach(b),h.forEach(b),this.h()},h(){m(t,"class","embed svelte-1hn1v36"),m(e,"class","stream-container svelte-1hn1v36"),L(e,"audio",s[1])},m(d,h){x(d,e,h),w(e,t),~u&&i[u].m(t,null),f=!0},p(d,[h]){s=d;let g=u;u=c(s,h),u===g?~u&&i[u].p(s,h):(l&&(U(),D(i[g],1,1,()=>{i[g]=null}),q()),~u?(l=i[u],l?l.p(s,h):(l=i[u]=_[u](s),l.c()),z(l,1),l.m(t,null)):l=null),h&2&&L(e,"audio",s[1])},i(d){f||(z(l),_e(()=>{a||(a=ce(e,ie,{duration:300,easing:Ze},!0)),a.run(1)}),f=!0)},o(d){D(l),a||(a=ce(e,ie,{duration:300,easing:Ze},!1)),a.run(0),f=!1},d(d){d&&b(e),~u&&i[u].d(),d&&a&&a.end()}}}function Ji(s,e,t){const n=window.PeerTubePlayer;let{streamUrl:r=""}=e,{audioOnly:o=!1}=e,{title:u=""}=e,l,a=!1,f=0;const _=()=>{a?l.pause():l.play(),t(3,a=!a)};return be(async()=>{r.includes("undersco.re")&&(l=new n(document.querySelector(".peertube")),await l.ready,l.play(),t(3,a=!0),l.setResolution(2),l.addEventListener("playbackStatusUpdate",i=>{t(4,f=(i.position/i.duration).toFixed(4)*100)}))}),s.$$set=i=>{"streamUrl"in i&&t(0,r=i.streamUrl),"audioOnly"in i&&t(1,o=i.audioOnly),"title"in i&&t(2,u=i.title)},[r,o,u,a,f,_]}class er extends ee{constructor(e){super(),te(this,e,Ji,Qi,ne,{streamUrl:0,audioOnly:1,title:2})}}function tr(s){let e,t,n;return{c(){e=I("div"),t=I("iframe"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);t=T(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),X(t.src,n=s[0])||m(t,"src",n),m(t,"frameborder","no"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),m(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","peertube-container svelte-rt5t1v")},m(r,o){x(r,e,o),w(e,t)},p(r,o){o&1&&!X(t.src,n=r[0])&&m(t,"src",n)},d(r){r&&b(e)}}}function nr(s){let e,t,n;return{c(){e=I("div"),t=I("iframe"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);t=T(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","720"),m(t,"height","480"),X(t.src,n="https://player.vimeo.com/video/"+Ee(s[0]).id)||m(t,"src",n),m(t,"frameborder","no"),m(t,"scrolling","no"),m(t,"byline","false"),m(t,"color","#ffffff"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","vimeo-container svelte-rt5t1v")},m(r,o){x(r,e,o),w(e,t)},p(r,o){o&1&&!X(t.src,n="https://player.vimeo.com/video/"+Ee(r[0]).id)&&m(t,"src",n)},d(r){r&&b(e)}}}function ir(s){let e,t,n;return{c(){e=I("div"),t=I("iframe"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);t=T(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),E(t).forEach(b),o.forEach(b),this.h()},h(){m(t,"width","1920"),m(t,"height","1280"),X(t.src,n="https://www.youtube.com/embed/"+Ee(s[0]).id+"?rel=0&color=white")||m(t,"src",n),m(t,"frameborder","no"),m(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,m(t,"class","svelte-rt5t1v"),m(e,"class","youtube-container svelte-rt5t1v")},m(r,o){x(r,e,o),w(e,t)},p(r,o){o&1&&!X(t.src,n="https://www.youtube.com/embed/"+Ee(r[0]).id+"?rel=0&color=white")&&m(t,"src",n)},d(r){r&&b(e)}}}function rr(s){let e,t,n,r,o,u;function l(_,i){if(i&1&&(n=null),i&1&&(r=null),i&1&&(o=null),n==null&&(n=!!(_[0].includes("youtube")||_[0].includes("youtu.be"))),n)return ir;if(r==null&&(r=!!_[0].includes("vimeo")),r)return nr;if(o==null&&(o=!!_[0].includes("undersco.re")),o)return tr}let a=l(s,-1),f=a&&a(s);return{c(){e=I("div"),t=I("div"),f&&f.c(),this.h()},l(_){e=T(_,"DIV",{class:!0});var i=E(e);t=T(i,"DIV",{class:!0});var c=E(t);f&&f.l(c),c.forEach(b),i.forEach(b),this.h()},h(){m(t,"class","embed svelte-rt5t1v"),m(e,"class","stream-container svelte-rt5t1v")},m(_,i){x(_,e,i),w(e,t),f&&f.m(t,null)},p(_,[i]){s=_,a===(a=l(s,i))&&f?f.p(s,i):(f&&f.d(1),f=a&&a(s),f&&(f.c(),f.m(t,null)))},i(_){u||_e(()=>{u=qe(e,ie,{duration:300,easing:Ze}),u.start()})},o:se,d(_){_&&b(e),f&&f.d()}}}function or(s,e,t){let{streamUrl:n=""}=e;return s.$$set=r=>{"streamUrl"in r&&t(0,n=r.streamUrl)},[n]}class sr extends ee{constructor(e){super(),te(this,e,or,rr,ne,{streamUrl:0})}}function lr(s,e,t){var n={},r="",o="...",u=10>e?e:10,l=["img","br"],a=[],f=0,_=r,i='([\\w|-]+\\s*(=\\s*"[^"]*")?\\s*)*',c="\\s*\\/?\\s*",d="\\s*\\/\\s*",h=new RegExp("<\\/?\\w+\\s*"+i+d+">"),g=new RegExp("<\\/?\\w+\\s*"+i+c+">"),v=/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w\-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g,p=new RegExp("<img\\s*"+i+c+">"),k=new RegExp("\\W+","g"),y=!0,j,S,M,F;function R(re){var le=p.exec(re),J,fe;return le?(J=le.index,fe=le[0].length,re.substring(0,J)+re.substring(J+fe)):re}function A(re){var le="";return re.reverse().forEach(function(J,fe){l.indexOf(J)===-1&&(le+="</"+J+">")}),le}function V(re){var le=re.indexOf(" ");if(le===-1&&(le=re.indexOf(">"),le===-1))throw new Error("HTML tag is not well-formed : "+re);return re.substring(1,le)}function Q(re,le){var J=e-f,fe=J,Fe=J<t.slop,je=Fe?J:t.slop-1,$,de=Fe?0:J-t.slop,oe=le||J+t.slop,ue;if(!t.truncateLastWord){if($=re.slice(de,oe),le&&$.length<=le)fe=$.length;else for(;(ue=k.exec($))!==null;)if(ue.index<je){if(fe=J-(je-ue.index),ue.index===0&&J<=1)break}else if(ue.index===je){fe=J;break}else{fe=J+(ue.index-je);break}re.charAt(fe-1).match(/\s$/)&&fe--}return fe}for(t=t||n,t.ellipsis=t.ellipsis!==void 0?t.ellipsis:o,t.truncateLastWord=t.truncateLastWord!==void 0?t.truncateLastWord:!0,t.slop=t.slop!==void 0?t.slop:u;y;){if(y=g.exec(s),!y){if(f>=e)break;if(y=v.exec(s),!y||y.index>=e){_+=s.substring(0,Q(s));break}for(;y;)j=y[0],S=y.index,_+=s.substring(0,S+j.length-f),s=s.substring(S+j.length),y=v.exec(s);break}if(j=y[0],S=y.index,f+S>e){_+=s.substring(0,Q(s,S));break}else f+=S,_+=s.substring(0,S);j[1]==="/"?(a.pop(),F=null):(F=h.exec(j),F||(M=V(j),a.push(M))),F?_+=F[0]:_+=j,s=s.substring(S+j.length)}return s.length>e-f&&t.ellipsis&&(_+=t.ellipsis),_+=A(a),t.keepImageTag||(_=R(_)),_}var ar=lr;function St(s){let e,t,n,r=s[1].startDate&&Je(s[1].startDate),o,u,l,a=s[1].title+"",f,_,i=pe(s[1],"content.content")&&s[1].content.content[0].style!="html",c,d=s[1].mainImage&&Dt(s),h=r&&$t(),g=s[1].startDate&&Vt(s),v=i&&Ot(s),p=s[0].importEvent&&Pt(s);return{c(){e=I("div"),d&&d.c(),t=O(),n=I("div"),h&&h.c(),o=O(),g&&g.c(),u=O(),l=I("div"),f=H(a),_=O(),v&&v.c(),c=O(),p&&p.c(),this.h()},l(k){e=T(k,"DIV",{class:!0});var y=E(e);d&&d.l(y),t=P(y),n=T(y,"DIV",{class:!0});var j=E(n);h&&h.l(j),o=P(j),g&&g.l(j),u=P(j),l=T(j,"DIV",{class:!0});var S=E(l);f=B(S,a),S.forEach(b),_=P(j),v&&v.l(j),c=P(j),p&&p.l(j),j.forEach(b),y.forEach(b),this.h()},h(){m(l,"class","title svelte-12z4nak"),m(n,"class","text-container svelte-12z4nak"),m(e,"class","event svelte-12z4nak")},m(k,y){x(k,e,y),d&&d.m(e,null),w(e,t),w(e,n),h&&h.m(n,null),w(n,o),g&&g.m(n,null),w(n,u),w(n,l),w(l,f),w(n,_),v&&v.m(n,null),w(n,c),p&&p.m(n,null)},p(k,y){k[1].mainImage?d?d.p(k,y):(d=Dt(k),d.c(),d.m(e,t)):d&&(d.d(1),d=null),y&2&&(r=k[1].startDate&&Je(k[1].startDate)),r?h||(h=$t(),h.c(),h.m(n,o)):h&&(h.d(1),h=null),k[1].startDate?g?g.p(k,y):(g=Vt(k),g.c(),g.m(n,u)):g&&(g.d(1),g=null),y&2&&a!==(a=k[1].title+"")&&me(f,a),y&2&&(i=pe(k[1],"content.content")&&k[1].content.content[0].style!="html"),i?v?v.p(k,y):(v=Ot(k),v.c(),v.m(n,c)):v&&(v.d(1),v=null),k[0].importEvent?p?p.p(k,y):(p=Pt(k),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(k){k&&b(e),d&&d.d(),h&&h.d(),g&&g.d(),v&&v.d(),p&&p.d()}}}function Dt(s){let e,t,n,r;return{c(){e=I("div"),t=I("img"),this.h()},l(o){e=T(o,"DIV",{class:!0});var u=E(e);t=T(u,"IMG",{class:!0,alt:!0,src:!0}),u.forEach(b),this.h()},h(){m(t,"class","image svelte-12z4nak"),m(t,"alt",n=s[1].title),X(t.src,r=s[0].importEvent?Qe(s[1].mainImage).quality(90).width(500).height(500).url():Te(s[1].mainImage).quality(90).width(500).height(500).url())||m(t,"src",r),m(e,"class","image-container svelte-12z4nak")},m(o,u){x(o,e,u),w(e,t)},p(o,u){u&2&&n!==(n=o[1].title)&&m(t,"alt",n),u&3&&!X(t.src,r=o[0].importEvent?Qe(o[1].mainImage).quality(90).width(500).height(500).url():Te(o[1].mainImage).quality(90).width(500).height(500).url())&&m(t,"src",r)},d(o){o&&b(e)}}}function $t(s){let e,t,n;return{c(){e=I("div"),t=I("div"),n=H("Upcoming"),this.h()},l(r){e=T(r,"DIV",{});var o=E(e);t=T(o,"DIV",{class:!0});var u=E(t);n=B(u,"Upcoming"),u.forEach(b),o.forEach(b),this.h()},h(){m(t,"class","upcoming svelte-12z4nak")},m(r,o){x(r,e,o),w(e,t),w(t,n)},d(r){r&&b(e)}}}function Vt(s){let e,t=et(s[1].startDate)+"",n;return{c(){e=I("div"),n=H(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);n=B(o,t),o.forEach(b),this.h()},h(){m(e,"class","date svelte-12z4nak")},m(r,o){x(r,e,o),w(e,n)},p(r,o){o&2&&t!==(t=et(r[1].startDate)+"")&&me(n,t)},d(r){r&&b(e)}}}function Ot(s){let e;return{c(){e=I("div"),this.h()},l(t){e=T(t,"DIV",{class:!0});var n=E(e);n.forEach(b),this.h()},h(){m(e,"class","description")},m(t,n){x(t,e,n),e.innerHTML=s[2]},p(t,n){n&4&&(e.innerHTML=t[2])},d(t){t&&b(e)}}}function Pt(s){let e,t,n,r;return{c(){e=I("div"),t=I("a"),n=H("More Information Here"),this.h()},l(o){e=T(o,"DIV",{class:!0});var u=E(e);t=T(u,"A",{href:!0,target:!0});var l=E(t);n=B(l,"More Information Here"),l.forEach(b),u.forEach(b),this.h()},h(){m(t,"href",r="https://eyebeam.netlify.app/events/"+ae(s[1],"slug.current")),m(t,"target","_blank"),m(e,"class","link-to-full")},m(o,u){x(o,e,u),w(e,t),w(t,n)},p(o,u){u&2&&r!==(r="https://eyebeam.netlify.app/events/"+ae(o[1],"slug.current"))&&m(t,"href",r)},d(o){o&&b(e)}}}function Mt(s){let e,t,n,r,o,u;return o=new Xe({props:{blocks:s[1].content.content}}),{c(){e=I("div"),t=I("h3"),n=H("Messages"),r=O(),Y(o.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=E(e);t=T(a,"H3",{class:!0});var f=E(t);n=B(f,"Messages"),f.forEach(b),r=P(a),W(o.$$.fragment,a),a.forEach(b),this.h()},h(){m(t,"class","svelte-12z4nak"),m(e,"class","html-container svelte-12z4nak")},m(l,a){x(l,e,a),w(e,t),w(t,n),w(e,r),Z(o,e,null),u=!0},p(l,a){const f={};a&2&&(f.blocks=l[1].content.content),o.$set(f)},i(l){u||(z(o.$$.fragment,l),u=!0)},o(l){D(o.$$.fragment,l),u=!1},d(l){l&&b(e),K(o)}}}function cr(s){let e,t=pe(s[1],"content.content")&&s[1].content.content[0].style=="html",n,r,o=s[1]&&s[1].content.content[0].style!="html"&&St(s),u=t&&Mt(s);return{c(){o&&o.c(),e=O(),u&&u.c(),n=G()},l(l){o&&o.l(l),e=P(l),u&&u.l(l),n=G()},m(l,a){o&&o.m(l,a),x(l,e,a),u&&u.m(l,a),x(l,n,a),r=!0},p(l,[a]){l[1]&&l[1].content.content[0].style!="html"?o?o.p(l,a):(o=St(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a&2&&(t=pe(l[1],"content.content")&&l[1].content.content[0].style=="html"),t?u?(u.p(l,a),a&2&&z(u,1)):(u=Mt(l),u.c(),z(u,1),u.m(n.parentNode,n)):u&&(U(),D(u,1,1,()=>{u=null}),q())},i(l){r||(z(u),r=!0)},o(l){D(u),r=!1},d(l){o&&o.d(l),l&&b(e),u&&u.d(l),l&&b(n)}}}function ur(s,e,t){let{event:n={}}=e,r=!1,o="";return be(async()=>{n.importEvent?(t(1,r=await pn("*[_id == '"+n.importedEvent+"'][0]")),t(2,o=ar(Mn(ae(r,"content.content",[])),800))):(t(1,r=n),t(2,o=Pe(ae(r,"content.content",[]))))}),s.$$set=u=>{"event"in u&&t(0,n=u.event)},s.$$.update=()=>{s.$$.dirty&2&&console.log("post: ",r)},[n,r,o]}class fr extends ee{constructor(e){super(),te(this,e,ur,cr,ne,{event:0})}}function Ft(s,e,t){const n=s.slice();return n[11]=e[t],n}function Lt(s){let e,t;return{c(){e=I("div"),t=H(s[1]),this.h()},l(n){e=T(n,"DIV",{"aria-live":!0,class:!0});var r=E(e);t=B(r,s[1]),r.forEach(b),this.h()},h(){m(e,"aria-live","polite"),m(e,"class","viewer-count svelte-1o7zo20")},m(n,r){x(n,e,r),w(e,t)},p(n,r){r&2&&me(t,n[1])},d(n){n&&b(e)}}}function dr(s){let e,t,n,r,o,u,l,a,f,_,i,c,d=s[0].events,h=[];for(let v=0;v<d.length;v+=1)h[v]=Rt(Ft(s,d,v));const g=v=>D(h[v],1,1,()=>{h[v]=null});return{c(){e=I("div"),t=I("div"),n=I("h1"),r=H("Bulletin Board"),o=O(),u=I("div"),l=O(),a=I("div");for(let v=0;v<h.length;v+=1)h[v].c();this.h()},l(v){e=T(v,"DIV",{class:!0,"aria-live":!0});var p=E(e);t=T(p,"DIV",{class:!0});var k=E(t);n=T(k,"H1",{class:!0});var y=E(n);r=B(y,"Bulletin Board"),y.forEach(b),o=P(k),u=T(k,"DIV",{class:!0});var j=E(u);j.forEach(b),l=P(k),a=T(k,"DIV",{class:!0});var S=E(a);for(let M=0;M<h.length;M+=1)h[M].l(S);S.forEach(b),k.forEach(b),p.forEach(b),this.h()},h(){m(n,"class","svelte-1o7zo20"),m(u,"class","bulletin-board-actions svelte-1o7zo20"),m(a,"class","bulletin-board-events"),m(t,"class","inner svelte-1o7zo20"),m(e,"class","bulletin-board svelte-1o7zo20"),m(e,"aria-live","polite"),L(e,"pushed",s[3])},m(v,p){x(v,e,p),w(e,t),w(t,n),w(n,r),w(t,o),w(t,u),w(t,l),w(t,a);for(let k=0;k<h.length;k+=1)h[k].m(a,null);_=!0,i||(c=N(e,"click",s[10]),i=!0)},p(v,p){if(p&1){d=v[0].events;let k;for(k=0;k<d.length;k+=1){const y=Ft(v,d,k);h[k]?(h[k].p(y,p),z(h[k],1)):(h[k]=Rt(y),h[k].c(),z(h[k],1),h[k].m(a,null))}for(U(),k=d.length;k<h.length;k+=1)g(k);q()}p&8&&L(e,"pushed",v[3])},i(v){if(!_){for(let p=0;p<d.length;p+=1)z(h[p]);_e(()=>{f||(f=ce(e,ie,{},!0)),f.run(1)}),_=!0}},o(v){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)D(h[p]);f||(f=ce(e,ie,{},!1)),f.run(0),_=!1},d(v){v&&b(e),Me(h,v),v&&f&&f.end(),i=!1,c()}}}function hr(s){let e,t,n,r,o,u,l=s[2]&&s[2].title&&Ht(s);return{c(){e=I("div"),t=I("div"),l&&l.c(),this.h()},l(a){e=T(a,"DIV",{class:!0,"aria-live":!0});var f=E(e);t=T(f,"DIV",{class:!0});var _=E(t);l&&l.l(_),_.forEach(b),f.forEach(b),this.h()},h(){m(t,"class","inner svelte-1o7zo20"),m(e,"class","article svelte-1o7zo20"),m(e,"aria-live","polite"),L(e,"pushed",s[3])},m(a,f){x(a,e,f),w(e,t),l&&l.m(t,null),r=!0,o||(u=N(e,"click",s[9]),o=!0)},p(a,f){a[2]&&a[2].title?l?(l.p(a,f),f&4&&z(l,1)):(l=Ht(a),l.c(),z(l,1),l.m(t,null)):l&&(U(),D(l,1,1,()=>{l=null}),q()),f&8&&L(e,"pushed",a[3])},i(a){r||(z(l),_e(()=>{n||(n=ce(e,ie,{},!0)),n.run(1)}),r=!0)},o(a){D(l),n||(n=ce(e,ie,{},!1)),n.run(0),r=!1},d(a){a&&b(e),l&&l.d(),a&&n&&n.end(),o=!1,u()}}}function _r(s){let e=pe(s[0],"content.content"),t,n,r=e&&Gt(s);return{c(){r&&r.c(),t=G()},l(o){r&&r.l(o),t=G()},m(o,u){r&&r.m(o,u),x(o,t,u),n=!0},p(o,u){u&1&&(e=pe(o[0],"content.content")),e?r?(r.p(o,u),u&1&&z(r,1)):(r=Gt(o),r.c(),z(r,1),r.m(t.parentNode,t)):r&&(U(),D(r,1,1,()=>{r=null}),q())},i(o){n||(z(r),n=!0)},o(o){D(r),n=!1},d(o){r&&r.d(o),o&&b(t)}}}function pr(s){let e,t,n,r,o,u;return t=new sr({props:{streamUrl:s[0].videoUrl}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0,"aria-live":!0});var a=E(e);W(t.$$.fragment,a),a.forEach(b),this.h()},h(){m(e,"class","video svelte-1o7zo20"),m(e,"aria-live","polite"),L(e,"pushed",s[3])},m(l,a){x(l,e,a),Z(t,e,null),r=!0,o||(u=N(e,"click",s[7]),o=!0)},p(l,a){const f={};a&1&&(f.streamUrl=l[0].videoUrl),t.$set(f),a&8&&L(e,"pushed",l[3])},i(l){r||(z(t.$$.fragment,l),_e(()=>{n||(n=ce(e,ie,{},!0)),n.run(1)}),r=!0)},o(l){D(t.$$.fragment,l),n||(n=ce(e,ie,{},!1)),n.run(0),r=!1},d(l){l&&b(e),K(t),l&&n&&n.end(),o=!1,u()}}}function Rt(s){let e,t;return e=new fr({props:{event:s[11]}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r&1&&(o.event=n[11]),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Ht(s){let e=s[2].title+"",t,n,r=pe(s[2],"content.content"),o,u,l=r&&Bt(s);return{c(){t=H(e),n=O(),l&&l.c(),o=G()},l(a){t=B(a,e),n=P(a),l&&l.l(a),o=G()},m(a,f){x(a,t,f),x(a,n,f),l&&l.m(a,f),x(a,o,f),u=!0},p(a,f){(!u||f&4)&&e!==(e=a[2].title+"")&&me(t,e),f&4&&(r=pe(a[2],"content.content")),r?l?(l.p(a,f),f&4&&z(l,1)):(l=Bt(a),l.c(),z(l,1),l.m(o.parentNode,o)):l&&(U(),D(l,1,1,()=>{l=null}),q())},i(a){u||(z(l),u=!0)},o(a){D(l),u=!1},d(a){a&&b(t),a&&b(n),l&&l.d(a),a&&b(o)}}}function Bt(s){let e,t;return e=new Xe({props:{blocks:s[2].content.content,mainSite:!0}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r&4&&(o.blocks=n[2].content.content),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Gt(s){let e,t,n,r,o,u,l;return n=new Xe({props:{blocks:s[0].content.content}}),{c(){e=I("div"),t=I("div"),Y(n.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0,"aria-live":!0});var f=E(e);t=T(f,"DIV",{class:!0});var _=E(t);W(n.$$.fragment,_),_.forEach(b),f.forEach(b),this.h()},h(){m(t,"class","inner svelte-1o7zo20"),m(e,"class","article svelte-1o7zo20"),m(e,"aria-live","polite"),L(e,"pushed",s[3])},m(a,f){x(a,e,f),w(e,t),Z(n,t,null),o=!0,u||(l=N(e,"click",s[8]),u=!0)},p(a,f){const _={};f&1&&(_.blocks=a[0].content.content),n.$set(_),f&8&&L(e,"pushed",a[3])},i(a){o||(z(n.$$.fragment,a),_e(()=>{r||(r=ce(e,ie,{},!0)),r.run(1)}),o=!0)},o(a){D(n.$$.fragment,a),r||(r=ce(e,ie,{},!1)),r.run(0),o=!1},d(a){a&&b(e),K(n),a&&r&&r.end(),u=!1,l()}}}function Nt(s){let e,t=s[0].infoText+"",n;return{c(){e=I("div"),n=H(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=E(e);n=B(o,t),o.forEach(b),this.h()},h(){m(e,"class","info-text svelte-1o7zo20")},m(r,o){x(r,e,o),w(e,n)},p(r,o){o&1&&t!==(t=r[0].infoText+"")&&me(n,t)},d(r){r&&b(e)}}}function mr(s){let e,t,n,r,o,u,l,a,f,_,i,c=s[0].contentType==="video"&&Lt(s);const d=[pr,_r,hr,dr],h=[];function g(p,k){return p[0].contentType==="video"?0:p[0].contentType==="text"?1:p[0].contentType==="importedPost"?2:p[0].isBulletinBoard?3:-1}~(o=g(s))&&(u=h[o]=d[o](s));let v=s[0].infoText&&Nt(s);return{c(){c&&c.c(),e=O(),t=I("button"),n=H("Return"),r=O(),u&&u.c(),l=O(),v&&v.c(),a=G(),this.h()},l(p){c&&c.l(p),e=P(p),t=T(p,"BUTTON",{class:!0,"aria-label":!0});var k=E(t);n=B(k,"Return"),k.forEach(b),r=P(p),u&&u.l(p),l=P(p),v&&v.l(p),a=G(),this.h()},h(){m(t,"class","return-button svelte-1o7zo20"),m(t,"aria-label","Return")},m(p,k){c&&c.m(p,k),x(p,e,k),x(p,t,k),w(t,n),x(p,r,k),~o&&h[o].m(p,k),x(p,l,k),v&&v.m(p,k),x(p,a,k),f=!0,_||(i=N(t,"click",s[6]),_=!0)},p(p,[k]){p[0].contentType==="video"?c?c.p(p,k):(c=Lt(p),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null);let y=o;o=g(p),o===y?~o&&h[o].p(p,k):(u&&(U(),D(h[y],1,1,()=>{h[y]=null}),q()),~o?(u=h[o],u?u.p(p,k):(u=h[o]=d[o](p),u.c()),z(u,1),u.m(l.parentNode,l)):u=null),p[0].infoText?v?v.p(p,k):(v=Nt(p),v.c(),v.m(a.parentNode,a)):v&&(v.d(1),v=null)},i(p){f||(z(u),f=!0)},o(p){D(u),f=!1},d(p){c&&c.d(p),p&&b(e),p&&b(t),p&&b(r),~o&&h[o].d(p),p&&b(l),v&&v.d(p),p&&b(a),_=!1,i()}}}function vr(s,e,t){let n,r;C(s,mn,h=>t(5,n=h)),C(s,vn,h=>t(3,r=h));let{article:o={}}=e,u=0,l="",a;be(async()=>{Fn(o),o.contentType==="importedPost"&&o.importedPost&&t(2,a=await pn("*[_id == '"+o.importedPost+"'][0]"))}),cn(async()=>{Ln()});const f=()=>{Ae.set(!1),gn()},_=h=>{h.target.classList.contains("video")&&Ae.set(!1)},i=h=>{h.target.classList.contains("article")&&Ae.set(!1)},c=h=>{h.target.classList.contains("article")&&Ae.set(!1)},d=h=>{h.target.classList.contains("bulletin-board")&&Ae.set(!1)};return s.$$set=h=>{"article"in h&&t(0,o=h.article)},s.$$.update=()=>{if(s.$$.dirty&49){t(4,u=0);for(const[h,g]of Object.entries(n))g.viewing===o._id&&t(4,u++,u)}s.$$.dirty&16&&t(1,l=u===1?"You are the only one here.":`${u} people are here.`)},[o,l,a,r,u,n,f,_,i,c,d]}class gr extends ee{constructor(e){super(),te(this,e,vr,mr,ne,{article:0})}}function br(s){let e,t,n,r,o,u,l,a,f,_,i,c,d,h,g,v;return{c(){e=I("div"),t=I("div"),n=H(s[0]),r=O(),o=I("div"),u=I("div"),l=I("div"),a=H("\u25B8"),f=H(`
      Yes`),_=O(),i=I("div"),c=I("div"),d=H("\u25B8"),h=H(`
      No`),this.h()},l(p){e=T(p,"DIV",{class:!0,"aria-live":!0});var k=E(e);t=T(k,"DIV",{});var y=E(t);n=B(y,s[0]),y.forEach(b),r=P(k),o=T(k,"DIV",{class:!0});var j=E(o);u=T(j,"DIV",{class:!0,tabindex:!0,autofocus:!0});var S=E(u);l=T(S,"DIV",{class:!0});var M=E(l);a=B(M,"\u25B8"),M.forEach(b),f=B(S,`
      Yes`),S.forEach(b),_=P(j),i=T(j,"DIV",{class:!0,tabindex:!0});var F=E(i);c=T(F,"DIV",{class:!0});var R=E(c);d=B(R,"\u25B8"),R.forEach(b),h=B(F,`
      No`),F.forEach(b),j.forEach(b),k.forEach(b),this.h()},h(){m(l,"class","marker svelte-ezln19"),m(u,"class","choice svelte-ezln19"),m(u,"tabindex","0"),m(u,"autofocus",""),m(c,"class","marker svelte-ezln19"),m(i,"class","choice svelte-ezln19"),m(i,"tabindex","0"),m(o,"class","multiple-choice"),m(e,"class","room-dialog-box svelte-ezln19"),m(e,"aria-live","polite"),L(e,"is-mobile",s[2])},m(p,k){x(p,e,k),w(e,t),w(t,n),w(e,r),w(e,o),w(o,u),w(u,l),w(l,a),w(u,f),w(o,_),w(o,i),w(i,c),w(c,d),w(i,h),u.focus(),g||(v=[N(u,"click",s[4]),N(u,"keydown",s[5]),N(i,"click",s[6]),N(i,"keydown",s[7])],g=!0)},p(p,[k]){k&1&&me(n,p[0]),k&4&&L(e,"is-mobile",p[2])},i:se,o:se,d(p){p&&b(e),g=!1,we(v)}}}function kr(s,e,t){let n;C(s,Ie,i=>t(2,n=i));const r=ve();let{text:o=""}=e,{roomId:u=""}=e;const l=i=>{r("room",{roomId:u})},a=i=>{i.code==="Enter"&&r("room",{roomId:u})},f=i=>{r("room",{roomId:!1})},_=i=>{i.code==="Enter"&&r("room",{roomId:!1})};return s.$$set=i=>{"text"in i&&t(0,o=i.text),"roomId"in i&&t(1,u=i.roomId)},[o,u,n,r,l,a,f,_]}class yr extends ee{constructor(e){super(),te(this,e,kr,br,ne,{text:0,roomId:1})}}function wr(s){let e,t,n,r;return t=new yr({props:{text:`Go to ${s[1]}?`,roomId:s[0]}}),t.$on("room",s[3]),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0,"aria-live":!0});var u=E(e);W(t.$$.fragment,u),u.forEach(b),this.h()},h(){m(e,"class","caption-container svelte-ukizaq"),m(e,"aria-live","polite")},m(o,u){x(o,e,u),Z(t,e,null),r=!0},p(o,[u]){const l={};u&2&&(l.text=`Go to ${o[1]}?`),u&1&&(l.roomId=o[0]),t.$set(l)},i(o){r||(z(t.$$.fragment,o),n||_e(()=>{n=qe(e,ie,{}),n.start()}),r=!0)},o(o){D(t.$$.fragment,o),r=!1},d(o){o&&b(e),K(t)}}}function Ar(s,e,t){const n=ve();let{roomIntent:r=""}=e,{roomTitle:o=""}=e;const u=l=>{n("room",{roomId:l.detail.roomId})};return s.$$set=l=>{"roomIntent"in l&&t(0,r=l.roomIntent),"roomTitle"in l&&t(1,o=l.roomTitle)},[r,o,n,u]}class Ir extends ee{constructor(e){super(),te(this,e,Ar,wr,ne,{roomIntent:0,roomTitle:1})}}function Tr(s){let e,t,n,r,o,u,l,a,f,_,i,c,d,h,g,v;return{c(){e=I("div"),t=I("div"),n=H(s[0]),r=O(),o=I("div"),u=I("div"),l=I("div"),a=H("\u25B8"),f=H(`
      Yes`),_=O(),i=I("div"),c=I("div"),d=H("\u25B8"),h=H(`
      No`),this.h()},l(p){e=T(p,"DIV",{class:!0,"aria-live":!0});var k=E(e);t=T(k,"DIV",{});var y=E(t);n=B(y,s[0]),y.forEach(b),r=P(k),o=T(k,"DIV",{class:!0});var j=E(o);u=T(j,"DIV",{class:!0,tabindex:!0,autofocus:!0});var S=E(u);l=T(S,"DIV",{class:!0});var M=E(l);a=B(M,"\u25B8"),M.forEach(b),f=B(S,`
      Yes`),S.forEach(b),_=P(j),i=T(j,"DIV",{class:!0,tabindex:!0});var F=E(i);c=T(F,"DIV",{class:!0});var R=E(c);d=B(R,"\u25B8"),R.forEach(b),h=B(F,`
      No`),F.forEach(b),j.forEach(b),k.forEach(b),this.h()},h(){m(l,"class","marker svelte-spoley"),m(u,"class","choice svelte-spoley"),m(u,"tabindex","0"),m(u,"autofocus",""),m(c,"class","marker svelte-spoley"),m(i,"class","choice svelte-spoley"),m(i,"tabindex","0"),m(o,"class","multiple-choice"),m(e,"class","object-dialog-box svelte-spoley"),m(e,"aria-live","polite")},m(p,k){x(p,e,k),w(e,t),w(t,n),w(e,r),w(e,o),w(o,u),w(u,l),w(l,a),w(u,f),w(o,_),w(o,i),w(i,c),w(c,d),w(i,h),u.focus(),g||(v=[N(u,"click",s[3]),N(u,"keydown",s[4]),N(i,"click",s[5]),N(i,"keydown",s[6])],g=!0)},p(p,[k]){k&1&&me(n,p[0])},i:se,o:se,d(p){p&&b(e),g=!1,we(v)}}}function Er(s,e,t){const n=ve();let{text:r=""}=e,{objectId:o=""}=e;const u=_=>{n("object",{objectId:o})},l=_=>{_.code==="Enter"&&n("object",{objectId:o})},a=_=>{n("object",{objectId:!1})},f=_=>{_.code==="Enter"&&n("object",{objectId:!1})};return s.$$set=_=>{"text"in _&&t(0,r=_.text),"objectId"in _&&t(1,o=_.objectId)},[r,o,n,u,l,a,f]}class zr extends ee{constructor(e){super(),te(this,e,Er,Tr,ne,{text:0,objectId:1})}}function jr(s){let e,t,n,r,o,u;return r=new zr({props:{text:`Look at ${s[1]}?`,objectId:s[0]}}),r.$on("object",s[3]),{c(){e=I("div"),t=H(s[1]),n=O(),Y(r.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0,"aria-live":!0});var a=E(e);t=B(a,s[1]),n=P(a),W(r.$$.fragment,a),a.forEach(b),this.h()},h(){m(e,"class","caption-container svelte-ukizaq"),m(e,"aria-live","polite")},m(l,a){x(l,e,a),w(e,t),w(e,n),Z(r,e,null),u=!0},p(l,[a]){(!u||a&2)&&me(t,l[1]);const f={};a&2&&(f.text=`Look at ${l[1]}?`),a&1&&(f.objectId=l[0]),r.$set(f)},i(l){u||(z(r.$$.fragment,l),o||_e(()=>{o=qe(e,ie,{}),o.start()}),u=!0)},o(l){D(r.$$.fragment,l),u=!1},d(l){l&&b(e),K(r)}}}function xr(s,e,t){const n=ve();let{objectIntent:r=""}=e,{objectTitle:o=""}=e;const u=l=>{n("object",{objectId:l.detail.objectId})};return s.$$set=l=>{"objectIntent"in l&&t(0,r=l.objectIntent),"objectTitle"in l&&t(1,o=l.objectTitle)},[r,o,n,u]}class Sr extends ee{constructor(e){super(),te(this,e,xr,jr,ne,{objectIntent:0,objectTitle:1})}}function Dr(s){let e,t;return{c(){e=He("svg"),t=He("path"),this.h()},l(n){e=Be(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var r=E(e);t=Be(r,"path",{d:!0,class:!0}),E(t).forEach(b),r.forEach(b),this.h()},h(){m(t,"d","M4.8474 7.78418L0.703963 0.607532L8.99084 0.607531L4.8474 7.78418Z"),m(t,"class","svelte-fiesz8"),m(e,"width","9"),m(e,"height","8"),m(e,"viewBox","0 0 9 8"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"class","svelte-fiesz8")},m(n,r){x(n,e,r),w(e,t)},p:se,i:se,o:se,d(n){n&&b(e)}}}class $r extends ee{constructor(e){super(),te(this,e,null,Dr,ne,{})}}function Ct(s){let e,t,n,r,o;return t=new $r({}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0});var l=E(e);W(t.$$.fragment,l),l.forEach(b),this.h()},h(){m(e,"class","next-caption svelte-ogi99z")},m(u,l){x(u,e,l),Z(t,e,null),n=!0,r||(o=N(e,"click",s[7]),r=!0)},p:se,i(u){n||(z(t.$$.fragment,u),n=!0)},o(u){D(t.$$.fragment,u),n=!1},d(u){u&&b(e),K(t),r=!1,o()}}}function Vr(s){let e,t,n=Pe(s[2].text.content)+"",r,o,u,l,a,f,_=s[1]<s[0].length-1&&Ct(s);return{c(){e=I("div"),t=I("div"),u=O(),_&&_.c(),this.h()},l(i){e=T(i,"DIV",{class:!0});var c=E(e);t=T(c,"DIV",{class:!0,"aria-live":!0});var d=E(t);d.forEach(b),u=P(c),_&&_.l(c),c.forEach(b),this.h()},h(){m(t,"class","caption-box svelte-ogi99z"),m(t,"aria-live","polite"),m(e,"class","caption-container svelte-ogi99z"),L(e,"is-mobile",s[3])},m(i,c){x(i,e,c),w(e,t),t.innerHTML=n,w(e,u),_&&_.m(e,null),l=!0,a||(f=N(t,"click",s[6]),a=!0)},p(i,[c]){s=i,(!l||c&4)&&n!==(n=Pe(s[2].text.content)+"")&&(t.innerHTML=n),s[1]<s[0].length-1?_?(_.p(s,c),c&3&&z(_,1)):(_=Ct(s),_.c(),z(_,1),_.m(e,null)):_&&(U(),D(_,1,1,()=>{_=null}),q()),c&8&&L(e,"is-mobile",s[3])},i(i){l||(_e(()=>{o&&o.end(1),r=qe(t,ie,s[5]),r.start()}),z(_),l=!0)},o(i){r&&r.invalidate(),o=Dn(t,ie,{duration:100}),D(_),l=!1},d(i){i&&b(e),i&&o&&o.end(),_&&_.d(),a=!1,f()}}}function Or(s,e,t){let n;C(s,Ie,i=>t(3,n=i));const r=ve(),o={duration:500};let{text:u=[]}=e,l=0,a=!1;const f=i=>{l<u.length-1?(t(1,l++,l),t(2,a=u[l])):r("close")},_=i=>{t(1,l++,l),t(2,a=u[l])};return s.$$set=i=>{"text"in i&&t(0,u=i.text)},s.$$.update=()=>{s.$$.dirty&3&&u.length>0&&t(2,a=u[l])},[u,l,a,n,r,o,f,_]}class Pr extends ee{constructor(e){super(),te(this,e,Or,Vr,ne,{text:0})}}const Mr=["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"];var Fr={words:Mr},Lr={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1},Rr=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"],Hr=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi,Br={object:Lr,array:Rr,regex:Hr};const Gr=Fr.words,Nr=Br.array;class Cr{constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(Gr,[Nr,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b/,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{const n=new RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&n.test(e)}).length>0||!1}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){return e.split(this.splitRegex).map(t=>this.isProfane(t)?this.replaceWord(t):t).join(this.splitRegex.exec(e)[0])}addWords(){let e=Array.from(arguments);this.list.push(...e),e.map(t=>t.toLowerCase()).forEach(t=>{this.exclude.includes(t)&&this.exclude.splice(this.exclude.indexOf(t),1)})}removeWords(){this.exclude.push(...Array.from(arguments).map(e=>e.toLowerCase()))}}var Ut=Cr,Ur=ti({__proto__:null,default:Ut},[Ut]);function qt(s,e,t){const n=s.slice();return n[7]=e[t],n}function Xt(s){let e,t;return{c(){e=I("div"),t=H("The chat is empty, for now."),this.h()},l(n){e=T(n,"DIV",{class:!0});var r=E(e);t=B(r,"The chat is empty, for now."),r.forEach(b),this.h()},h(){m(e,"class","chat-message svelte-fl6iys")},m(n,r){x(n,e,r),w(e,t)},d(n){n&&b(e)}}}function Yt(s){let e,t,n=s[7].name+"",r,o,u,l=s[7]._text+"",a,f;return{c(){e=I("div"),t=I("span"),r=H(n),o=H(": "),u=I("span"),a=H(l),f=O(),this.h()},l(_){e=T(_,"DIV",{class:!0,"aria-live":!0});var i=E(e);t=T(i,"SPAN",{class:!0});var c=E(t);r=B(c,n),o=B(c,": "),c.forEach(b),u=T(i,"SPAN",{class:!0});var d=E(u);a=B(d,l),d.forEach(b),f=P(i),i.forEach(b),this.h()},h(){m(t,"class","username svelte-fl6iys"),m(u,"class","message-text svelte-fl6iys"),m(e,"class","chat-message svelte-fl6iys"),m(e,"aria-live","polite")},m(_,i){x(_,e,i),w(e,t),w(t,r),w(t,o),w(e,u),w(u,a),w(e,f)},p(_,i){i&1&&n!==(n=_[7].name+"")&&me(r,n),i&1&&l!==(l=_[7]._text+"")&&me(a,l)},d(_){_&&b(e)}}}function qr(s){let e,t,n,r,o,u,l,a,f=s[0].length<=0&&Xt(),_=s[0],i=[];for(let c=0;c<_.length;c+=1)i[c]=Yt(qt(s,_,c));return{c(){e=I("div"),t=I("div"),n=I("span"),r=H("For a less ephemeral conversation, "),o=I("a"),u=H("join our Discord."),l=O(),f&&f.c(),a=O();for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=T(c,"DIV",{class:!0});var d=E(e);t=T(d,"DIV",{class:!0});var h=E(t);n=T(h,"SPAN",{class:!0});var g=E(n);r=B(g,"For a less ephemeral conversation, "),o=T(g,"A",{href:!0,class:!0});var v=E(o);u=B(v,"join our Discord."),v.forEach(b),g.forEach(b),h.forEach(b),l=P(d),f&&f.l(d),a=P(d);for(let p=0;p<i.length;p+=1)i[p].l(d);d.forEach(b),this.h()},h(){m(o,"href","https://discord.gg/QNRHD6Kwhk"),m(o,"class","svelte-fl6iys"),m(n,"class","message-text svelte-fl6iys"),m(t,"class","chat-message chat-pinned svelte-fl6iys"),m(e,"class","chat-log svelte-fl6iys")},m(c,d){x(c,e,d),w(e,t),w(t,n),w(n,r),w(n,o),w(o,u),w(e,l),f&&f.m(e,null),w(e,a);for(let h=0;h<i.length;h+=1)i[h].m(e,null);s[3](e)},p(c,[d]){if(c[0].length<=0?f||(f=Xt(),f.c(),f.m(e,a)):f&&(f.d(1),f=null),d&1){_=c[0];let h;for(h=0;h<_.length;h+=1){const g=qt(c,_,h);i[h]?i[h].p(g,d):(i[h]=Yt(g),i[h].c(),i[h].m(e,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=_.length}},i:se,o:se,d(c){c&&b(e),f&&f.d(),Me(i,c),s[3](null)}}}function Xr(s,e,t){let{messages:n=[]}=e,{room:r={}}=e,o=null;const u=()=>{t(1,o.scrollTop=o.scrollHeight,o)};$n(()=>{u()});function l(a){ge[a?"unshift":"push"](()=>{o=a,t(1,o)})}return s.$$set=a=>{"messages"in a&&t(0,n=a.messages),"room"in a&&t(2,r=a.room)},[n,o,r,l]}class Yr extends ee{constructor(e){super(),te(this,e,Xr,qr,ne,{messages:0,room:2})}}function Wr(s){let e,t;return{c(){e=I("iframe"),this.h()},l(n){e=T(n,"IFRAME",{class:!0,src:!0,style:!0}),E(e).forEach(b),this.h()},h(){m(e,"class","discord-widget svelte-1eyiicu"),X(e.src,t=s[5])||m(e,"src",t),un(e,"sidebar","display:none"),L(e,"hidden-mobile",!s[4])},m(n,r){x(n,e,r)},p(n,r){r&32&&!X(e.src,t=n[5])&&m(e,"src",t),r&16&&L(e,"hidden-mobile",!n[4])},i:se,o:se,d(n){n&&b(e)}}}function Zr(s){let e,t,n,r,o,u,l,a,f,_,i;return t=new Yr({props:{messages:s[0],room:s[2]}}),{c(){e=I("div"),Y(t.$$.fragment),n=O(),r=I("div"),o=I("input"),u=O(),l=I("button"),a=H("Send"),this.h()},l(c){e=T(c,"DIV",{class:!0});var d=E(e);W(t.$$.fragment,d),n=P(d),r=T(d,"DIV",{class:!0});var h=E(r);o=T(h,"INPUT",{placeholder:!0,type:!0,maxlength:!0,class:!0}),u=P(h),l=T(h,"BUTTON",{class:!0});var g=E(l);a=B(g,"Send"),g.forEach(b),h.forEach(b),d.forEach(b),this.h()},h(){m(o,"placeholder","Write a message..."),m(o,"type","[text]"),m(o,"maxlength","600"),m(o,"class","svelte-1eyiicu"),m(l,"class","svelte-1eyiicu"),m(r,"class","chat-input svelte-1eyiicu"),m(e,"class","chat-content svelte-1eyiicu"),L(e,"hidden-mobile",!s[4])},m(c,d){x(c,e,d),Z(t,e,null),w(e,n),w(e,r),w(r,o),Re(o,s[3]),w(r,u),w(r,l),w(l,a),f=!0,_||(i=[N(o,"input",s[9]),N(o,"keydown",s[10]),N(l,"click",s[7])],_=!0)},p(c,d){const h={};d&1&&(h.messages=c[0]),d&4&&(h.room=c[2]),t.$set(h),d&8&&Re(o,c[3]),d&16&&L(e,"hidden-mobile",!c[4])},i(c){f||(z(t.$$.fragment,c),f=!0)},o(c){D(t.$$.fragment,c),f=!1},d(c){c&&b(e),K(t),_=!1,we(i)}}}function Kr(s){let e,t,n=s[4]?"X":"Chat",r,o,u,l,a,f,_;const i=[Zr,Wr],c=[];function d(h,g){return h[1]==null||h[1].useDiscord!=!0||h[1].discordChannelId==null?0:1}return u=d(s),l=c[u]=i[u](s),{c(){e=I("div"),t=I("button"),r=H(n),o=O(),l.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var g=E(e);t=T(g,"BUTTON",{class:!0});var v=E(t);r=B(v,n),v.forEach(b),o=P(g),l.l(g),g.forEach(b),this.h()},h(){m(t,"class","mobile-button svelte-1eyiicu"),L(t,"minimize",s[4]),m(e,"class","chat-container svelte-1eyiicu"),L(e,"is-mobile",s[6]),L(e,"minimize",s[6]?!s[4]:!1)},m(h,g){x(h,e,g),w(e,t),w(t,r),w(e,o),c[u].m(e,null),a=!0,f||(_=N(t,"click",s[8]),f=!0)},p(h,[g]){(!a||g&16)&&n!==(n=h[4]?"X":"Chat")&&me(r,n),g&16&&L(t,"minimize",h[4]);let v=u;u=d(h),u===v?c[u].p(h,g):(U(),D(c[v],1,1,()=>{c[v]=null}),q(),l=c[u],l?l.p(h,g):(l=c[u]=i[u](h),l.c()),z(l,1),l.m(e,null)),g&64&&L(e,"is-mobile",h[6]),g&80&&L(e,"minimize",h[6]?!h[4]:!1)},i(h){a||(z(l),a=!0)},o(h){D(l),a=!1},d(h){h&&b(e),c[u].d(),f=!1,_()}}}function Qr(s,e,t){let n,r,o,u;C(s,De,v=>t(2,o=v)),C(s,Ie,v=>t(6,u=v));const l=ve(),a=new Ur;let f="",{chatMessages:_=[]}=e,i=u?!1:null;const c=()=>{l("submit",{text:a.clean(f)}),t(3,f="")},d=()=>{t(4,i=!i)};function h(){f=this.value,t(3,f)}const g=v=>{v.keyCode==13&&c()};return s.$$set=v=>{"chatMessages"in v&&t(0,_=v.chatMessages)},s.$$.update=()=>{s.$$.dirty&4&&t(1,n=o.chatSettings!=null?o.chatSettings:{useDiscord:!1,discordChannelId:void 0}),s.$$.dirty&2&&t(5,r=`https://e.widgetbot.io/channels/806275264807698482/${n.discordChannelId}`)},[_,n,o,f,i,r,u,c,d,h,g]}class Jr extends ee{constructor(e){super(),te(this,e,Qr,Kr,ne,{chatMessages:0})}}function eo(s){let e,t,n,r,o,u,l,a,f,_,i,c,d,h,g,v,p,k,y;return{c(){e=I("div"),t=I("div"),n=I("span"),r=H("\u2190"),o=O(),u=I("div"),l=I("div"),a=I("span"),f=H("\u2191"),_=O(),i=I("div"),c=I("span"),d=H("\u2193"),h=O(),g=I("div"),v=I("span"),p=H("\u2192"),this.h()},l(j){e=T(j,"DIV",{class:!0});var S=E(e);t=T(S,"DIV",{class:!0});var M=E(t);n=T(M,"SPAN",{});var F=E(n);r=B(F,"\u2190"),F.forEach(b),M.forEach(b),o=P(S),u=T(S,"DIV",{class:!0});var R=E(u);l=T(R,"DIV",{class:!0});var A=E(l);a=T(A,"SPAN",{class:!0});var V=E(a);f=B(V,"\u2191"),V.forEach(b),A.forEach(b),_=P(R),i=T(R,"DIV",{class:!0});var Q=E(i);c=T(Q,"SPAN",{class:!0});var re=E(c);d=B(re,"\u2193"),re.forEach(b),Q.forEach(b),R.forEach(b),h=P(S),g=T(S,"DIV",{class:!0});var le=E(g);v=T(le,"SPAN",{});var J=E(v);p=B(J,"\u2192"),J.forEach(b),le.forEach(b),S.forEach(b),this.h()},h(){m(t,"class","key left svelte-1gdx3ae"),L(t,"active",s[4]==s[2]),m(a,"class","svelte-1gdx3ae"),m(l,"class","key up svelte-1gdx3ae"),L(l,"active",s[4]==s[0]),m(c,"class","svelte-1gdx3ae"),m(i,"class","key down svelte-1gdx3ae"),L(i,"active",s[4]==s[1]),m(u,"class","vert svelte-1gdx3ae"),m(g,"class","key right svelte-1gdx3ae"),L(g,"active",s[4]==s[3]),m(e,"class","phone-navigation svelte-1gdx3ae")},m(j,S){x(j,e,S),w(e,t),w(t,n),w(n,r),s[8](t),w(e,o),w(e,u),w(u,l),w(l,a),w(a,f),s[10](l),w(u,_),w(u,i),w(i,c),w(c,d),s[12](i),w(e,h),w(e,g),w(g,v),w(v,p),s[14](g),k||(y=[N(t,"touchstart",s[7],{passive:!0}),N(l,"touchstart",s[9],{passive:!0}),N(i,"touchstart",s[11],{passive:!0}),N(g,"touchstart",s[13],{passive:!0})],k=!0)},p(j,[S]){S&20&&L(t,"active",j[4]==j[2]),S&17&&L(l,"active",j[4]==j[0]),S&18&&L(i,"active",j[4]==j[1]),S&24&&L(g,"active",j[4]==j[3])},i:se,o:se,d(j){j&&b(e),s[8](null),s[10](null),s[12](null),s[14](null),k=!1,we(y)}}}function to(s,e,t){const n={UP:38,DOWN:40,LEFT:37,RIGHT:39};let r,o,u,l,a;function f(k,y){document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:y}));const j=setInterval(()=>document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:y})),150);t(4,a=k);function S(){clearInterval(j),t(4,a=""),k.removeEventListener("touchend",S,!1)}k.addEventListener("touchend",S,!1)}const _=()=>{f(u,n.LEFT)};function i(k){ge[k?"unshift":"push"](()=>{u=k,t(2,u)})}const c=()=>{f(r,n.UP)};function d(k){ge[k?"unshift":"push"](()=>{r=k,t(0,r)})}const h=()=>{f(o,n.DOWN)};function g(k){ge[k?"unshift":"push"](()=>{o=k,t(1,o)})}const v=()=>{f(l,n.RIGHT)};function p(k){ge[k?"unshift":"push"](()=>{l=k,t(3,l)})}return[r,o,u,l,a,n,f,_,i,c,d,h,g,v,p]}class no extends ee{constructor(e){super(),te(this,e,to,eo,ne,{})}}function Wt(s,e,t){const n=s.slice();return n[31]=e[t],n}function Zt(s){let e,t;return e=new ui({props:{avatars:s[2]}}),e.$on("finish",s[20]),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&4&&(o.avatars=n[2]),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Kt(s){let e,t,n;return t=new hi({props:{room:s[5],$$slots:{default:[io]},$$scope:{ctx:s}}}),{c(){e=I("div"),Y(t.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0,role:!0});var o=E(e);W(t.$$.fragment,o),o.forEach(b),this.h()},h(){m(e,"class","viewport svelte-pgjlfq"),m(e,"role","ui"),L(e,"pushed",s[7])},m(r,o){x(r,e,o),Z(t,e,null),s[22](e),n=!0},p(r,o){const u={};o[0]&32&&(u.room=r[5]),o[0]&37|o[1]&8&&(u.$$scope={dirty:o,ctx:r}),t.$set(u),o[0]&128&&L(e,"pushed",r[7])},i(r){n||(z(t.$$.fragment,r),n=!0)},o(r){D(t.$$.fragment,r),n=!1},d(r){r&&b(e),K(t),s[22](null)}}}function io(s){let e,t,n,r,o,u,l,a;return e=new bi({props:{players:s[0],currentRoomId:s[5]._id,avatars:s[2]}}),n=new ji({props:{objects:ae(s[5],"objects",[])}}),o=new Mi({props:{zones:ae(s[5],"zones",[])}}),l=new Ci({props:{portals:ae(s[5],"portals",[])}}),l.$on("room",s[21]),{c(){Y(e.$$.fragment),t=O(),Y(n.$$.fragment),r=O(),Y(o.$$.fragment),u=O(),Y(l.$$.fragment)},l(f){W(e.$$.fragment,f),t=P(f),W(n.$$.fragment,f),r=P(f),W(o.$$.fragment,f),u=P(f),W(l.$$.fragment,f)},m(f,_){Z(e,f,_),x(f,t,_),Z(n,f,_),x(f,r,_),Z(o,f,_),x(f,u,_),Z(l,f,_),a=!0},p(f,_){const i={};_[0]&1&&(i.players=f[0]),_[0]&32&&(i.currentRoomId=f[5]._id),_[0]&4&&(i.avatars=f[2]),e.$set(i);const c={};_[0]&32&&(c.objects=ae(f[5],"objects",[])),n.$set(c);const d={};_[0]&32&&(d.zones=ae(f[5],"zones",[])),o.$set(d);const h={};_[0]&32&&(h.portals=ae(f[5],"portals",[])),l.$set(h)},i(f){a||(z(e.$$.fragment,f),z(n.$$.fragment,f),z(o.$$.fragment,f),z(l.$$.fragment,f),a=!0)},o(f){D(e.$$.fragment,f),D(n.$$.fragment,f),D(o.$$.fragment,f),D(l.$$.fragment,f),a=!1},d(f){K(e,f),f&&b(t),K(n,f),f&&b(r),K(o,f),f&&b(u),K(l,f)}}}function Qt(s){let e,t;return e=new Li({props:{soundFile:s[5].backgroundSound}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&32&&(o.soundFile=n[5].backgroundSound),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Jt(s){let e,t;return e=new er({props:{streamUrl:s[31].videoUrl,audioOnly:s[31].audioOnly,title:s[31].title}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&512&&(o.streamUrl=n[31].videoUrl),r[0]&512&&(o.audioOnly=n[31].audioOnly),r[0]&512&&(o.title=n[31].title),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function en(s){let e,t,n=!s[10]&&(s[5]._id==s[31].parentArea._ref||s[11]._id==s[31].parentArea._ref)&&Jt(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,o){!r[10]&&(r[5]._id==r[31].parentArea._ref||r[11]._id==r[31].parentArea._ref)?n?(n.p(r,o),o[0]&3616&&z(n,1)):(n=Jt(r),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(U(),D(n,1,1,()=>{n=null}),q())},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function tn(s){let e,t;return e=new Ir({props:{roomIntent:s[12],roomTitle:s[4][s[12]].title}}),e.$on("room",s[23]),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&4096&&(o.roomIntent=n[12]),r[0]&4112&&(o.roomTitle=n[4][n[12]].title),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function nn(s){let e,t;return e=new Sr({props:{objectIntent:s[13],objectTitle:s[5].objects.find(s[24]).title}}),e.$on("object",s[25]),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&8192&&(o.objectIntent=n[13]),r[0]&8224&&(o.objectTitle=n[5].objects.find(n[24]).title),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function rn(s){let e,t,n=s[3]&&on(s);return{c(){n&&n.c(),e=G()},l(r){n&&n.l(r),e=G()},m(r,o){n&&n.m(r,o),x(r,e,o),t=!0},p(r,o){r[3]?n?(n.p(r,o),o[0]&8&&z(n,1)):(n=on(r),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(U(),D(n,1,1,()=>{n=null}),q())},i(r){t||(z(n),t=!0)},o(r){D(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function on(s){let e,t;return e=new Pr({props:{text:s[3]}}),e.$on("close",s[26]),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&8&&(o.text=n[3]),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function sn(s){let e,t;return e=new gr({props:{article:s[14]}}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&16384&&(o.article=n[14]),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ln(s){let e,t;return e=new Jr({props:{chatMessages:s[15].filter(s[27])}}),e.$on("submit",s[28]),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},p(n,r){const o={};r[0]&32800&&(o.chatMessages=n[15].filter(n[27])),e.$set(o)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function an(s){let e,t;return e=new no({}),{c(){Y(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,r){Z(e,n,r),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ro(s){let e,t,n=pe(s[5],"backgroundSound.asset")&&s[8],r,o,u,l,a,f,_,i,c,d=s[6]==Ne.ONBOARDING&&Zt(s),h=s[5]&&Kt(s),g=n&&Qt(s),v=s[9],p=[];for(let A=0;A<v.length;A+=1)p[A]=en(Wt(s,v,A));const k=A=>D(p[A],1,1,()=>{p[A]=null});let y=s[12]&&tn(s),j=s[13]&&nn(s),S=!s[10]&&!s[7]&&!s[14]&&!s[12]&&!s[13]&&rn(s),M=s[14]&&sn(s),F=!s[10]&&!s[7]&&!s[14]&&ln(s),R=s[16]&&!s[14]&&an();return{c(){d&&d.c(),e=O(),h&&h.c(),t=O(),g&&g.c(),r=O();for(let A=0;A<p.length;A+=1)p[A].c();o=O(),y&&y.c(),u=O(),j&&j.c(),l=O(),S&&S.c(),a=O(),M&&M.c(),f=O(),F&&F.c(),_=O(),R&&R.c(),i=G()},l(A){d&&d.l(A),e=P(A),h&&h.l(A),t=P(A),g&&g.l(A),r=P(A);for(let V=0;V<p.length;V+=1)p[V].l(A);o=P(A),y&&y.l(A),u=P(A),j&&j.l(A),l=P(A),S&&S.l(A),a=P(A),M&&M.l(A),f=P(A),F&&F.l(A),_=P(A),R&&R.l(A),i=G()},m(A,V){d&&d.m(A,V),x(A,e,V),h&&h.m(A,V),x(A,t,V),g&&g.m(A,V),x(A,r,V);for(let Q=0;Q<p.length;Q+=1)p[Q].m(A,V);x(A,o,V),y&&y.m(A,V),x(A,u,V),j&&j.m(A,V),x(A,l,V),S&&S.m(A,V),x(A,a,V),M&&M.m(A,V),x(A,f,V),F&&F.m(A,V),x(A,_,V),R&&R.m(A,V),x(A,i,V),c=!0},p(A,V){if(A[6]==Ne.ONBOARDING?d?(d.p(A,V),V[0]&64&&z(d,1)):(d=Zt(A),d.c(),z(d,1),d.m(e.parentNode,e)):d&&(U(),D(d,1,1,()=>{d=null}),q()),A[5]?h?(h.p(A,V),V[0]&32&&z(h,1)):(h=Kt(A),h.c(),z(h,1),h.m(t.parentNode,t)):h&&(U(),D(h,1,1,()=>{h=null}),q()),V[0]&288&&(n=pe(A[5],"backgroundSound.asset")&&A[8]),n?g?(g.p(A,V),V[0]&288&&z(g,1)):(g=Qt(A),g.c(),z(g,1),g.m(r.parentNode,r)):g&&(U(),D(g,1,1,()=>{g=null}),q()),V[0]&3616){v=A[9];let Q;for(Q=0;Q<v.length;Q+=1){const re=Wt(A,v,Q);p[Q]?(p[Q].p(re,V),z(p[Q],1)):(p[Q]=en(re),p[Q].c(),z(p[Q],1),p[Q].m(o.parentNode,o))}for(U(),Q=v.length;Q<p.length;Q+=1)k(Q);q()}A[12]?y?(y.p(A,V),V[0]&4096&&z(y,1)):(y=tn(A),y.c(),z(y,1),y.m(u.parentNode,u)):y&&(U(),D(y,1,1,()=>{y=null}),q()),A[13]?j?(j.p(A,V),V[0]&8192&&z(j,1)):(j=nn(A),j.c(),z(j,1),j.m(l.parentNode,l)):j&&(U(),D(j,1,1,()=>{j=null}),q()),!A[10]&&!A[7]&&!A[14]&&!A[12]&&!A[13]?S?(S.p(A,V),V[0]&29824&&z(S,1)):(S=rn(A),S.c(),z(S,1),S.m(a.parentNode,a)):S&&(U(),D(S,1,1,()=>{S=null}),q()),A[14]?M?(M.p(A,V),V[0]&16384&&z(M,1)):(M=sn(A),M.c(),z(M,1),M.m(f.parentNode,f)):M&&(U(),D(M,1,1,()=>{M=null}),q()),!A[10]&&!A[7]&&!A[14]?F?(F.p(A,V),V[0]&17536&&z(F,1)):(F=ln(A),F.c(),z(F,1),F.m(_.parentNode,_)):F&&(U(),D(F,1,1,()=>{F=null}),q()),A[16]&&!A[14]?R?V[0]&81920&&z(R,1):(R=an(),R.c(),z(R,1),R.m(i.parentNode,i)):R&&(U(),D(R,1,1,()=>{R=null}),q())},i(A){if(!c){z(d),z(h),z(g);for(let V=0;V<v.length;V+=1)z(p[V]);z(y),z(j),z(S),z(M),z(F),z(R),c=!0}},o(A){D(d),D(h),D(g),p=p.filter(Boolean);for(let V=0;V<p.length;V+=1)D(p[V]);D(y),D(j),D(S),D(M),D(F),D(R),c=!1},d(A){d&&d.d(A),A&&b(e),h&&h.d(A),A&&b(t),g&&g.d(A),A&&b(r),Me(p,A),A&&b(o),y&&y.d(A),A&&b(u),j&&j.d(A),A&&b(l),S&&S.d(A),A&&b(a),M&&M.d(A),A&&b(f),F&&F.d(A),A&&b(_),R&&R.d(A),A&&b(i)}}}function oo(s,e,t){let n,r,o,u,l,a,f,_,i,c,d,h,g,v,p,k,y;C(s,kn,$=>t(29,n=$)),C(s,Wn,$=>t(4,r=$)),C(s,De,$=>t(5,o=$)),C(s,yn,$=>t(30,u=$)),C(s,tt,$=>t(19,l=$)),C(s,mn,$=>t(0,a=$)),C(s,Ye,$=>t(6,f=$)),C(s,vn,$=>t(7,_=$)),C(s,Zn,$=>t(8,i=$)),C(s,Kn,$=>t(9,c=$)),C(s,$e,$=>t(10,d=$)),C(s,Qn,$=>t(11,h=$)),C(s,We,$=>t(12,g=$)),C(s,nt,$=>t(13,v=$)),C(s,Ae,$=>t(14,p=$)),C(s,_n,$=>t(15,k=$)),C(s,Ie,$=>t(16,y=$));let j={},S=[],M=!1;const F=async $=>{Oe.set(!1),await Gn(j);const de=o._id,oe=r[$];De.set(oe),r[$].mainArea?history.replaceState(null,null," "):history.replaceState(null,null,"#"+ae(r[$],"slug.current",""));let ue=xe(4,6),ze=xe(4,6);if(oe.portals&&oe.portals.find(ke=>ke.targetArea._id===de)){const ke=oe.portals.find(An=>An.targetArea._id===de);for(;ue=xe(ke.x-2,ke.x+2),ze=xe(ke.y-2,ke.y),ue<1||ze<1||ue>oe.dimensions.width||ze>oe.dimensions.height||ue==ke.x&&ue==ke.x;);}Nn({id:oe._id,x:ue,y:ze}),await Cn(j),oe.showTitles===!1?Oe.set(!1):Oe.set(!0),pe(oe,"introductionTexts")?t(3,M=oe.introductionTexts):t(3,M=!1)},R=async($,de)=>{let oe={uuid:l.uuid,name:u&&u.name?u.name:$,shape:pe(u,"avatar._ref")?u.avatar._ref:de,onboarded:!0,room:o._id,x:xe(10,30),y:xe(5,15)};if(await Un(oe),ye("\u2713 (4) Game server connected"),await qn(),ye("\u2713 (5) Keyboard initialized"),Xn(),ye("\u2713 (6) Stream listener initialized"),window.location.hash){const ue=window.location.hash.substring(1);for(const[ze,ke]of Object.entries(r))if(ae(r[ze],"slug.current","")===ue){F(ze);break}}pe(o,"introductionTexts")&&t(3,M=o.introductionTexts),ye("\u2713 (7) Show main room introduction"),ye("__ => App loaded"),Se.set("open-eyebeam-name",$),Se.set("open-eyebeam-avatar",de),Ye.set(Ne.READY),setTimeout(()=>{$e.set(!1)},3e3),Ie.set(dn())};be(async()=>{ye("__ => App starting...");try{await ni()}catch(oe){fn("Error in authentication:",oe)}ye("\u2713 (1) Auth client configured "),Se.get("open-eyebeam-logged-in")&&!n&&ii(),await Rn(),ye("\u2713 (2) World built");for(const[oe,ue]of Object.entries(r))if(r[oe].mainArea){De.set(r[oe]);break}t(2,S=await Hn()),ye("\u2713 (3) Avatars loaded"),tt.update(oe=>(oe.uuid=Bn(),oe));let $=Se.get("open-eyebeam-name"),de=Se.get("open-eyebeam-avatar");!$&&!n?Ye.set(Ne.ONBOARDING):R($,de)});const A=$=>{R($.detail.name,$.detail.avatar)},V=$=>{$.detail.roomId&&F($.detail.roomId),We.set(!1)};function Q($){ge[$?"unshift":"push"](()=>{j=$,t(1,j)})}const re=$=>{$.detail.roomId&&F(g),We.set(!1)},le=$=>$._id==v,J=$=>{if($.detail.objectId){let de=o.objects.find(oe=>oe._id==v);de.contentType!="externalLink"?(console.log("object",de),Ae.set(de),nt.set(!1)):window.open(de.url,"_blank").focus()}},fe=$=>{t(3,M=!1)},Fe=$=>$.room===o._id,je=$=>{Yn($,o)};return s.$$.update=()=>{s.$$.dirty[0]&524289&&a[l.uuid]&&(a[l.uuid].x||a[l.uuid].x)&&(Jn(),ei(),gn())},[a,j,S,M,r,o,f,_,i,c,d,h,g,v,p,k,y,F,R,l,A,V,Q,re,le,J,fe,Fe,je]}class co extends ee{constructor(e){super(),te(this,e,oo,ro,ne,{},null,[-1,-1])}}export{co as default};
