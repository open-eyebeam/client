var Tr=Object.defineProperty,xr=Object.defineProperties;var Or=Object.getOwnPropertyDescriptors;var nr=Object.getOwnPropertySymbols;var Ir=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable;var ir=(r,e,t)=>e in r?Tr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bt=(r,e)=>{for(var t in e||(e={}))Ir.call(e,t)&&ir(r,t,e[t]);if(nr)for(var t of nr(e))Cr.call(e,t)&&ir(r,t,e[t]);return r},Vt=(r,e)=>xr(r,Or(e));import{F as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,E as noop$1,G as create_slot,e as element,k as space,t as text,c as claim_element,a as children,m as claim_space,d as detach,h as claim_text,b as attr,g as insert_hydration,H as append_hydration,I as listen$2,J as update_slot_base,K as get_all_dirty_from_scope,L as get_slot_changes,q as transition_in,o as transition_out,M as component_subscribe,N as createEventDispatcher,O as binding_callbacks,P as identity$2,Q as src_url_equal,R as toggle_class,T as add_render_callback,U as create_bidirectional_transition,v as onMount,l as empty,w as create_component,x as claim_component,y as mount_component,B as destroy_component,n as group_outros,p as check_outros,V as update_keyed_each,W as outro_and_destroy_block,X as onDestroy,j as set_data,Y as create_in_transition,Z as destroy_each,_ as run_all,$ as svg_element,a0 as claim_svg_element,a1 as HtmlTagHydration,a2 as claim_html_tag,f as set_style,a3 as query_selector_all,a4 as handle_promise,a5 as update_await_block_branch,a6 as create_out_transition,a7 as set_input_value}from"../chunks/index-4e3d32d0.js";import{w as writable}from"../chunks/index-954e9f97.js";var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}var isArray$9=Array.isArray,isArray_1$1=isArray$9,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$4=freeGlobal||freeSelf||Function("return this")(),_root=root$4,root$3=_root,Symbol$4=root$3.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,nativeObjectToString$1=objectProto$9.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(r){var e=hasOwnProperty$8.call(r,symToStringTag$1),t=r[symToStringTag$1];try{r[symToStringTag$1]=void 0;var n=!0}catch{}var a=nativeObjectToString$1.call(r);return n&&(e?r[symToStringTag$1]=t:delete r[symToStringTag$1]),a}var _getRawTag=getRawTag$1,objectProto$8=Object.prototype,nativeObjectToString=objectProto$8.toString;function objectToString$1(r){return nativeObjectToString.call(r)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(r){return r==null?r===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(r)?getRawTag(r):objectToString(r)}var _baseGetTag=baseGetTag$4;function isObjectLike$4(r){return r!=null&&typeof r=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$3=_baseGetTag,isObjectLike$3=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$4(r){return typeof r=="symbol"||isObjectLike$3(r)&&baseGetTag$3(r)==symbolTag}var isSymbol_1=isSymbol$4,isArray$8=isArray_1$1,isSymbol$3=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$1(r,e){if(isArray$8(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||isSymbol$3(r)?!0:reIsPlainProp.test(r)||!reIsDeepProp.test(r)||e!=null&&r in Object(e)}var _isKey=isKey$1;function isObject$8(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var isObject_1$1=isObject$8,baseGetTag$2=_baseGetTag,isObject$7=isObject_1$1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$4(r){if(!isObject$7(r))return!1;var e=baseGetTag$2(r);return e==funcTag$1||e==genTag||e==asyncTag||e==proxyTag}var isFunction_1$2=isFunction$4,root$2=_root,coreJsData$1=root$2["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var r=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function isMasked$1(r){return!!maskSrcKey&&maskSrcKey in r}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$1(r){if(r!=null){try{return funcToString$1.call(r)}catch{}try{return r+""}catch{}}return""}var _toSource=toSource$1,isFunction$3=isFunction_1$2,isMasked=_isMasked,isObject$6=isObject_1$1,toSource=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$7.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(r){if(!isObject$6(r)||isMasked(r))return!1;var e=isFunction$3(r)?reIsNative:reIsHostCtor;return e.test(toSource(r))}var _baseIsNative=baseIsNative$1;function getValue$1(r,e){return r==null?void 0:r[e]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$2(r,e){var t=getValue(r,e);return baseIsNative(t)?t:void 0}var _getNative=getNative$2,getNative$1=_getNative,nativeCreate$4=getNative$1(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet$1(r){var e=this.__data__;if(nativeCreate$2){var t=e[r];return t===HASH_UNDEFINED$1?void 0:t}return hasOwnProperty$6.call(e,r)?e[r]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas$1(r){var e=this.__data__;return nativeCreate$1?e[r]!==void 0:hasOwnProperty$5.call(e,r)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet$1(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=nativeCreate&&e===void 0?HASH_UNDEFINED:e,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$1(r,e){return r===e||r!==r&&e!==e}var eq_1=eq$1,eq=eq_1;function assocIndexOf$4(r,e){for(var t=r.length;t--;)if(eq(r[t][0],e))return t;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(r){var e=this.__data__,t=assocIndexOf$3(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():splice.call(e,t,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(r){var e=this.__data__,t=assocIndexOf$2(e,r);return t<0?void 0:e[t][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(r){return assocIndexOf$1(this.__data__,r)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(r,e){var t=this.__data__,n=assocIndexOf(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$1(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}ListCache$1.prototype.clear=listCacheClear;ListCache$1.prototype.delete=listCacheDelete;ListCache$1.prototype.get=listCacheGet;ListCache$1.prototype.has=listCacheHas;ListCache$1.prototype.set=listCacheSet;var _ListCache=ListCache$1,getNative=_getNative,root$1=_root,Map$2=getNative(root$1,"Map"),_Map=Map$2,Hash=_Hash,ListCache=_ListCache,Map$1=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(r,e){var t=r.__data__;return isKeyable(e)?t[typeof e=="string"?"string":"hash"]:t.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(r){var e=getMapData$3(this,r).delete(r);return this.size-=e?1:0,e}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(r){return getMapData$2(this,r).get(r)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(r){return getMapData$1(this,r).has(r)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(r,e){var t=getMapData(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}MapCache$1.prototype.clear=mapCacheClear;MapCache$1.prototype.delete=mapCacheDelete;MapCache$1.prototype.get=mapCacheGet;MapCache$1.prototype.has=mapCacheHas;MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,MapCache=_MapCache,FUNC_ERROR_TEXT$2="Expected a function";function memoize$1(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=t.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return t.cache=o.set(a,s)||o,s};return t.cache=new(memoize$1.Cache||MapCache),t}memoize$1.Cache=MapCache;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(r){var e=memoize(r,function(n){return t.size===MAX_MEMOIZE_SIZE&&t.clear(),n}),t=e.cache;return e}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(rePropName,function(t,n,a,o){e.push(a?o.replace(reEscapeChar,"$1"):n||t)}),e}),_stringToPath=stringToPath$1;function arrayMap$2(r,e){for(var t=-1,n=r==null?0:r.length,a=Array(n);++t<n;)a[t]=e(r[t],t,r);return a}var _arrayMap=arrayMap$2,Symbol$1=_Symbol,arrayMap$1=_arrayMap,isArray$7=isArray_1$1,isSymbol$2=isSymbol_1,INFINITY$2=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString$1(r){if(typeof r=="string")return r;if(isArray$7(r))return arrayMap$1(r,baseToString$1)+"";if(isSymbol$2(r))return symbolToString?symbolToString.call(r):"";var e=r+"";return e=="0"&&1/r==-INFINITY$2?"-0":e}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$2(r){return r==null?"":baseToString(r)}var toString_1=toString$2,isArray$6=isArray_1$1,isKey=_isKey,stringToPath=_stringToPath,toString$1=toString_1;function castPath$2(r,e){return isArray$6(r)?r:isKey(r,e)?[r]:stringToPath(toString$1(r))}var _castPath=castPath$2,isSymbol$1=isSymbol_1,INFINITY$1=1/0;function toKey$2(r){if(typeof r=="string"||isSymbol$1(r))return r;var e=r+"";return e=="0"&&1/r==-INFINITY$1?"-0":e}var _toKey=toKey$2,castPath$1=_castPath,toKey$1=_toKey;function baseGet$1(r,e){e=castPath$1(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[toKey$1(e[t++])];return t&&t==n?r:void 0}var _baseGet=baseGet$1,baseGet=_baseGet;function get(r,e,t){var n=r==null?void 0:baseGet(r,e);return n===void 0?t:n}var get_1=get,nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom$1(r,e){return r+nativeFloor(nativeRandom()*(e-r+1))}var _baseRandom=baseRandom$1,baseRandom=_baseRandom;function arraySample$2(r){var e=r.length;return e?r[baseRandom(0,e-1)]:void 0}var _arraySample=arraySample$2,arrayMap=_arrayMap;function baseValues$1(r,e){return arrayMap(e,function(t){return r[t]})}var _baseValues=baseValues$1;function baseTimes$1(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var _baseTimes=baseTimes$1,baseGetTag$1=_baseGetTag,isObjectLike$2=isObjectLike_1,argsTag$1="[object Arguments]";function baseIsArguments$1(r){return isObjectLike$2(r)&&baseGetTag$1(r)==argsTag$1}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$1=isObjectLike_1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(r){return isObjectLike$1(r)&&hasOwnProperty$4.call(r,"callee")&&!propertyIsEnumerable.call(r,"callee")},isArguments_1=isArguments$2,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;(function(r,e){var t=_root,n=stubFalse_1,a=e&&!e.nodeType&&e,o=a&&!0&&r&&!r.nodeType&&r,s=o&&o.exports===a,c=s?t.Buffer:void 0,u=c?c.isBuffer:void 0,d=u||n;r.exports=d})(isBuffer$2,isBuffer$2.exports);var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$2(r,e){var t=typeof r;return e=e==null?MAX_SAFE_INTEGER$1:e,!!e&&(t=="number"||t!="symbol"&&reIsUint.test(r))&&r>-1&&r%1==0&&r<e}var _isIndex=isIndex$2,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag=_baseGetTag,isLength$2=isLength_1,isObjectLike=isObjectLike_1,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;function baseIsTypedArray$1(r){return isObjectLike(r)&&isLength$2(r.length)&&!!typedArrayTags[baseGetTag(r)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(r){return function(e){return r(e)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};(function(r,e){var t=_freeGlobal,n=e&&!e.nodeType&&e,a=n&&!0&&r&&!r.nodeType&&r,o=a&&a.exports===n,s=o&&t.process,c=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();r.exports=c})(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$1,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1$1,isBuffer$1=isBuffer$2.exports,isIndex$1=_isIndex,isTypedArray=isTypedArray_1,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function arrayLikeKeys$1(r,e){var t=isArray$5(r),n=!t&&isArguments$1(r),a=!t&&!n&&isBuffer$1(r),o=!t&&!n&&!a&&isTypedArray(r),s=t||n||a||o,c=s?baseTimes(r.length,String):[],u=c.length;for(var d in r)(e||hasOwnProperty$3.call(r,d))&&!(s&&(d=="length"||a&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex$1(d,u)))&&c.push(d);return c}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$2=Object.prototype;function isPrototype$1(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||objectProto$2;return r===t}var _isPrototype=isPrototype$1;function overArg$1(r,e){return function(t){return r(e(t))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseKeys$1(r){if(!isPrototype(r))return nativeKeys(r);var e=[];for(var t in Object(r))hasOwnProperty$2.call(r,t)&&t!="constructor"&&e.push(t);return e}var _baseKeys=baseKeys$1,isFunction$2=isFunction_1$2,isLength$1=isLength_1;function isArrayLike$1(r){return r!=null&&isLength$1(r.length)&&!isFunction$2(r)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$1(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}var keys_1=keys$1,baseValues=_baseValues,keys=keys_1;function values$1(r){return r==null?[]:baseValues(r,keys(r))}var values_1=values$1,arraySample$1=_arraySample,values=values_1;function baseSample$1(r){return arraySample$1(values(r))}var _baseSample=baseSample$1,arraySample=_arraySample,baseSample=_baseSample,isArray$4=isArray_1$1;function sample(r){var e=isArray$4(r)?arraySample:baseSample;return e(r)}var sample_1=sample,objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseHas$1(r,e){return r!=null&&hasOwnProperty$1.call(r,e)}var _baseHas=baseHas$1,castPath=_castPath,isArguments=isArguments_1,isArray$3=isArray_1$1,isIndex=_isIndex,isLength=isLength_1,toKey=_toKey;function hasPath$1(r,e,t){e=castPath(e,r);for(var n=-1,a=e.length,o=!1;++n<a;){var s=toKey(e[n]);if(!(o=r!=null&&t(r,s)))break;r=r[s]}return o||++n!=a?o:(a=r==null?0:r.length,!!a&&isLength(a)&&isIndex(s,a)&&(isArray$3(r)||isArguments(r)))}var _hasPath=hasPath$1,baseHas=_baseHas,hasPath=_hasPath;function has$2(r,e){return r!=null&&hasPath(r,e,baseHas)}var has_1=has$2,nativeMax$1=Math.max,nativeMin$1=Math.min;function baseInRange$1(r,e,t){return r>=nativeMin$1(e,t)&&r<nativeMax$1(e,t)}var _baseInRange=baseInRange$1,reWhitespace=/\s/;function trimmedEndIndex$1(r){for(var e=r.length;e--&&reWhitespace.test(r.charAt(e)););return e}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(r){return r&&r.slice(0,trimmedEndIndex(r)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$5=isObject_1$1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$3(r){if(typeof r=="number")return r;if(isSymbol(r))return NAN;if(isObject$5(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=isObject$5(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=baseTrim(r);var t=reIsBinary.test(r);return t||reIsOctal.test(r)?freeParseInt(r.slice(2),t?2:8):reIsBadHex.test(r)?NAN:+r}var toNumber_1=toNumber$3,toNumber$2=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(r){if(!r)return r===0?r:0;if(r=toNumber$2(r),r===INFINITY||r===-INFINITY){var e=r<0?-1:1;return e*MAX_INTEGER}return r===r?r:0}var toFinite_1=toFinite$1,baseInRange=_baseInRange,toFinite=toFinite_1,toNumber$1=toNumber_1;function inRange(r,e,t){return e=toFinite(e),t===void 0?(t=e,e=0):t=toFinite(t),r=toNumber$1(r),baseInRange(r,e,t)}var inRange_1=inRange,LoadingScreen_svelte_svelte_type_style_lang="",Error_svelte_svelte_type_style_lang="",Reconnection_svelte_svelte_type_style_lang="";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function shouldUseNative(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(o){a[o]=o}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign$b=shouldUseNative()?Object.assign:function(r,e){for(var t,n=toObject(r),a,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var s in t)hasOwnProperty.call(t,s)&&(n[s]=t[s]);if(getOwnPropertySymbols){a=getOwnPropertySymbols(t);for(var c=0;c<a.length;c++)propIsEnumerable.call(t,a[c])&&(n[a[c]]=t[a[c]])}}return n},Observable$5={},canReportError$1={},Subscriber$1={},isFunction$1={};Object.defineProperty(isFunction$1,"__esModule",{value:!0});function isFunction(r){return typeof r=="function"}isFunction$1.isFunction=isFunction;var Observer={},config$1={};Object.defineProperty(config$1,"__esModule",{value:!0});var _enable_super_gross_mode_that_will_cause_bad_things=!1;config$1.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+e.stack)}else _enable_super_gross_mode_that_will_cause_bad_things&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_enable_super_gross_mode_that_will_cause_bad_things=r},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};var hostReportError$1={};Object.defineProperty(hostReportError$1,"__esModule",{value:!0});function hostReportError(r){setTimeout(function(){throw r},0)}hostReportError$1.hostReportError=hostReportError;Object.defineProperty(Observer,"__esModule",{value:!0});var config_1$2=config$1,hostReportError_1$1=hostReportError$1;Observer.empty={closed:!0,next:function(r){},error:function(r){if(config_1$2.config.useDeprecatedSynchronousErrorHandling)throw r;hostReportError_1$1.hostReportError(r)},complete:function(){}};var Subscription$1={},isArray$2={};Object.defineProperty(isArray$2,"__esModule",{value:!0});isArray$2.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();var isObject$4={};Object.defineProperty(isObject$4,"__esModule",{value:!0});function isObject$3(r){return r!==null&&typeof r=="object"}isObject$4.isObject=isObject$3;var UnsubscriptionError={};Object.defineProperty(UnsubscriptionError,"__esModule",{value:!0});var UnsubscriptionErrorImpl=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}();UnsubscriptionError.UnsubscriptionError=UnsubscriptionErrorImpl;Object.defineProperty(Subscription$1,"__esModule",{value:!0});var isArray_1=isArray$2,isObject_1=isObject$4,isFunction_1$1=isFunction$1,UnsubscriptionError_1=UnsubscriptionError,Subscription=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,n=t._parentOrParents,a=t._ctorUnsubscribe,o=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var c=0;c<n.length;++c){var u=n[c];u.remove(this)}if(isFunction_1$1.isFunction(o)){a&&(this._unsubscribe=void 0);try{o.call(this)}catch(l){e=l instanceof UnsubscriptionError_1.UnsubscriptionError?flattenUnsubscriptionErrors(l.errors):[l]}}if(isArray_1.isArray(s))for(var c=-1,d=s.length;++c<d;){var m=s[c];if(isObject_1.isObject(m))try{m.unsubscribe()}catch(f){e=e||[],f instanceof UnsubscriptionError_1.UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(f.errors)):e.push(f)}}if(e)throw new UnsubscriptionError_1.UnsubscriptionError(e)}},r.prototype.add=function(e){var t=e;if(!e)return r.EMPTY;switch(typeof e){case"function":t=new r(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof r)){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var a=t._parentOrParents;if(a===null)t._parentOrParents=this;else if(a instanceof r){if(a===this)return t;t._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return t;var o=this._subscriptions;return o===null?this._subscriptions=[t]:o.push(t),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();Subscription$1.Subscription=Subscription;function flattenUnsubscriptionErrors(r){return r.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError_1.UnsubscriptionError?t.errors:t)},[])}var rxSubscriber={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),r.$$rxSubscriber=r.rxSubscriber})(rxSubscriber);var __extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Subscriber$1,"__esModule",{value:!0});var isFunction_1=isFunction$1,Observer_1$1=Observer,Subscription_1=Subscription$1,rxSubscriber_1$1=rxSubscriber,config_1$1=config$1,hostReportError_1=hostReportError$1,Subscriber=function(r){__extends$2(e,r);function e(t,n,a){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Observer_1$1.empty;break;case 1:if(!t){o.destination=Observer_1$1.empty;break}if(typeof t=="object"){t instanceof e?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(o)):(o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,t));break}default:o.syncErrorThrowable=!0,o.destination=new SafeSubscriber(o,t,n,a);break}return o}return e.prototype[rxSubscriber_1$1.rxSubscriber]=function(){return this},e.create=function(t,n,a){var o=new e(t,n,a);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Subscription_1.Subscription);Subscriber$1.Subscriber=Subscriber;var SafeSubscriber=function(r){__extends$2(e,r);function e(t,n,a,o){var s=r.call(this)||this;s._parentSubscriber=t;var c,u=s;return isFunction_1.isFunction(n)?c=n:n&&(c=n.next,a=n.error,o=n.complete,n!==Observer_1$1.empty&&(u=Object.create(n),isFunction_1.isFunction(u.unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=c,s._error=a,s._complete=o,s}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!config_1$1.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(n,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,a=config_1$1.config.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(n,this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)a?(n.syncErrorValue=t,n.syncErrorThrown=!0):hostReportError_1.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),a)throw t;hostReportError_1.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var a=function(){return t._complete.call(t._context)};!config_1$1.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(n,a),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(a){if(this.unsubscribe(),config_1$1.config.useDeprecatedSynchronousErrorHandling)throw a;hostReportError_1.hostReportError(a)}},e.prototype.__tryOrSetError=function(t,n,a){if(!config_1$1.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,a)}catch(o){return config_1$1.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(hostReportError_1.hostReportError(o),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Subscriber);Subscriber$1.SafeSubscriber=SafeSubscriber;Object.defineProperty(canReportError$1,"__esModule",{value:!0});var Subscriber_1$3=Subscriber$1;function canReportError(r){for(;r;){var e=r,t=e.closed,n=e.destination,a=e.isStopped;if(t||a)return!1;n&&n instanceof Subscriber_1$3.Subscriber?r=n:r=null}return!0}canReportError$1.canReportError=canReportError;var toSubscriber$1={};Object.defineProperty(toSubscriber$1,"__esModule",{value:!0});var Subscriber_1$2=Subscriber$1,rxSubscriber_1=rxSubscriber,Observer_1=Observer;function toSubscriber(r,e,t){if(r){if(r instanceof Subscriber_1$2.Subscriber)return r;if(r[rxSubscriber_1.rxSubscriber])return r[rxSubscriber_1.rxSubscriber]()}return!r&&!e&&!t?new Subscriber_1$2.Subscriber(Observer_1.empty):new Subscriber_1$2.Subscriber(r,e,t)}toSubscriber$1.toSubscriber=toSubscriber;var observable$3={};Object.defineProperty(observable$3,"__esModule",{value:!0});observable$3.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var pipe$1={},identity$1={};Object.defineProperty(identity$1,"__esModule",{value:!0});function identity(r){return r}identity$1.identity=identity;Object.defineProperty(pipe$1,"__esModule",{value:!0});var identity_1=identity$1;function pipe(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return pipeFromArray(r)}pipe$1.pipe=pipe;function pipeFromArray(r){return r.length===0?identity_1.identity:r.length===1?r[0]:function(t){return r.reduce(function(n,a){return a(n)},t)}}pipe$1.pipeFromArray=pipeFromArray;Object.defineProperty(Observable$5,"__esModule",{value:!0});var canReportError_1=canReportError$1,toSubscriber_1=toSubscriber$1,observable_1=observable$3,pipe_1=pipe$1,config_1=config$1,Observable$4=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var a=this.operator,o=toSubscriber_1.toSubscriber(e,t,n);if(a?o.add(a.call(o,this.source)):o.add(this.source||config_1.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),config_1.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){config_1.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),canReportError_1.canReportError(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(e,t){var n=this;return t=getPromiseCtor(t),new t(function(a,o){var s;s=n.subscribe(function(c){try{e(c)}catch(u){o(u),s&&s.unsubscribe()}},o,a)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[observable_1.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:pipe_1.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=getPromiseCtor(e),new e(function(n,a){var o;t.subscribe(function(s){return o=s},function(s){return a(s)},function(){return n(o)})})},r.create=function(e){return new r(e)},r}();Observable$5.Observable=Observable$4;function getPromiseCtor(r){if(r||(r=config_1.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var filter$6={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(filter$6,"__esModule",{value:!0});var Subscriber_1$1=Subscriber$1;function filter$5(r,e){return function(n){return n.lift(new FilterOperator(r,e))}}filter$6.filter=filter$5;var FilterOperator=function(){function r(e,t){this.predicate=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},r}(),FilterSubscriber=function(r){__extends$1(e,r);function e(t,n,a){var o=r.call(this,t)||this;return o.predicate=n,o.thisArg=a,o.count=0,o}return e.prototype._next=function(t){var n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(a){this.destination.error(a);return}n&&this.destination.next(t)},e}(Subscriber_1$1.Subscriber),map$5={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(map$5,"__esModule",{value:!0});var Subscriber_1=Subscriber$1;function map$4(r,e){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new MapOperator(r,e))}}map$5.map=map$4;var MapOperator=function(){function r(e,t){this.project=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},r}();map$5.MapOperator=MapOperator;var MapSubscriber=function(r){__extends(e,r);function e(t,n,a){var o=r.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=a||o,o}return e.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(a){this.destination.error(a);return}this.destination.next(n)},e}(Subscriber_1.Subscriber),_require$5=Observable$5,Observable$3=_require$5.Observable,_require2$2=filter$6,filter$4=_require2$2.filter,_require3=map$5,map$3=_require3.map,observable$2={Observable:Observable$3,filter:filter$4,map:map$3},getSelection$2=function(e){if(typeof e=="string"||Array.isArray(e))return{id:e};if(e&&e.query)return"params"in e?{query:e.query,params:e.params}:{query:e.query};var t=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(t))},validators$3={};(function(r){function e(a){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e(a)}var t=["image","file"],n=["before","after","replace"];r.dataset=function(a){if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(a))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},r.projectId=function(a){if(!/^[-a-z0-9]+$/i.test(a))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},r.validateAssetType=function(a){if(t.indexOf(a)===-1)throw new Error("Invalid asset type: ".concat(a,". Must be one of ").concat(t.join(", ")))},r.validateObject=function(a,o){if(o===null||e(o)!=="object"||Array.isArray(o))throw new Error("".concat(a,"() takes an object of properties"))},r.requireDocumentId=function(a,o){if(!o._id)throw new Error("".concat(a,'() requires that the document contains an ID ("_id" property)'));r.validateDocumentId(a,o._id)},r.validateDocumentId=function(a,o){if(typeof o!="string"||!/^[a-z0-9_.-]+$/i.test(o))throw new Error("".concat(a,'(): "').concat(o,'" is not a valid document ID'))},r.validateInsert=function(a,o,s){var c="insert(at, selector, items)";if(n.indexOf(a)===-1){var u=n.map(function(d){return'"'.concat(d,'"')}).join(", ");throw new Error("".concat(c,' takes an "at"-argument which is one of: ').concat(u))}if(typeof o!="string")throw new Error("".concat(c,' takes a "selector"-argument which must be a string'));if(!Array.isArray(s))throw new Error("".concat(c,' takes an "items"-argument which must be an array'))},r.hasDataset=function(a){if(!a.dataset)throw new Error("`dataset` must be provided to perform queries");return a.dataset||""},r.requestTag=function(a){if(typeof a!="string"||!/^[a-z0-9._-]{1,75}$/i.test(a))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return a}})(validators$3);function _defineProperty$4(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var assign$c=objectAssign$b,getSelection$1=getSelection$2,validate$2=validators$3,validateObject=validate$2.validateObject,validateInsert=validate$2.validateInsert;function Patch$3(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.selection=r,this.operations=assign$c({},e),this.client=t}assign$c(Patch$3.prototype,{clone:function(){return new Patch$3(this.selection,assign$c({},this.operations),this.client)},set:function(e){return this._assign("set",e)},diffMatchPatch:function(e){return validateObject("diffMatchPatch",e),this._assign("diffMatchPatch",e)},unset:function(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=assign$c({},this.operations,{unset:e}),this},setIfMissing:function(e){return this._assign("setIfMissing",e)},replace:function(e){return validateObject("replace",e),this._set("set",{$:e})},inc:function(e){return this._assign("inc",e)},dec:function(e){return this._assign("dec",e)},insert:function(e,t,n){var a;return validateInsert(e,t,n),this._assign("insert",(a={},_defineProperty$4(a,e,t),_defineProperty$4(a,"items",n),a))},append:function(e,t){return this.insert("after","".concat(e,"[-1]"),t)},prepend:function(e,t){return this.insert("before","".concat(e,"[0]"),t)},splice:function(e,t,n,a){var o=typeof n=="undefined"||n===-1,s=t<0?t-1:t,c=o?-1:Math.max(0,t+n),u=s<0&&c>=0?"":c,d="".concat(e,"[").concat(s,":").concat(u,"]");return this.insert("replace",d,a||[])},ifRevisionId:function(e){return this.operations.ifRevisionID=e,this},serialize:function(){return assign$c(getSelection$1(this.selection),this.operations)},toJSON:function(){return this.serialize()},commit:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");var t=typeof this.selection=="string",n=assign$c({returnFirst:t,returnDocuments:!0},e);return this.client.mutate({patch:this.serialize()},n)},reset:function(){return this.operations={},this},_set:function(e,t){return this._assign(e,t,!1)},_assign:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return validateObject(e,t),this.operations=assign$c({},this.operations,_defineProperty$4({},e,assign$c({},n&&this.operations[e]||{},t))),this}});var patch=Patch$3;function _defineProperty$3(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var assign$b=objectAssign$b,validators$2=validators$3,Patch$2=patch,defaultMutateOptions={returnDocuments:!1};function Transaction$2(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;this.trxId=t,this.operations=r,this.client=e}assign$b(Transaction$2.prototype,{clone:function(){return new Transaction$2(this.operations.slice(0),this.client,this.trxId)},create:function(e){return validators$2.validateObject("create",e),this._add({create:e})},createIfNotExists:function(e){var t="createIfNotExists";return validators$2.validateObject(t,e),validators$2.requireDocumentId(t,e),this._add(_defineProperty$3({},t,e))},createOrReplace:function(e){var t="createOrReplace";return validators$2.validateObject(t,e),validators$2.requireDocumentId(t,e),this._add(_defineProperty$3({},t,e))},delete:function(e){return validators$2.validateDocumentId("delete",e),this._add({delete:{id:e}})},patch:function(e,t){var n=typeof t=="function",a=e instanceof Patch$2;if(a)return this._add({patch:e.serialize()});if(n){var o=t(new Patch$2(e,{},this.client));if(!(o instanceof Patch$2))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:assign$b({id:e},t)})},transactionId:function(e){return e?(this.trxId=e,this):this.trxId},serialize:function(){return this.operations.slice()},toJSON:function(){return this.serialize()},commit:function(e){if(!this.client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.client.mutate(this.serialize(),assign$b({transactionId:this.trxId},defaultMutateOptions,e||{}))},reset:function(){return this.operations=[],this},_add:function(e){return this.operations.push(e),this}});var transaction=Transaction$2,_excluded=["tag"];function _objectWithoutProperties(r,e){if(r==null)return{};var t=_objectWithoutPropertiesLoose(r,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,n)||(t[n]=r[n]))}return t}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,o;for(o=0;o<n.length;o++)a=n[o],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}var enc$1=encodeURIComponent,encodeQueryString$2=function(r){var e=r.query,t=r.params,n=t===void 0?{}:t,a=r.options,o=a===void 0?{}:a,s=o.tag,c=_objectWithoutProperties(o,_excluded),u="query=".concat(enc$1(e)),d=s?"?tag=".concat(enc$1(s),"&").concat(u):"?".concat(u),m=Object.keys(n).reduce(function(l,f){return"".concat(l,"&").concat(enc$1("$".concat(f)),"=").concat(enc$1(JSON.stringify(n[f])))},d);return Object.keys(c).reduce(function(l,f){return o[f]?"".concat(l,"&").concat(enc$1(f),"=").concat(enc$1(o[f])):l},m)},eventsource={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(r,e){(function(t){var n=t.setTimeout,a=t.clearTimeout,o=t.XMLHttpRequest,s=t.XDomainRequest,c=t.ActiveXObject,u=t.EventSource,d=t.document,m=t.Promise,l=t.fetch,f=t.Response,_=t.TextDecoder,b=t.TextEncoder,S=t.AbortController;if(typeof window!="undefined"&&typeof d!="undefined"&&!("readyState"in d)&&d.body==null&&(d.readyState="loading",window.addEventListener("load",function(G){d.readyState="complete"},!1)),o==null&&c!=null&&(o=function(){return new c("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(G){function le(){}return le.prototype=G,new le}),Date.now||(Date.now=function(){return new Date().getTime()}),S==null){var E=l;l=function(G,le){var _e=le.signal;return E(G,{headers:le.headers,credentials:le.credentials,cache:le.cache}).then(function(ue){var be=ue.body.getReader();return _e._reader=be,_e._aborted&&_e._reader.cancel(),{status:ue.status,statusText:ue.statusText,headers:ue.headers,body:{getReader:function(){return be}}}})},S=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function y(){this.bitsNeeded=0,this.codePoint=0}y.prototype.decode=function(G){function le($,M,H){if(H===1)return $>=128>>M&&$<<M<=2047;if(H===2)return $>=2048>>M&&$<<M<=55295||$>=57344>>M&&$<<M<=65535;if(H===3)return $>=65536>>M&&$<<M<=1114111;throw new Error}function _e($,M){if($===6*1)return M>>6>15?3:M>31?2:1;if($===6*2)return M>15?3:2;if($===6*3)return 3;throw new Error}for(var ue=65533,be="",ge=this.bitsNeeded,Ie=this.codePoint,T=0;T<G.length;T+=1){var x=G[T];ge!==0&&(x<128||x>191||!le(Ie<<6|x&63,ge-6,_e(ge,Ie)))&&(ge=0,Ie=ue,be+=String.fromCharCode(Ie)),ge===0?(x>=0&&x<=127?(ge=0,Ie=x):x>=192&&x<=223?(ge=6*1,Ie=x&31):x>=224&&x<=239?(ge=6*2,Ie=x&15):x>=240&&x<=247?(ge=6*3,Ie=x&7):(ge=0,Ie=ue),ge!==0&&!le(Ie,ge,_e(ge,Ie))&&(ge=0,Ie=ue)):(ge-=6,Ie=Ie<<6|x&63),ge===0&&(Ie<=65535?be+=String.fromCharCode(Ie):(be+=String.fromCharCode(55296+(Ie-65535-1>>10)),be+=String.fromCharCode(56320+(Ie-65535-1&1023))))}return this.bitsNeeded=ge,this.codePoint=Ie,be};var k=function(){try{return new _().decode(new b().encode("test"),{stream:!0})==="test"}catch(G){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+G)}return!1};(_==null||b==null||!k())&&(_=y);var I=function(){};function O(G){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=I,this.onload=I,this.onerror=I,this.onreadystatechange=I,this._contentType="",this._xhr=G,this._sendTimeout=0,this._abort=I}O.prototype.open=function(G,le){this._abort(!0);var _e=this,ue=this._xhr,be=1,ge=0;this._abort=function(H){_e._sendTimeout!==0&&(a(_e._sendTimeout),_e._sendTimeout=0),(be===1||be===2||be===3)&&(be=4,ue.onload=I,ue.onerror=I,ue.onabort=I,ue.onprogress=I,ue.onreadystatechange=I,ue.abort(),ge!==0&&(a(ge),ge=0),H||(_e.readyState=4,_e.onabort(null),_e.onreadystatechange())),be=0};var Ie=function(){if(be===1){var H=0,B="",he=void 0;if("contentType"in ue)H=200,B="OK",he=ue.contentType;else try{H=ue.status,B=ue.statusText,he=ue.getResponseHeader("Content-Type")}catch{H=0,B="",he=void 0}H!==0&&(be=2,_e.readyState=2,_e.status=H,_e.statusText=B,_e._contentType=he,_e.onreadystatechange())}},T=function(){if(Ie(),be===2||be===3){be=3;var H="";try{H=ue.responseText}catch{}_e.readyState=3,_e.responseText=H,_e.onprogress()}},x=function(H,B){if((B==null||B.preventDefault==null)&&(B={preventDefault:I}),T(),be===1||be===2||be===3){if(be=4,ge!==0&&(a(ge),ge=0),_e.readyState=4,H==="load")_e.onload(B);else if(H==="error")_e.onerror(B);else if(H==="abort")_e.onabort(B);else throw new TypeError;_e.onreadystatechange()}},$=function(H){ue!=null&&(ue.readyState===4?(!("onload"in ue)||!("onerror"in ue)||!("onabort"in ue))&&x(ue.responseText===""?"error":"load",H):ue.readyState===3?"onprogress"in ue||T():ue.readyState===2&&Ie())},M=function(){ge=n(function(){M()},500),ue.readyState===3&&T()};"onload"in ue&&(ue.onload=function(H){x("load",H)}),"onerror"in ue&&(ue.onerror=function(H){x("error",H)}),"onabort"in ue&&(ue.onabort=function(H){x("abort",H)}),"onprogress"in ue&&(ue.onprogress=T),"onreadystatechange"in ue&&(ue.onreadystatechange=function(H){$(H)}),("contentType"in ue||!("ontimeout"in o.prototype))&&(le+=(le.indexOf("?")===-1?"?":"&")+"padding=true"),ue.open(G,le,!0),"readyState"in ue&&(ge=n(function(){M()},0))},O.prototype.abort=function(){this._abort(!1)},O.prototype.getResponseHeader=function(G){return this._contentType},O.prototype.setRequestHeader=function(G,le){var _e=this._xhr;"setRequestHeader"in _e&&_e.setRequestHeader(G,le)},O.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},O.prototype.send=function(){if((!("ontimeout"in o.prototype)||!("sendAsBinary"in o.prototype)&&!("mozAnon"in o.prototype))&&d!=null&&d.readyState!=null&&d.readyState!=="complete"){var G=this;G._sendTimeout=n(function(){G._sendTimeout=0,G.send()},4);return}var le=this._xhr;"withCredentials"in le&&(le.withCredentials=this.withCredentials);try{le.send(void 0)}catch(_e){throw _e}};function D(G){return G.replace(/[A-Z]/g,function(le){return String.fromCharCode(le.charCodeAt(0)+32)})}function R(G){for(var le=Object.create(null),_e=G.split(`\r
`),ue=0;ue<_e.length;ue+=1){var be=_e[ue],ge=be.split(": "),Ie=ge.shift(),T=ge.join(": ");le[D(Ie)]=T}this._map=le}R.prototype.get=function(G){return this._map[D(G)]},o!=null&&o.HEADERS_RECEIVED==null&&(o.HEADERS_RECEIVED=2);function P(){}P.prototype.open=function(G,le,_e,ue,be,ge,Ie){G.open("GET",be);var T=0;G.onprogress=function(){var $=G.responseText,M=$.slice(T);T+=M.length,_e(M)},G.onerror=function($){$.preventDefault(),ue(new Error("NetworkError"))},G.onload=function(){ue(null)},G.onabort=function(){ue(null)},G.onreadystatechange=function(){if(G.readyState===o.HEADERS_RECEIVED){var $=G.status,M=G.statusText,H=G.getResponseHeader("Content-Type"),B=G.getAllResponseHeaders();le($,M,H,new R(B))}},G.withCredentials=ge;for(var x in Ie)Object.prototype.hasOwnProperty.call(Ie,x)&&G.setRequestHeader(x,Ie[x]);return G.send(),G};function W(G){this._headers=G}W.prototype.get=function(G){return this._headers.get(G)};function V(){}V.prototype.open=function(G,le,_e,ue,be,ge,Ie){var T=null,x=new S,$=x.signal,M=new _;return l(be,{headers:Ie,credentials:ge?"include":"same-origin",signal:$,cache:"no-store"}).then(function(H){return T=H.body.getReader(),le(H.status,H.statusText,H.headers.get("Content-Type"),new W(H.headers)),new m(function(B,he){var fe=function(){T.read().then(function(ae){if(ae.done)B(void 0);else{var ie=M.decode(ae.value,{stream:!0});_e(ie),fe()}}).catch(function(ae){he(ae)})};fe()})}).catch(function(H){if(H.name!=="AbortError")return H}).then(function(H){ue(H)}),{abort:function(){T!=null&&T.cancel(),x.abort()}}};function L(){this._listeners=Object.create(null)}function j(G){n(function(){throw G},0)}L.prototype.dispatchEvent=function(G){G.target=this;var le=this._listeners[G.type];if(le!=null)for(var _e=le.length,ue=0;ue<_e;ue+=1){var be=le[ue];try{typeof be.handleEvent=="function"?be.handleEvent(G):be.call(this,G)}catch(ge){j(ge)}}},L.prototype.addEventListener=function(G,le){G=String(G);var _e=this._listeners,ue=_e[G];ue==null&&(ue=[],_e[G]=ue);for(var be=!1,ge=0;ge<ue.length;ge+=1)ue[ge]===le&&(be=!0);be||ue.push(le)},L.prototype.removeEventListener=function(G,le){G=String(G);var _e=this._listeners,ue=_e[G];if(ue!=null){for(var be=[],ge=0;ge<ue.length;ge+=1)ue[ge]!==le&&be.push(ue[ge]);be.length===0?delete _e[G]:_e[G]=be}};function z(G){this.type=G,this.target=void 0}function q(G,le){z.call(this,G),this.data=le.data,this.lastEventId=le.lastEventId}q.prototype=Object.create(z.prototype);function Q(G,le){z.call(this,G),this.status=le.status,this.statusText=le.statusText,this.headers=le.headers}Q.prototype=Object.create(z.prototype);function F(G,le){z.call(this,G),this.error=le.error}F.prototype=Object.create(z.prototype);var Y=-1,ee=0,ce=1,me=2,ke=-1,Ee=0,C=1,U=2,Z=3,te=/^text\/event\-stream(;.*)?$/i,J=1e3,X=18e6,re=function(G,le){var _e=G==null?le:parseInt(G,10);return _e!==_e&&(_e=le),se(_e)},se=function(G){return Math.min(Math.max(G,J),X)},de=function(G,le,_e){try{typeof le=="function"&&le.call(G,_e)}catch(ue){j(ue)}};function oe(G,le){L.call(this),le=le||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Xe(this,G,le)}function Ae(){return o!=null&&"withCredentials"in o.prototype||s==null?new o:new s}var Me=l!=null&&f!=null&&"body"in f.prototype;function Xe(G,le,_e){le=String(le);var ue=Boolean(_e.withCredentials),be=_e.lastEventIdQueryParameterName||"lastEventId",ge=se(1e3),Ie=re(_e.heartbeatTimeout,45e3),T="",x=ge,$=!1,M=0,H=_e.headers||{},B=_e.Transport,he=Me&&B==null?void 0:new O(B!=null?new B:Ae()),fe=B!=null&&typeof B!="string"?new B:he==null?new V:new P,ae=void 0,ie=0,Te=Y,je="",Ne="",qe="",lt="",Ue=Ee,vt=0,it=0,gt=function(Fe,ze,et,tt){if(Te===ee)if(Fe===200&&et!=null&&te.test(et)){Te=ce,$=Date.now(),x=ge,G.readyState=ce;var Je=new Q("open",{status:Fe,statusText:ze,headers:tt});G.dispatchEvent(Je),de(G,G.onopen,Je)}else{var Ge="";Fe!==200?(ze&&(ze=ze.replace(/\s+/g," ")),Ge="EventSource's response has a status "+Fe+" "+ze+" that is not 200. Aborting the connection."):Ge="EventSource's response has a Content-Type specifying an unsupported type: "+(et==null?"-":et.replace(/\s+/g," "))+". Aborting the connection.",ut();var Je=new Q("error",{status:Fe,statusText:ze,headers:tt});G.dispatchEvent(Je),de(G,G.onerror,Je),console.error(Ge)}},wt=function(Fe){if(Te===ce){for(var ze=-1,et=0;et<Fe.length;et+=1){var tt=Fe.charCodeAt(et);(tt===`
`.charCodeAt(0)||tt==="\r".charCodeAt(0))&&(ze=et)}var Je=(ze!==-1?lt:"")+Fe.slice(0,ze+1);lt=(ze===-1?lt:"")+Fe.slice(ze+1),Fe!==""&&($=Date.now(),M+=Fe.length);for(var Ge=0;Ge<Je.length;Ge+=1){var tt=Je.charCodeAt(Ge);if(Ue===ke&&tt===`
`.charCodeAt(0))Ue=Ee;else if(Ue===ke&&(Ue=Ee),tt==="\r".charCodeAt(0)||tt===`
`.charCodeAt(0)){if(Ue!==Ee){Ue===C&&(it=Ge+1);var at=Je.slice(vt,it-1),ot=Je.slice(it+(it<Ge&&Je.charCodeAt(it)===" ".charCodeAt(0)?1:0),Ge);at==="data"?(je+=`
`,je+=ot):at==="id"?Ne=ot:at==="event"?qe=ot:at==="retry"?(ge=re(ot,ge),x=ge):at==="heartbeatTimeout"&&(Ie=re(ot,Ie),ie!==0&&(a(ie),ie=n(function(){ft()},Ie)))}if(Ue===Ee){if(je!==""){T=Ne,qe===""&&(qe="message");var Ve=new q(qe,{data:je.slice(1),lastEventId:Ne});if(G.dispatchEvent(Ve),qe==="open"?de(G,G.onopen,Ve):qe==="message"?de(G,G.onmessage,Ve):qe==="error"&&de(G,G.onerror,Ve),Te===me)return}je="",qe=""}Ue=tt==="\r".charCodeAt(0)?ke:Ee}else Ue===Ee&&(vt=Ge,Ue=C),Ue===C?tt===":".charCodeAt(0)&&(it=Ge+1,Ue=U):Ue===U&&(Ue=Z)}}},Tt=function(Fe){if(Te===ce||Te===ee){Te=Y,ie!==0&&(a(ie),ie=0),ie=n(function(){ft()},x),x=se(Math.min(ge*16,x*2)),G.readyState=ee;var ze=new F("error",{error:Fe});G.dispatchEvent(ze),de(G,G.onerror,ze),Fe!=null&&console.error(Fe)}},ut=function(){Te=me,ae!=null&&(ae.abort(),ae=void 0),ie!==0&&(a(ie),ie=0),G.readyState=me},ft=function(){if(ie=0,Te!==Y){if(!$&&ae!=null)Tt(new Error("No activity within "+Ie+" milliseconds. "+(Te===ee?"No response received.":M+" chars received.")+" Reconnecting.")),ae!=null&&(ae.abort(),ae=void 0);else{var Fe=Math.max(($||Date.now())+Ie-Date.now(),1);$=!1,ie=n(function(){ft()},Fe)}return}$=!1,M=0,ie=n(function(){ft()},Ie),Te=ee,je="",qe="",Ne=T,lt="",vt=0,it=0,Ue=Ee;var ze=le;if(le.slice(0,5)!=="data:"&&le.slice(0,5)!=="blob:"&&T!==""){var et=le.indexOf("?");ze=et===-1?le:le.slice(0,et+1)+le.slice(et+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(ot,Ve){return Ve===be?"":ot}),ze+=(le.indexOf("?")===-1?"?":"&")+be+"="+encodeURIComponent(T)}var tt=G.withCredentials,Je={};Je.Accept="text/event-stream";var Ge=G.headers;if(Ge!=null)for(var at in Ge)Object.prototype.hasOwnProperty.call(Ge,at)&&(Je[at]=Ge[at]);try{ae=fe.open(he,gt,wt,Tt,ze,tt,Je)}catch(ot){throw ut(),ot}};G.url=le,G.readyState=ee,G.withCredentials=ue,G.headers=H,G._close=ut,ft()}oe.prototype=Object.create(L.prototype),oe.prototype.CONNECTING=ee,oe.prototype.OPEN=ce,oe.prototype.CLOSED=me,oe.prototype.close=function(){this._close()},oe.CONNECTING=ee,oe.OPEN=ce,oe.CLOSED=me,oe.prototype.withCredentials=void 0;var Be=u;o!=null&&(u==null||!("withCredentials"in u.prototype))&&(Be=oe),function(G){{var le=G(e);le!==void 0&&(r.exports=le)}}(function(G){G.EventSourcePolyfill=oe,G.NativeEventSource=u,G.EventSource=Be})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:commonjsGlobal:globalThis)})(eventsource,eventsource.exports);var evs=eventsource.exports,browser=evs.EventSourcePolyfill,pick$1=function(r,e){return e.reduce(function(t,n){return typeof r[n]=="undefined"||(t[n]=r[n]),t},{})},defaults$2=function(r,e){return Object.keys(e).concat(Object.keys(r)).reduce(function(t,n){return t[n]=typeof r[n]=="undefined"?e[n]:r[n],t},{})};function ownKeys$1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread$1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(t),!0).forEach(function(n){_defineProperty$2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _defineProperty$2(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var assign$a=objectAssign$b,_require$4=observable$2,Observable$2=_require$4.Observable,polyfilledEventSource=browser,pick=pick$1,defaults$1=defaults$2,encodeQueryString$1=encodeQueryString$2,MAX_URL_LENGTH=16e3-1200,EventSource=polyfilledEventSource,possibleOptions=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],defaultOptions$1={includeResult:!0},listen$1=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.clientConfig,o=a.url,s=a.token,c=a.withCredentials,u=a.requestTagPrefix,d=n.tag&&u?[u,n.tag].join("."):n.tag,m=_objectSpread$1(_objectSpread$1({},defaults$1(n,defaultOptions$1)),{},{tag:d}),l=pick(m,possibleOptions),f=encodeQueryString$1({query:e,params:t,options:l,tag:d}),_="".concat(o).concat(this.getDataUrl("listen",f));if(_.length>MAX_URL_LENGTH)return new Observable$2(function(y){return y.error(new Error("Query too large for listener"))});var b=m.events?m.events:["mutation"],S=b.indexOf("reconnect")!==-1,E={};return(s||c)&&(E.withCredentials=!0),s&&(E.headers={Authorization:"Bearer ".concat(s)}),new Observable$2(function(y){var k=j(),I,O=!1;function D(){O||(L(),!O&&k.readyState===EventSource.CLOSED&&(V(),clearTimeout(I),I=setTimeout(z,100)))}function R(Q){y.error(cooerceError(Q))}function P(Q){var F=parseEvent(Q);return F instanceof Error?y.error(F):y.next(F)}function W(Q){O=!0,V(),y.complete()}function V(){k.removeEventListener("error",D,!1),k.removeEventListener("channelError",R,!1),k.removeEventListener("disconnect",W,!1),b.forEach(function(Q){return k.removeEventListener(Q,P,!1)}),k.close()}function L(){S&&y.next({type:"reconnect"})}function j(){var Q=new EventSource(_,E);return Q.addEventListener("error",D,!1),Q.addEventListener("channelError",R,!1),Q.addEventListener("disconnect",W,!1),b.forEach(function(F){return Q.addEventListener(F,P,!1)}),Q}function z(){k=j()}function q(){O=!0,V()}return q})};function parseEvent(r){try{var e=r.data&&JSON.parse(r.data)||{};return assign$a({type:r.type},e)}catch(t){return t}}function cooerceError(r){if(r instanceof Error)return r;var e=parseEvent(r);return e instanceof Error?e:new Error(extractErrorMessage(e))}function extractErrorMessage(r){return r.error?r.error.description?r.error.description:typeof r.error=="string"?r.error:JSON.stringify(r.error,null,2):r.message||"Unknown listener error"}function _defineProperty$1(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var assign$9=objectAssign$b,_require$3=observable$2,map$2=_require$3.map,filter$3=_require$3.filter,validators$1=validators$3,getSelection=getSelection$2,encodeQueryString=encodeQueryString$2,Transaction$1=transaction,Patch$1=patch,listen=listen$1,excludeFalsey=function(e,t){var n=typeof e=="undefined"?t:e;return e===!1?void 0:n},getMutationQuery=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:e.dryRun,returnIds:!0,returnDocuments:excludeFalsey(e.returnDocuments,!0),visibility:e.visibility||"sync",autoGenerateArrayKeys:e.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:e.skipCrossDatasetReferenceValidation}},isResponse=function(e){return e.type==="response"},getBody=function(e){return e.body},indexBy=function(e,t){return e.reduce(function(n,a){return n[t(a)]=a,n},Object.create(null))},toPromise$1=function(e){return e.toPromise()},getQuerySizeLimit=11264,dataMethods$1={listen,getDataUrl:function(e,t){var n=this.clientConfig,a=validators$1.hasDataset(n),o="/".concat(e,"/").concat(a),s=t?"".concat(o,"/").concat(t):o;return"/data".concat(s).replace(/\/($|\?)/,"$1")},fetch:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.filterResponse===!1?function(s){return s}:function(s){return s.result},o=this._dataRequest("query",{query:e,params:t},n).pipe(map$2(a));return this.isPromiseAPI()?toPromise$1(o):o},getDocument:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={uri:this.getDataUrl("doc",e),json:!0,tag:t.tag},a=this._requestObservable(n).pipe(filter$3(isResponse),map$2(function(o){return o.body.documents&&o.body.documents[0]}));return this.isPromiseAPI()?toPromise$1(a):a},getDocuments:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={uri:this.getDataUrl("doc",e.join(",")),json:!0,tag:t.tag},a=this._requestObservable(n).pipe(filter$3(isResponse),map$2(function(o){var s=indexBy(o.body.documents||[],function(c){return c._id});return e.map(function(c){return s[c]||null})}));return this.isPromiseAPI()?toPromise$1(a):a},create:function(e,t){return this._create(e,"create",t)},createIfNotExists:function(e,t){return validators$1.requireDocumentId("createIfNotExists",e),this._create(e,"createIfNotExists",t)},createOrReplace:function(e,t){return validators$1.requireDocumentId("createOrReplace",e),this._create(e,"createOrReplace",t)},patch:function(e,t){return new Patch$1(e,t,this)},delete:function(e,t){return this.dataRequest("mutate",{mutations:[{delete:getSelection(e)}]},t)},mutate:function(e,t){var n=e instanceof Patch$1||e instanceof Transaction$1?e.serialize():e,a=Array.isArray(n)?n:[n],o=t&&t.transactionId;return this.dataRequest("mutate",{mutations:a,transactionId:o},t)},transaction:function(e){return new Transaction$1(e,this)},dataRequest:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this._dataRequest(e,t,n);return this.isPromiseAPI()?toPromise$1(a):a},_dataRequest:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=e==="mutate",o=e==="query",s=!a&&encodeQueryString(t),c=!a&&s.length<getQuerySizeLimit,u=c?s:"",d=n.returnFirst,m=n.timeout,l=n.token,f=n.tag,_=n.headers,b=this.getDataUrl(e,u),S={method:c?"GET":"POST",uri:b,json:!0,body:c?void 0:t,query:a&&getMutationQuery(n),timeout:m,headers:_,token:l,tag:f,canUseCdn:o};return this._requestObservable(S).pipe(filter$3(isResponse),map$2(getBody),map$2(function(E){if(!a)return E;var y=E.results||[];if(n.returnDocuments)return d?y[0]&&y[0].document:y.map(function(O){return O.document});var k=d?"documentId":"documentIds",I=d?y[0]&&y[0].id:y.map(function(O){return O.id});return _defineProperty$1({transactionId:E.transactionId,results:y},k,I)}))},_create:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=_defineProperty$1({},t,e),o=assign$9({returnFirst:!0,returnDocuments:!0},n);return this.dataRequest("mutate",{mutations:[a]},o)}},assign$8=objectAssign$b,validate$1=validators$3;function DatasetsClient$1(r){this.request=r.request.bind(r)}assign$8(DatasetsClient$1.prototype,{create:function(e,t){return this._modify("PUT",e,t)},edit:function(e,t){return this._modify("PATCH",e,t)},delete:function(e){return this._modify("DELETE",e)},list:function(){return this.request({uri:"/datasets"})},_modify:function(e,t,n){return validate$1.dataset(t),this.request({method:e,uri:"/datasets/".concat(t),body:n})}});var datasetsClient=DatasetsClient$1,assign$7=objectAssign$b;function ProjectsClient$1(r){this.client=r}assign$7(ProjectsClient$1.prototype,{list:function(){return this.client.request({uri:"/projects"})},getById:function(e){return this.client.request({uri:"/projects/".concat(e)})}});var projectsClient=ProjectsClient$1,queryString$1=function(r){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push("".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t])));return e.length>0?"?".concat(e.join("&")):""};function _slicedToArray$1(r,e){return _arrayWithHoles$1(r)||_iterableToArrayLimit$1(r,e)||_unsupportedIterableToArray$1(r,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(r,e){if(!!r){if(typeof r=="string")return _arrayLikeToArray$1(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray$1(r,e)}}function _arrayLikeToArray$1(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function _iterableToArrayLimit$1(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,o=!1,s,c;try{for(t=t.call(r);!(a=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));a=!0);}catch(u){o=!0,c=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw c}}return n}}function _arrayWithHoles$1(r){if(Array.isArray(r))return r}var assign$6=objectAssign$b,_require$2=observable$2,map$1=_require$2.map,filter$2=_require$2.filter,queryString=queryString$1,validators=validators$3;function AssetsClient$1(r){this.client=r}function optionsFromFile(r,e){return typeof window=="undefined"||!(e instanceof window.File)?r:assign$6({filename:r.preserveFilename===!1?void 0:e.name,contentType:e.type},r)}assign$6(AssetsClient$1.prototype,{upload:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};validators.validateAssetType(e);var a=n.extract||void 0;a&&!a.length&&(a=["none"]);var o=validators.hasDataset(this.client.clientConfig),s=e==="image"?"images":"files",c=optionsFromFile(n,t),u=c.tag,d=c.label,m=c.title,l=c.description,f=c.creditLine,_=c.filename,b=c.source,S={label:d,title:m,description:l,filename:_,meta:a,creditLine:f};b&&(S.sourceId=b.id,S.sourceName=b.name,S.sourceUrl=b.url);var E=this.client._requestObservable({tag:u,method:"POST",timeout:c.timeout||0,uri:"/assets/".concat(s,"/").concat(o),headers:c.contentType?{"Content-Type":c.contentType}:{},query:S,body:t});return this.client.isPromiseAPI()?E.pipe(filter$2(function(y){return y.type==="response"}),map$1(function(y){return y.body.document})).toPromise():E},delete:function(e,t){console.warn("client.assets.delete() is deprecated, please use client.delete(<document-id>)");var n=t||"";return/^(image|file)-/.test(n)?e._id&&(n=e._id):n="".concat(e,"-").concat(n),validators.hasDataset(this.client.clientConfig),this.client.delete(n)},getImageUrl:function(e,t){var n=e._ref||e;if(typeof n!="string")throw new Error("getImageUrl() needs either an object with a _ref, or a string with an asset document ID");if(!/^image-[A-Za-z0-9_]+-\d+x\d+-[a-z]{1,5}$/.test(n))throw new Error('Unsupported asset ID "'.concat(n,'". URL generation only works for auto-generated IDs.'));var a=n.split("-"),o=_slicedToArray$1(a,4),s=o[1],c=o[2],u=o[3];validators.hasDataset(this.client.clientConfig);var d=this.client.clientConfig,m=d.projectId,l=d.dataset,f=t?queryString(t):"";return"https://cdn.sanity.io/images/".concat(m,"/").concat(l,"/").concat(s,"-").concat(c,".").concat(u).concat(f)}});var assetsClient=AssetsClient$1,assign$5=objectAssign$b;function UsersClient$1(r){this.client=r}assign$5(UsersClient$1.prototype,{getById:function(e){return this.client.request({uri:"/users/".concat(e)})}});var usersClient=UsersClient$1,assign$4=objectAssign$b;function AuthClient$1(r){this.client=r}assign$4(AuthClient$1.prototype,{getLoginProviders:function(){return this.client.request({uri:"/auth/providers"})},logout:function(){return this.client.request({uri:"/auth/logout",method:"POST"})}});var authClient=AuthClient$1,nanoPubsub=function(){var e=[];return{subscribe:t,publish:n};function t(a){return e.push(a),function(){var s=e.indexOf(a);s>-1&&e.splice(s,1)}}function n(){for(var a=0;a<e.length;a++)e[a].apply(null,arguments)}},middlewareReducer$1=function(r){var e=function(n,a){for(var o=n==="onError",s=a,c=arguments.length,u=new Array(c>2?c-2:0),d=2;d<c;d++)u[d-2]=arguments[d];for(var m=0;m<r[n].length;m++){var l=r[n][m];if(s=l.apply(void 0,[s].concat(u)),o&&!s)break}return s};return e},requiresPort=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},querystringify$1={},has$1=Object.prototype.hasOwnProperty,undef;function decode(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return null}}function encode(r){try{return encodeURIComponent(r)}catch{return null}}function querystring(r){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},n;n=e.exec(r);){var a=decode(n[1]),o=decode(n[2]);a===null||o===null||a in t||(t[a]=o)}return t}function querystringify(r,e){e=e||"";var t=[],n,a;typeof e!="string"&&(e="?");for(a in r)if(has$1.call(r,a)){if(n=r[a],!n&&(n===null||n===undef||isNaN(n))&&(n=""),a=encode(a),n=encode(n),a===null||n===null)continue;t.push(a+"="+n)}return t.length?e+t.join("&"):""}querystringify$1.stringify=querystringify;querystringify$1.parse=querystring;var required=requiresPort,qs=querystringify$1,controlOrWhitespace=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,CRHTLF=/[\n\r\t]/g,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,port=/:\d+$/,protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,windowsDriveLetter=/^[a-zA-Z]:/;function trimLeft(r){return(r||"").toString().replace(controlOrWhitespace,"")}var rules=[["#","hash"],["?","query"],function(e,t){return isSpecial(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(r){var e;typeof window!="undefined"?e=window:typeof commonjsGlobal!="undefined"?e=commonjsGlobal:typeof self!="undefined"?e=self:e={};var t=e.location||{};r=r||t;var n={},a=typeof r,o;if(r.protocol==="blob:")n=new Url(unescape(r.pathname),{});else if(a==="string"){n=new Url(r,{});for(o in ignore)delete n[o]}else if(a==="object"){for(o in r)o in ignore||(n[o]=r[o]);n.slashes===void 0&&(n.slashes=slashes.test(r.href))}return n}function isSpecial(r){return r==="file:"||r==="ftp:"||r==="http:"||r==="https:"||r==="ws:"||r==="wss:"}function extractProtocol(r,e){r=trimLeft(r),r=r.replace(CRHTLF,""),e=e||{};var t=protocolre.exec(r),n=t[1]?t[1].toLowerCase():"",a=!!t[2],o=!!t[3],s=0,c;return a?o?(c=t[2]+t[3]+t[4],s=t[2].length+t[3].length):(c=t[2]+t[4],s=t[2].length):o?(c=t[3]+t[4],s=t[3].length):c=t[4],n==="file:"?s>=2&&(c=c.slice(2)):isSpecial(n)?c=t[4]:n?a&&(c=c.slice(2)):s>=2&&isSpecial(e.protocol)&&(c=t[4]),{protocol:n,slashes:a||isSpecial(n),slashesCount:s,rest:c}}function resolve(r,e){if(r==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(r.split("/")),n=t.length,a=t[n-1],o=!1,s=0;n--;)t[n]==="."?t.splice(n,1):t[n]===".."?(t.splice(n,1),s++):s&&(n===0&&(o=!0),t.splice(n,1),s--);return o&&t.unshift(""),(a==="."||a==="..")&&t.push(""),t.join("/")}function Url(r,e,t){if(r=trimLeft(r),r=r.replace(CRHTLF,""),!(this instanceof Url))return new Url(r,e,t);var n,a,o,s,c,u,d=rules.slice(),m=typeof e,l=this,f=0;for(m!=="object"&&m!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=qs.parse),e=lolcation(e),a=extractProtocol(r||"",e),n=!a.protocol&&!a.slashes,l.slashes=a.slashes||n&&e.slashes,l.protocol=a.protocol||e.protocol||"",r=a.rest,(a.protocol==="file:"&&(a.slashesCount!==2||windowsDriveLetter.test(r))||!a.slashes&&(a.protocol||a.slashesCount<2||!isSpecial(l.protocol)))&&(d[3]=[/(.*)/,"pathname"]);f<d.length;f++){if(s=d[f],typeof s=="function"){r=s(r,l);continue}o=s[0],u=s[1],o!==o?l[u]=r:typeof o=="string"?(c=o==="@"?r.lastIndexOf(o):r.indexOf(o),~c&&(typeof s[2]=="number"?(l[u]=r.slice(0,c),r=r.slice(c+s[2])):(l[u]=r.slice(c),r=r.slice(0,c)))):(c=o.exec(r))&&(l[u]=c[1],r=r.slice(0,c.index)),l[u]=l[u]||n&&s[3]&&e[u]||"",s[4]&&(l[u]=l[u].toLowerCase())}t&&(l.query=t(l.query)),n&&e.slashes&&l.pathname.charAt(0)!=="/"&&(l.pathname!==""||e.pathname!=="")&&(l.pathname=resolve(l.pathname,e.pathname)),l.pathname.charAt(0)!=="/"&&isSpecial(l.protocol)&&(l.pathname="/"+l.pathname),required(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(c=l.auth.indexOf(":"),~c?(l.username=l.auth.slice(0,c),l.username=encodeURIComponent(decodeURIComponent(l.username)),l.password=l.auth.slice(c+1),l.password=encodeURIComponent(decodeURIComponent(l.password))):l.username=encodeURIComponent(decodeURIComponent(l.auth)),l.auth=l.password?l.username+":"+l.password:l.username),l.origin=l.protocol!=="file:"&&isSpecial(l.protocol)&&l.host?l.protocol+"//"+l.host:"null",l.href=l.toString()}function set(r,e,t){var n=this;switch(r){case"query":typeof e=="string"&&e.length&&(e=(t||qs.parse)(e)),n[r]=e;break;case"port":n[r]=e,required(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[r]="");break;case"hostname":n[r]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[r]=e,port.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!t;break;case"pathname":case"hash":if(e){var a=r==="pathname"?"/":"#";n[r]=e.charAt(0)!==a?a+e:e}else n[r]=e;break;case"username":case"password":n[r]=encodeURIComponent(e);break;case"auth":var o=e.indexOf(":");~o?(n.username=e.slice(0,o),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=e.slice(o+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(e))}for(var s=0;s<rules.length;s++){var c=rules[s];c[4]&&(n[c[1]]=n[c[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&isSpecial(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function toString(r){(!r||typeof r!="function")&&(r=qs.stringify);var e,t=this,n=t.host,a=t.protocol;a&&a.charAt(a.length-1)!==":"&&(a+=":");var o=a+(t.protocol&&t.slashes||isSpecial(t.protocol)?"//":"");return t.username?(o+=t.username,t.password&&(o+=":"+t.password),o+="@"):t.password?(o+=":"+t.password,o+="@"):t.protocol!=="file:"&&isSpecial(t.protocol)&&!n&&t.pathname!=="/"&&(o+="@"),(n[n.length-1]===":"||port.test(t.hostname)&&!t.port)&&(n+=":"),o+=n+t.pathname,e=typeof t.query=="object"?r(t.query):t.query,e&&(o+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(o+=t.hash),o}Url.prototype={set,toString};Url.extractProtocol=extractProtocol;Url.location=lolcation;Url.trimLeft=trimLeft;Url.qs=qs;var urlParse$1=Url,objectAssign$a=objectAssign$b,urlParse=urlParse$1,isReactNative=typeof navigator=="undefined"?!1:navigator.product==="ReactNative",has=Object.prototype.hasOwnProperty,defaultOptions={timeout:isReactNative?6e4:12e4},defaultOptionsProcessor=function(r){var e=typeof r=="string"?objectAssign$a({url:r},defaultOptions):objectAssign$a({},defaultOptions,r),t=urlParse(e.url,{},!0);return e.timeout=normalizeTimeout(e.timeout),e.query&&(t.query=objectAssign$a({},t.query,removeUndefined(e.query))),e.method=e.body&&!e.method?"POST":(e.method||"GET").toUpperCase(),e.url=t.toString(stringifyQueryString),e};function stringifyQueryString(r){var e=[];for(var t in r)has.call(r,t)&&n(t,r[t]);return e.length?e.join("&"):"";function n(a,o){Array.isArray(o)?o.forEach(function(s){return n(a,s)}):e.push([a,o].map(encodeURIComponent).join("="))}}function normalizeTimeout(r){if(r===!1||r===0)return!1;if(r.connect||r.socket)return r;var e=Number(r);return isNaN(e)?normalizeTimeout(defaultOptions.timeout):{connect:e,socket:e}}function removeUndefined(r){var e={};for(var t in r)r[t]!==void 0&&(e[t]=r[t]);return e}var validUrl=/^https?:\/\//i,defaultOptionsValidator=function(r){if(!validUrl.test(r.url))throw new Error('"'.concat(r.url,'" is not a valid URL'))},regex=/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?:\:(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/,urlParser={regex,parse:function(r){var e=regex.exec(r);return e?{protocol:(e[1]||"").toLowerCase()||void 0,hostname:(e[5]||"").toLowerCase()||void 0,port:e[6]||void 0}:{}}},url=urlParser,sameOrigin$1=function(r,e,t){if(r===e)return!0;var n=url.parse(r,!1,!0),a=url.parse(e,!1,!0),o=n.port|0||(n.protocol==="https"?443:80),s=a.port|0||(a.protocol==="https"?443:80),c={proto:n.protocol===a.protocol,hostname:n.hostname===a.hostname,port:o===s};return c.proto&&c.hostname&&(c.port||t)},trim=function(r){return r.replace(/^\s+|\s+$/g,"")},isArray$1=function(r){return Object.prototype.toString.call(r)==="[object Array]"},parseHeaders$1=function(r){if(!r)return{};for(var e={},t=trim(r).split(`
`),n=0;n<t.length;n++){var a=t[n],o=a.indexOf(":"),s=trim(a.slice(0,o)).toLowerCase(),c=trim(a.slice(o+1));typeof e[s]=="undefined"?e[s]=c:isArray$1(e[s])?e[s].push(c):e[s]=[e[s],c]}return e};function FetchXhr$1(){this.readyState=0}FetchXhr$1.prototype.open=function(r,e){this._method=r,this._url=e,this._resHeaders="",this.readyState=1,this.onreadystatechange()};FetchXhr$1.prototype.abort=function(){this._controller&&this._controller.abort()};FetchXhr$1.prototype.getAllResponseHeaders=function(){return this._resHeaders};FetchXhr$1.prototype.setRequestHeader=function(r,e){this._headers=this._headers||{},this._headers[r]=e};FetchXhr$1.prototype.send=function(r){var e=this,t=this._controller=typeof AbortController=="function"&&new AbortController,n=this.responseType!=="arraybuffer",a={method:this._method,headers:this._headers,signal:t&&t.signal,body:r};typeof window!="undefined"&&(a.credentials=this.withCredentials?"include":"omit"),fetch(this._url,a).then(function(o){return o.headers.forEach(function(s,c){e._resHeaders+="".concat(c,": ").concat(s,`\r
`)}),e.status=o.status,e.statusText=o.statusText,e.readyState=3,n?o.text():o.arrayBuffer()}).then(function(o){n?e.responseText=o:e.response=o,e.readyState=4,e.onreadystatechange()}).catch(function(o){if(o.name==="AbortError"){e.onabort();return}e.onerror(o)})};var fetchXhr=FetchXhr$1,sameOrigin=sameOrigin$1,parseHeaders=parseHeaders$1,FetchXhr=fetchXhr,noop=function(){},win=typeof window=="undefined"?void 0:window,adapter=win?"xhr":"fetch",XmlHttpRequest=typeof XMLHttpRequest=="function"?XMLHttpRequest:noop,hasXhr2="withCredentials"in new XmlHttpRequest,XDR=typeof XDomainRequest=="undefined"?void 0:XDomainRequest,CrossDomainRequest=hasXhr2?XmlHttpRequest:XDR;win||(XmlHttpRequest=FetchXhr,CrossDomainRequest=FetchXhr);var browserRequest=function(r,e){var t=r.options,n=r.applyMiddleware("finalizeOptions",t),a={},o=win&&win.location&&!sameOrigin(win.location.href,n.url),s=r.applyMiddleware("interceptRequest",void 0,{adapter,context:r});if(s){var c=setTimeout(e,0,null,s),u=function(){return clearTimeout(c)};return{abort:u}}var d=o?new CrossDomainRequest:new XmlHttpRequest,m=win&&win.XDomainRequest&&d instanceof win.XDomainRequest,l=n.headers,f=n.timeout,_=!1,b=!1,S=!1;d.onerror=R,d.ontimeout=R,d.onabort=function(){D(!0),_=!0},d.onprogress=function(){};var E=m?"onload":"onreadystatechange";if(d[E]=function(){O(),!(_||d.readyState!==4&&!m)&&d.status!==0&&W()},d.open(n.method,n.url,!0),d.withCredentials=!!n.withCredentials,l&&d.setRequestHeader)for(var y in l)l.hasOwnProperty(y)&&d.setRequestHeader(y,l[y]);else if(l&&m)throw new Error("Headers cannot be set on an XDomainRequest object");return n.rawBody&&(d.responseType="arraybuffer"),r.applyMiddleware("onRequest",{options:n,adapter,request:d,context:r}),d.send(n.body||null),f&&(a.connect=setTimeout(function(){return I("ETIMEDOUT")},f.connect)),{abort:k};function k(){_=!0,d&&d.abort()}function I(V){S=!0,d.abort();var L=new Error(V==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(n.url):"Connection timed out on request to ".concat(n.url));L.code=V,r.channels.error.publish(L)}function O(){!f||(D(),a.socket=setTimeout(function(){return I("ESOCKETTIMEDOUT")},f.socket))}function D(V){(V||_||d.readyState>=2&&a.connect)&&clearTimeout(a.connect),a.socket&&clearTimeout(a.socket)}function R(V){if(!b){D(!0),b=!0,d=null;var L=V||new Error("Network error while attempting to reach ".concat(n.url));L.isNetworkError=!0,L.request=n,e(L)}}function P(){var V=d.status,L=d.statusText;if(m&&V===void 0)V=200;else{if(V>12e3&&V<12156)return R();V=d.status===1223?204:d.status,L=d.status===1223?"No Content":L}return{body:d.response||d.responseText,url:n.url,method:n.method,headers:m?{}:parseHeaders(d.getAllResponseHeaders()),statusCode:V,statusMessage:L}}function W(){if(!(_||b||S)){if(d.status===0){R(new Error("Unknown XHR error"));return}D(),b=!0,e(null,P())}}},request$1=browserRequest,pubsub=nanoPubsub,middlewareReducer=middlewareReducer$1,processOptions=defaultOptionsProcessor,validateOptions=defaultOptionsValidator,httpRequester=request$1,channelNames=["request","response","progress","error","abort"],middlehooks=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"],lib$1=function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:httpRequester,n=[],a=middlehooks.reduce(function(s,c){return s[c]=s[c]||[],s},{processOptions:[processOptions],validateOptions:[validateOptions]});function o(s){var c=channelNames.reduce(function(S,E){return S[E]=pubsub(),S},{}),u=middlewareReducer(a),d=u("processOptions",s);u("validateOptions",d);var m={options:d,channels:c,applyMiddleware:u},l=null,f=c.request.subscribe(function(S){l=t(S,function(E,y){return b(E,y,S)})});c.abort.subscribe(function(){f(),l&&l.abort()});var _=u("onReturn",c,m);return _===c&&c.request.publish(m),_;function b(S,E,y){var k=S,I=E;if(!k)try{I=u("onResponse",E,y)}catch(O){I=null,k=O}k=k&&u("onError",k,y),k?c.error.publish(k):I&&c.response.publish(I)}}return o.use=function(c){if(!c)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof c=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(c.onReturn&&a.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return middlehooks.forEach(function(u){c[u]&&a[u].push(c[u])}),n.push(c),o},o.clone=function(){return r(n)},e.forEach(o.use),o},getIt$1=lib$1,global$2={exports:{}};typeof globalThis!="undefined"?global$2.exports=globalThis:typeof window!="undefined"?global$2.exports=window:typeof commonjsGlobal!="undefined"?global$2.exports=commonjsGlobal:typeof self!="undefined"?global$2.exports=self:global$2.exports={};var global$1=global$2.exports,objectAssign$9=objectAssign$b,observable$1=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.implementation||global$1.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:function(n,a){return new e(function(o){return n.error.subscribe(function(s){return o.error(s)}),n.progress.subscribe(function(s){return o.next(objectAssign$9({type:"progress"},s))}),n.response.subscribe(function(s){o.next(objectAssign$9({type:"response"},s)),o.complete()}),n.request.publish(a),function(){return n.abort.publish()}})}}};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isobject=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject$2=isobject;function isObjectObject(r){return isObject$2(r)===!0&&Object.prototype.toString.call(r)==="[object Object]"}var isPlainObject$1=function(e){var t,n;return!(isObjectObject(e)===!1||(t=e.constructor,typeof t!="function")||(n=t.prototype,isObjectObject(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)};function _typeof$1(r){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(r)}var objectAssign$8=objectAssign$b,isPlainObject=isPlainObject$1,serializeTypes=["boolean","string","number"],isBuffer=function(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)},jsonRequest$1=function(){return{processOptions:function(e){var t=e.body;if(!t)return e;var n=typeof t.pipe=="function",a=!n&&!isBuffer(t)&&(serializeTypes.indexOf(_typeof$1(t))!==-1||Array.isArray(t)||isPlainObject(t));return a?objectAssign$8({},e,{body:JSON.stringify(e.body),headers:objectAssign$8({},e.headers,{"Content-Type":"application/json"})}):e}}},objectAssign$7=objectAssign$b,jsonResponse$1=function(r){return{onResponse:function(t){var n=t.headers["content-type"]||"",a=r&&r.force||n.indexOf("application/json")!==-1;return!t.body||!n||!a?t:objectAssign$7({},t,{body:tryParse(t.body)})},processOptions:function(t){return objectAssign$7({},t,{headers:objectAssign$7({Accept:"application/json"},t.headers)})}}};function tryParse(r){try{return JSON.parse(r)}catch(e){throw e.message="Failed to parsed response body as JSON: ".concat(e.message),e}}var browserProgress=function(){return{onRequest:function(e){if(e.adapter!=="xhr")return;var t=e.request,n=e.context;"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=a("upload")),"onprogress"in t&&(t.onprogress=a("download"));function a(o){return function(s){var c=s.lengthComputable?s.loaded/s.total*100:-1;n.channels.progress.publish({stage:o,percent:c,total:s.total,loaded:s.loaded,lengthComputable:s.lengthComputable})}}}}},progress$1=browserProgress,errors={},makeError$1={exports:{}};(function(r,e){var t=typeof Reflect!="undefined"?Reflect.construct:void 0,n=Object.defineProperty,a=Error.captureStackTrace;a===void 0&&(a=function(d){var m=new Error;n(d,"stack",{configurable:!0,get:function(){var f=m.stack;return n(this,"stack",{configurable:!0,value:f,writable:!0}),f},set:function(f){n(d,"stack",{configurable:!0,value:f,writable:!0})}})});function o(u){u!==void 0&&n(this,"message",{configurable:!0,value:u,writable:!0});var d=this.constructor.name;d!==void 0&&d!==this.name&&n(this,"name",{configurable:!0,value:d,writable:!0}),a(this,this.constructor)}o.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:o,writable:!0}});var s=function(){function u(m,l){return n(m,"name",{configurable:!0,value:l})}try{var d=function(){};if(u(d,"foo"),d.name==="foo")return u}catch{}}();function c(u,d){if(d==null||d===Error)d=o;else if(typeof d!="function")throw new TypeError("super_ should be a function");var m;if(typeof u=="string")m=u,u=t!==void 0?function(){return t(d,arguments,this.constructor)}:function(){d.apply(this,arguments)},s!==void 0&&(s(u,m),m=void 0);else if(typeof u!="function")throw new TypeError("constructor should be either a string or a function");u.super_=u.super=d;var l={constructor:{configurable:!0,value:u,writable:!0}};return m!==void 0&&(l.name={configurable:!0,value:m,writable:!0}),u.prototype=Object.create(d.prototype,l),u}e=r.exports=c,e.BaseError=o})(makeError$1,makeError$1.exports);var makeError=makeError$1.exports,assign$3=objectAssign$b;function ClientError$1(r){var e=extractErrorProps(r);ClientError$1.super.call(this,e.message),assign$3(this,e)}function ServerError$1(r){var e=extractErrorProps(r);ServerError$1.super.call(this,e.message),assign$3(this,e)}function extractErrorProps(r){var e=r.body,t={response:r,statusCode:r.statusCode,responseBody:stringifyBody(e,r)};return e.error&&e.message?(t.message="".concat(e.error," - ").concat(e.message),t):e.error&&e.error.description?(t.message=e.error.description,t.details=e.error,t):(t.message=e.error||e.message||httpErrorMessage(r),t)}function httpErrorMessage(r){var e=r.statusMessage?" ".concat(r.statusMessage):"";return"".concat(r.method,"-request to ").concat(r.url," resulted in HTTP ").concat(r.statusCode).concat(e)}function stringifyBody(r,e){var t=(e.headers["content-type"]||"").toLowerCase(),n=t.indexOf("application/json")!==-1;return n?JSON.stringify(r,null,2):r}makeError(ClientError$1);makeError(ServerError$1);errors.ClientError=ClientError$1;errors.ServerError=ServerError$1;var browserMiddleware=[],getIt=getIt$1,assign$2=objectAssign$b,observable=observable$1,jsonRequest=jsonRequest$1,jsonResponse=jsonResponse$1,progress=progress$1,_require$1=observable$2,Observable$1=_require$1.Observable,_require2$1=errors,ClientError=_require2$1.ClientError,ServerError=_require2$1.ServerError,httpError={onResponse:function(e){if(e.statusCode>=500)throw new ServerError(e);if(e.statusCode>=400)throw new ClientError(e);return e}},printWarnings={onResponse:function(e){var t=e.headers["x-sanity-warning"],n=Array.isArray(t)?t:[t];return n.filter(Boolean).forEach(function(a){return console.warn(a)}),e}},envSpecific=browserMiddleware,middleware=envSpecific.concat([printWarnings,jsonRequest(),jsonResponse(),progress(),httpError,observable({implementation:Observable$1})]),request=getIt(middleware);function httpRequest$1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:request;return e(assign$2({maxRedirects:0},r))}httpRequest$1.defaultRequester=request;httpRequest$1.ClientError=ClientError;httpRequest$1.ServerError=ServerError;var request_1=httpRequest$1,assign$1=objectAssign$b,projectHeader="X-Sanity-Project-ID",requestOptions=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={},n=e.token||r.token;n&&(t.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!r.useProjectHostname&&r.projectId&&(t[projectHeader]=r.projectId);var a=Boolean(typeof e.withCredentials=="undefined"?r.token||r.withCredentials:e.withCredentials),o=typeof e.timeout=="undefined"?r.timeout:e.timeout;return assign$1({},e,{headers:assign$1({},t,e.headers||{}),timeout:typeof o=="undefined"?5*60*1e3:o,proxy:e.proxy||r.proxy,json:!0,withCredentials:a})},config={},generateHelpUrl_cjs={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r[Symbol.toStringTag]="Module";const e="https://docs.sanity.io/help/";function t(n){return e+n}r.generateHelpUrl=t})(generateHelpUrl_cjs);var warnings={},once$1=function(r){var e=!1,t;return function(){return e||(t=r.apply(void 0,arguments),e=!0),t}},generateHelpUrl$2=generateHelpUrl_cjs.generateHelpUrl,once=once$1,createWarningPrinter=function(e){return once(function(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=console).warn.apply(t,[e.join(" ")].concat(a))})};warnings.printCdnWarning=createWarningPrinter(["You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and","cheaper. Think about it! For more info, see ".concat(generateHelpUrl$2("js-client-cdn-configuration"),"."),"To hide this warning, please set the `useCdn` option to either `true` or `false` when creating","the client."]);warnings.printBrowserTokenWarning=createWarningPrinter(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(generateHelpUrl$2("js-client-browser-token")," for more information and how to hide this warning.")]);warnings.printNoApiVersionSpecifiedWarning=createWarningPrinter(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(generateHelpUrl$2("js-client-api-version"))]);(function(r){var e=generateHelpUrl_cjs.generateHelpUrl,t=objectAssign$b,n=validators$3,a=warnings,o="apicdn.sanity.io",s={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,isPromiseAPI:!0},c=["localhost","127.0.0.1","0.0.0.0"],u=function(m){return c.indexOf(m)!==-1};r.defaultConfig=s,r.initConfig=function(d,m){var l=t({},m,d);l.apiVersion||a.printNoApiVersionSpecifiedWarning();var f=t({},s,l),_=f.useProjectHostname;if(typeof Promise=="undefined"){var b=e("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(b))}if(_&&!f.projectId)throw new Error("Configuration must contain `projectId`");var S=typeof window!="undefined"&&window.location&&window.location.hostname,E=S&&u(window.location.hostname);S&&E&&f.token&&f.ignoreBrowserTokenWarning!==!0?a.printBrowserTokenWarning():typeof f.useCdn=="undefined"&&a.printCdnWarning(),_&&n.projectId(f.projectId),f.dataset&&n.dataset(f.dataset),"requestTagPrefix"in f&&(f.requestTagPrefix=f.requestTagPrefix?n.requestTag(f.requestTagPrefix).replace(/\.+$/,""):void 0),f.apiVersion="".concat(f.apiVersion).replace(/^v/,""),f.isDefaultApi=f.apiHost===s.apiHost,f.useCdn=Boolean(f.useCdn)&&!f.withCredentials,r.validateApiVersion(f.apiVersion);var y=f.apiHost.split("://",2),k=y[0],I=y[1],O=f.isDefaultApi?o:I;return f.useProjectHostname?(f.url="".concat(k,"://").concat(f.projectId,".").concat(I,"/v").concat(f.apiVersion),f.cdnUrl="".concat(k,"://").concat(f.projectId,".").concat(O,"/v").concat(f.apiVersion)):(f.url="".concat(f.apiHost,"/v").concat(f.apiVersion),f.cdnUrl=f.url),f},r.validateApiVersion=function(m){if(!(m==="1"||m==="X")){var l=new Date(m),f=/^\d{4}-\d{2}-\d{2}$/.test(m)&&l instanceof Date&&l.getTime()>0;if(!f)throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}}})(config);function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(n){_defineProperty(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var assign=objectAssign$b,_require=observable$2,Observable=_require.Observable,map=_require.map,filter$1=_require.filter,Patch=patch,Transaction=transaction,dataMethods=dataMethods$1,DatasetsClient=datasetsClient,ProjectsClient=projectsClient,AssetsClient=assetsClient,UsersClient=usersClient,AuthClient=authClient,httpRequest=request_1,getRequestOptions=requestOptions,_require2=config,defaultConfig=_require2.defaultConfig,initConfig=_require2.initConfig,validate=validators$3,toPromise=function(e){return e.toPromise()};function SanityClient(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultConfig;if(!(this instanceof SanityClient))return new SanityClient(r);if(this.config(r),this.assets=new AssetsClient(this),this.datasets=new DatasetsClient(this),this.projects=new ProjectsClient(this),this.users=new UsersClient(this),this.auth=new AuthClient(this),this.clientConfig.isPromiseAPI){var e=assign({},this.clientConfig,{isPromiseAPI:!1});this.observable=new SanityClient(e)}}assign(SanityClient.prototype,dataMethods);assign(SanityClient.prototype,{clone:function(){return new SanityClient(this.config())},config:function(e){if(typeof e=="undefined")return assign({},this.clientConfig);if(this.observable){var t=assign({},e,{isPromiseAPI:!1});this.observable.config(t)}return this.clientConfig=initConfig(e,this.clientConfig||{}),this},withConfig:function(e){return this.clone().config(e)},getUrl:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t?this.clientConfig.cdnUrl:this.clientConfig.url;return"".concat(n,"/").concat(e.replace(/^\//,""))},isPromiseAPI:function(){return this.clientConfig.isPromiseAPI},_requestObservable:function(e){var t=this,n=e.url||e.uri,a=typeof e.canUseCdn=="undefined"?["GET","HEAD"].indexOf(e.method||"GET")>=0&&n.indexOf("/data/")===0:e.canUseCdn,o=this.clientConfig.useCdn&&a,s=e.tag&&this.clientConfig.requestTagPrefix?[this.clientConfig.requestTagPrefix,e.tag].join("."):e.tag||this.clientConfig.requestTagPrefix;s&&(e.query=_objectSpread({tag:validate.requestTag(s)},e.query));var c=getRequestOptions(this.clientConfig,assign({},e,{url:this.getUrl(n,o)}));return new Observable(function(u){return httpRequest(c,t.clientConfig.requester).subscribe(u)})},request:function(e){var t=this._requestObservable(e).pipe(filter$1(function(n){return n.type==="response"}),map(function(n){return n.body}));return this.isPromiseAPI()?toPromise(t):t}});SanityClient.Patch=Patch;SanityClient.Transaction=Transaction;SanityClient.ClientError=httpRequest.ClientError;SanityClient.ServerError=httpRequest.ServerError;SanityClient.requester=httpRequest.defaultRequester;var sanityClient=SanityClient,hyperscript$1={exports:{}};/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */var browserSplit=function(e){var t=String.prototype.split,n=/()??/.exec("")[1]===e,a;return a=function(o,l,c){if(Object.prototype.toString.call(l)!=="[object RegExp]")return t.call(o,l,c);var u=[],d=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.extended?"x":"")+(l.sticky?"y":""),m=0,l=new RegExp(l.source,d+"g"),f,_,b,S;for(o+="",n||(f=new RegExp("^"+l.source+"$(?!\\s)",d)),c=c===e?-1>>>0:c>>>0;(_=l.exec(o))&&(b=_.index+_[0].length,!(b>m&&(u.push(o.slice(m,_.index)),!n&&_.length>1&&_[0].replace(f,function(){for(var E=1;E<arguments.length-2;E++)arguments[E]===e&&(_[E]=e)}),_.length>1&&_.index<o.length&&Array.prototype.push.apply(u,_.slice(1)),S=_[0].length,m=b,u.length>=c)));)l.lastIndex===_.index&&l.lastIndex++;return m===o.length?(S||!l.test(""))&&u.push(""):u.push(o.slice(m)),u.length>c?u.slice(0,c):u},a}(),indexOf=[].indexOf,indexof$1=function(r,e){if(indexOf)return r.indexOf(e);for(var t=0;t<r.length;++t)if(r[t]===e)return t;return-1},indexof=indexof$1,classList=ClassList$1;function ClassList$1(r){var e=r.classList;if(e)return e;var t={add:n,remove:a,contains:o,toggle:s,toString:c,length:0,item:u};return t;function n(l){var f=d();indexof(f,l)>-1||(f.push(l),m(f))}function a(l){var f=d(),_=indexof(f,l);_!==-1&&(f.splice(_,1),m(f))}function o(l){return indexof(d(),l)>-1}function s(l){return o(l)?(a(l),!1):(n(l),!0)}function c(){return r.className}function u(l){var f=d();return f[l]||null}function d(){var l=r.className;return filter(l.split(" "),isTruthy)}function m(l){var f=l.length;r.className=l.join(" "),t.length=f;for(var _=0;_<l.length;_++)t[_]=l[_];delete l[f]}}function filter(r,e){for(var t=[],n=0;n<r.length;n++)e(r[n])&&t.push(r[n]);return t}function isTruthy(r){return!!r}var __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1),split=browserSplit,ClassList=classList,w=typeof window=="undefined"?require$$2:window,document$1=w.document,Text$1=w.Text;function context(){var r=[];function e(){var t=[].slice.call(arguments),n=null;function a(o){var s;function c(l){var f=split(l,/([\.#]?[^\s#.]+)/);/^\.|#/.test(f[1])&&(n=document$1.createElement("div")),forEach(f,function(_){var b=_.substring(1,_.length);!_||(n?_[0]==="."?ClassList(n).add(b):_[0]==="#"&&n.setAttribute("id",b):n=document$1.createElement(_))})}if(o!=null){if(typeof o=="string")n?n.appendChild(s=document$1.createTextNode(o)):c(o);else if(typeof o=="number"||typeof o=="boolean"||o instanceof Date||o instanceof RegExp)n.appendChild(s=document$1.createTextNode(o.toString()));else if(isArray(o))forEach(o,a);else if(isNode(o))n.appendChild(s=o);else if(o instanceof Text$1)n.appendChild(s=o);else if(typeof o=="object")for(var u in o)if(typeof o[u]=="function")/^on\w+/.test(u)?function(l,f){n.addEventListener?(n.addEventListener(l.substring(2),f[l],!1),r.push(function(){n.removeEventListener(l.substring(2),f[l],!1)})):(n.attachEvent(l,f[l]),r.push(function(){n.detachEvent(l,f[l])}))}(u,o):(n[u]=o[u](),r.push(o[u](function(l){n[u]=l})));else if(u==="style")if(typeof o[u]=="string")n.style.cssText=o[u];else for(var d in o[u])(function(l,f){if(typeof f=="function")n.style.setProperty(l,f()),r.push(f(function(b){n.style.setProperty(l,b)}));else var _=o[u][l].match(/(.*)\W+!important\W*$/);_?n.style.setProperty(l,_[1],"important"):n.style.setProperty(l,o[u][l])})(d,o[u][d]);else if(u==="attrs")for(var m in o[u])n.setAttribute(m,o[u][m]);else u.substr(0,5)==="data-"?n.setAttribute(u,o[u]):n[u]=o[u];else if(typeof o=="function"){var m=o();n.appendChild(s=isNode(m)?m:document$1.createTextNode(m)),r.push(o(function(f){isNode(f)&&s.parentElement?(s.parentElement.replaceChild(f,s),s=f):s.textContent=f}))}}return s}for(;t.length;)a(t.shift());return n}return e.cleanup=function(){for(var t=0;t<r.length;t++)r[t]();r.length=0},e}var h$2=hyperscript$1.exports=context();h$2.context=context;function isNode(r){return r&&r.nodeName&&r.nodeType}function forEach(r,e){if(r.forEach)return r.forEach(e);for(var t=0;t<r.length;t++)e(r[t],t)}function isArray(r){return Object.prototype.toString.call(r)=="[object Array]"}var baseUrl="https://docs.sanity.io/help/",generateHelpUrl$1=function(e){return baseUrl+e},imageUrl_umd$1={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(commonjsGlobal,function(){function t(){return t=Object.assign||function(L){for(var j=1;j<arguments.length;j++){var z=arguments[j];for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(L[q]=z[q])}return L},t.apply(this,arguments)}function n(L,j){if(!!L){if(typeof L=="string")return a(L,j);var z=Object.prototype.toString.call(L).slice(8,-1);if(z==="Object"&&L.constructor&&(z=L.constructor.name),z==="Map"||z==="Set")return Array.from(L);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return a(L,j)}}function a(L,j){(j==null||j>L.length)&&(j=L.length);for(var z=0,q=new Array(j);z<j;z++)q[z]=L[z];return q}function o(L){var j=0;if(typeof Symbol=="undefined"||L[Symbol.iterator]==null){if(Array.isArray(L)||(L=n(L)))return function(){return j>=L.length?{done:!0}:{done:!1,value:L[j++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return j=L[Symbol.iterator](),j.next.bind(j)}var s="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function c(L){var j=L.split("-"),z=j[1],q=j[2],Q=j[3];if(!z||!q||!Q)throw new Error("Malformed asset _ref '"+L+`'. Expected an id like "`+s+'".');var F=q.split("x"),Y=F[0],ee=F[1],ce=+Y,me=+ee,ke=isFinite(ce)&&isFinite(me);if(!ke)throw new Error("Malformed asset _ref '"+L+`'. Expected an id like "`+s+'".');return{id:z,width:ce,height:me,format:Q}}var u=function(j){var z=j;return z?typeof z._ref=="string":!1},d=function(j){var z=j;return z?typeof z._id=="string":!1},m=function(j){var z=j;return z&&z.asset?typeof z.asset.url=="string":!1};function l(L){if(!L)return null;var j;if(typeof L=="string"&&f(L))j={asset:{_ref:_(L)}};else if(typeof L=="string")j={asset:{_ref:L}};else if(u(L))j={asset:L};else if(d(L))j={asset:{_ref:L._id||""}};else if(m(L))j={asset:{_ref:_(L.asset.url)}};else if(typeof L.asset=="object")j=L;else return null;var z=L;return z.crop&&(j.crop=z.crop),z.hotspot&&(j.hotspot=z.hotspot),b(j)}function f(L){return/^https?:\/\//.test(""+L)}function _(L){var j=L.split("/").slice(-1);return("image-"+j[0]).replace(/\.([a-z]+)$/,"-$1")}function b(L){if(L.crop&&L.hotspot)return L;var j=t({},L);return j.crop||(j.crop={left:0,top:0,bottom:0,right:0}),j.hotspot||(j.hotspot={x:.5,y:.5,height:1,width:1}),j}var S=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"]];function E(L){var j=t({},L||{}),z=j.source;delete j.source;var q=l(z);if(!q)return null;var Q=q.asset._ref||q.asset._id||"",F=c(Q),Y=Math.round(q.crop.left*F.width),ee=Math.round(q.crop.top*F.height),ce={left:Y,top:ee,width:Math.round(F.width-q.crop.right*F.width-Y),height:Math.round(F.height-q.crop.bottom*F.height-ee)},me=q.hotspot.height*F.height/2,ke=q.hotspot.width*F.width/2,Ee=q.hotspot.x*F.width,C=q.hotspot.y*F.height,U={left:Ee-ke,top:C-me,right:Ee+ke,bottom:C+me};return j.rect||j.focalPoint||j.ignoreImageParams||j.crop||(j=t(t({},j),k({crop:ce,hotspot:U},j))),y(t(t({},j),{},{asset:F}))}function y(L){var j=L.baseUrl||"https://cdn.sanity.io",z=L.asset.id+"-"+L.asset.width+"x"+L.asset.height+"."+L.asset.format,q=j+"/images/"+L.projectId+"/"+L.dataset+"/"+z,Q=[];if(L.rect){var F=L.rect,Y=F.left,ee=F.top,ce=F.width,me=F.height,ke=Y!==0||ee!==0||me!==L.asset.height||ce!==L.asset.width;ke&&Q.push("rect="+Y+","+ee+","+ce+","+me)}L.bg&&Q.push("bg="+L.bg),L.focalPoint&&(Q.push("fp-x="+L.focalPoint.x),Q.push("fp-y="+L.focalPoint.y));var Ee=[L.flipHorizontal&&"h",L.flipVertical&&"v"].filter(Boolean).join("");return Ee&&Q.push("flip="+Ee),S.forEach(function(C){var U=C[0],Z=C[1];typeof L[U]!="undefined"?Q.push(Z+"="+encodeURIComponent(L[U])):typeof L[Z]!="undefined"&&Q.push(Z+"="+encodeURIComponent(L[Z]))}),Q.length===0?q:q+"?"+Q.join("&")}function k(L,j){var z,q=j.width,Q=j.height;if(!(q&&Q))return{width:q,height:Q,rect:L.crop};var F=L.crop,Y=L.hotspot,ee=q/Q,ce=F.width/F.height;if(ce>ee){var me=F.height,ke=me*ee,Ee=F.top,C=(Y.right-Y.left)/2+Y.left,U=C-ke/2;U<F.left?U=F.left:U+ke>F.left+F.width&&(U=F.left+F.width-ke),z={left:Math.round(U),top:Math.round(Ee),width:Math.round(ke),height:Math.round(me)}}else{var Z=F.width,te=Z/ee,J=F.left,X=(Y.bottom-Y.top)/2+Y.top,re=X-te/2;re<F.top?re=F.top:re+te>F.top+F.height&&(re=F.top+F.height-te),z={left:Math.max(0,Math.floor(J)),top:Math.max(0,Math.floor(re)),width:Math.round(Z),height:Math.round(te)}}return{width:q,height:Q,rect:z}}var I=["clip","crop","fill","fillmax","max","scale","min"],O=["top","bottom","left","right","center","focalpoint","entropy"],D=["format"];function R(L){return L?typeof L.clientConfig=="object":!1}function P(L){for(var j=S,z=o(j),q;!(q=z()).done;){var Q=q.value,F=Q[0],Y=Q[1];if(L===F||L===Y)return F}return L}function W(L){var j=L;if(R(j)){var z=j.clientConfig,q=z.apiHost,Q=z.projectId,F=z.dataset,Y=q||"https://api.sanity.io";return new V(null,{baseUrl:Y.replace(/^https:\/\/api\./,"https://cdn."),projectId:Q,dataset:F})}return new V(null,L)}var V=function(){function L(z,q){this.options=z?t(t({},z.options||{}),q||{}):t({},q||{})}var j=L.prototype;return j.withOptions=function(q){var Q=q.baseUrl||this.options.baseUrl,F={baseUrl:Q};for(var Y in q)if(q.hasOwnProperty(Y)){var ee=P(Y);F[ee]=q[Y]}return new L(this,t({baseUrl:Q},F))},j.image=function(q){return this.withOptions({source:q})},j.dataset=function(q){return this.withOptions({dataset:q})},j.projectId=function(q){return this.withOptions({projectId:q})},j.bg=function(q){return this.withOptions({bg:q})},j.dpr=function(q){return this.withOptions({dpr:q})},j.width=function(q){return this.withOptions({width:q})},j.height=function(q){return this.withOptions({height:q})},j.focalPoint=function(q,Q){return this.withOptions({focalPoint:{x:q,y:Q}})},j.maxWidth=function(q){return this.withOptions({maxWidth:q})},j.minWidth=function(q){return this.withOptions({minWidth:q})},j.maxHeight=function(q){return this.withOptions({maxHeight:q})},j.minHeight=function(q){return this.withOptions({minHeight:q})},j.size=function(q,Q){return this.withOptions({width:q,height:Q})},j.blur=function(q){return this.withOptions({blur:q})},j.sharpen=function(q){return this.withOptions({sharpen:q})},j.rect=function(q,Q,F,Y){return this.withOptions({rect:{left:q,top:Q,width:F,height:Y}})},j.format=function(q){return this.withOptions({format:q})},j.invert=function(q){return this.withOptions({invert:q})},j.orientation=function(q){return this.withOptions({orientation:q})},j.quality=function(q){return this.withOptions({quality:q})},j.forceDownload=function(q){return this.withOptions({download:q})},j.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},j.flipVertical=function(){return this.withOptions({flipVertical:!0})},j.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},j.fit=function(q){if(I.indexOf(q)===-1)throw new Error('Invalid fit mode "'+q+'"');return this.withOptions({fit:q})},j.crop=function(q){if(O.indexOf(q)===-1)throw new Error('Invalid crop mode "'+q+'"');return this.withOptions({crop:q})},j.saturation=function(q){return this.withOptions({saturation:q})},j.auto=function(q){if(D.indexOf(q)===-1)throw new Error('Invalid auto mode "'+q+'"');return this.withOptions({auto:q})},j.pad=function(q){return this.withOptions({pad:q})},j.url=function(){return E(this.options)},j.toString=function(){return this.url()},L}();return W})})(imageUrl_umd$1);var generateHelpUrl=generateHelpUrl$1,urlBuilder=imageUrl_umd$1.exports,objectAssign$6=objectAssign$b,enc=encodeURIComponent,materializeError="You must either:\n  - Pass `projectId` and `dataset` to the block renderer\n  - Materialize images to include the `url` field.\n\nFor more information, see ".concat(generateHelpUrl("block-content-image-materializing")),getQueryString=function(e){var t=e.imageOptions,n=Object.keys(t);if(!n.length)return"";var a=n.map(function(o){return"".concat(enc(o),"=").concat(enc(t[o]))});return"?".concat(a.join("&"))},buildUrl=function(e){var t=e.node,n=e.options,a=n.projectId,o=n.dataset,s=t.asset;if(!s)throw new Error("Image does not have required `asset` property");if(s.url)return s.url+getQueryString(n);if(!a||!o)throw new Error(materializeError);var c=s._ref;if(!c)throw new Error("Invalid image reference in block, no `_ref` found on `asset`");return urlBuilder(objectAssign$6({projectId:a,dataset:o},n.imageOptions||{})).image(t).toString()},getImageUrl$2=buildUrl,defaultMarks=["strong","em","code","underline","strike-through"],buildMarksTree$1=function(e){var t=e.children,n=e.markDefs;if(!t||!t.length)return[];var a=t.map(sortMarksByOccurences),o={_type:"span",children:[]},s=[o];return t.forEach(function(c,u){var d=a[u];if(!d){var m=s[s.length-1];m.children.push(c);return}var l=1;if(s.length>1)for(l;l<s.length;l++){var f=s[l].markKey,_=d.indexOf(f);if(_===-1)break;d.splice(_,1)}s=s.slice(0,l);var b=findLastParentNode(s);if(d.forEach(function(y){var k={_type:"span",_key:c._key,children:[],mark:n.find(function(I){return I._key===y})||y,markKey:y};b.children.push(k),s.push(k),b=k}),isTextSpan(c)){for(var S=c.text.split(`
`),E=S.length;E-- >1;)S.splice(E,0,`
`);b.children=b.children.concat(S)}else b.children=b.children.concat(c)}),o.children};function sortMarksByOccurences(r,e,t){if(!r.marks||r.marks.length===0)return r.marks||[];var n=r.marks.reduce(function(o,s){o[s]=o[s]?o[s]+1:1;for(var c=e+1;c<t.length;c++){var u=t[c];if(u.marks&&Array.isArray(u.marks)&&u.marks.indexOf(s)!==-1)o[s]++;else break}return o},{}),a=sortMarks.bind(null,n);return r.marks.slice().sort(a)}function sortMarks(r,e,t){var n=r[e]||0,a=r[t]||0;if(n!==a)return a-n;var o=defaultMarks.indexOf(e),s=defaultMarks.indexOf(t);return o!==s?o-s:e<t?-1:e>t?1:0}function isTextSpan(r){return r._type==="span"&&typeof r.text=="string"&&(Array.isArray(r.marks)||typeof r.marks=="undefined")}function findLastParentNode(r){for(var e=r.length-1;e>=0;e--){var t=r[e];if(t._type==="span"&&t.children)return t}}var buildMarksTree_1=buildMarksTree$1,objectAssign$5=objectAssign$b;function nestLists$1(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"html",t=[],n,a=0;a<r.length;a++){var o=r[a];if(!isListBlock(o)){t.push(o),n=null;continue}if(!n){n=listFromBlock(o),t.push(n);continue}if(blockMatchesList(o,n)){n.children.push(o);continue}if(o.level>n.level){var s=listFromBlock(o);if(e==="html"){var c=lastChild(n),u=objectAssign$5({},c,{children:c.children.concat(s)});n.children[n.children.length-1]=u}else n.children.push(s);n=s;continue}if(o.level<n.level){var d=findListMatching(t[t.length-1],o);if(d){n=d,n.children.push(o);continue}n=listFromBlock(o),t.push(n);continue}if(o.listItem!==n.listItem){var m=findListMatching(t[t.length-1],{level:o.level});if(m&&m.listItem===o.listItem){n=m,n.children.push(o);continue}else{n=listFromBlock(o),t.push(n);continue}}console.warn("Unknown state encountered for block",o),t.push(o)}return t}function isListBlock(r){return Boolean(r.listItem)}function blockMatchesList(r,e){return r.level===e.level&&r.listItem===e.listItem}function listFromBlock(r){return{_type:"list",_key:"".concat(r._key,"-parent"),level:r.level,listItem:r.listItem,children:[r]}}function lastChild(r){return r.children&&r.children[r.children.length-1]}function findListMatching(r,e){var t=typeof e.listItem=="string";if(r._type==="list"&&r.level===e.level&&t&&r.listItem===e.listItem)return r;var n=lastChild(r);return n?findListMatching(n,e):!1}var nestLists_1=nestLists$1,objectAssign$4=objectAssign$b,generateKeys$1=function(r){return r.map(function(e){return e._key?e:objectAssign$4({_key:getStaticKey(e)},e)})};function getStaticKey(r){return checksum(JSON.stringify(r)).toString(36).replace(/[^A-Za-z0-9]/g,"")}function checksum(r){var e=0,t=r.length;if(t===0)return e;for(var n=0;n<t;n++)e=(e<<5)-e+r.charCodeAt(n),e&=e;return e}function _typeof(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(t){return typeof t}:_typeof=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(r)}var objectAssign$3=objectAssign$b,isDefined$1=function(e){return typeof e!="undefined"},mergeSerializers$1=function(e,t){return Object.keys(e).reduce(function(n,a){var o=_typeof(e[a]);return o==="function"?n[a]=isDefined$1(t[a])?t[a]:e[a]:o==="object"?n[a]=objectAssign$3({},e[a],t[a]):n[a]=typeof t[a]=="undefined"?e[a]:t[a],n},{})},objectAssign$2=objectAssign$b,buildMarksTree=buildMarksTree_1,nestLists=nestLists_1,generateKeys=generateKeys$1,mergeSerializers=mergeSerializers$1,optionProps=["projectId","dataset","imageOptions","ignoreUnknownTypes"],isDefined=function(e){return typeof e!="undefined"},defaults={imageOptions:{},ignoreUnknownTypes:!0};function blocksToNodes$1(r,e,t,n){var a=objectAssign$2({},defaults,e),o=Array.isArray(a.blocks)?a.blocks:[a.blocks],s=generateKeys(o),c=nestLists(s,a.listNestMode),u=mergeSerializers(t,a.serializers||{}),d=optionProps.reduce(function(k,I){var O=a[I];return isDefined(O)&&(k[I]=O),k},{});function m(k,I,O,D){return isList(k)?b(k):isListItem(k)?_(k,l(k,O)):isSpan(k)?n(k,u,I,{serializeNode:m}):f(k,I,D)}function l(k,I){for(var O=0,D=0;D<I.length;D++){if(I[D]===k)return O;!isListItem(I[D])||O++}return O}function f(k,I,O){var D=buildMarksTree(k),R=D.map(function(W,V,L){return m(W,V,L,!0)}),P={key:k._key||"block-".concat(I),node:k,isInline:O,serializers:u,options:d};return r(u.block,P,R)}function _(k,I){var O=k._key,D=buildMarksTree(k),R=D.map(m);return r(u.listItem,{node:k,serializers:u,index:I,key:O,options:d},R)}function b(k){var I=k.listItem,O=k.level,D=k._key,R=k.children.map(m);return r(u.list,{key:D,level:O,type:I,options:d},R)}var S=Boolean(a.renderContainerOnSingleChild),E=c.map(m);if(S||E.length>1){var y=a.className?{className:a.className}:{};return r(u.container,y,E)}return E[0]?E[0]:typeof u.empty=="function"?r(u.empty):u.empty}function isList(r){return r._type==="list"&&r.listItem}function isListItem(r){return r._type==="block"&&r.listItem}function isSpan(r){return typeof r=="string"||r.marks||r._type==="span"}var blocksToNodes_1=blocksToNodes$1,objectAssign$1=objectAssign$b,getImageUrl$1=getImageUrl$2,serializers$1=function(r,e){var t=e||{useDashedStyles:!1};function n(k){var I=k.node,O=k.serializers,D=k.options,R=k.isInline,P=k.children,W=I._type,V=O.types[W];if(!V){if(D.ignoreUnknownTypes)return console.warn('Unknown block type "'.concat(W,'", please specify a serializer for it in the `serializers.types` prop')),r(O.unknownType,{node:I,options:D,isInline:R},P);throw new Error('Unknown block type "'.concat(W,'", please specify a serializer for it in the `serializers.types` prop'))}return r(V,{node:I,options:D,isInline:R},P)}function a(k){var I=k.node,O=I.mark,D=I.children,R=typeof O=="string",P=R?O:O._type,W=k.serializers.marks[P];return W?r(W,k.node,D):(console.warn('Unknown mark type "'.concat(P,'", please specify a serializer for it in the `serializers.marks` prop')),r(k.serializers.unknownMark,null,D))}function o(k){var I=k.type==="bullet"?"ul":"ol";return r(I,null,k.children)}function s(k){var I=!k.node.style||k.node.style==="normal"?k.children:r(k.serializers.types.block,k,k.children);return r("li",null,I)}function c(k){return r("div",{style:{display:"none"}},'Unknown block type "'.concat(k.node._type,'", please specify a serializer for it in the `serializers.types` prop'))}function u(k){var I=k.node.style||"normal";return/^h\d/.test(I)?r(I,null,k.children):r(I==="blockquote"?"blockquote":"p",null,k.children)}function d(k,I){return r(k,null,I.children)}function m(k){var I=t.useDashedStyles?{"text-decoration":"underline"}:{textDecoration:"underline"};return r("span",{style:I},k.children)}function l(k){return r("del",null,k.children)}function f(k){return r("a",{href:k.mark.href},k.children)}function _(k){if(!k.node.asset)return null;var I=r("img",{src:getImageUrl$1(k)});return k.isInline?I:r("figure",null,I)}function b(k,I,O,D){if(k===`
`&&I.hardBreak)return r(I.hardBreak,{key:"hb-".concat(O)});if(typeof k=="string")return I.text?r(I.text,{key:"text-".concat(O)},k):k;var R;k.children&&(R={children:k.children.map(function(W,V){return D.serializeNode(W,V,k.children,!0)})});var P=objectAssign$1({},k,R);return r(I.span,{key:k._key||"span-".concat(O),node:P,serializers:I})}var S=function(){return r("br")},E={strong:d.bind(null,"strong"),em:d.bind(null,"em"),code:d.bind(null,"code"),underline:m,"strike-through":l,link:f},y={types:{block:u,image:_},marks:E,list:o,listItem:s,block:n,span:a,hardBreak:S,unknownType:c,unknownMark:"span",container:"div",text:void 0,empty:""};return{defaultSerializers:y,serializeSpan:b}},hyperscript=hyperscript$1.exports,objectAssign=objectAssign$b,getImageUrl=getImageUrl$2,blocksToNodes=blocksToNodes_1,getSerializers=serializers$1,renderNode=function(e,t,n){var a=t||{};if(typeof e=="function")return e(objectAssign({},a,{children:n}));var o=e,s=a.children||n;return hyperscript(o,a,s)},_getSerializers=getSerializers(renderNode,{useDashedStyles:!0}),defaultSerializers=_getSerializers.defaultSerializers,serializeSpan=_getSerializers.serializeSpan,blockContentToHyperscript=function(e){return blocksToNodes(renderNode,e,defaultSerializers,serializeSpan)};blockContentToHyperscript.defaultSerializers=defaultSerializers;blockContentToHyperscript.getImageUrl=getImageUrl;blockContentToHyperscript.renderNode=renderNode;var lib=blockContentToHyperscript,blocksToHyperScript=lib,h$1=blocksToHyperScript.renderNode,blocksToHtml=function(e){var t=blocksToHyperScript(e);return t.outerHTML||t};blocksToHtml.defaultSerializers=blocksToHyperScript.defaultSerializers;blocksToHtml.getImageUrl=blocksToHyperScript.getImageUrl;blocksToHtml.renderNode=h$1;blocksToHtml.h=h$1;var blocksToHtml_1=blocksToHtml,imageUrl_umd={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(commonjsGlobal,function(){var t="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function n(R){var P=R.split("-"),W=P[1],V=P[2],L=P[3];if(!W||!V||!L)throw new Error("Malformed asset _ref '"+R+`'. Expected an id like "`+t+'".');var j=V.split("x"),z=j[0],q=j[1],Q=+z,F=+q,Y=isFinite(Q)&&isFinite(F);if(!Y)throw new Error("Malformed asset _ref '"+R+`'. Expected an id like "`+t+'".');return{id:W,width:Q,height:F,format:L}}var a=function(R){var P=R;return P?typeof P._ref=="string":!1},o=function(R){var P=R;return P?typeof P._id=="string":!1},s=function(R){var P=R;return P&&P.asset?typeof P.asset.url=="string":!1};function c(R){if(!R)return null;var P;if(typeof R=="string"&&u(R))P={asset:{_ref:d(R)}};else if(typeof R=="string")P={asset:{_ref:R}};else if(a(R))P={asset:R};else if(o(R))P={asset:{_ref:R._id||""}};else if(s(R))P={asset:{_ref:d(R.asset.url)}};else if(typeof R.asset=="object")P=R;else return null;var W=R;return W.crop&&(P.crop=W.crop),W.hotspot&&(P.hotspot=W.hotspot),m(P)}function u(R){return/^https?:\/\//.test(""+R)}function d(R){var P=R.split("/").slice(-1);return("image-"+P[0]).replace(/\.([a-z]+)$/,"-$1")}function m(R){if(R.crop&&R.hotspot)return R;var P=Object.assign({},R);return P.crop||(P.crop={left:0,top:0,bottom:0,right:0}),P.hotspot||(P.hotspot={x:.5,y:.5,height:1,width:1}),P}var l=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"]];function f(R){var P=Object.assign({},R||{}),W=P.source;delete P.source;var V=c(W);if(!V)throw new Error("Unable to resolve image URL from source ("+JSON.stringify(W)+")");var L=V.asset._ref||V.asset._id||"",j=n(L),z=Math.round(V.crop.left*j.width),q=Math.round(V.crop.top*j.height),Q={left:z,top:q,width:Math.round(j.width-V.crop.right*j.width-z),height:Math.round(j.height-V.crop.bottom*j.height-q)},F=V.hotspot.height*j.height/2,Y=V.hotspot.width*j.width/2,ee=V.hotspot.x*j.width,ce=V.hotspot.y*j.height,me={left:ee-Y,top:ce-F,right:ee+Y,bottom:ce+F};return P.rect||P.focalPoint||P.ignoreImageParams||P.crop||(P=Object.assign({},P,b({crop:Q,hotspot:me},P))),_(Object.assign({},P,{asset:j}))}function _(R){var P=R.baseUrl||"https://cdn.sanity.io",W=R.asset.id+"-"+R.asset.width+"x"+R.asset.height+"."+R.asset.format,V=P+"/images/"+R.projectId+"/"+R.dataset+"/"+W,L=[];if(R.rect){var j=R.rect,z=j.left,q=j.top,Q=j.width,F=j.height,Y=z!==0||q!==0||F!==R.asset.height||Q!==R.asset.width;Y&&L.push("rect="+z+","+q+","+Q+","+F)}R.bg&&L.push("bg="+R.bg),R.focalPoint&&(L.push("fp-x="+R.focalPoint.x),L.push("fp-y="+R.focalPoint.y));var ee=[R.flipHorizontal&&"h",R.flipVertical&&"v"].filter(Boolean).join("");return ee&&L.push("flip="+ee),l.forEach(function(ce){var me=ce[0],ke=ce[1];typeof R[me]!="undefined"?L.push(ke+"="+encodeURIComponent(R[me])):typeof R[ke]!="undefined"&&L.push(ke+"="+encodeURIComponent(R[ke]))}),L.length===0?V:V+"?"+L.join("&")}function b(R,P){var W,V=P.width,L=P.height;if(!(V&&L))return{width:V,height:L,rect:R.crop};var j=R.crop,z=R.hotspot,q=V/L,Q=j.width/j.height;if(Q>q){var F=Math.round(j.height),Y=Math.round(F*q),ee=Math.max(0,Math.round(j.top)),ce=Math.round((z.right-z.left)/2+z.left),me=Math.max(0,Math.round(ce-Y/2));me<j.left?me=j.left:me+Y>j.left+j.width&&(me=j.left+j.width-Y),W={left:me,top:ee,width:Y,height:F}}else{var ke=j.width,Ee=Math.round(ke/q),C=Math.max(0,Math.round(j.left)),U=Math.round((z.bottom-z.top)/2+z.top),Z=Math.max(0,Math.round(U-Ee/2));Z<j.top?Z=j.top:Z+Ee>j.top+j.height&&(Z=j.top+j.height-Ee),W={left:C,top:Z,width:ke,height:Ee}}return{width:V,height:L,rect:W}}var S=["clip","crop","fill","fillmax","max","scale","min"],E=["top","bottom","left","right","center","focalpoint","entropy"],y=["format"];function k(R){return R?typeof R.clientConfig=="object":!1}function I(R){for(var P=l,W=0,V=P;W<V.length;W+=1){var L=V[W],j=L[0],z=L[1];if(R===j||R===z)return j}return R}function O(R){var P=R;if(k(P)){var W=P.clientConfig,V=W.apiHost,L=W.projectId,j=W.dataset,z=V||"https://api.sanity.io";return new D(null,{baseUrl:z.replace(/^https:\/\/api\./,"https://cdn."),projectId:L,dataset:j})}return new D(null,R)}var D=function(P,W){this.options=P?Object.assign({},P.options||{},W||{}):Object.assign({},W||{})};return D.prototype.withOptions=function(P){var W=P.baseUrl||this.options.baseUrl,V={baseUrl:W};for(var L in P)if(P.hasOwnProperty(L)){var j=I(L);V[j]=P[L]}return new D(this,Object.assign({},{baseUrl:W},V))},D.prototype.image=function(P){return this.withOptions({source:P})},D.prototype.dataset=function(P){return this.withOptions({dataset:P})},D.prototype.projectId=function(P){return this.withOptions({projectId:P})},D.prototype.bg=function(P){return this.withOptions({bg:P})},D.prototype.dpr=function(P){return this.withOptions(P&&P!==1?{dpr:P}:{})},D.prototype.width=function(P){return this.withOptions({width:P})},D.prototype.height=function(P){return this.withOptions({height:P})},D.prototype.focalPoint=function(P,W){return this.withOptions({focalPoint:{x:P,y:W}})},D.prototype.maxWidth=function(P){return this.withOptions({maxWidth:P})},D.prototype.minWidth=function(P){return this.withOptions({minWidth:P})},D.prototype.maxHeight=function(P){return this.withOptions({maxHeight:P})},D.prototype.minHeight=function(P){return this.withOptions({minHeight:P})},D.prototype.size=function(P,W){return this.withOptions({width:P,height:W})},D.prototype.blur=function(P){return this.withOptions({blur:P})},D.prototype.sharpen=function(P){return this.withOptions({sharpen:P})},D.prototype.rect=function(P,W,V,L){return this.withOptions({rect:{left:P,top:W,width:V,height:L}})},D.prototype.format=function(P){return this.withOptions({format:P})},D.prototype.invert=function(P){return this.withOptions({invert:P})},D.prototype.orientation=function(P){return this.withOptions({orientation:P})},D.prototype.quality=function(P){return this.withOptions({quality:P})},D.prototype.forceDownload=function(P){return this.withOptions({download:P})},D.prototype.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},D.prototype.flipVertical=function(){return this.withOptions({flipVertical:!0})},D.prototype.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},D.prototype.fit=function(P){if(S.indexOf(P)===-1)throw new Error('Invalid fit mode "'+P+'"');return this.withOptions({fit:P})},D.prototype.crop=function(P){if(E.indexOf(P)===-1)throw new Error('Invalid crop mode "'+P+'"');return this.withOptions({crop:P})},D.prototype.saturation=function(P){return this.withOptions({saturation:P})},D.prototype.auto=function(P){if(y.indexOf(P)===-1)throw new Error('Invalid auto mode "'+P+'"');return this.withOptions({auto:P})},D.prototype.pad=function(P){return this.withOptions({pad:P})},D.prototype.url=function(){return f(this.options)},D.prototype.toString=function(){return this.url()},O})})(imageUrl_umd);var imageUrlBuilder=imageUrl_umd.exports;/*! get-video-id v3.5.3 | @license MIT  Michael Wuergler | https://github.com/radiovisual/get-video-id */function stripParameters(r){return r.includes("?")?r.split("?")[0]:r.includes("/")?r.split("/")[0]:r.includes("&")?r.split("&")[0]:r}function youtube(r){var e=r;e=e.replace(/#t=.*$/,""),e=e.replace(/^https?:\/\//,"");var t=/youtube:\/\/|youtu\.be\/|y2u\.be\//g;if(t.test(e)){var n=e.split(t)[1];return stripParameters(n)}var a=/\/shorts\//g;if(a.test(e))return stripParameters(e.split(a)[1]);var o=/\/v\/|\/vi\//g;if(o.test(e)){var s=e.split(o)[1];return stripParameters(s)}var c=/v=|vi=/g;if(c.test(e)){var u=e.split(c);return stripParameters(u[1].split("&")[0])}var d=/\/an_webp\//g;if(d.test(e)){var m=e.split(d)[1];return stripParameters(m)}var l=/\/e\//g;if(l.test(e)){var f=e.split(l)[1];return stripParameters(f)}var _=/\/embed\//g;if(_.test(e)){var b=e.split(_)[1];return stripParameters(b)}var S=/\/user\/([a-zA-Z\d]*)$/g;if(!S.test(e)){var E=/\/user\/(?!.*videos)/g;if(E.test(e)){var y=e.split("/");return stripParameters(y.pop())}var k=/\/attribution_link\?.*v%3D([^%&]*)(%26|&|$)/;if(k.test(e))return stripParameters(e.match(k)[1])}}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,o=!1,s,c;try{for(t=t.call(r);!(a=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));a=!0);}catch(u){o=!0,c=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw c}}return n}}function _unsupportedIterableToArray(r,e){if(!!r){if(typeof r=="string")return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray(r,e)}}function _arrayLikeToArray(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vimeo(r){var e=r;if(e.includes("#")){var t=e.split("#"),n=_slicedToArray(t,1);e=n[0]}if(e.includes("?")&&!e.includes("clip_id=")){var a=e.split("?"),o=_slicedToArray(a,1);e=o[0]}var s,c,u=/https?:\/\/vimeo\.com\/event\/(\d+)$/,d=u.exec(e);if(d&&d[1])return d[1];var m=/https?:\/\/vimeo\.com\/(\d+)/,l=m.exec(e);if(l&&l[1])return l[1];var f=["https?://player.vimeo.com/video/[0-9]+$","https?://vimeo.com/channels","groups","album"].join("|"),_=new RegExp(f,"gim");if(_.test(e))c=e.split("/"),c&&c.length>0&&(s=c.pop());else if(/clip_id=/gim.test(e)&&(c=e.split("clip_id="),c&&c.length>0)){var b=c[1].split("&"),S=_slicedToArray(b,1);s=S[0]}return s}function vine(r){var e=/https:\/\/vine\.co\/v\/([a-zA-Z\d]*)\/?/,t=e.exec(r);if(t&&t.length>1)return t[1]}function videopress(r){var e;if(r.includes("embed"))return e=/embed\/(\w{8})/,r.match(e)[1];e=/\/v\/(\w{8})/;var t=r.match(e);if(t&&t.length>0)return t[1]}function microsoftStream(r){var e=r.includes("embed")?/https:\/\/web\.microsoftstream\.com\/embed\/video\/([a-zA-Z\d-]*)\/?/:/https:\/\/web\.microsoftstream\.com\/video\/([a-zA-Z\d-]*)\/?/,t=e.exec(r);if(t&&t.length>1)return t[1]}function tiktok(r){var e=/tiktok\.com(.*)\/video\/(\d+)/gm,t=e.exec(r);if(t&&t.length>2)return t[2]}function dailymotion(r){var e=/dailymotion\.com(.*)(video)\/([a-zA-Z\d]+)/gm,t=e.exec(r);if(t)return t[3];var n=/dai\.ly\/([a-zA-Z\d]+)/gm,a=n.exec(r);if(a&&a.length>1)return a[1];var o=/dailymotion\.com(.*)video=([a-zA-Z\d]+)/gm,s=o.exec(r);if(s&&s.length>2)return s[2]}function getSrc(r){if(typeof r!="string")throw new TypeError("getSrc expected a string");var e=/src="(.*?)"/gm,t=e.exec(r);if(t&&t.length>=2)return t[1]}function getVideoId(r){if(typeof r!="string")throw new TypeError("get-video-id expects a string");var e=r;/<iframe/gi.test(e)&&(e=getSrc(e)),e=e.trim(),e=e.replace("-nocookie",""),e=e.replace("/www.","/");var t={id:null,service:null};if(/\/\/google/.test(e)){var n=e.match(/url=([^&]+)&/);n&&(e=decodeURIComponent(n[1]))}return/youtube|youtu\.be|y2u\.be|i.ytimg\./.test(e)?t={id:youtube(e),service:"youtube"}:/vimeo/.test(e)?t={id:vimeo(e),service:"vimeo"}:/vine/.test(e)?t={id:vine(e),service:"vine"}:/videopress/.test(e)?t={id:videopress(e),service:"videopress"}:/microsoftstream/.test(e)?t={id:microsoftStream(e),service:"microsoftstream"}:/tiktok\.com/.test(e)?t={id:tiktok(e),service:"tiktok"}:/(dailymotion\.com|dai\.ly)/.test(e)&&(t={id:dailymotion(e),service:"dailymotion"}),t}function toInteger(r){if(r===null||r===!0||r===!1)return NaN;var e=Number(r);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function requiredArgs(r,e){if(e.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+e.length+" present")}function toDate(r){requiredArgs(1,arguments);var e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new Date(r.getTime()):typeof r=="number"||e==="[object Number]"?new Date(r):((typeof r=="string"||e==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function addMilliseconds(r,e){requiredArgs(2,arguments);var t=toDate(r).getTime(),n=toInteger(e);return new Date(t+n)}function getTimezoneOffsetInMilliseconds(r){var e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return e.setUTCFullYear(r.getFullYear()),r.getTime()-e.getTime()}var millisecondsInMinute=6e4,millisecondsInHour=36e5;function isDate(r){return requiredArgs(1,arguments),r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function isValid(r){if(requiredArgs(1,arguments),!isDate(r)&&typeof r!="number")return!1;var e=toDate(r);return!isNaN(Number(e))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function(r,e,t){var n,a=formatDistanceLocale[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n},formatDistance$1=formatDistance;function buildFormatLongFn(r){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):r.defaultWidth,n=r.formats[t]||r.formats[r.defaultWidth];return n}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatLong$1=formatLong,formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function(r,e,t,n){return formatRelativeLocale[r]},formatRelative$1=formatRelative;function buildLocalizeFn(r){return function(e,t){var n=t||{},a=n.context?String(n.context):"standalone",o;if(a==="formatting"&&r.formattingValues){var s=r.defaultFormattingWidth||r.defaultWidth,c=n.width?String(n.width):s;o=r.formattingValues[c]||r.formattingValues[s]}else{var u=r.defaultWidth,d=n.width?String(n.width):r.defaultWidth;o=r.values[d]||r.values[u]}var m=r.argumentCallback?r.argumentCallback(e):e;return o[m]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function(r,e){var t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})},localize$1=localize;function buildMatchFn(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(a);if(!o)return null;var s=o[0],c=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(c)?findIndex(c,function(l){return l.test(s)}):findKey(c,function(l){return l.test(s)}),d;d=r.valueCallback?r.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;var m=e.slice(s.length);return{value:d,rest:m}}}function findKey(r,e){for(var t in r)if(r.hasOwnProperty(t)&&e(r[t]))return t}function findIndex(r,e){for(var t=0;t<r.length;t++)if(e(r[t]))return t}function buildMatchPatternFn(r){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(r.matchPattern);if(!n)return null;var a=n[0],o=e.match(r.parsePattern);if(!o)return null;var s=r.valueCallback?r.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;var c=e.slice(a.length);return{value:s,rest:c}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(r){return parseInt(r,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},match$1=match,locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}},defaultLocale=locale;function subMilliseconds(r,e){requiredArgs(2,arguments);var t=toInteger(e);return addMilliseconds(r,-t)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(r){requiredArgs(1,arguments);var e=toDate(r),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),a=t-n;return Math.floor(a/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(r){requiredArgs(1,arguments);var e=1,t=toDate(r),n=t.getUTCDay(),a=(n<e?7:0)+n-e;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}function getUTCISOWeekYear(r){requiredArgs(1,arguments);var e=toDate(r),t=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(t+1,0,4),n.setUTCHours(0,0,0,0);var a=startOfUTCISOWeek(n),o=new Date(0);o.setUTCFullYear(t,0,4),o.setUTCHours(0,0,0,0);var s=startOfUTCISOWeek(o);return e.getTime()>=a.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function startOfUTCISOWeekYear(r){requiredArgs(1,arguments);var e=getUTCISOWeekYear(r),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var n=startOfUTCISOWeek(t);return n}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCISOWeek(r){requiredArgs(1,arguments);var e=toDate(r),t=startOfUTCISOWeek(e).getTime()-startOfUTCISOWeekYear(e).getTime();return Math.round(t/MILLISECONDS_IN_WEEK$1)+1}function startOfUTCWeek(r,e){requiredArgs(1,arguments);var t=e||{},n=t.locale,a=n&&n.options&&n.options.weekStartsOn,o=a==null?0:toInteger(a),s=t.weekStartsOn==null?o:toInteger(t.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=toDate(r),u=c.getUTCDay(),d=(u<s?7:0)+u-s;return c.setUTCDate(c.getUTCDate()-d),c.setUTCHours(0,0,0,0),c}function getUTCWeekYear(r,e){requiredArgs(1,arguments);var t=toDate(r),n=t.getUTCFullYear(),a=e||{},o=a.locale,s=o&&o.options&&o.options.firstWeekContainsDate,c=s==null?1:toInteger(s),u=a.firstWeekContainsDate==null?c:toInteger(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(n+1,0,u),d.setUTCHours(0,0,0,0);var m=startOfUTCWeek(d,e),l=new Date(0);l.setUTCFullYear(n,0,u),l.setUTCHours(0,0,0,0);var f=startOfUTCWeek(l,e);return t.getTime()>=m.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function startOfUTCWeekYear(r,e){requiredArgs(1,arguments);var t=e||{},n=t.locale,a=n&&n.options&&n.options.firstWeekContainsDate,o=a==null?1:toInteger(a),s=t.firstWeekContainsDate==null?o:toInteger(t.firstWeekContainsDate),c=getUTCWeekYear(r,e),u=new Date(0);u.setUTCFullYear(c,0,s),u.setUTCHours(0,0,0,0);var d=startOfUTCWeek(u,e);return d}var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(r,e){requiredArgs(1,arguments);var t=toDate(r),n=startOfUTCWeek(t,e).getTime()-startOfUTCWeekYear(t,e).getTime();return Math.round(n/MILLISECONDS_IN_WEEK)+1}function addLeadingZeros(r,e){for(var t=r<0?"-":"",n=Math.abs(r).toString();n.length<e;)n="0"+n;return t+n}var formatters$2={y:function(r,e){var t=r.getUTCFullYear(),n=t>0?t:1-t;return addLeadingZeros(e==="yy"?n%100:n,e.length)},M:function(r,e){var t=r.getUTCMonth();return e==="M"?String(t+1):addLeadingZeros(t+1,2)},d:function(r,e){return addLeadingZeros(r.getUTCDate(),e.length)},a:function(r,e){var t=r.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h:function(r,e){return addLeadingZeros(r.getUTCHours()%12||12,e.length)},H:function(r,e){return addLeadingZeros(r.getUTCHours(),e.length)},m:function(r,e){return addLeadingZeros(r.getUTCMinutes(),e.length)},s:function(r,e){return addLeadingZeros(r.getUTCSeconds(),e.length)},S:function(r,e){var t=e.length,n=r.getUTCMilliseconds(),a=Math.floor(n*Math.pow(10,t-3));return addLeadingZeros(a,e.length)}},formatters$3=formatters$2,dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(r,e,t){var n=r.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){var n=r.getUTCFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return formatters$3.y(r,e)},Y:function(r,e,t,n){var a=getUTCWeekYear(r,n),o=a>0?a:1-a;if(e==="YY"){var s=o%100;return addLeadingZeros(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):addLeadingZeros(o,e.length)},R:function(r,e){var t=getUTCISOWeekYear(r);return addLeadingZeros(t,e.length)},u:function(r,e){var t=r.getUTCFullYear();return addLeadingZeros(t,e.length)},Q:function(r,e,t){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return addLeadingZeros(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){var n=Math.ceil((r.getUTCMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return addLeadingZeros(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){var n=r.getUTCMonth();switch(e){case"M":case"MM":return formatters$3.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){var n=r.getUTCMonth();switch(e){case"L":return String(n+1);case"LL":return addLeadingZeros(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){var a=getUTCWeek(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):addLeadingZeros(a,e.length)},I:function(r,e,t){var n=getUTCISOWeek(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):addLeadingZeros(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getUTCDate(),{unit:"date"}):formatters$3.d(r,e)},D:function(r,e,t){var n=getUTCDayOfYear(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):addLeadingZeros(n,e.length)},E:function(r,e,t){var n=r.getUTCDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){var a=r.getUTCDay(),o=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return addLeadingZeros(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){var a=r.getUTCDay(),o=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return addLeadingZeros(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){var n=r.getUTCDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return addLeadingZeros(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){var n=r.getUTCHours(),a=n/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){var n=r.getUTCHours(),a;switch(n===12?a=dayPeriodEnum.noon:n===0?a=dayPeriodEnum.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){var n=r.getUTCHours(),a;switch(n>=17?a=dayPeriodEnum.evening:n>=12?a=dayPeriodEnum.afternoon:n>=4?a=dayPeriodEnum.morning:a=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){var n=r.getUTCHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return formatters$3.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getUTCHours(),{unit:"hour"}):formatters$3.H(r,e)},K:function(r,e,t){var n=r.getUTCHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},k:function(r,e,t){var n=r.getUTCHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):addLeadingZeros(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):formatters$3.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):formatters$3.s(r,e)},S:function(r,e){return formatters$3.S(r,e)},X:function(r,e,t,n){var a=n._originalDate||r,o=a.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(o);case"XXXX":case"XX":return formatTimezone(o);case"XXXXX":case"XXX":default:return formatTimezone(o,":")}},x:function(r,e,t,n){var a=n._originalDate||r,o=a.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(o);case"xxxx":case"xx":return formatTimezone(o);case"xxxxx":case"xxx":default:return formatTimezone(o,":")}},O:function(r,e,t,n){var a=n._originalDate||r,o=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(o,":");case"OOOO":default:return"GMT"+formatTimezone(o,":")}},z:function(r,e,t,n){var a=n._originalDate||r,o=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(o,":");case"zzzz":default:return"GMT"+formatTimezone(o,":")}},t:function(r,e,t,n){var a=n._originalDate||r,o=Math.floor(a.getTime()/1e3);return addLeadingZeros(o,e.length)},T:function(r,e,t,n){var a=n._originalDate||r,o=a.getTime();return addLeadingZeros(o,e.length)}};function formatTimezoneShort(r,e){var t=r>0?"-":"+",n=Math.abs(r),a=Math.floor(n/60),o=n%60;if(o===0)return t+String(a);var s=e||"";return t+String(a)+s+addLeadingZeros(o,2)}function formatTimezoneWithOptionalMinutes(r,e){if(r%60===0){var t=r>0?"-":"+";return t+addLeadingZeros(Math.abs(r)/60,2)}return formatTimezone(r,e)}function formatTimezone(r,e){var t=e||"",n=r>0?"-":"+",a=Math.abs(r),o=addLeadingZeros(Math.floor(a/60),2),s=addLeadingZeros(a%60,2);return n+o+t+s}var formatters$1=formatters;function dateLongFormatter(r,e){switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function timeLongFormatter(r,e){switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function dateTimeLongFormatter(r,e){var t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return dateLongFormatter(r,e);var o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",dateLongFormatter(n,e)).replace("{{time}}",timeLongFormatter(a,e))}var longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},longFormatters$1=longFormatters,protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(r){return protectedDayOfYearTokens.indexOf(r)!==-1}function isProtectedWeekYearToken(r){return protectedWeekYearTokens.indexOf(r)!==-1}function throwProtectedError(r,e,t){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://git.io/fxCyr"))}var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(r,e,t){requiredArgs(2,arguments);var n=String(e),a=t||{},o=a.locale||defaultLocale,s=o.options&&o.options.firstWeekContainsDate,c=s==null?1:toInteger(s),u=a.firstWeekContainsDate==null?c:toInteger(a.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=o.options&&o.options.weekStartsOn,m=d==null?0:toInteger(d),l=a.weekStartsOn==null?m:toInteger(a.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=toDate(r);if(!isValid(f))throw new RangeError("Invalid time value");var _=getTimezoneOffsetInMilliseconds(f),b=subMilliseconds(f,_),S={firstWeekContainsDate:u,weekStartsOn:l,locale:o,_originalDate:f},E=n.match(longFormattingTokensRegExp).map(function(y){var k=y[0];if(k==="p"||k==="P"){var I=longFormatters$1[k];return I(y,o.formatLong,S)}return y}).join("").match(formattingTokensRegExp).map(function(y){if(y==="''")return"'";var k=y[0];if(k==="'")return cleanEscapedString(y);var I=formatters$1[k];if(I)return!a.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(y)&&throwProtectedError(y,e,r),!a.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(y)&&throwProtectedError(y,e,r),I(b,y,o.localize,S);if(k.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return y}).join("");return E}function cleanEscapedString(r){return r.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}function parseISO(r,e){requiredArgs(1,arguments);var t=e||{},n=t.additionalDigits==null?2:toInteger(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof r=="string"||Object.prototype.toString.call(r)==="[object String]"))return new Date(NaN);var a=splitDateString(r),o;if(a.date){var s=parseYear(a.date,n);o=parseDate(s.restDateString,s.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var c=o.getTime(),u=0,d;if(a.time&&(u=parseTime(a.time),isNaN(u)))return new Date(NaN);if(a.timezone){if(d=parseTimezone(a.timezone),isNaN(d))return new Date(NaN)}else{var m=new Date(c+u),l=new Date(0);return l.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),l.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),l}return new Date(c+u+d)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(r){var e={},t=r.split(patterns.dateTimeDelimiter),n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],patterns.timeZoneDelimiter.test(e.date)&&(e.date=r.split(patterns.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){var a=patterns.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function parseYear(r,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?a:o*100,restDateString:r.slice((n[1]||n[2]).length)}}function parseDate(r,e){if(e===null)return new Date(NaN);var t=r.match(dateRegex);if(!t)return new Date(NaN);var n=!!t[4],a=parseDateUnit(t[1]),o=parseDateUnit(t[2])-1,s=parseDateUnit(t[3]),c=parseDateUnit(t[4]),u=parseDateUnit(t[5])-1;if(n)return validateWeekDate(e,c,u)?dayOfISOWeekYear(e,c,u):new Date(NaN);var d=new Date(0);return!validateDate(e,o,s)||!validateDayOfYearDate(e,a)?new Date(NaN):(d.setUTCFullYear(e,o,Math.max(a,s)),d)}function parseDateUnit(r){return r?parseInt(r):1}function parseTime(r){var e=r.match(timeRegex);if(!e)return NaN;var t=parseTimeUnit(e[1]),n=parseTimeUnit(e[2]),a=parseTimeUnit(e[3]);return validateTime(t,n,a)?t*millisecondsInHour+n*millisecondsInMinute+a*1e3:NaN}function parseTimeUnit(r){return r&&parseFloat(r.replace(",","."))||0}function parseTimezone(r){if(r==="Z")return 0;var e=r.match(timezoneRegex);if(!e)return 0;var t=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return validateTimezone(n,a)?t*(n*millisecondsInHour+a*millisecondsInMinute):NaN}function dayOfISOWeekYear(r,e,t){var n=new Date(0);n.setUTCFullYear(r,0,4);var a=n.getUTCDay()||7,o=(e-1)*7+t+1-a;return n.setUTCDate(n.getUTCDate()+o),n}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(r){return r%400===0||r%4===0&&r%100!==0}function validateDate(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(daysInMonths[e]||(isLeapYearIndex(r)?29:28))}function validateDayOfYearDate(r,e){return e>=1&&e<=(isLeapYearIndex(r)?366:365)}function validateWeekDate(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function validateTime(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function validateTimezone(r,e){return e>=0&&e<=59}const SANITY_PROJECT_ID="58ueii0w",nanoid=(r=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(r));for(;r--;){let n=63&t[r];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e},getRandomInt=(r,e)=>Math.floor(Math.random()*(Math.floor(e)-Math.ceil(r)+1))+Math.ceil(r),longFormatDate=r=>{try{if(r)return format(parseISO(r),"MMMM d, yyyy")}catch(e){console.dir(e)}},dateTimeFormat=r=>{try{if(r)return format(parseISO(r),"MMMM d, yyyy, HH:mm")}catch(e){console.dir(e)}},roleToRoleName={artist:"Artist",staff:"Staff",board:"Board",advisoryCommittee:"Advisory Committee"},client=sanityClient({projectId:SANITY_PROJECT_ID,dataset:"production",apiVersion:"2021-10-05",token:"",useCdn:!1}),h=blocksToHtml_1.h,prepareTextElements=r=>{let e=[];return has_1(r,"node.caption.content")&&e.push(h("figcaption",{className:"caption"},toPlainText(r.node.caption.content))),has_1(r,"node.attribution")&&e.push(h("figcaption",{className:"credits"},r.node.attribution)),e},renderBlockText=r=>blocksToHtml_1({blocks:r,serializers,projectId:SANITY_PROJECT_ID,dataset:"production"}),toPlainText=(r=[])=>r.map(e=>e._type!=="block"||!e.children?"":e.children.map(t=>t.text).join("")).join(`

`),builder=imageUrlBuilder(client),urlFor=r=>builder.image(r),serializers={marks:{link:r=>{let t=get_1(r,"mark.href","").includes("http")?{target:"_blank",rel:"noreferrer",href:r.mark.href}:{href:r.mark.href};return h("a",t,r.children)},highlight:r=>h("mark",{className:"highlight"},r.children),footnote:r=>h("a",{id:"link-"+r.mark._key,className:"footnote-link",href:"#note-"+r.mark._key},r.children)},types:{block:r=>{const e=r.node.style||"normal";return e==="blockquote"?h("blockquote",{},r.children):e==="h2"?h("h2",{},r.children):e==="h3"?h("h3",{},r.children):e==="h4"?h("h4",{},r.children):h("p",{className:e},r.children)},image:r=>h("figure",{className:"image"},[h("img",{src:urlFor(get_1(r,"node.asset","")).width(800).quality(90).auto("format").url()}),...prepareTextElements(r)]),embedBlock:r=>{if(get_1(r,"node.url","").includes("youtube"))return h("figure",{className:"youtube"},[h("div",{className:"embed-container"},h("iframe",{width:"720",height:"480",src:"https://www.youtube.com/embed/"+getVideoId(r.node.url).id,frameborder:"no",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),...prepareTextElements(r)]);if(get_1(r,"node.url","").includes("vimeo"))return h("figure",{className:"vimeo"},[h("div",{className:"embed-container"},h("iframe",{width:"720",height:"480",src:"https://player.vimeo.com/video/"+getVideoId(r.node.url).id,frameborder:"no",byline:!1,color:"#ffffff",allow:"autoplay; fullscreen",allowfullscreen:!0})),...prepareTextElements(r)]);if(get_1(r,"node.url","").includes("soundcloud"))return h("figure",{className:"soundcloud"},[h("div",{className:"soundcloud-container"},h("iframe",{width:"100%",height:"300",src:"https://w.soundcloud.com/player/?url="+get_1(r,"node.url","")+"&color=%23fffff",frameborder:"no",scrolling:"no",allow:"autoplay"})),...prepareTextElements(r)])},videoBlock:r=>{const e="https://shape.anthropocene-curriculum.org/material/files/"+SANITY_PROJECT_ID+"/production/"+get_1(r,"node.videoFile.asset._ref","").replace("file-","").replace("-mp4",".mp4");return h("figure",{className:"video"},[h("video",{src:e,controls:!0,loop:!0,autoplay:get_1(r,"node.autoPlay","")}),...prepareTextElements(r)])},audioBlock:r=>{const e="https://shape.anthropocene-curriculum.org/material/files/"+SANITY_PROJECT_ID+"/production/"+get_1(r,"node.audioFile.asset._ref","").replace("file-","").replace("-mp3",".mp3");return h("figure",{className:"audio"},[h("audio",{src:e,controls:!0}),...prepareTextElements(r)])}}},loadData=async(r,e)=>{try{const t=await client.fetch(r,e);return t===null?Promise.reject(new Error(404)):t}catch{return Promise.reject(new Error(404))}},mainSiteClient=sanityClient({projectId:"3knpqano",dataset:"production",apiVersion:"2021-10-05",useCdn:!1}),loadDataFromMainSite=async(r,e)=>{try{const t=await mainSiteClient.fetch(r,e);return t===null?Promise.reject(new Error(404)):t}catch{return Promise.reject(new Error(404))}},mainSitebuilder=imageUrlBuilder(mainSiteClient),urlForMainSite=r=>mainSitebuilder.image(r),globalSettings=writable({});let worldObject=writable({});const GRID_SIZE=32,buildWorld=()=>new Promise(async(r,e)=>{const t=await loadData('*[_type == "room"]{..., "bgImageUrl": backgroundImage.asset->url}'),n=await loadData('*[_type == "zone"]{..., "bgImageUrl": backgroundImage.asset->url}'),a=await loadData('*[_type == "exob"]'),o=await loadData('*[_type == "portal"]{..., targetArea->{...}, "bgImageUrl": backgroundImage.asset->url}'),s=await loadData('*[_type == "event"]'),c=await loadData('*[_id == "bulletin-board-settings"][0]');let u={};t.forEach(d=>u[d._id]=d);for(const[d,m]of Object.entries(u))u[d].objects=[],u[d].zones=[],u[d].portals=[],u[d].inlineStyles=parseStyleProperties(m);a.forEach(d=>{has_1(d,"parentArea._ref")&&u[d.parentArea._ref].objects.push(d)}),console.log("bulletinBoard",c),console.log("events",s),c&&(c.isBulletinBoard=!0,c.title="Bulletin Board",c.events=s,u[c.parentArea._ref].objects.push(c)),n.forEach(d=>{has_1(d,"parentArea._ref")&&u[d.parentArea._ref].zones.push(d)}),o.forEach(d=>{has_1(d,"parentArea._ref")&&u[d.parentArea._ref].portals.push(d)}),worldObject.set(u),r()}),loadAvatars=()=>new Promise(async(r,e)=>{const t=await loadData('*[_type == "avatar"]{..., "imageUrl": image.asset->url}');r(t)}),parseStyleProperties=r=>{let e="width: "+get_1(r,"dimensions.width",0)*GRID_SIZE+"px;",t="height: "+get_1(r,"dimensions.height",0)*GRID_SIZE+"px;",n="background-image: url("+r.bgImageUrl+");";return e+t+n};loadData('*[_id == "global-settings"]').then(r=>{globalSettings.set(r)}).catch(r=>{console.log(r)});const showGrid=writable(!1),showLabels=writable(!0),playSound=writable(!1),activeArticle=writable(!1),activeCity=writable({}),trayOpen=writable(!1),currentRoom=writable(!1),PRODUCTION=writable(!1),infoLogger=(...r)=>{get_store_value(PRODUCTION)||console.info(...r)},errorLogger=(...r)=>{console.error(...r)},STATE={ERROR:0,READY:1,LOADING:2,DISCONNECTED:3,ONBOARDING:4},UI={state:STATE.READY,errorMessage:!1};var Room_svelte_svelte_type_style_lang="";function create_if_block$n(r){return{c:noop$1,l:noop$1,m:noop$1,d:noop$1}}function create_fragment$J(r){let e,t,n,a,o,s,c,u,d=r[2]&&create_if_block$n();const m=r[8].default,l=create_slot(m,r,r[7],null);return{c(){e=element("div"),d&&d.c(),t=space(),l&&l.c(),n=space(),a=element("div"),o=text("CENTER VIEW (DEBUG)"),this.h()},l(f){e=claim_element(f,"DIV",{class:!0,id:!0,style:!0});var _=children(e);d&&d.l(_),t=claim_space(_),l&&l.l(_),_.forEach(detach),n=claim_space(f),a=claim_element(f,"DIV",{class:!0});var b=children(a);o=claim_text(b,"CENTER VIEW (DEBUG)"),b.forEach(detach),this.h()},h(){attr(e,"class","room svelte-ib3ibm"),attr(e,"id","room"),attr(e,"style",r[1]),attr(a,"class","center-view svelte-ib3ibm")},m(f,_){insert_hydration(f,e,_),d&&d.m(e,null),append_hydration(e,t),l&&l.m(e,null),r[9](e),insert_hydration(f,n,_),insert_hydration(f,a,_),append_hydration(a,o),s=!0,c||(u=listen$2(a,"click",r[3]),c=!0)},p(f,[_]){f[2]?d||(d=create_if_block$n(),d.c(),d.m(e,t)):d&&(d.d(1),d=null),l&&l.p&&(!s||_&128)&&update_slot_base(l,m,f,f[7],s?get_slot_changes(m,f[7],_,null):get_all_dirty_from_scope(f[7]),null),(!s||_&2)&&attr(e,"style",f[1])},i(f){s||(transition_in(l,f),s=!0)},o(f){transition_out(l,f),s=!1},d(f){f&&detach(e),d&&d.d(),l&&l.d(f),r[9](null),f&&detach(n),f&&detach(a),c=!1,u()}}}function instance$C(r,e,t){let n;component_subscribe(r,showGrid,_=>t(2,n=_));let{$$slots:a={},$$scope:o}=e;createEventDispatcher();let{room:s={}}=e,{x:c=0}=e,{y:u=0}=e,d={},m="";const l=(_,b)=>{t(1,m=`${s.inlineStyles} transform: translateX(-${_*GRID_SIZE}px) translateY(-${b*GRID_SIZE}px);`)};function f(_){binding_callbacks[_?"unshift":"push"](()=>{d=_,t(0,d)})}return r.$$set=_=>{"room"in _&&t(4,s=_.room),"x"in _&&t(5,c=_.x),"y"in _&&t(6,u=_.y),"$$scope"in _&&t(7,o=_.$$scope)},r.$$.update=()=>{r.$$.dirty&96&&l(c,u),r.$$.dirty&16&&t(1,m=`${s.inlineStyles} transform: translateX(-50%) translateY(-50%);`)},[d,m,n,l,s,c,u,o,a,f]}class Room extends SvelteComponent{constructor(e){super(),init(this,e,instance$C,create_fragment$J,safe_not_equal,{room:4,x:5,y:6})}}function cubicOut(r){const e=r-1;return e*e*e+1}function quartOut(r){return Math.pow(r-1,3)*(1-r)+1}function fade(r,{delay:e=0,duration:t=400,easing:n=identity$2}={}){const a=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*a}`}}function scale(r,{delay:e=0,duration:t=400,easing:n=cubicOut,start:a=0,opacity:o=0}={}){const s=getComputedStyle(r),c=+s.opacity,u=s.transform==="none"?"":s.transform,d=1-a,m=c*(1-o);return{delay:e,duration:t,easing:n,css:(l,f)=>`
			transform: ${u} scale(${1-d*f});
			opacity: ${c-m*f}
		`}}var colyseus={exports:{}};(function(r,e){(function(t,n){n(e)})(commonjsGlobal,function(t){ArrayBuffer.isView||(ArrayBuffer.isView=function(T){return T!==null&&typeof T=="object"&&T.buffer instanceof ArrayBuffer}),typeof globalThis=="undefined"&&typeof window!="undefined"&&(window.globalThis=window);/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n=function(T,x){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,M){$.__proto__=M}||function($,M){for(var H in M)Object.prototype.hasOwnProperty.call(M,H)&&($[H]=M[H])},n(T,x)};function a(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");n(T,x);function $(){this.constructor=T}T.prototype=x===null?Object.create(x):($.prototype=x.prototype,new $)}function o(T,x,$,M){function H(B){return B instanceof $?B:new $(function(he){he(B)})}return new($||($=Promise))(function(B,he){function fe(Te){try{ie(M.next(Te))}catch(je){he(je)}}function ae(Te){try{ie(M.throw(Te))}catch(je){he(je)}}function ie(Te){Te.done?B(Te.value):H(Te.value).then(fe,ae)}ie((M=M.apply(T,x||[])).next())})}function s(T,x){var $={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},M,H,B,he;return he={next:fe(0),throw:fe(1),return:fe(2)},typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function fe(ie){return function(Te){return ae([ie,Te])}}function ae(ie){if(M)throw new TypeError("Generator is already executing.");for(;$;)try{if(M=1,H&&(B=ie[0]&2?H.return:ie[0]?H.throw||((B=H.return)&&B.call(H),0):H.next)&&!(B=B.call(H,ie[1])).done)return B;switch(H=0,B&&(ie=[ie[0]&2,B.value]),ie[0]){case 0:case 1:B=ie;break;case 4:return $.label++,{value:ie[1],done:!1};case 5:$.label++,H=ie[1],ie=[0];continue;case 7:ie=$.ops.pop(),$.trys.pop();continue;default:if(B=$.trys,!(B=B.length>0&&B[B.length-1])&&(ie[0]===6||ie[0]===2)){$=0;continue}if(ie[0]===3&&(!B||ie[1]>B[0]&&ie[1]<B[3])){$.label=ie[1];break}if(ie[0]===6&&$.label<B[1]){$.label=B[1],B=ie;break}if(B&&$.label<B[2]){$.label=B[2],$.ops.push(ie);break}B[2]&&$.ops.pop(),$.trys.pop();continue}ie=x.call(T,$)}catch(Te){ie=[6,Te],H=0}finally{M=B=0}if(ie[0]&5)throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}}function c(T,x){x.headers=T.headers||{},x.statusMessage=T.statusText,x.statusCode=T.status,x.data=T.response}function u(T,x,$){return new Promise(function(M,H){$=$||{};var B=new XMLHttpRequest,he,fe,ae,ie=$.body,Te=$.headers||{};$.timeout&&(B.timeout=$.timeout),B.ontimeout=B.onerror=function(je){je.timeout=je.type=="timeout",H(je)},B.open(T,x.href||x),B.onload=function(){for(ae=B.getAllResponseHeaders().trim().split(/[\r\n]+/),c(B,B);fe=ae.shift();)fe=fe.split(": "),B.headers[fe.shift().toLowerCase()]=fe.join(": ");if(fe=B.headers["content-type"],fe&&!!~fe.indexOf("application/json"))try{B.data=JSON.parse(B.data,$.reviver)}catch(je){return c(B,je),H(je)}(B.status>=400?H:M)(B)},typeof FormData<"u"&&ie instanceof FormData||ie&&typeof ie=="object"&&(Te["content-type"]="application/json",ie=JSON.stringify(ie)),B.withCredentials=!!$.withCredentials;for(he in Te)B.setRequestHeader(he,Te[he]);B.send(ie)})}var d=u.bind(u,"GET"),m=u.bind(u,"POST"),l=u.bind(u,"PATCH"),f=u.bind(u,"DELETE"),_=u.bind(u,"PUT"),b=f,S=d,E=l,y=m,k=_,I=u,O={del:b,get:S,patch:E,post:y,put:k,send:I},D=Object.freeze(Object.assign(Object.create(null),O,{default:O,del:b,get:S,patch:E,post:y,put:k,send:I})),R=function(T){a(x,T);function x($,M){var H=T.call(this,M)||this;return H.name="ServerError",H.code=$,H}return x}(Error);function P(T,x){if(this._offset=x,T instanceof ArrayBuffer)this._buffer=T,this._view=new DataView(this._buffer);else if(ArrayBuffer.isView(T))this._buffer=T.buffer,this._view=new DataView(this._buffer,T.byteOffset,T.byteLength);else throw new Error("Invalid argument")}function W(T,x,$){for(var M="",H=0,B=x,he=x+$;B<he;B++){var fe=T.getUint8(B);if((fe&128)===0){M+=String.fromCharCode(fe);continue}if((fe&224)===192){M+=String.fromCharCode((fe&31)<<6|T.getUint8(++B)&63);continue}if((fe&240)===224){M+=String.fromCharCode((fe&15)<<12|(T.getUint8(++B)&63)<<6|(T.getUint8(++B)&63)<<0);continue}if((fe&248)===240){H=(fe&7)<<18|(T.getUint8(++B)&63)<<12|(T.getUint8(++B)&63)<<6|(T.getUint8(++B)&63)<<0,H>=65536?(H-=65536,M+=String.fromCharCode((H>>>10)+55296,(H&1023)+56320)):M+=String.fromCharCode(H);continue}throw new Error("Invalid byte "+fe.toString(16))}return M}P.prototype._array=function(T){for(var x=new Array(T),$=0;$<T;$++)x[$]=this._parse();return x},P.prototype._map=function(T){for(var x="",$={},M=0;M<T;M++)x=this._parse(),$[x]=this._parse();return $},P.prototype._str=function(T){var x=W(this._view,this._offset,T);return this._offset+=T,x},P.prototype._bin=function(T){var x=this._buffer.slice(this._offset,this._offset+T);return this._offset+=T,x},P.prototype._parse=function(){var T=this._view.getUint8(this._offset++),x,$=0,M=0,H=0,B=0;if(T<192)return T<128?T:T<144?this._map(T&15):T<160?this._array(T&15):this._str(T&31);if(T>223)return(255-T+1)*-1;switch(T){case 192:return null;case 194:return!1;case 195:return!0;case 196:return $=this._view.getUint8(this._offset),this._offset+=1,this._bin($);case 197:return $=this._view.getUint16(this._offset),this._offset+=2,this._bin($);case 198:return $=this._view.getUint32(this._offset),this._offset+=4,this._bin($);case 199:return $=this._view.getUint8(this._offset),M=this._view.getInt8(this._offset+1),this._offset+=2,[M,this._bin($)];case 200:return $=this._view.getUint16(this._offset),M=this._view.getInt8(this._offset+2),this._offset+=3,[M,this._bin($)];case 201:return $=this._view.getUint32(this._offset),M=this._view.getInt8(this._offset+4),this._offset+=5,[M,this._bin($)];case 202:return x=this._view.getFloat32(this._offset),this._offset+=4,x;case 203:return x=this._view.getFloat64(this._offset),this._offset+=8,x;case 204:return x=this._view.getUint8(this._offset),this._offset+=1,x;case 205:return x=this._view.getUint16(this._offset),this._offset+=2,x;case 206:return x=this._view.getUint32(this._offset),this._offset+=4,x;case 207:return H=this._view.getUint32(this._offset)*Math.pow(2,32),B=this._view.getUint32(this._offset+4),this._offset+=8,H+B;case 208:return x=this._view.getInt8(this._offset),this._offset+=1,x;case 209:return x=this._view.getInt16(this._offset),this._offset+=2,x;case 210:return x=this._view.getInt32(this._offset),this._offset+=4,x;case 211:return H=this._view.getInt32(this._offset)*Math.pow(2,32),B=this._view.getUint32(this._offset+4),this._offset+=8,H+B;case 212:if(M=this._view.getInt8(this._offset),this._offset+=1,M===0){this._offset+=1;return}return[M,this._bin(1)];case 213:return M=this._view.getInt8(this._offset),this._offset+=1,[M,this._bin(2)];case 214:return M=this._view.getInt8(this._offset),this._offset+=1,[M,this._bin(4)];case 215:return M=this._view.getInt8(this._offset),this._offset+=1,M===0?(H=this._view.getInt32(this._offset)*Math.pow(2,32),B=this._view.getUint32(this._offset+4),this._offset+=8,new Date(H+B)):[M,this._bin(8)];case 216:return M=this._view.getInt8(this._offset),this._offset+=1,[M,this._bin(16)];case 217:return $=this._view.getUint8(this._offset),this._offset+=1,this._str($);case 218:return $=this._view.getUint16(this._offset),this._offset+=2,this._str($);case 219:return $=this._view.getUint32(this._offset),this._offset+=4,this._str($);case 220:return $=this._view.getUint16(this._offset),this._offset+=2,this._array($);case 221:return $=this._view.getUint32(this._offset),this._offset+=4,this._array($);case 222:return $=this._view.getUint16(this._offset),this._offset+=2,this._map($);case 223:return $=this._view.getUint32(this._offset),this._offset+=4,this._map($)}throw new Error("Could not parse")};function V(T,x){x===void 0&&(x=0);var $=new P(T,x),M=$._parse();if($._offset!==T.byteLength)throw new Error(T.byteLength-$._offset+" trailing bytes");return M}function L(T,x,$){for(var M=0,H=0,B=$.length;H<B;H++)M=$.charCodeAt(H),M<128?T.setUint8(x++,M):M<2048?(T.setUint8(x++,192|M>>6),T.setUint8(x++,128|M&63)):M<55296||M>=57344?(T.setUint8(x++,224|M>>12),T.setUint8(x++,128|M>>6&63),T.setUint8(x++,128|M&63)):(H++,M=65536+((M&1023)<<10|$.charCodeAt(H)&1023),T.setUint8(x++,240|M>>18),T.setUint8(x++,128|M>>12&63),T.setUint8(x++,128|M>>6&63),T.setUint8(x++,128|M&63))}function j(T){for(var x=0,$=0,M=0,H=T.length;M<H;M++)x=T.charCodeAt(M),x<128?$+=1:x<2048?$+=2:x<55296||x>=57344?$+=3:(M++,$+=4);return $}function z(T,x,$){var M=typeof $,H=0,B=0,he=0,fe=0,ae=0,ie=0;if(M==="string"){if(ae=j($),ae<32)T.push(ae|160),ie=1;else if(ae<256)T.push(217,ae),ie=2;else if(ae<65536)T.push(218,ae>>8,ae),ie=3;else if(ae<4294967296)T.push(219,ae>>24,ae>>16,ae>>8,ae),ie=5;else throw new Error("String too long");return x.push({_str:$,_length:ae,_offset:T.length}),ie+ae}if(M==="number")return Math.floor($)!==$||!isFinite($)?(T.push(203),x.push({_float:$,_length:8,_offset:T.length}),9):$>=0?$<128?(T.push($),1):$<256?(T.push(204,$),2):$<65536?(T.push(205,$>>8,$),3):$<4294967296?(T.push(206,$>>24,$>>16,$>>8,$),5):(he=$/Math.pow(2,32)>>0,fe=$>>>0,T.push(207,he>>24,he>>16,he>>8,he,fe>>24,fe>>16,fe>>8,fe),9):$>=-32?(T.push($),1):$>=-128?(T.push(208,$),2):$>=-32768?(T.push(209,$>>8,$),3):$>=-2147483648?(T.push(210,$>>24,$>>16,$>>8,$),5):(he=Math.floor($/Math.pow(2,32)),fe=$>>>0,T.push(211,he>>24,he>>16,he>>8,he,fe>>24,fe>>16,fe>>8,fe),9);if(M==="object"){if($===null)return T.push(192),1;if(Array.isArray($)){if(ae=$.length,ae<16)T.push(ae|144),ie=1;else if(ae<65536)T.push(220,ae>>8,ae),ie=3;else if(ae<4294967296)T.push(221,ae>>24,ae>>16,ae>>8,ae),ie=5;else throw new Error("Array too large");for(H=0;H<ae;H++)ie+=z(T,x,$[H]);return ie}if($ instanceof Date){var Te=$.getTime();return he=Math.floor(Te/Math.pow(2,32)),fe=Te>>>0,T.push(215,0,he>>24,he>>16,he>>8,he,fe>>24,fe>>16,fe>>8,fe),10}if($ instanceof ArrayBuffer){if(ae=$.byteLength,ae<256)T.push(196,ae),ie=2;else if(ae<65536)T.push(197,ae>>8,ae),ie=3;else if(ae<4294967296)T.push(198,ae>>24,ae>>16,ae>>8,ae),ie=5;else throw new Error("Buffer too large");return x.push({_bin:$,_length:ae,_offset:T.length}),ie+ae}if(typeof $.toJSON=="function")return z(T,x,$.toJSON());var je=[],Ne="",qe=Object.keys($);for(H=0,B=qe.length;H<B;H++)Ne=qe[H],typeof $[Ne]!="function"&&je.push(Ne);if(ae=je.length,ae<16)T.push(ae|128),ie=1;else if(ae<65536)T.push(222,ae>>8,ae),ie=3;else if(ae<4294967296)T.push(223,ae>>24,ae>>16,ae>>8,ae),ie=5;else throw new Error("Object too large");for(H=0;H<ae;H++)Ne=je[H],ie+=z(T,x,Ne),ie+=z(T,x,$[Ne]);return ie}if(M==="boolean")return T.push($?195:194),1;if(M==="undefined")return T.push(212,0,0),3;throw new Error("Could not encode")}function q(T){var x=[],$=[],M=z(x,$,T),H=new ArrayBuffer(M),B=new DataView(H),he=0,fe=0,ae=-1;$.length>0&&(ae=$[0]._offset);for(var ie,Te=0,je=0,Ne=0,qe=x.length;Ne<qe;Ne++)if(B.setUint8(fe+Ne,x[Ne]),Ne+1===ae){if(ie=$[he],Te=ie._length,je=fe+ae,ie._bin)for(var lt=new Uint8Array(ie._bin),Ue=0;Ue<Te;Ue++)B.setUint8(je+Ue,lt[Ue]);else ie._str?L(B,je,ie._str):ie._float!==void 0&&B.setFloat64(je,ie._float);he++,fe+=Te,$[he]&&(ae=$[he]._offset)}return H}var Q=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},F=globalThis.WebSocket||Q,Y=function(){function T(x){this.events=x}return T.prototype.send=function(x){x instanceof ArrayBuffer?this.ws.send(x):Array.isArray(x)&&this.ws.send(new Uint8Array(x).buffer)},T.prototype.connect=function(x){this.ws=new F(x,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},T.prototype.close=function(x,$){this.ws.close(x,$)},T}(),ee=function(){function T(){this.events={},this.transport=new Y(this.events)}return T.prototype.send=function(x){this.transport.send(x)},T.prototype.connect=function(x){this.transport.connect(x)},T.prototype.close=function(x,$){this.transport.close(x,$)},T}(),ce={};function me(T,x){ce[T]=x}function ke(T){var x=ce[T];if(!x)throw new Error("missing serializer: "+T);return x}t.Protocol=void 0,function(T){T[T.HANDSHAKE=9]="HANDSHAKE",T[T.JOIN_ROOM=10]="JOIN_ROOM",T[T.ERROR=11]="ERROR",T[T.LEAVE_ROOM=12]="LEAVE_ROOM",T[T.ROOM_DATA=13]="ROOM_DATA",T[T.ROOM_STATE=14]="ROOM_STATE",T[T.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",T[T.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA"}(t.Protocol||(t.Protocol={})),t.ErrorCode=void 0,function(T){T[T.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",T[T.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",T[T.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",T[T.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",T[T.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",T[T.AUTH_FAILED=4215]="AUTH_FAILED",T[T.APPLICATION_ERROR=4216]="APPLICATION_ERROR"}(t.ErrorCode||(t.ErrorCode={}));function Ee(T,x){for(var $=T[x++],M="",H=0,B=x,he=x+$;B<he;B++){var fe=T[B];if((fe&128)===0){M+=String.fromCharCode(fe);continue}if((fe&224)===192){M+=String.fromCharCode((fe&31)<<6|T[++B]&63);continue}if((fe&240)===224){M+=String.fromCharCode((fe&15)<<12|(T[++B]&63)<<6|(T[++B]&63)<<0);continue}if((fe&248)===240){H=(fe&7)<<18|(T[++B]&63)<<12|(T[++B]&63)<<6|(T[++B]&63)<<0,H>=65536?(H-=65536,M+=String.fromCharCode((H>>>10)+55296,(H&1023)+56320)):M+=String.fromCharCode(H);continue}throw new Error("Invalid byte "+fe.toString(16))}return M}function C(T){T===void 0&&(T="");for(var x=0,$=0,M=0,H=T.length;M<H;M++)x=T.charCodeAt(M),x<128?$+=1:x<2048?$+=2:x<55296||x>=57344?$+=3:(M++,$+=4);return $+1}let U=()=>({events:{},emit(T,...x){(this.events[T]||[]).forEach($=>$(...x))},on(T,x){return(this.events[T]=this.events[T]||[]).push(x),()=>this.events[T]=(this.events[T]||[]).filter($=>$!==x)}});var Z=function(){function T(){this.handlers=[]}return T.prototype.register=function(x,$){return this.handlers.push(x),this},T.prototype.invoke=function(){for(var x=this,$=[],M=0;M<arguments.length;M++)$[M]=arguments[M];this.handlers.forEach(function(H){return H.apply(x,$)})},T.prototype.invokeAsync=function(){for(var x=this,$=[],M=0;M<arguments.length;M++)$[M]=arguments[M];return Promise.all(this.handlers.map(function(H){return H.apply(x,$)}))},T.prototype.remove=function(x){var $=this.handlers.indexOf(x);this.handlers[$]=this.handlers[this.handlers.length-1],this.handlers.pop()},T.prototype.clear=function(){this.handlers=[]},T}();function te(){var T=new Z;function x($){return T.register($,this===null)}return x.once=function($){var M=function(){for(var H=[],B=0;B<arguments.length;B++)H[B]=arguments[B];$.apply(this,H),T.remove(M)};T.register(M)},x.remove=function($){return T.remove($)},x.invoke=function(){for(var $=[],M=0;M<arguments.length;M++)$[M]=arguments[M];return T.invoke.apply(T,$)},x.invokeAsync=function(){for(var $=[],M=0;M<arguments.length;M++)$[M]=arguments[M];return T.invokeAsync.apply(T,$)},x.clear=function(){return T.clear()},x}var J=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{};function X(T){var x={exports:{}};return T(x,x.exports),x.exports}var re=X(function(T,x){(function($,M){M(x)})(J,function($){/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */var M=function(v,p){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var N in A)Object.prototype.hasOwnProperty.call(A,N)&&(g[N]=A[N])},M(v,p)};function H(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");M(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}function B(v,p,g,A){var N=arguments.length,ne=N<3?p:A===null?A=Object.getOwnPropertyDescriptor(p,g):A,we;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ne=Reflect.decorate(v,p,g,A);else for(var pe=v.length-1;pe>=0;pe--)(we=v[pe])&&(ne=(N<3?we(ne):N>3?we(p,g,ne):we(p,g))||ne);return N>3&&ne&&Object.defineProperty(p,g,ne),ne}function he(v,p){for(var g=0,A=p.length,N=v.length;g<A;g++,N++)v[N]=p[g];return v}var fe=255,ae=213;$.OPERATION=void 0,function(v){v[v.ADD=128]="ADD",v[v.REPLACE=0]="REPLACE",v[v.DELETE=64]="DELETE",v[v.DELETE_AND_ADD=192]="DELETE_AND_ADD",v[v.TOUCH=1]="TOUCH",v[v.CLEAR=10]="CLEAR"}($.OPERATION||($.OPERATION={}));var ie=function(){function v(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return v.prototype.getNextUniqueId=function(){return this.nextUniqueId++},v.prototype.addRef=function(p,g,A){A===void 0&&(A=!0),this.refs.set(p,g),A&&(this.refCounts[p]=(this.refCounts[p]||0)+1)},v.prototype.removeRef=function(p){this.refCounts[p]=this.refCounts[p]-1,this.deletedRefs.add(p)},v.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},v.prototype.garbageCollectDeletedRefs=function(){var p=this;this.deletedRefs.forEach(function(g){if(p.refCounts[g]<=0){var A=p.refs.get(g);if(A instanceof Ze)for(var N in A._definition.schema)typeof A._definition.schema[N]!="string"&&A[N]&&A[N].$changes&&p.removeRef(A[N].$changes.refId);else{var ne=A.$changes.parent._definition,we=ne.schema[ne.fieldsByIndex[A.$changes.parentIndex]];typeof Object.values(we)[0]=="function"&&Array.from(A.values()).forEach(function(pe){return p.removeRef(pe.$changes.refId)})}p.refs.delete(g),delete p.refCounts[g]}}),this.deletedRefs.clear()},v}(),Te=function(){function v(p,g,A){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=p,this.setParent(g,A)}return v.prototype.setParent=function(p,g,A){var N=this;if(this.indexes||(this.indexes=this.ref instanceof Ze?this.ref._definition.indexes:{}),this.parent=p,this.parentIndex=A,!!g)if(this.root=g,this.ref instanceof Ze){var ne=this.ref._definition;for(var we in ne.schema){var pe=this.ref[we];if(pe&&pe.$changes){var Re=ne.indexes[we];pe.$changes.setParent(this.ref,g,Re)}}}else typeof this.ref=="object"&&this.ref.forEach(function(xe,ve){if(xe instanceof Ze){var ye=xe.$changes,He=N.ref.$changes.indexes[ve];ye.setParent(N.ref,N.root,He)}})},v.prototype.operation=function(p){this.changes.set(--this.currentCustomOperation,p)},v.prototype.change=function(p,g){g===void 0&&(g=$.OPERATION.ADD);var A=typeof p=="number"?p:this.indexes[p];this.assertValidIndex(A,p);var N=this.changes.get(A);(!N||N.op===$.OPERATION.DELETE||N.op===$.OPERATION.TOUCH)&&this.changes.set(A,{op:N&&N.op===$.OPERATION.DELETE?$.OPERATION.DELETE_AND_ADD:g,index:A}),this.allChanges.add(A),this.changed=!0,this.touchParents()},v.prototype.touch=function(p){var g=typeof p=="number"?p:this.indexes[p];this.assertValidIndex(g,p),this.changes.has(g)||this.changes.set(g,{op:$.OPERATION.TOUCH,index:g}),this.allChanges.add(g),this.touchParents()},v.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},v.prototype.getType=function(p){if(this.ref._definition){var g=this.ref._definition;return g.schema[g.fieldsByIndex[p]]}else{var g=this.parent._definition,A=g.schema[g.fieldsByIndex[this.parentIndex]];return Object.values(A)[0]}},v.prototype.getChildrenFilter=function(){var p=this.parent._definition.childFilters;return p&&p[this.parentIndex]},v.prototype.getValue=function(p){return this.ref.getByIndex(p)},v.prototype.delete=function(p){var g=typeof p=="number"?p:this.indexes[p];if(g===void 0){console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+p+" ("+g+")");return}var A=this.getValue(g);this.changes.set(g,{op:$.OPERATION.DELETE,index:g}),this.allChanges.delete(g),delete this.caches[g],A&&A.$changes&&(A.$changes.parent=void 0),this.changed=!0,this.touchParents()},v.prototype.discard=function(p,g){var A=this;p===void 0&&(p=!1),g===void 0&&(g=!1),this.ref instanceof Ze||this.changes.forEach(function(N){if(N.op===$.OPERATION.DELETE){var ne=A.ref.getIndex(N.index);delete A.indexes[ne]}}),this.changes.clear(),this.changed=p,g&&this.allChanges.clear(),this.currentCustomOperation=0},v.prototype.discardAll=function(){var p=this;this.changes.forEach(function(g){var A=p.getValue(g.index);A&&A.$changes&&A.$changes.discardAll()}),this.discard()},v.prototype.cache=function(p,g){this.caches[p]=g},v.prototype.clone=function(){return new v(this.ref,this.parent,this.root)},v.prototype.ensureRefId=function(){this.refId===void 0&&(this.refId=this.root.getNextUniqueId())},v.prototype.assertValidIndex=function(p,g){if(p===void 0)throw new Error('ChangeTree: missing index for field "'+g+'"')},v}(),je=function(v,p){var g=v.toString(),A=p.toString();return g<A?-1:g>A?1:0};function Ne(v){return v.$proxy=!0,v=new Proxy(v,{get:function(p,g){return typeof g!="symbol"&&!isNaN(g)?p.at(g):p[g]},set:function(p,g,A){if(typeof g!="symbol"&&!isNaN(g)){var N=Array.from(p.$items.keys()),ne=parseInt(N[g]||g);A==null?p.deleteAt(ne):p.setAt(ne,A)}else p[g]=A;return!0},deleteProperty:function(p,g){return typeof g=="number"?p.deleteAt(g):delete p[g],!0}}),v}var qe=function(){function v(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];this.$changes=new Te(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,p)}return v.is=function(p){return Array.isArray(p)||p.array!==void 0},Object.defineProperty(v.prototype,"length",{get:function(){return this.$items.size},set:function(p){p===0?this.clear():this.splice(p,this.length-p)},enumerable:!1,configurable:!0}),v.prototype.push=function(){for(var p=this,g=[],A=0;A<arguments.length;A++)g[A]=arguments[A];var N;return g.forEach(function(ne){N=p.$refId++,p.setAt(N,ne)}),N},v.prototype.pop=function(){var p=Array.from(this.$indexes.values()).pop();if(p!==void 0){this.$changes.delete(p),this.$indexes.delete(p);var g=this.$items.get(p);return this.$items.delete(p),g}},v.prototype.at=function(p){var g=Array.from(this.$items.keys())[p];return this.$items.get(g)},v.prototype.setAt=function(p,g){var A,N;g.$changes!==void 0&&g.$changes.setParent(this,this.$changes.root,p);var ne=(N=(A=this.$changes.indexes[p])===null||A===void 0?void 0:A.op)!==null&&N!==void 0?N:$.OPERATION.ADD;this.$changes.indexes[p]=p,this.$indexes.set(p,p),this.$items.set(p,g),this.$changes.change(p,ne)},v.prototype.deleteAt=function(p){var g=Array.from(this.$items.keys())[p];return g===void 0?!1:this.$deleteAt(g)},v.prototype.$deleteAt=function(p){return this.$changes.delete(p),this.$indexes.delete(p),this.$items.delete(p)},v.prototype.clear=function(p){var g=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),p&&typeof this.$changes.getType()!="string"&&this.$items.forEach(function(A){g.$changes.root.removeRef(A.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:$.OPERATION.CLEAR}),this.$changes.touchParents()},v.prototype.concat=function(){for(var p,g=[],A=0;A<arguments.length;A++)g[A]=arguments[A];return new(v.bind.apply(v,he([void 0],(p=Array.from(this.$items.values())).concat.apply(p,g))))},v.prototype.join=function(p){return Array.from(this.$items.values()).join(p)},v.prototype.reverse=function(){var p=this,g=Array.from(this.$items.keys()),A=Array.from(this.$items.values()).reverse();return A.forEach(function(N,ne){p.setAt(g[ne],N)}),this},v.prototype.shift=function(){var p=Array.from(this.$items.keys()),g=p.shift();if(g!==void 0){var A=this.$items.get(g);return this.$deleteAt(g),A}},v.prototype.slice=function(p,g){return new(v.bind.apply(v,he([void 0],Array.from(this.$items.values()).slice(p,g))))},v.prototype.sort=function(p){var g=this;p===void 0&&(p=je);var A=Array.from(this.$items.keys()),N=Array.from(this.$items.values()).sort(p);return N.forEach(function(ne,we){g.setAt(A[we],ne)}),this},v.prototype.splice=function(p,g){g===void 0&&(g=this.length-p);for(var A=[],N=2;N<arguments.length;N++)A[N-2]=arguments[N];for(var ne=Array.from(this.$items.keys()),we=[],pe=p;pe<p+g;pe++)we.push(this.$items.get(ne[pe])),this.$deleteAt(ne[pe]);return we},v.prototype.unshift=function(){for(var p=this,g=[],A=0;A<arguments.length;A++)g[A]=arguments[A];var N=this.length,ne=g.length,we=Array.from(this.$items.values());return g.forEach(function(pe,Re){p.setAt(Re,pe)}),we.forEach(function(pe,Re){p.setAt(ne+Re,pe)}),N+ne},v.prototype.indexOf=function(p,g){return Array.from(this.$items.values()).indexOf(p,g)},v.prototype.lastIndexOf=function(p,g){return g===void 0&&(g=this.length-1),Array.from(this.$items.values()).lastIndexOf(p,g)},v.prototype.every=function(p,g){return Array.from(this.$items.values()).every(p,g)},v.prototype.some=function(p,g){return Array.from(this.$items.values()).some(p,g)},v.prototype.forEach=function(p,g){Array.from(this.$items.values()).forEach(p,g)},v.prototype.map=function(p,g){return Array.from(this.$items.values()).map(p,g)},v.prototype.filter=function(p,g){return Array.from(this.$items.values()).filter(p,g)},v.prototype.reduce=function(p,g){return Array.from(this.$items.values()).reduce(p,g)},v.prototype.reduceRight=function(p,g){return Array.from(this.$items.values()).reduceRight(p,g)},v.prototype.find=function(p,g){return Array.from(this.$items.values()).find(p,g)},v.prototype.findIndex=function(p,g){return Array.from(this.$items.values()).findIndex(p,g)},v.prototype.fill=function(p,g,A){throw new Error("ArraySchema#fill() not implemented")},v.prototype.copyWithin=function(p,g,A){throw new Error("ArraySchema#copyWithin() not implemented")},v.prototype.toString=function(){return this.$items.toString()},v.prototype.toLocaleString=function(){return this.$items.toLocaleString()},v.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},v.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},v.prototype.entries=function(){return this.$items.entries()},v.prototype.keys=function(){return this.$items.keys()},v.prototype.values=function(){return this.$items.values()},v.prototype.includes=function(p,g){return Array.from(this.$items.values()).includes(p,g)},v.prototype.flatMap=function(p,g){throw new Error("ArraySchema#flatMap() is not supported.")},v.prototype.flat=function(p){throw new Error("ArraySchema#flat() is not supported.")},v.prototype.setIndex=function(p,g){this.$indexes.set(p,g)},v.prototype.getIndex=function(p){return this.$indexes.get(p)},v.prototype.getByIndex=function(p){return this.$items.get(this.$indexes.get(p))},v.prototype.deleteByIndex=function(p){var g=this.$indexes.get(p);this.$items.delete(g),this.$indexes.delete(p)},v.prototype.toArray=function(){return Array.from(this.$items.values())},v.prototype.toJSON=function(){return this.toArray().map(function(p){return typeof p.toJSON=="function"?p.toJSON():p})},v.prototype.clone=function(p){var g;return p?g=new(v.bind.apply(v,he([void 0],Array.from(this.$items.values())))):g=new(v.bind.apply(v,he([void 0],this.map(function(A){return A.$changes?A.clone():A})))),g},v.prototype.triggerAll=function(){Ze.prototype.triggerAll.apply(this)},v}();function lt(v){return v.$proxy=!0,v=new Proxy(v,{get:function(p,g){return typeof g!="symbol"&&typeof p[g]=="undefined"?p.get(g):p[g]},set:function(p,g,A){return typeof g!="symbol"&&g.indexOf("$")===-1&&g!=="onAdd"&&g!=="onRemove"&&g!=="onChange"?p.set(g,A):p[g]=A,!0},deleteProperty:function(p,g){return p.delete(g),!0}}),v}var Ue=function(){function v(p){var g=this;if(this.$changes=new Te(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,p)if(p instanceof Map)p.forEach(function(N,ne){return g.set(ne,N)});else for(var A in p)this.set(A,p[A])}return v.is=function(p){return p.map!==void 0},v.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(v.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),v.prototype.set=function(p,g){if(g==null)throw new Error("MapSchema#set('"+p+"', "+g+"): trying to set "+g+" value on '"+p+"'.");var A=typeof this.$changes.indexes[p]!="undefined",N=A?this.$changes.indexes[p]:this.$refId++,ne=A?$.OPERATION.REPLACE:$.OPERATION.ADD,we=g.$changes!==void 0;return we&&g.$changes.setParent(this,this.$changes.root,N),A?we&&this.$items.get(p)!==g&&(ne=$.OPERATION.ADD):(this.$changes.indexes[p]=N,this.$indexes.set(N,p)),this.$items.set(p,g),this.$changes.change(p,ne),this},v.prototype.get=function(p){return this.$items.get(p)},v.prototype.delete=function(p){return this.$changes.delete(p),this.$items.delete(p)},v.prototype.clear=function(p){var g=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),p&&typeof this.$changes.getType()!="string"&&this.$items.forEach(function(A){g.$changes.root.removeRef(A.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:$.OPERATION.CLEAR}),this.$changes.touchParents()},v.prototype.has=function(p){return this.$items.has(p)},v.prototype.forEach=function(p){this.$items.forEach(p)},v.prototype.entries=function(){return this.$items.entries()},v.prototype.keys=function(){return this.$items.keys()},v.prototype.values=function(){return this.$items.values()},Object.defineProperty(v.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),v.prototype.setIndex=function(p,g){this.$indexes.set(p,g)},v.prototype.getIndex=function(p){return this.$indexes.get(p)},v.prototype.getByIndex=function(p){return this.$items.get(this.$indexes.get(p))},v.prototype.deleteByIndex=function(p){var g=this.$indexes.get(p);this.$items.delete(g),this.$indexes.delete(p)},v.prototype.toJSON=function(){var p={};return this.forEach(function(g,A){p[A]=typeof g.toJSON=="function"?g.toJSON():g}),p},v.prototype.clone=function(p){var g;return p?g=Object.assign(new v,this):(g=new v,this.forEach(function(A,N){A.$changes?g.set(N,A.clone()):g.set(N,A)})),g},v.prototype.triggerAll=function(){Ze.prototype.triggerAll.apply(this)},v}(),vt={};function it(v,p){vt[v]=p}function gt(v){return vt[v]}var wt=function(){function v(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return v.create=function(p){var g=new v;return g.schema=Object.assign({},p&&p.schema||{}),g.indexes=Object.assign({},p&&p.indexes||{}),g.fieldsByIndex=Object.assign({},p&&p.fieldsByIndex||{}),g.descriptors=Object.assign({},p&&p.descriptors||{}),g.deprecated=Object.assign({},p&&p.deprecated||{}),g},v.prototype.addField=function(p,g){var A=this.getNextFieldIndex();this.fieldsByIndex[A]=p,this.indexes[p]=A,this.schema[p]=Array.isArray(g)?{array:g[0]}:g},v.prototype.addFilter=function(p,g){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[p]]=g,this.indexesWithFilters.push(this.indexes[p]),!0},v.prototype.addChildrenFilter=function(p,g){var A=this.indexes[p],N=this.schema[p];if(gt(Object.keys(N)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[A]=g,!0;console.warn("@filterChildren: field '"+p+"' can't have children. Ignoring filter.")},v.prototype.getChildrenFilter=function(p){return this.childFilters&&this.childFilters[this.indexes[p]]},v.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},v}();function Tt(v){return v._context&&v._context.useFilters}var ut=function(){function v(){this.types={},this.schemas=new Map,this.useFilters=!1}return v.prototype.has=function(p){return this.schemas.has(p)},v.prototype.get=function(p){return this.types[p]},v.prototype.add=function(p,g){g===void 0&&(g=this.schemas.size),p._definition=wt.create(p._definition),p._typeid=g,this.types[g]=p,this.schemas.set(p,g)},v.create=function(p){return p===void 0&&(p=new v),function(g){return Fe(g,p)}},v}(),ft=new ut;function Fe(v,p){return p===void 0&&(p=ft),function(g,A){var N=g.constructor;N._context=p,p.has(N)||p.add(N);var ne=N._definition;if(ne.addField(A,v),ne.descriptors[A]){if(ne.deprecated[A])return;try{throw new Error("@colyseus/schema: Duplicate '"+A+"' definition on '"+N.name+`'.
Check @type() annotation`)}catch(ye){var we=ye.stack.split(`
`)[4].trim();throw new Error(ye.message+" "+we)}}var pe=qe.is(v),Re=!pe&&Ue.is(v);if(typeof v!="string"&&!Ze.is(v)){var xe=Object.values(v)[0];typeof xe!="string"&&!p.has(xe)&&p.add(xe)}var ve="_"+A;ne.descriptors[ve]={enumerable:!1,configurable:!1,writable:!0},ne.descriptors[A]={get:function(){return this[ve]},set:function(ye){ye!==this[ve]&&(ye!=null?(pe&&!(ye instanceof qe)&&(ye=new(qe.bind.apply(qe,he([void 0],ye)))),Re&&!(ye instanceof Ue)&&(ye=new Ue(ye)),ye.$proxy===void 0&&(Re?ye=lt(ye):pe&&(ye=Ne(ye))),this.$changes.change(A),ye.$changes&&ye.$changes.setParent(this,this.$changes.root,this._definition.indexes[A])):this.$changes.delete(A),this[ve]=ye)},enumerable:!0,configurable:!0}}}function ze(v){return function(p,g){var A=p.constructor,N=A._definition;N.addFilter(g,v)&&(A._context.useFilters=!0)}}function et(v){return function(p,g){var A=p.constructor,N=A._definition;N.addChildrenFilter(g,v)&&(A._context.useFilters=!0)}}function tt(v,p){return v===void 0&&(v=!0),function(g,A){var N=g.constructor,ne=N._definition;ne.deprecated[A]=!0,v&&(ne.descriptors[A]={get:function(){throw new Error(A+" is deprecated.")},set:function(we){},enumerable:!1,configurable:!0})}}function Je(v,p,g){g===void 0&&(g=v._context||ft);for(var A in p)Fe(p[A],g)(v.prototype,A);return v}function Ge(v){for(var p=0,g=0,A=0,N=v.length;A<N;A++)p=v.charCodeAt(A),p<128?g+=1:p<2048?g+=2:p<55296||p>=57344?g+=3:(A++,g+=4);return g}function at(v,p,g){for(var A=0,N=0,ne=g.length;N<ne;N++)A=g.charCodeAt(N),A<128?v[p++]=A:A<2048?(v[p++]=192|A>>6,v[p++]=128|A&63):A<55296||A>=57344?(v[p++]=224|A>>12,v[p++]=128|A>>6&63,v[p++]=128|A&63):(N++,A=65536+((A&1023)<<10|g.charCodeAt(N)&1023),v[p++]=240|A>>18,v[p++]=128|A>>12&63,v[p++]=128|A>>6&63,v[p++]=128|A&63)}function ot(v,p){v.push(p&255)}function Ve(v,p){v.push(p&255)}function zt(v,p){v.push(p&255),v.push(p>>8&255)}function Pt(v,p){v.push(p&255),v.push(p>>8&255)}function $t(v,p){v.push(p&255),v.push(p>>8&255),v.push(p>>16&255),v.push(p>>24&255)}function dt(v,p){var g=p>>24,A=p>>16,N=p>>8,ne=p;v.push(ne&255),v.push(N&255),v.push(A&255),v.push(g&255)}function Wt(v,p){var g=Math.floor(p/Math.pow(2,32)),A=p>>>0;dt(v,A),dt(v,g)}function Gt(v,p){var g=p/Math.pow(2,32)>>0,A=p>>>0;dt(v,A),dt(v,g)}function ar(v,p){Xt(v,p)}function or(v,p){Rt(v,p)}var kt=new Int32Array(2),sr=new Float32Array(kt.buffer),lr=new Float64Array(kt.buffer);function Xt(v,p){sr[0]=p,$t(v,kt[0])}function Rt(v,p){lr[0]=p,$t(v,kt[0]),$t(v,kt[1])}function cr(v,p){return Ve(v,p?1:0)}function xt(v,p){p||(p="");var g=Ge(p),A=0;if(g<32)v.push(g|160),A=1;else if(g<256)v.push(217),Ve(v,g),A=2;else if(g<65536)v.push(218),Pt(v,g),A=3;else if(g<4294967296)v.push(219),dt(v,g),A=5;else throw new Error("String too long");return at(v,v.length,p),A+g}function rt(v,p){if(isNaN(p))return rt(v,0);if(isFinite(p)){if(p!==(p|0))return v.push(203),Rt(v,p),9}else return rt(v,p>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER);return p>=0?p<128?(Ve(v,p),1):p<256?(v.push(204),Ve(v,p),2):p<65536?(v.push(205),Pt(v,p),3):p<4294967296?(v.push(206),dt(v,p),5):(v.push(207),Gt(v,p),9):p>=-32?(v.push(224|p+32),1):p>=-128?(v.push(208),ot(v,p),2):p>=-32768?(v.push(209),zt(v,p),3):p>=-2147483648?(v.push(210),$t(v,p),5):(v.push(211),Wt(v,p),9)}var Dt=Object.freeze({__proto__:null,utf8Write:at,int8:ot,uint8:Ve,int16:zt,uint16:Pt,int32:$t,uint32:dt,int64:Wt,uint64:Gt,float32:ar,float64:or,writeFloat32:Xt,writeFloat64:Rt,boolean:cr,string:xt,number:rt});function ur(v,p,g){for(var A="",N=0,ne=p,we=p+g;ne<we;ne++){var pe=v[ne];if((pe&128)===0){A+=String.fromCharCode(pe);continue}if((pe&224)===192){A+=String.fromCharCode((pe&31)<<6|v[++ne]&63);continue}if((pe&240)===224){A+=String.fromCharCode((pe&15)<<12|(v[++ne]&63)<<6|(v[++ne]&63)<<0);continue}if((pe&248)===240){N=(pe&7)<<18|(v[++ne]&63)<<12|(v[++ne]&63)<<6|(v[++ne]&63)<<0,N>=65536?(N-=65536,A+=String.fromCharCode((N>>>10)+55296,(N&1023)+56320)):A+=String.fromCharCode(N);continue}console.error("Invalid byte "+pe.toString(16))}return A}function Yt(v,p){return Et(v,p)<<24>>24}function Et(v,p){return v[p.offset++]}function Kt(v,p){return Ot(v,p)<<16>>16}function Ot(v,p){return v[p.offset++]|v[p.offset++]<<8}function ht(v,p){return v[p.offset++]|v[p.offset++]<<8|v[p.offset++]<<16|v[p.offset++]<<24}function yt(v,p){return ht(v,p)>>>0}function fr(v,p){return Mt(v,p)}function dr(v,p){return jt(v,p)}function Jt(v,p){var g=yt(v,p),A=ht(v,p)*Math.pow(2,32);return A+g}function Zt(v,p){var g=yt(v,p),A=yt(v,p)*Math.pow(2,32);return A+g}var St=new Int32Array(2),hr=new Float32Array(St.buffer),pr=new Float64Array(St.buffer);function Mt(v,p){return St[0]=ht(v,p),hr[0]}function jt(v,p){return St[0]=ht(v,p),St[1]=ht(v,p),pr[0]}function _r(v,p){return Et(v,p)>0}function Qt(v,p){var g=v[p.offset++],A;g<192?A=g&31:g===217?A=Et(v,p):g===218?A=Ot(v,p):g===219&&(A=yt(v,p));var N=ur(v,p.offset,A);return p.offset+=A,N}function mr(v,p){var g=v[p.offset];return g<192&&g>160||g===217||g===218||g===219}function pt(v,p){var g=v[p.offset++];if(g<128)return g;if(g===202)return Mt(v,p);if(g===203)return jt(v,p);if(g===204)return Et(v,p);if(g===205)return Ot(v,p);if(g===206)return yt(v,p);if(g===207)return Zt(v,p);if(g===208)return Yt(v,p);if(g===209)return Kt(v,p);if(g===210)return ht(v,p);if(g===211)return Jt(v,p);if(g>223)return(255-g+1)*-1}function vr(v,p){var g=v[p.offset];return g<128||g>=202&&g<=211}function gr(v,p){return v[p.offset]<160}function er(v,p){return v[p.offset-1]===fe&&(v[p.offset]<128||v[p.offset]>=202&&v[p.offset]<=211)}var tr=Object.freeze({__proto__:null,int8:Yt,uint8:Et,int16:Kt,uint16:Ot,int32:ht,uint32:yt,float32:fr,float64:dr,int64:Jt,uint64:Zt,readFloat32:Mt,readFloat64:jt,boolean:_r,string:Qt,stringCheck:mr,number:pt,numberCheck:vr,arrayCheck:gr,switchStructureCheck:er}),Ft=function(){function v(p){var g=this;this.$changes=new Te(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,p&&p.forEach(function(A){return g.add(A)})}return v.is=function(p){return p.collection!==void 0},v.prototype.add=function(p){var g=this.$refId++,A=p.$changes!==void 0;return A&&p.$changes.setParent(this,this.$changes.root,g),this.$changes.indexes[g]=g,this.$indexes.set(g,g),this.$items.set(g,p),this.$changes.change(g),g},v.prototype.at=function(p){var g=Array.from(this.$items.keys())[p];return this.$items.get(g)},v.prototype.entries=function(){return this.$items.entries()},v.prototype.delete=function(p){for(var g=this.$items.entries(),A,N;(N=g.next())&&!N.done;)if(p===N.value[1]){A=N.value[0];break}return A===void 0?!1:(this.$changes.delete(A),this.$indexes.delete(A),this.$items.delete(A))},v.prototype.clear=function(p){var g=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),p&&typeof this.$changes.getType()!="string"&&this.$items.forEach(function(A){g.$changes.root.removeRef(A.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:$.OPERATION.CLEAR}),this.$changes.touchParents()},v.prototype.has=function(p){return Array.from(this.$items.values()).some(function(g){return g===p})},v.prototype.forEach=function(p){var g=this;this.$items.forEach(function(A,N,ne){return p(A,N,g)})},v.prototype.values=function(){return this.$items.values()},Object.defineProperty(v.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),v.prototype.setIndex=function(p,g){this.$indexes.set(p,g)},v.prototype.getIndex=function(p){return this.$indexes.get(p)},v.prototype.getByIndex=function(p){return this.$items.get(this.$indexes.get(p))},v.prototype.deleteByIndex=function(p){var g=this.$indexes.get(p);this.$items.delete(g),this.$indexes.delete(p)},v.prototype.toArray=function(){return Array.from(this.$items.values())},v.prototype.toJSON=function(){var p=[];return this.forEach(function(g,A){p.push(typeof g.toJSON=="function"?g.toJSON():g)}),p},v.prototype.clone=function(p){var g;return p?g=Object.assign(new v,this):(g=new v,this.forEach(function(A){A.$changes?g.add(A.clone()):g.add(A)})),g},v.prototype.triggerAll=function(){Ze.prototype.triggerAll.apply(this)},v}(),Lt=function(){function v(p){var g=this;this.$changes=new Te(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,p&&p.forEach(function(A){return g.add(A)})}return v.is=function(p){return p.set!==void 0},v.prototype.add=function(p){var g,A;if(this.has(p))return!1;var N=this.$refId++;p.$changes!==void 0&&p.$changes.setParent(this,this.$changes.root,N);var ne=(A=(g=this.$changes.indexes[N])===null||g===void 0?void 0:g.op)!==null&&A!==void 0?A:$.OPERATION.ADD;return this.$changes.indexes[N]=N,this.$indexes.set(N,N),this.$items.set(N,p),this.$changes.change(N,ne),N},v.prototype.entries=function(){return this.$items.entries()},v.prototype.delete=function(p){for(var g=this.$items.entries(),A,N;(N=g.next())&&!N.done;)if(p===N.value[1]){A=N.value[0];break}return A===void 0?!1:(this.$changes.delete(A),this.$indexes.delete(A),this.$items.delete(A))},v.prototype.clear=function(p){var g=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),p&&typeof this.$changes.getType()!="string"&&this.$items.forEach(function(A){g.$changes.root.removeRef(A.$changes.refId)}),this.$items.clear(),this.$changes.operation({index:0,op:$.OPERATION.CLEAR}),this.$changes.touchParents()},v.prototype.has=function(p){for(var g=this.$items.values(),A=!1,N;(N=g.next())&&!N.done;)if(p===N.value){A=!0;break}return A},v.prototype.forEach=function(p){var g=this;this.$items.forEach(function(A,N,ne){return p(A,N,g)})},v.prototype.values=function(){return this.$items.values()},Object.defineProperty(v.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),v.prototype.setIndex=function(p,g){this.$indexes.set(p,g)},v.prototype.getIndex=function(p){return this.$indexes.get(p)},v.prototype.getByIndex=function(p){return this.$items.get(this.$indexes.get(p))},v.prototype.deleteByIndex=function(p){var g=this.$indexes.get(p);this.$items.delete(g),this.$indexes.delete(p)},v.prototype.toArray=function(){return Array.from(this.$items.values())},v.prototype.toJSON=function(){var p=[];return this.forEach(function(g,A){p.push(typeof g.toJSON=="function"?g.toJSON():g)}),p},v.prototype.clone=function(p){var g;return p?g=Object.assign(new v,this):(g=new v,this.forEach(function(A){A.$changes?g.add(A.clone()):g.add(A)})),g},v.prototype.triggerAll=function(){Ze.prototype.triggerAll.apply(this)},v}(),yr=function(){function v(){this.handlers=[]}return v.prototype.register=function(p,g){return this.handlers.push(p),this},v.prototype.invoke=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];this.handlers.forEach(function(A){return A.apply(void 0,p)})},v.prototype.invokeAsync=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];return Promise.all(this.handlers.map(function(A){return A.apply(void 0,p)}))},v.prototype.remove=function(p){var g=this.handlers.indexOf(p);this.handlers[g]=this.handlers[this.handlers.length-1],this.handlers.pop()},v.prototype.clear=function(){this.handlers=[]},v}(),br=function(){function v(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return v.prototype.addRefId=function(p){this.refIds.has(p)||(this.refIds.add(p),this.containerIndexes.set(p,new Set))},v.get=function(p){return p.$filterState===void 0&&(p.$filterState=new v),p.$filterState},v}(),Ut=function(v){H(p,v);function p(){return v!==null&&v.apply(this,arguments)||this}return p}(Error);function wr(v,p,g,A){var N,ne=!1;switch(p){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":N="number",isNaN(v)&&console.log('trying to encode "NaN" in '+g.constructor.name+"#"+A);break;case"string":N="string",ne=!0;break;case"boolean":return}if(typeof v!==N&&(!ne||ne&&v!==null)){var we="'"+JSON.stringify(v)+"'"+(v&&v.constructor&&" ("+v.constructor.name+")"||"");throw new Ut("a '"+N+"' was expected, but "+we+" was provided in "+g.constructor.name+"#"+A)}}function rr(v,p,g,A){if(!(v instanceof p))throw new Ut("a '"+p.name+"' was expected, but '"+v.constructor.name+"' was provided in "+g.constructor.name+"#"+A)}function $r(v,p,g,A,N){wr(g,v,A,N);var ne=Dt[v];if(ne)ne(p,g);else throw new Ut("a '"+v+"' was expected, but "+g+" was provided in "+A.constructor.name+"#"+N)}function kr(v,p,g){return tr[v](p,g)}var Ze=function(){function v(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];Object.defineProperties(this,{$changes:{value:new Te(this,void 0,new ie),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var A=this._definition.descriptors;A&&Object.defineProperties(this,A),p[0]&&this.assign(p[0])}return v.onError=function(p){console.error(p)},v.is=function(p){return p._definition&&p._definition.schema!==void 0},v.prototype.assign=function(p){return Object.assign(this,p),this},Object.defineProperty(v.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),v.prototype.listen=function(p,g){var A=this;return this.$listeners[p]||(this.$listeners[p]=new yr),this.$listeners[p].register(g),function(){return A.$listeners[p].remove(g)}},v.prototype.decode=function(p,g,A,N){g===void 0&&(g={offset:0}),A===void 0&&(A=this),N===void 0&&(N=new Map);var ne=this.$changes.root,we=p.length,pe=0,Re=[];for(ne.refs.set(pe,this),N.set(pe,Re);g.offset<we;){var xe=p[g.offset++];if(xe==fe){pe=pt(p,g);var ve=ne.refs.get(pe);if(!ve)throw new Error('"refId" not found: '+pe);A=ve,Re=[],N.set(pe,Re);continue}var ye=A.$changes,He=A._definition!==void 0,Pe=He?xe>>6<<6:xe;if(Pe===$.OPERATION.CLEAR){A.clear(!0);continue}var Se=He?xe%(Pe||255):pt(p,g),Ce=He?A._definition.fieldsByIndex[Se]:"",Le=ye.getType(Se),$e=void 0,De=void 0,Qe=void 0;if(He?De=A["_"+Ce]:(De=A.getByIndex(Se),(Pe&$.OPERATION.ADD)===$.OPERATION.ADD?(Qe=A instanceof Ue?Qt(p,g):Se,A.setIndex(Se,Qe)):Qe=A.getIndex(Se)),(Pe&$.OPERATION.DELETE)===$.OPERATION.DELETE&&(Pe!==$.OPERATION.DELETE_AND_ADD&&A.deleteByIndex(Se),De&&De.$changes&&ne.removeRef(De.$changes.refId),$e=null),Ce===void 0){console.warn("@colyseus/schema: definition mismatch");for(var Oe={offset:g.offset};g.offset<we&&!(er(p,g)&&(Oe.offset=g.offset+1,ne.refs.has(pt(p,Oe))));)g.offset++;continue}else if(Pe!==$.OPERATION.DELETE)if(v.is(Le)){var We=pt(p,g);if($e=ne.refs.get(We),Pe!==$.OPERATION.REPLACE){var st=this.getSchemaType(p,g,Le);$e||($e=this.createTypeInstance(st),$e.$changes.refId=We,De&&($e.onChange=De.onChange,$e.onRemove=De.onRemove,$e.$listeners=De.$listeners,De.$changes.refId&&We!==De.$changes.refId&&ne.removeRef(De.$changes.refId))),ne.addRef(We,$e,$e!==De)}}else if(typeof Le=="string")$e=kr(Le,p,g);else{var At=gt(Object.keys(Le)[0]),nt=pt(p,g),Ye=ne.refs.has(nt)?De||ne.refs.get(nt):new At.constructor;if($e=Ye.clone(!0),$e.$changes.refId=nt,De&&($e.onAdd=De.onAdd,$e.onRemove=De.onRemove,$e.onChange=De.onChange,De.$changes.refId&&nt!==De.$changes.refId)){ne.removeRef(De.$changes.refId);for(var Ke=[],qt=De.entries(),ct=void 0;(ct=qt.next())&&!ct.done;){var It=ct.value,mt=It[0],bt=It[1];Ke.push({op:$.OPERATION.DELETE,field:mt,value:void 0,previousValue:bt})}N.set(De.$changes.refId,Ke)}ne.addRef(nt,$e,Ye!==De),At.getProxy&&($e=At.getProxy($e))}var Ar=De!==$e;if($e!=null){if($e.$changes&&$e.$changes.setParent(ye.ref,ye.root,Se),A instanceof v)A[Ce]=$e;else if(A instanceof Ue){var mt=Qe;A.$items.set(mt,$e)}else if(A instanceof qe)A.setAt(Se,$e);else if(A instanceof Ft){var Ct=A.add($e);A.setIndex(Se,Ct)}else if(A instanceof Lt){var Ct=A.add($e);Ct!==!1&&A.setIndex(Se,Ct)}}Ar&&Re.push({op:Pe,field:Ce,dynamicIndex:Qe,value:$e,previousValue:De})}return this._triggerChanges(N),ne.garbageCollectDeletedRefs(),N},v.prototype.encode=function(p,g,A){p===void 0&&(p=!1),g===void 0&&(g=[]),A===void 0&&(A=!1);for(var N=this.$changes,ne=new WeakSet,we=[N],pe=1,Re=0;Re<pe;Re++){var xe=we[Re],ve=xe.ref,ye=ve instanceof v;xe.ensureRefId(),ne.add(xe),xe!==N&&(xe.changed||p)&&(Ve(g,fe),rt(g,xe.refId));for(var He=p?Array.from(xe.allChanges):Array.from(xe.changes.values()),Pe=0,Se=He.length;Pe<Se;Pe++){var Ce=p?{op:$.OPERATION.ADD,index:He[Pe]}:He[Pe],Le=Ce.index,$e=ye?ve._definition.fieldsByIndex&&ve._definition.fieldsByIndex[Le]:Le,De=g.length;if(Ce.op!==$.OPERATION.TOUCH)if(ye)Ve(g,Le|Ce.op);else{if(Ve(g,Ce.op),Ce.op===$.OPERATION.CLEAR)continue;rt(g,Le)}if(!ye&&(Ce.op&$.OPERATION.ADD)==$.OPERATION.ADD&&ve instanceof Ue){var Qe=xe.ref.$indexes.get(Le);xt(g,Qe)}if(Ce.op!==$.OPERATION.DELETE){var Oe=xe.getType(Le),We=xe.getValue(Le);if(We&&We.$changes&&!ne.has(We.$changes)&&(we.push(We.$changes),We.$changes.ensureRefId(),pe++),Ce.op!==$.OPERATION.TOUCH){if(v.is(Oe))rr(We,Oe,ve,$e),rt(g,We.$changes.refId),(Ce.op&$.OPERATION.ADD)===$.OPERATION.ADD&&this.tryEncodeTypeId(g,Oe,We.constructor);else if(typeof Oe=="string")$r(Oe,g,We,ve,$e);else{var st=gt(Object.keys(Oe)[0]);rr(ve["_"+$e],st.constructor,ve,$e),rt(g,We.$changes.refId)}A&&xe.cache(Le,g.slice(De))}}}!p&&!A&&xe.discard()}return g},v.prototype.encodeAll=function(p){return this.encode(!0,[],p)},v.prototype.applyFilters=function(p,g){var A,N;g===void 0&&(g=!1);for(var ne=this,we=new Set,pe=br.get(p),Re=[this.$changes],xe=1,ve=[],ye=function(Pe){var Se=Re[Pe];if(we.has(Se.refId))return"continue";var Ce=Se.ref,Le=Ce instanceof v;Ve(ve,fe),rt(ve,Se.refId);var $e=pe.refIds.has(Se),De=g||!$e;pe.addRefId(Se);var Qe=pe.containerIndexes.get(Se),Oe=De?Array.from(Se.allChanges):Array.from(Se.changes.values());if(!g&&Le&&Ce._definition.indexesWithFilters){var We=Ce._definition.indexesWithFilters;We.forEach(function(bt){!Qe.has(bt)&&Se.allChanges.has(bt)&&(De?Oe.push(bt):Oe.push({op:$.OPERATION.ADD,index:bt}))})}for(var st=0,At=Oe.length;st<At;st++){var nt=De?{op:$.OPERATION.ADD,index:Oe[st]}:Oe[st];if(nt.op===$.OPERATION.CLEAR){Ve(ve,nt.op);continue}var Ye=nt.index;if(nt.op===$.OPERATION.DELETE){Le?Ve(ve,nt.op|Ye):(Ve(ve,nt.op),rt(ve,Ye));continue}var Ke=Se.getValue(Ye),qt=Se.getType(Ye);if(Le){var ct=Ce._definition.filters&&Ce._definition.filters[Ye];if(ct&&!ct.call(Ce,p,Ke,ne)){Ke&&Ke.$changes&&we.add(Ke.$changes.refId);continue}}else{var It=Se.parent,ct=Se.getChildrenFilter();if(ct&&!ct.call(It,p,Ce.$indexes.get(Ye),Ke,ne)){Ke&&Ke.$changes&&we.add(Ke.$changes.refId);continue}}if(Ke.$changes&&(Re.push(Ke.$changes),xe++),nt.op!==$.OPERATION.TOUCH)if(nt.op===$.OPERATION.ADD||Le)ve.push.apply(ve,(A=Se.caches[Ye])!==null&&A!==void 0?A:[]),Qe.add(Ye);else if(Qe.has(Ye))ve.push.apply(ve,(N=Se.caches[Ye])!==null&&N!==void 0?N:[]);else{if(Qe.add(Ye),Ve(ve,$.OPERATION.ADD),rt(ve,Ye),Ce instanceof Ue){var mt=Se.ref.$indexes.get(Ye);xt(ve,mt)}Ke.$changes?rt(ve,Ke.$changes.refId):Dt[qt](ve,Ke)}else if(Ke.$changes&&!Le){if(Ve(ve,$.OPERATION.ADD),rt(ve,Ye),Ce instanceof Ue){var mt=Se.ref.$indexes.get(Ye);xt(ve,mt)}rt(ve,Ke.$changes.refId)}}},He=0;He<xe;He++)ye(He);return ve},v.prototype.clone=function(){var p=new this.constructor,g=this._definition.schema;for(var A in g)typeof this[A]=="object"&&typeof this[A].clone=="function"?p[A]=this[A].clone():p[A]=this[A];return p},v.prototype.triggerAll=function(){if(this.$changes.root.refs.size!==0){var p=new Map;v.prototype._triggerAllFillChanges.call(this,this,p);try{v.prototype._triggerChanges.call(this,p)}catch(g){v.onError(g)}}},v.prototype.toJSON=function(){var p=this._definition.schema,g=this._definition.deprecated,A={};for(var N in p)!g[N]&&this[N]!==null&&typeof this[N]!="undefined"&&(A[N]=typeof this[N].toJSON=="function"?this[N].toJSON():this["_"+N]);return A},v.prototype.discardAllChanges=function(){this.$changes.discardAll()},v.prototype.getByIndex=function(p){return this[this._definition.fieldsByIndex[p]]},v.prototype.deleteByIndex=function(p){this[this._definition.fieldsByIndex[p]]=void 0},v.prototype.tryEncodeTypeId=function(p,g,A){g._typeid!==A._typeid&&(Ve(p,ae),rt(p,A._typeid))},v.prototype.getSchemaType=function(p,g,A){var N;return p[g.offset]===ae&&(g.offset++,N=this.constructor._context.get(pt(p,g))),N||A},v.prototype.createTypeInstance=function(p){var g=new p;return g.$changes.root=this.$changes.root,g},v.prototype._triggerAllFillChanges=function(p,g){if(!g.has(p.$changes.refId)){var A=[];if(g.set(p.$changes.refId||0,A),p instanceof v){var N=p._definition.schema;for(var ne in N){var we="_"+ne,pe=p[we];pe!==void 0&&(A.push({op:$.OPERATION.ADD,field:ne,value:pe,previousValue:void 0}),pe.$changes!==void 0&&v.prototype._triggerAllFillChanges.call(this,pe,g))}}else for(var Re=p.entries(),xe=void 0;(xe=Re.next())&&!xe.done;){var ve=xe.value,ye=ve[0],pe=ve[1];A.push({op:$.OPERATION.ADD,field:ye,dynamicIndex:ye,value:pe,previousValue:void 0}),pe.$changes!==void 0&&v.prototype._triggerAllFillChanges.call(this,pe,g)}}},v.prototype._triggerChanges=function(p){var g=this;p.forEach(function(A,N){var ne,we,pe,Re,xe,ve,ye,He,Pe,Se,Ce,Le;if(A.length>0){for(var $e=g.$changes.root.refs.get(N),De=$e instanceof v,Qe=0;Qe<A.length;Qe++){var Oe=A[Qe],We=$e.$listeners&&$e.$listeners[Oe.field];if(De||(Oe.op===$.OPERATION.ADD&&Oe.previousValue===void 0?(we=(ne=$e).onAdd)===null||we===void 0||we.call(ne,Oe.value,(pe=Oe.dynamicIndex)!==null&&pe!==void 0?pe:Oe.field):Oe.op===$.OPERATION.DELETE?Oe.previousValue!==void 0&&((xe=(Re=$e).onRemove)===null||xe===void 0||xe.call(Re,Oe.previousValue,(ve=Oe.dynamicIndex)!==null&&ve!==void 0?ve:Oe.field)):Oe.op===$.OPERATION.DELETE_AND_ADD?(Oe.previousValue!==void 0&&((He=(ye=$e).onRemove)===null||He===void 0||He.call(ye,Oe.previousValue,Oe.dynamicIndex)),(Se=(Pe=$e).onAdd)===null||Se===void 0||Se.call(Pe,Oe.value,Oe.dynamicIndex)):(Oe.op===$.OPERATION.REPLACE||Oe.value!==Oe.previousValue)&&((Le=(Ce=$e).onChange)===null||Le===void 0||Le.call(Ce,Oe.value,Oe.dynamicIndex))),(Oe.op&$.OPERATION.DELETE)===$.OPERATION.DELETE&&Oe.previousValue instanceof v&&Oe.previousValue.onRemove&&Oe.previousValue.onRemove(),We)try{We.invoke(Oe.value,Oe.previousValue)}catch(st){v.onError(st)}}if(De&&$e.onChange)try{$e.onChange(A)}catch(st){v.onError(st)}}})},v._definition=wt.create(),v}();function Er(v){for(var p=[v.$changes],g=1,A={},N=A,ne=function(pe){var Re=p[pe];Re.changes.forEach(function(xe){var ve=Re.ref,ye=xe.index,He=ve._definition?ve._definition.fieldsByIndex[ye]:ve.$indexes.get(ye);N[He]=Re.getValue(ye)})},we=0;we<g;we++)ne(we);return A}var _t=new ut,Ht=function(v){H(p,v);function p(){return v!==null&&v.apply(this,arguments)||this}return B([Fe("string",_t)],p.prototype,"name",void 0),B([Fe("string",_t)],p.prototype,"type",void 0),B([Fe("number",_t)],p.prototype,"referencedType",void 0),p}(Ze),Nt=function(v){H(p,v);function p(){var g=v!==null&&v.apply(this,arguments)||this;return g.fields=new qe,g}return B([Fe("number",_t)],p.prototype,"id",void 0),B([Fe([Ht],_t)],p.prototype,"fields",void 0),p}(Ze),Sr=function(v){H(p,v);function p(){var g=v!==null&&v.apply(this,arguments)||this;return g.types=new qe,g}return p.encode=function(g){var A=g.constructor,N=new p;N.rootType=A._typeid;var ne=function(xe,ve){for(var ye in ve){var He=new Ht;He.name=ye;var Pe=void 0;if(typeof ve[ye]=="string")Pe=ve[ye];else{var Se=ve[ye],Ce=void 0;Ze.is(Se)?(Pe="ref",Ce=ve[ye]):(Pe=Object.keys(Se)[0],typeof Se[Pe]=="string"?Pe+=":"+Se[Pe]:Ce=Se[Pe]),He.referencedType=Ce?Ce._typeid:-1}He.type=Pe,xe.fields.push(He)}N.types.push(xe)},we=A._context.types;for(var pe in we){var Re=new Nt;Re.id=Number(pe),ne(Re,we[pe]._definition.schema)}return N.encodeAll()},p.decode=function(g,A){var N=new ut,ne=new p;ne.decode(g,A);var we=ne.types.reduce(function(ye,He){var Pe=function(Ce){H(Le,Ce);function Le(){return Ce!==null&&Ce.apply(this,arguments)||this}return Le}(Ze),Se=He.id;return ye[Se]=Pe,N.add(Pe,Se),ye},{});ne.types.forEach(function(ye){var He=we[ye.id];ye.fields.forEach(function(Pe){var Se;if(Pe.referencedType!==void 0){var Ce=Pe.type,Le=we[Pe.referencedType];if(!Le){var $e=Pe.type.split(":");Ce=$e[0],Le=$e[1]}Ce==="ref"?Fe(Le,N)(He.prototype,Pe.name):Fe((Se={},Se[Ce]=Le,Se),N)(He.prototype,Pe.name)}else Fe(Pe.type,N)(He.prototype,Pe.name)})});var pe=we[ne.rootType],Re=new pe;for(var xe in pe._definition.schema){var ve=pe._definition.schema[xe];typeof ve!="string"&&(Re[xe]=typeof ve=="function"?new ve:new(gt(Object.keys(ve)[0])).constructor)}return Re},B([Fe([Nt],_t)],p.prototype,"types",void 0),B([Fe("number",_t)],p.prototype,"rootType",void 0),p}(Ze);it("map",{constructor:Ue,getProxy:lt}),it("array",{constructor:qe,getProxy:Ne}),it("set",{constructor:Lt}),it("collection",{constructor:Ft}),$.ArraySchema=qe,$.CollectionSchema=Ft,$.Context=ut,$.MapSchema=Ue,$.Reflection=Sr,$.ReflectionField=Ht,$.ReflectionType=Nt,$.Schema=Ze,$.SchemaDefinition=wt,$.SetSchema=Lt,$.decode=tr,$.defineTypes=Je,$.deprecated=tt,$.dumpChanges=Er,$.encode=Dt,$.filter=ze,$.filterChildren=et,$.hasFilter=Tt,$.registerType=it,$.type=Fe,Object.defineProperty($,"__esModule",{value:!0})})}),se=function(){function T(x,$){var M=this;this.onStateChange=te(),this.onError=te(),this.onLeave=te(),this.onJoin=te(),this.hasJoined=!1,this.onMessageHandlers=U(),this.id=null,this.name=x,$&&(this.serializer=new(ke("schema")),this.rootSchema=$,this.serializer.state=new $),this.onError(function(H,B){return console.warn("colyseus.js - onError => ("+H+") "+B)}),this.onLeave(function(){return M.removeAllListeners()})}return T.prototype.connect=function(x){var $=this;this.connection=new ee,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(M){if(!$.hasJoined){console.warn("Room connection was closed unexpectedly ("+M.code+"): "+M.reason),$.onError.invoke(M.code,M.reason);return}$.onLeave.invoke(M.code),$.destroy()},this.connection.events.onerror=function(M){console.warn("Room, onError ("+M.code+"): "+M.reason),$.onError.invoke(M.code,M.reason)},this.connection.connect(x)},T.prototype.leave=function(x){var $=this;return x===void 0&&(x=!0),new Promise(function(M){$.onLeave(function(H){return M(H)}),$.connection?x?$.connection.send([t.Protocol.LEAVE_ROOM]):$.connection.close():$.onLeave.invoke(4e3)})},T.prototype.onMessage=function(x,$){return this.onMessageHandlers.on(this.getMessageHandlerKey(x),$)},T.prototype.send=function(x,$){var M=[t.Protocol.ROOM_DATA];typeof x=="string"?re.encode.string(M,x):re.encode.number(M,x);var H;if($!==void 0){var B=q($);H=new Uint8Array(M.length+B.byteLength),H.set(new Uint8Array(M),0),H.set(new Uint8Array(B),M.length)}else H=new Uint8Array(M);this.connection.send(H.buffer)},Object.defineProperty(T.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),T.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},T.prototype.onMessageCallback=function(x){var $=Array.from(new Uint8Array(x.data)),M=$[0];if(M===t.Protocol.JOIN_ROOM){var H=1;if(this.serializerId=Ee($,H),H+=C(this.serializerId),!this.serializer){var B=ke(this.serializerId);this.serializer=new B}$.length>H&&this.serializer.handshake&&this.serializer.handshake($,{offset:H}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(M===t.Protocol.ERROR){var he={offset:1},fe=re.decode.number($,he),ae=re.decode.string($,he);this.onError.invoke(fe,ae)}else if(M===t.Protocol.LEAVE_ROOM)this.leave();else if(M===t.Protocol.ROOM_DATA_SCHEMA){var ie={offset:1},Te=this.serializer.getState().constructor._context,je=Te.get(re.decode.number($,ie)),ae=new je;ae.decode($,ie),this.dispatchMessage(je,ae)}else if(M===t.Protocol.ROOM_STATE)$.shift(),this.setState($);else if(M===t.Protocol.ROOM_STATE_PATCH)$.shift(),this.patch($);else if(M===t.Protocol.ROOM_DATA){var Ne={offset:1},je=re.decode.stringCheck($,Ne)?re.decode.string($,Ne):re.decode.number($,Ne),ae=$.length>Ne.offset?V(x.data,Ne.offset):void 0;this.dispatchMessage(je,ae)}},T.prototype.setState=function(x){this.serializer.setState(x),this.onStateChange.invoke(this.serializer.getState())},T.prototype.patch=function(x){this.serializer.patch(x),this.onStateChange.invoke(this.serializer.getState())},T.prototype.dispatchMessage=function(x,$){var M=this.getMessageHandlerKey(x);this.onMessageHandlers.events[M]?this.onMessageHandlers.emit(M,$):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",x,$):console.warn("colyseus.js: onMessage() not registered for type '"+x+"'.")},T.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},T.prototype.getMessageHandlerKey=function(x){switch(typeof x){case"function":return"$"+x._typeid;case"string":return x;case"number":return"i"+x;default:throw new Error("invalid message type.")}},T}(),de;function oe(){return de||(de=typeof cc!="undefined"&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:typeof window!="undefined"&&window.localStorage?window.localStorage:{cache:{},setItem:function(T,x){this.cache[T]=x},getItem:function(T){this.cache[T]},removeItem:function(T){delete this.cache[T]}}),de}function Ae(T,x){oe().setItem(T,x)}function Me(T){oe().removeItem(T)}function Xe(T,x){var $=oe().getItem(T);typeof Promise=="undefined"||!($ instanceof Promise)?x($):$.then(function(M){return x(M)})}var Be="colyseus-auth-token";t.Platform=void 0,function(T){T.ios="ios",T.android="android"}(t.Platform||(t.Platform={}));var G=function(){function T(x){var $=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=x.replace("ws","http"),Xe(Be,function(M){return $.token=M})}return Object.defineProperty(T.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),T.prototype.login=function(x){return x===void 0&&(x={}),o(this,void 0,void 0,function(){var $,M,H;return s(this,function(B){switch(B.label){case 0:return $=Object.assign({},x),this.hasToken&&($.token=this.token),[4,this.request("post","/auth",$)];case 1:M=B.sent(),this.token=M.token,Ae(Be,this.token);for(H in M)this.hasOwnProperty(H)&&(this[H]=M[H]);return this.registerPingService(),[2,this]}})})},T.prototype.save=function(){return o(this,void 0,void 0,function(){return s(this,function(x){switch(x.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return x.sent(),[2,this]}})})},T.prototype.getFriends=function(){return o(this,void 0,void 0,function(){return s(this,function(x){switch(x.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,x.sent()]}})})},T.prototype.getOnlineFriends=function(){return o(this,void 0,void 0,function(){return s(this,function(x){switch(x.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,x.sent()]}})})},T.prototype.getFriendRequests=function(){return o(this,void 0,void 0,function(){return s(this,function(x){switch(x.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,x.sent()]}})})},T.prototype.sendFriendRequest=function(x){return o(this,void 0,void 0,function(){return s(this,function($){switch($.label){case 0:return[4,this.request("post","/friends/requests",{userId:x})];case 1:return[2,$.sent()]}})})},T.prototype.acceptFriendRequest=function(x){return o(this,void 0,void 0,function(){return s(this,function($){switch($.label){case 0:return[4,this.request("put","/friends/requests",{userId:x})];case 1:return[2,$.sent()]}})})},T.prototype.declineFriendRequest=function(x){return o(this,void 0,void 0,function(){return s(this,function($){switch($.label){case 0:return[4,this.request("del","/friends/requests",{userId:x})];case 1:return[2,$.sent()]}})})},T.prototype.blockUser=function(x){return o(this,void 0,void 0,function(){return s(this,function($){switch($.label){case 0:return[4,this.request("post","/friends/block",{userId:x})];case 1:return[2,$.sent()]}})})},T.prototype.unblockUser=function(x){return o(this,void 0,void 0,function(){return s(this,function($){switch($.label){case 0:return[4,this.request("put","/friends/block",{userId:x})];case 1:return[2,$.sent()]}})})},T.prototype.request=function(x,$,M,H,B){return M===void 0&&(M={}),B===void 0&&(B={}),o(this,void 0,void 0,function(){var he,fe,ae,ie;return s(this,function(Te){switch(Te.label){case 0:B.Accept="application/json",this.hasToken&&(B.Authorization="Bearer "+this.token),he=[];for(fe in M)he.push(fe+"="+M[fe]);return ae=he.length>0?"?"+he.join("&"):"",ie={headers:B},H&&(ie.body=H),[4,D[x](""+this.endpoint+$+ae,ie)];case 1:return[2,Te.sent().data]}})})},T.prototype.logout=function(){this.token=void 0,Me(Be),this.unregisterPingService()},T.prototype.registerPingService=function(x){var $=this;x===void 0&&(x=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval(function(){return $.request("get","/auth")},x)},T.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},T}(),le,_e=function(T){a(x,T);function x($,M){var H=T.call(this,$)||this;return H.code=M,Object.setPrototypeOf(H,x.prototype),H}return x}(Error),ue=typeof window!="undefined"&&typeof((le=window==null?void 0:window.location)===null||le===void 0?void 0:le.hostname)!="undefined"?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",be=function(){function T(x){x===void 0&&(x=ue),this.endpoint=x}return Object.defineProperty(T.prototype,"auth",{get:function(){return this._auth||(this._auth=new G(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),T.prototype.joinOrCreate=function(x,$,M){return $===void 0&&($={}),o(this,void 0,void 0,function(){return s(this,function(H){switch(H.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",x,$,M)];case 1:return[2,H.sent()]}})})},T.prototype.create=function(x,$,M){return $===void 0&&($={}),o(this,void 0,void 0,function(){return s(this,function(H){switch(H.label){case 0:return[4,this.createMatchMakeRequest("create",x,$,M)];case 1:return[2,H.sent()]}})})},T.prototype.join=function(x,$,M){return $===void 0&&($={}),o(this,void 0,void 0,function(){return s(this,function(H){switch(H.label){case 0:return[4,this.createMatchMakeRequest("join",x,$,M)];case 1:return[2,H.sent()]}})})},T.prototype.joinById=function(x,$,M){return $===void 0&&($={}),o(this,void 0,void 0,function(){return s(this,function(H){switch(H.label){case 0:return[4,this.createMatchMakeRequest("joinById",x,$,M)];case 1:return[2,H.sent()]}})})},T.prototype.reconnect=function(x,$,M){return o(this,void 0,void 0,function(){return s(this,function(H){switch(H.label){case 0:return[4,this.createMatchMakeRequest("joinById",x,{sessionId:$},M)];case 1:return[2,H.sent()]}})})},T.prototype.getAvailableRooms=function(x){return x===void 0&&(x=""),o(this,void 0,void 0,function(){var $;return s(this,function(M){switch(M.label){case 0:return $=this.endpoint.replace("ws","http")+"/matchmake/"+x,[4,S($,{headers:{Accept:"application/json"}})];case 1:return[2,M.sent().data]}})})},T.prototype.consumeSeatReservation=function(x,$){return o(this,void 0,void 0,function(){var M;return s(this,function(H){return M=this.createRoom(x.room.name,$),M.id=x.room.roomId,M.sessionId=x.sessionId,M.connect(this.buildEndpoint(x.room,{sessionId:M.sessionId})),[2,new Promise(function(B,he){var fe=function(ae,ie){return he(new R(ae,ie))};M.onError.once(fe),M.onJoin.once(function(){M.onError.remove(fe),B(M)})})]})})},T.prototype.createMatchMakeRequest=function(x,$,M,H){return M===void 0&&(M={}),o(this,void 0,void 0,function(){var B,he;return s(this,function(fe){switch(fe.label){case 0:return B=this.endpoint.replace("ws","http")+"/matchmake/"+x+"/"+$,this._auth&&this._auth.hasToken&&(M.token=this._auth.token),[4,y(B,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(M)})];case 1:if(he=fe.sent().data,he.error)throw new _e(he.error,he.code);return[2,this.consumeSeatReservation(he,H)]}})})},T.prototype.createRoom=function(x,$){return new se(x,$)},T.prototype.buildEndpoint=function(x,$){$===void 0&&($={});var M=[];for(var H in $)!$.hasOwnProperty(H)||M.push(H+"="+$[H]);return this.endpoint+"/"+x.processId+"/"+x.roomId+"?"+M.join("&")},T}(),ge=function(){function T(){}return T.prototype.setState=function(x){this.state.decode(x)},T.prototype.getState=function(){return this.state},T.prototype.patch=function(x){this.state.decode(x)},T.prototype.teardown=function(){var x,$;($=(x=this.state)===null||x===void 0?void 0:x.$changes)===null||$===void 0||$.root.clearRefs()},T.prototype.handshake=function(x,$){if(this.state){var M=new re.Reflection;M.decode(x,$)}else this.state=re.Reflection.decode(x,$)},T}(),Ie=function(){function T(){}return T.prototype.setState=function(x){},T.prototype.getState=function(){return null},T.prototype.patch=function(x){},T.prototype.teardown=function(){},T.prototype.handshake=function(x){},T}();me("schema",ge),me("none",Ie),t.Auth=G,t.Client=be,t.Room=se,t.SchemaSerializer=ge,t.registerSerializer=me,Object.defineProperty(t,"__esModule",{value:!0})})})(colyseus,colyseus.exports);const localPlayer=writable({uuid:"",sessionId:"",name:"",profile:{}}),players=writable({}),chatMessages=writable([]),showTarget=writable(!1),targetX=writable(0),targetY=writable(0),GAME_SERVER_URL="wss://open.eyebeam.dev";let moveTo={},goToRoom={},enterArticle={},leaveArticle={},submitChat={};const gameClient=new colyseus.exports.Client(GAME_SERVER_URL),connectToGameServer=r=>new Promise((e,t)=>{gameClient.joinOrCreate("game",r).then(n=>{n.state.players.onRemove=(a,o)=>{players.update(s=>(delete s[a.uuid],s))},n.state.players.onAdd=(a,o)=>{players.update(s=>(s[a.uuid]={name:a.name,x:a.x,y:a.y,room:a.room,npc:a.npc,inTransit:!1,self:a.uuid===get_store_value(localPlayer).uuid},s)),a.uuid===get_store_value(localPlayer).uuid&&localPlayer.update(s=>(s.sessionId=o,s.name=a.name,s)),a.onChange=s=>{get_store_value(players)[a.uuid].room!==a.room?(players.update(c=>(c[a.uuid].name=a.name,c[a.uuid].shape=a.shape,c[a.uuid].room=a.room,c[a.uuid].inTransit=!0,c[a.uuid].viewing=a.viewing,c)),setTimeout(()=>{players.update(c=>(c[a.uuid].inTransit=!1,c))},1e3)):players.update(c=>(c[a.uuid].name=a.name,c[a.uuid].shape=a.shape,c[a.uuid].viewing=a.viewing,c)),!(a.uuid===get_store_value(localPlayer).uuid&&a.path.keyboardNavigation)&&players.update(c=>(c[a.uuid].x=a.x,c[a.uuid].y=a.y,c))}},n.onMessage("banned",a=>{}),moveTo=(a,o,s)=>{showTarget.set(!1),s?n.send("go",{x:a,y:o,keyboardNavigation:!0}):n.send("go",{x:a,y:o,originX:get_store_value(players)[get_store_value(localPlayer).uuid].x,originY:get_store_value(players)[get_store_value(localPlayer).uuid].y,keyboardNavigation:!1})},goToRoom=a=>{console.log(a),n.send("changeRoom",{id:a.id,x:a.x,y:a.y})},enterArticle=a=>{console.log("ENTER",a),n.send("enterArticle",{id:a._id})},leaveArticle=()=>{console.log("LEAVE"),n.send("leaveArticle")},n.state.messages.onAdd=a=>{chatMessages.update(o=>(o.push(a),o))},submitChat=(a,o)=>{console.log("submitting chat");try{n.send("submitChatMessage",{msgId:nanoid(),uuid:get_store_value(localPlayer).uuid,name:get_store_value(players)[get_store_value(localPlayer).uuid].name,text:a.detail.text,room:o._id})}catch(s){console.dir(s)}},n.onLeave(a=>{const o="Disconnected from server. Code: "+a;console.log(o)}),n.onError((a,o)=>{console.error("Gameserver error:",o)}),e()}).catch(n=>{console.dir(n),n.code==4215,t(n)})});var Avatar_svelte_svelte_type_style_lang="";function create_fragment$I(r){let e,t,n,a,o,s,c;return{c(){e=element("div"),t=element("img"),this.h()},l(u){e=claim_element(u,"DIV",{class:!0,id:!0,alt:!0,style:!0});var d=children(e);t=claim_element(d,"IMG",{src:!0,class:!0}),d.forEach(detach),this.h()},h(){src_url_equal(t.src,n=r[6]&&r[6].imageUrl?r[6].imageUrl:sample_1(r[1]).imageUrl)||attr(t,"src",n),attr(t,"class","svelte-zqf5vo"),attr(e,"class","avatar svelte-zqf5vo"),attr(e,"id",r[2]),attr(e,"alt",a=r[0].name),attr(e,"style",o="transform: translateY("+r[4]+"px) translateX("+r[5]+"px)"),toggle_class(e,"self",r[0].self)},m(u,d){insert_hydration(u,e,d),append_hydration(e,t),r[8](e),c=!0},p(u,[d]){(!c||d&2&&!src_url_equal(t.src,n=u[6]&&u[6].imageUrl?u[6].imageUrl:sample_1(u[1]).imageUrl))&&attr(t,"src",n),(!c||d&4)&&attr(e,"id",u[2]),(!c||d&1&&a!==(a=u[0].name))&&attr(e,"alt",a),(!c||d&48&&o!==(o="transform: translateY("+u[4]+"px) translateX("+u[5]+"px)"))&&attr(e,"style",o),d&1&&toggle_class(e,"self",u[0].self)},i(u){c||(add_render_callback(()=>{s||(s=create_bidirectional_transition(e,scale,{},!0)),s.run(1)}),c=!0)},o(u){s||(s=create_bidirectional_transition(e,scale,{},!1)),s.run(0),c=!1},d(u){u&&detach(e),r[8](null),u&&s&&s.end()}}}function instance$B(r,e,t){let n;component_subscribe(r,chatMessages,S=>t(7,n=S));let a={},o={};const s=S=>{a.popper&&(a.hide(),a.destroy(),clearTimeout(o)),m&&m.nodeName&&(a=tippy(m,{content:S.text,arrow:!1,offset:[0,5],sticky:!0,animation:"fade",inertia:!0,theme:"chat",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}),a.show(),o=setTimeout(()=>{a.hide(),setTimeout(()=>{a.destroy()},500)},4e3))};let{player:c={}}=e,{avatars:u=[]}=e,{key:d=""}=e;console.log("avatars",u),console.log("player",c);let m={},l=u.find(S=>S._id===c.shape),f=c.y*GRID_SIZE,_=c.x*GRID_SIZE;onMount(async()=>{c.self||tippy(m,{content:c.name,arrow:!1,offset:[0,5],theme:"name",hideOnClick:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}})});function b(S){binding_callbacks[S?"unshift":"push"](()=>{m=S,t(3,m)})}return r.$$set=S=>{"player"in S&&t(0,c=S.player),"avatars"in S&&t(1,u=S.avatars),"key"in S&&t(2,d=S.key)},r.$$.update=()=>{if(r.$$.dirty&132){let S=n[n.length-1];S&&S.uuid==d&&Date.now()-S.timestamp<5e3&&s(S)}r.$$.dirty&1&&(t(4,f=c.y*GRID_SIZE),t(5,_=c.x*GRID_SIZE))},[c,u,d,m,f,_,l,n,b]}class Avatar extends SvelteComponent{constructor(e){super(),init(this,e,instance$B,create_fragment$I,safe_not_equal,{player:0,avatars:1,key:2})}}function get_each_context$a(r,e,t){const n=r.slice();return n[3]=e[t][0],n[4]=e[t][1],n}function create_if_block$m(r){let e,t;return e=new Avatar({props:{player:r[4],key:r[3],avatars:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.player=n[4]),a&1&&(o.key=n[3]),a&4&&(o.avatars=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$a(r,e){let t,n,a,o=e[4].room===e[1]&&!e[4].inTransit&&create_if_block$m(e);return{key:r,first:null,c(){t=empty(),o&&o.c(),n=empty(),this.h()},l(s){t=empty(),o&&o.l(s),n=empty(),this.h()},h(){this.first=t},m(s,c){insert_hydration(s,t,c),o&&o.m(s,c),insert_hydration(s,n,c),a=!0},p(s,c){e=s,e[4].room===e[1]&&!e[4].inTransit?o?(o.p(e,c),c&3&&transition_in(o,1)):(o=create_if_block$m(e),o.c(),transition_in(o,1),o.m(n.parentNode,n)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(s){a||(transition_in(o),a=!0)},o(s){transition_out(o),a=!1},d(s){s&&detach(t),o&&o.d(s),s&&detach(n)}}}function create_fragment$H(r){let e=[],t=new Map,n,a,o=Object.entries(r[0]);const s=c=>c[3];for(let c=0;c<o.length;c+=1){let u=get_each_context$a(r,o,c),d=s(u);t.set(d,e[c]=create_each_block$a(d,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=empty()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);n=empty()},m(c,u){for(let d=0;d<e.length;d+=1)e[d].m(c,u);insert_hydration(c,n,u),a=!0},p(c,[u]){u&7&&(o=Object.entries(c[0]),group_outros(),e=update_keyed_each(e,u,s,1,c,o,t,n.parentNode,outro_and_destroy_block,create_each_block$a,n,get_each_context$a),check_outros())},i(c){if(!a){for(let u=0;u<o.length;u+=1)transition_in(e[u]);a=!0}},o(c){for(let u=0;u<e.length;u+=1)transition_out(e[u]);a=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&detach(n)}}}function instance$A(r,e,t){let{players:n={}}=e,{currentRoomId:a=""}=e,{avatars:o=[]}=e;return r.$$set=s=>{"players"in s&&t(0,n=s.players),"currentRoomId"in s&&t(1,a=s.currentRoomId),"avatars"in s&&t(2,o=s.avatars)},[n,a,o]}class Players extends SvelteComponent{constructor(e){super(),init(this,e,instance$A,create_fragment$H,safe_not_equal,{players:0,currentRoomId:1,avatars:2})}}var Object_svelte_svelte_type_style_lang="";function create_if_block$l(r){let e,t;return{c(){e=element("img"),this.h()},l(n){e=claim_element(n,"IMG",{src:!0,class:!0}),this.h()},h(){src_url_equal(e.src,t=urlFor(r[0].iconImage).quality(100).height(300).url())||attr(e,"src",t),attr(e,"class","svelte-1qmh4za")},m(n,a){insert_hydration(n,e,a)},p(n,a){a&1&&!src_url_equal(e.src,t=urlFor(n[0].iconImage).quality(100).height(300).url())&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_fragment$G(r){let e,t,n,a,o,s,c,u=r[0].iconImage&&create_if_block$l(r);return{c(){e=element("div"),u&&u.c(),this.h()},l(d){e=claim_element(d,"DIV",{class:!0,id:!0,alt:!0,style:!0});var m=children(e);u&&u.l(m),m.forEach(detach),this.h()},h(){attr(e,"class","object svelte-1qmh4za"),attr(e,"id",t=r[0]._id),attr(e,"alt",n=r[0].title),attr(e,"style",r[2]),toggle_class(e,"static",r[0].static),toggle_class(e,"image",r[0].iconImage)},m(d,m){insert_hydration(d,e,m),u&&u.m(e,null),r[5](e),o=!0,s||(c=listen$2(e,"click",r[6]),s=!0)},p(d,[m]){d[0].iconImage?u?u.p(d,m):(u=create_if_block$l(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!o||m&1&&t!==(t=d[0]._id))&&attr(e,"id",t),(!o||m&1&&n!==(n=d[0].title))&&attr(e,"alt",n),m&1&&toggle_class(e,"static",d[0].static),m&1&&toggle_class(e,"image",d[0].iconImage)},i(d){o||(add_render_callback(()=>{a||(a=create_bidirectional_transition(e,fade,{},!0)),a.run(1)}),o=!0)},o(d){a||(a=create_bidirectional_transition(e,fade,{},!1)),a.run(0),o=!1},d(d){d&&detach(e),u&&u.d(),r[5](null),d&&a&&a.end(),s=!1,c()}}}function instance$z(r,e,t){let n;component_subscribe(r,showLabels,b=>t(4,n=b));let{object:a={}}=e,o={},s={},c=a.y*GRID_SIZE,u=a.x*GRID_SIZE,d=get_1(a,"dimensions.width",1)*GRID_SIZE,m=get_1(a,"dimensions.height",1)*GRID_SIZE;const l=`transform: translateY(${c}px) translateX(${u}px); width: ${d}px; height: ${m}px;`;onMount(async()=>{t(3,s=tippy(o,{content:a.title,arrow:!1,offset:[0,5],theme:a.static?"static":"name",hideOnClick:!1,sticky:!0,trigger:"manual",flip:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}))});function f(b){binding_callbacks[b?"unshift":"push"](()=>{o=b,t(1,o)})}const _=()=>{activeArticle.set(a)};return r.$$set=b=>{"object"in b&&t(0,a=b.object)},r.$$.update=()=>{r.$$.dirty&24&&s.popper&&(n?s.show():s.hide())},[a,o,l,s,n,f,_]}class Object$1 extends SvelteComponent{constructor(e){super(),init(this,e,instance$z,create_fragment$G,safe_not_equal,{object:0})}}function get_each_context$9(r,e,t){const n=r.slice();return n[1]=e[t],n}function create_each_block$9(r,e){let t,n,a;return n=new Object$1({props:{object:e[1]}}),{key:r,first:null,c(){t=empty(),create_component(n.$$.fragment),this.h()},l(o){t=empty(),claim_component(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,s){insert_hydration(o,t,s),mount_component(n,o,s),a=!0},p(o,s){e=o;const c={};s&1&&(c.object=e[1]),n.$set(c)},i(o){a||(transition_in(n.$$.fragment,o),a=!0)},o(o){transition_out(n.$$.fragment,o),a=!1},d(o){o&&detach(t),destroy_component(n,o)}}}function create_fragment$F(r){let e=[],t=new Map,n,a,o=r[0];const s=c=>c[1]._id;for(let c=0;c<o.length;c+=1){let u=get_each_context$9(r,o,c),d=s(u);t.set(d,e[c]=create_each_block$9(d,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=empty()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);n=empty()},m(c,u){for(let d=0;d<e.length;d+=1)e[d].m(c,u);insert_hydration(c,n,u),a=!0},p(c,[u]){u&1&&(o=c[0],group_outros(),e=update_keyed_each(e,u,s,1,c,o,t,n.parentNode,outro_and_destroy_block,create_each_block$9,n,get_each_context$9),check_outros())},i(c){if(!a){for(let u=0;u<o.length;u+=1)transition_in(e[u]);a=!0}},o(c){for(let u=0;u<e.length;u+=1)transition_out(e[u]);a=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&detach(n)}}}function instance$y(r,e,t){let{objects:n={}}=e;return r.$$set=a=>{"objects"in a&&t(0,n=a.objects)},[n]}class Objects extends SvelteComponent{constructor(e){super(),init(this,e,instance$y,create_fragment$F,safe_not_equal,{objects:0})}}var Zone_svelte_svelte_type_style_lang="";function create_if_block$k(r){let e,t;return{c(){e=element("img"),this.h()},l(n){e=claim_element(n,"IMG",{src:!0}),this.h()},h(){src_url_equal(e.src,t=urlFor(r[0].backgroundImage).quality(100).url())||attr(e,"src",t)},m(n,a){insert_hydration(n,e,a)},p(n,a){a&1&&!src_url_equal(e.src,t=urlFor(n[0].backgroundImage).quality(100).url())&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_fragment$E(r){let e,t,n,a,o,s=r[0].backgroundImage&&create_if_block$k(r);return{c(){e=element("div"),s&&s.c(),this.h()},l(c){e=claim_element(c,"DIV",{class:!0,id:!0,alt:!0,style:!0});var u=children(e);s&&s.l(u),u.forEach(detach),this.h()},h(){attr(e,"class","zone svelte-1sqo6n0"),attr(e,"id",t=r[0]._id),attr(e,"alt",n=r[0].title),attr(e,"style",r[2])},m(c,u){insert_hydration(c,e,u),s&&s.m(e,null),r[5](e),o=!0},p(c,[u]){c[0].backgroundImage?s?s.p(c,u):(s=create_if_block$k(c),s.c(),s.m(e,null)):s&&(s.d(1),s=null),(!o||u&1&&t!==(t=c[0]._id))&&attr(e,"id",t),(!o||u&1&&n!==(n=c[0].title))&&attr(e,"alt",n)},i(c){o||(add_render_callback(()=>{a||(a=create_bidirectional_transition(e,fade,{},!0)),a.run(1)}),o=!0)},o(c){a||(a=create_bidirectional_transition(e,fade,{},!1)),a.run(0),o=!1},d(c){c&&detach(e),s&&s.d(),r[5](null),c&&a&&a.end()}}}function instance$x(r,e,t){let n;component_subscribe(r,showLabels,_=>t(4,n=_));let{zone:a={}}=e,o={},s={},c=a.y*GRID_SIZE,u=a.x*GRID_SIZE,d=get_1(a,"dimensions.width",1)*GRID_SIZE,m=get_1(a,"dimensions.height",1)*GRID_SIZE;const l=`transform: translateY(${c}px) translateX(${u}px); width: ${d}px; height: ${m}px;};`;onMount(async()=>{t(3,s=tippy(o,{content:a.title,arrow:!1,offset:[0,5],theme:"name",hideOnClick:!1,sticky:!0,trigger:"manual",flip:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}))});function f(_){binding_callbacks[_?"unshift":"push"](()=>{o=_,t(1,o)})}return r.$$set=_=>{"zone"in _&&t(0,a=_.zone)},r.$$.update=()=>{r.$$.dirty&24&&s.popper&&(n?s.show():s.hide())},[a,o,l,s,n,f]}class Zone extends SvelteComponent{constructor(e){super(),init(this,e,instance$x,create_fragment$E,safe_not_equal,{zone:0})}}function get_each_context$8(r,e,t){const n=r.slice();return n[1]=e[t],n}function create_each_block$8(r,e){let t,n,a;return n=new Zone({props:{zone:e[1]}}),{key:r,first:null,c(){t=empty(),create_component(n.$$.fragment),this.h()},l(o){t=empty(),claim_component(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,s){insert_hydration(o,t,s),mount_component(n,o,s),a=!0},p(o,s){e=o;const c={};s&1&&(c.zone=e[1]),n.$set(c)},i(o){a||(transition_in(n.$$.fragment,o),a=!0)},o(o){transition_out(n.$$.fragment,o),a=!1},d(o){o&&detach(t),destroy_component(n,o)}}}function create_fragment$D(r){let e=[],t=new Map,n,a,o=r[0];const s=c=>c[1]._id;for(let c=0;c<o.length;c+=1){let u=get_each_context$8(r,o,c),d=s(u);t.set(d,e[c]=create_each_block$8(d,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=empty()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);n=empty()},m(c,u){for(let d=0;d<e.length;d+=1)e[d].m(c,u);insert_hydration(c,n,u),a=!0},p(c,[u]){u&1&&(o=c[0],group_outros(),e=update_keyed_each(e,u,s,1,c,o,t,n.parentNode,outro_and_destroy_block,create_each_block$8,n,get_each_context$8),check_outros())},i(c){if(!a){for(let u=0;u<o.length;u+=1)transition_in(e[u]);a=!0}},o(c){for(let u=0;u<e.length;u+=1)transition_out(e[u]);a=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&detach(n)}}}function instance$w(r,e,t){let{zones:n={}}=e;return r.$$set=a=>{"zones"in a&&t(0,n=a.zones)},[n]}class Zones extends SvelteComponent{constructor(e){super(),init(this,e,instance$w,create_fragment$D,safe_not_equal,{zones:0})}}var howler={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var l=this||t;return l._counter=1e3,l._html5AudioPool=[],l.html5PoolSize=10,l._codecs={},l._howls=[],l._muted=!1,l._volume=1,l._canPlayEvent="canplaythrough",l._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,l.masterGain=null,l.noAudio=!1,l.usingWebAudio=!0,l.autoSuspend=!0,l.ctx=null,l.autoUnlock=!0,l._setup(),l},volume:function(l){var f=this||t;if(l=parseFloat(l),f.ctx||m(),typeof l!="undefined"&&l>=0&&l<=1){if(f._volume=l,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(l,t.ctx.currentTime);for(var _=0;_<f._howls.length;_++)if(!f._howls[_]._webAudio)for(var b=f._howls[_]._getSoundIds(),S=0;S<b.length;S++){var E=f._howls[_]._soundById(b[S]);E&&E._node&&(E._node.volume=E._volume*l)}return f}return f._volume},mute:function(l){var f=this||t;f.ctx||m(),f._muted=l,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(l?0:f._volume,t.ctx.currentTime);for(var _=0;_<f._howls.length;_++)if(!f._howls[_]._webAudio)for(var b=f._howls[_]._getSoundIds(),S=0;S<b.length;S++){var E=f._howls[_]._soundById(b[S]);E&&E._node&&(E._node.muted=l?!0:E._muted)}return f},stop:function(){for(var l=this||t,f=0;f<l._howls.length;f++)l._howls[f].stop();return l},unload:function(){for(var l=this||t,f=l._howls.length-1;f>=0;f--)l._howls[f].unload();return l.usingWebAudio&&l.ctx&&typeof l.ctx.close!="undefined"&&(l.ctx.close(),l.ctx=null,m()),l},codecs:function(l){return(this||t)._codecs[l.replace(/^x-/,"")]},_setup:function(){var l=this||t;if(l.state=l.ctx&&l.ctx.state||"suspended",l._autoSuspend(),!l.usingWebAudio)if(typeof Audio!="undefined")try{var f=new Audio;typeof f.oncanplaythrough=="undefined"&&(l._canPlayEvent="canplay")}catch{l.noAudio=!0}else l.noAudio=!0;try{var f=new Audio;f.muted&&(l.noAudio=!0)}catch{}return l.noAudio||l._setupCodecs(),l},_setupCodecs:function(){var l=this||t,f=null;try{f=typeof Audio!="undefined"?new Audio:null}catch{return l}if(!f||typeof f.canPlayType!="function")return l;var _=f.canPlayType("audio/mpeg;").replace(/^no$/,""),b=l._navigator?l._navigator.userAgent:"",S=b.match(/OPR\/([0-6].)/g),E=S&&parseInt(S[0].split("/")[1],10)<33,y=b.indexOf("Safari")!==-1&&b.indexOf("Chrome")===-1,k=b.match(/Version\/(.*?) /),I=y&&k&&parseInt(k[1],10)<15;return l._codecs={mp3:!!(!E&&(_||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!_,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!I&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!I&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},l},_unlockAudio:function(){var l=this||t;if(!(l._audioUnlocked||!l.ctx)){l._audioUnlocked=!1,l.autoUnlock=!1,!l._mobileUnloaded&&l.ctx.sampleRate!==44100&&(l._mobileUnloaded=!0,l.unload()),l._scratchBuffer=l.ctx.createBuffer(1,1,22050);var f=function(_){for(;l._html5AudioPool.length<l.html5PoolSize;)try{var b=new Audio;b._unlocked=!0,l._releaseHtml5Audio(b)}catch{l.noAudio=!0;break}for(var S=0;S<l._howls.length;S++)if(!l._howls[S]._webAudio)for(var E=l._howls[S]._getSoundIds(),y=0;y<E.length;y++){var k=l._howls[S]._soundById(E[y]);k&&k._node&&!k._node._unlocked&&(k._node._unlocked=!0,k._node.load())}l._autoResume();var I=l.ctx.createBufferSource();I.buffer=l._scratchBuffer,I.connect(l.ctx.destination),typeof I.start=="undefined"?I.noteOn(0):I.start(0),typeof l.ctx.resume=="function"&&l.ctx.resume(),I.onended=function(){I.disconnect(0),l._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var O=0;O<l._howls.length;O++)l._howls[O]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),l}},_obtainHtml5Audio:function(){var l=this||t;if(l._html5AudioPool.length)return l._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise!="undefined"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(l){var f=this||t;return l._unlocked&&f._html5AudioPool.push(l),f},_autoSuspend:function(){var l=this;if(!(!l.autoSuspend||!l.ctx||typeof l.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var f=0;f<l._howls.length;f++)if(l._howls[f]._webAudio){for(var _=0;_<l._howls[f]._sounds.length;_++)if(!l._howls[f]._sounds[_]._paused)return l}return l._suspendTimer&&clearTimeout(l._suspendTimer),l._suspendTimer=setTimeout(function(){if(!!l.autoSuspend){l._suspendTimer=null,l.state="suspending";var b=function(){l.state="suspended",l._resumeAfterSuspend&&(delete l._resumeAfterSuspend,l._autoResume())};l.ctx.suspend().then(b,b)}},3e4),l}},_autoResume:function(){var l=this;if(!(!l.ctx||typeof l.ctx.resume=="undefined"||!t.usingWebAudio))return l.state==="running"&&l.ctx.state!=="interrupted"&&l._suspendTimer?(clearTimeout(l._suspendTimer),l._suspendTimer=null):l.state==="suspended"||l.state==="running"&&l.ctx.state==="interrupted"?(l.ctx.resume().then(function(){l.state="running";for(var f=0;f<l._howls.length;f++)l._howls[f]._emit("resume")}),l._suspendTimer&&(clearTimeout(l._suspendTimer),l._suspendTimer=null)):l.state==="suspending"&&(l._resumeAfterSuspend=!0),l}};var t=new e,n=function(l){var f=this;if(!l.src||l.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(l)};n.prototype={init:function(l){var f=this;return t.ctx||m(),f._autoplay=l.autoplay||!1,f._format=typeof l.format!="string"?l.format:[l.format],f._html5=l.html5||!1,f._muted=l.mute||!1,f._loop=l.loop||!1,f._pool=l.pool||5,f._preload=typeof l.preload=="boolean"||l.preload==="metadata"?l.preload:!0,f._rate=l.rate||1,f._sprite=l.sprite||{},f._src=typeof l.src!="string"?l.src:[l.src],f._volume=l.volume!==void 0?l.volume:1,f._xhr={method:l.xhr&&l.xhr.method?l.xhr.method:"GET",headers:l.xhr&&l.xhr.headers?l.xhr.headers:null,withCredentials:l.xhr&&l.xhr.withCredentials?l.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=l.onend?[{fn:l.onend}]:[],f._onfade=l.onfade?[{fn:l.onfade}]:[],f._onload=l.onload?[{fn:l.onload}]:[],f._onloaderror=l.onloaderror?[{fn:l.onloaderror}]:[],f._onplayerror=l.onplayerror?[{fn:l.onplayerror}]:[],f._onpause=l.onpause?[{fn:l.onpause}]:[],f._onplay=l.onplay?[{fn:l.onplay}]:[],f._onstop=l.onstop?[{fn:l.onstop}]:[],f._onmute=l.onmute?[{fn:l.onmute}]:[],f._onvolume=l.onvolume?[{fn:l.onvolume}]:[],f._onrate=l.onrate?[{fn:l.onrate}]:[],f._onseek=l.onseek?[{fn:l.onseek}]:[],f._onunlock=l.onunlock?[{fn:l.onunlock}]:[],f._onresume=[],f._webAudio=t.usingWebAudio&&!f._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var l=this,f=null;if(t.noAudio){l._emit("loaderror",null,"No audio support.");return}typeof l._src=="string"&&(l._src=[l._src]);for(var _=0;_<l._src.length;_++){var b,S;if(l._format&&l._format[_])b=l._format[_];else{if(S=l._src[_],typeof S!="string"){l._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}b=/^data:audio\/([^;,]+);/i.exec(S),b||(b=/\.([^.]+)$/.exec(S.split("?",1)[0])),b&&(b=b[1].toLowerCase())}if(b||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),b&&t.codecs(b)){f=l._src[_];break}}if(!f){l._emit("loaderror",null,"No codec support for selected audio sources.");return}return l._src=f,l._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(l._html5=!0,l._webAudio=!1),new a(l),l._webAudio&&s(l),l},play:function(l,f){var _=this,b=null;if(typeof l=="number")b=l,l=null;else{if(typeof l=="string"&&_._state==="loaded"&&!_._sprite[l])return null;if(typeof l=="undefined"&&(l="__default",!_._playLock)){for(var S=0,E=0;E<_._sounds.length;E++)_._sounds[E]._paused&&!_._sounds[E]._ended&&(S++,b=_._sounds[E]._id);S===1?l=null:b=null}}var y=b?_._soundById(b):_._inactiveSound();if(!y)return null;if(b&&!l&&(l=y._sprite||"__default"),_._state!=="loaded"){y._sprite=l,y._ended=!1;var k=y._id;return _._queue.push({event:"play",action:function(){_.play(k)}}),k}if(b&&!y._paused)return f||_._loadQueue("play"),y._id;_._webAudio&&t._autoResume();var I=Math.max(0,y._seek>0?y._seek:_._sprite[l][0]/1e3),O=Math.max(0,(_._sprite[l][0]+_._sprite[l][1])/1e3-I),D=O*1e3/Math.abs(y._rate),R=_._sprite[l][0]/1e3,P=(_._sprite[l][0]+_._sprite[l][1])/1e3;y._sprite=l,y._ended=!1;var W=function(){y._paused=!1,y._seek=I,y._start=R,y._stop=P,y._loop=!!(y._loop||_._sprite[l][2])};if(I>=P){_._ended(y);return}var V=y._node;if(_._webAudio){var L=function(){_._playLock=!1,W(),_._refreshBuffer(y);var Q=y._muted||_._muted?0:y._volume;V.gain.setValueAtTime(Q,t.ctx.currentTime),y._playStart=t.ctx.currentTime,typeof V.bufferSource.start=="undefined"?y._loop?V.bufferSource.noteGrainOn(0,I,86400):V.bufferSource.noteGrainOn(0,I,O):y._loop?V.bufferSource.start(0,I,86400):V.bufferSource.start(0,I,O),D!==1/0&&(_._endTimers[y._id]=setTimeout(_._ended.bind(_,y),D)),f||setTimeout(function(){_._emit("play",y._id),_._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?L():(_._playLock=!0,_.once("resume",L),_._clearTimer(y._id))}else{var j=function(){V.currentTime=I,V.muted=y._muted||_._muted||t._muted||V.muted,V.volume=y._volume*t.volume(),V.playbackRate=y._rate;try{var Q=V.play();if(Q&&typeof Promise!="undefined"&&(Q instanceof Promise||typeof Q.then=="function")?(_._playLock=!0,W(),Q.then(function(){_._playLock=!1,V._unlocked=!0,f?_._loadQueue():_._emit("play",y._id)}).catch(function(){_._playLock=!1,_._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):f||(_._playLock=!1,W(),_._emit("play",y._id)),V.playbackRate=y._rate,V.paused){_._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}l!=="__default"||y._loop?_._endTimers[y._id]=setTimeout(_._ended.bind(_,y),D):(_._endTimers[y._id]=function(){_._ended(y),V.removeEventListener("ended",_._endTimers[y._id],!1)},V.addEventListener("ended",_._endTimers[y._id],!1))}catch(F){_._emit("playerror",y._id,F)}};V.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(V.src=_._src,V.load());var z=window&&window.ejecta||!V.readyState&&t._navigator.isCocoonJS;if(V.readyState>=3||z)j();else{_._playLock=!0,_._state="loading";var q=function(){_._state="loaded",j(),V.removeEventListener(t._canPlayEvent,q,!1)};V.addEventListener(t._canPlayEvent,q,!1),_._clearTimer(y._id)}}return y._id},pause:function(l){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(l)}}),f;for(var _=f._getSoundIds(l),b=0;b<_.length;b++){f._clearTimer(_[b]);var S=f._soundById(_[b]);if(S&&!S._paused&&(S._seek=f.seek(_[b]),S._rateSeek=0,S._paused=!0,f._stopFade(_[b]),S._node))if(f._webAudio){if(!S._node.bufferSource)continue;typeof S._node.bufferSource.stop=="undefined"?S._node.bufferSource.noteOff(0):S._node.bufferSource.stop(0),f._cleanBuffer(S._node)}else(!isNaN(S._node.duration)||S._node.duration===1/0)&&S._node.pause();arguments[1]||f._emit("pause",S?S._id:null)}return f},stop:function(l,f){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"stop",action:function(){_.stop(l)}}),_;for(var b=_._getSoundIds(l),S=0;S<b.length;S++){_._clearTimer(b[S]);var E=_._soundById(b[S]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,_._stopFade(b[S]),E._node&&(_._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop=="undefined"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),_._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&_._clearSound(E._node))),f||_._emit("stop",E._id))}return _},mute:function(l,f){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"mute",action:function(){_.mute(l,f)}}),_;if(typeof f=="undefined")if(typeof l=="boolean")_._muted=l;else return _._muted;for(var b=_._getSoundIds(f),S=0;S<b.length;S++){var E=_._soundById(b[S]);E&&(E._muted=l,E._interval&&_._stopFade(E._id),_._webAudio&&E._node?E._node.gain.setValueAtTime(l?0:E._volume,t.ctx.currentTime):E._node&&(E._node.muted=t._muted?!0:l),_._emit("mute",E._id))}return _},volume:function(){var l=this,f=arguments,_,b;if(f.length===0)return l._volume;if(f.length===1||f.length===2&&typeof f[1]=="undefined"){var S=l._getSoundIds(),E=S.indexOf(f[0]);E>=0?b=parseInt(f[0],10):_=parseFloat(f[0])}else f.length>=2&&(_=parseFloat(f[0]),b=parseInt(f[1],10));var y;if(typeof _!="undefined"&&_>=0&&_<=1){if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"volume",action:function(){l.volume.apply(l,f)}}),l;typeof b=="undefined"&&(l._volume=_),b=l._getSoundIds(b);for(var k=0;k<b.length;k++)y=l._soundById(b[k]),y&&(y._volume=_,f[2]||l._stopFade(b[k]),l._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(_,t.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=_*t.volume()),l._emit("volume",y._id))}else return y=b?l._soundById(b):l._sounds[0],y?y._volume:0;return l},fade:function(l,f,_,b){var S=this;if(S._state!=="loaded"||S._playLock)return S._queue.push({event:"fade",action:function(){S.fade(l,f,_,b)}}),S;l=Math.min(Math.max(0,parseFloat(l)),1),f=Math.min(Math.max(0,parseFloat(f)),1),_=parseFloat(_),S.volume(l,b);for(var E=S._getSoundIds(b),y=0;y<E.length;y++){var k=S._soundById(E[y]);if(k){if(b||S._stopFade(E[y]),S._webAudio&&!k._muted){var I=t.ctx.currentTime,O=I+_/1e3;k._volume=l,k._node.gain.setValueAtTime(l,I),k._node.gain.linearRampToValueAtTime(f,O)}S._startFadeInterval(k,l,f,_,E[y],typeof b=="undefined")}}return S},_startFadeInterval:function(l,f,_,b,S,E){var y=this,k=f,I=_-f,O=Math.abs(I/.01),D=Math.max(4,O>0?b/O:b),R=Date.now();l._fadeTo=_,l._interval=setInterval(function(){var P=(Date.now()-R)/b;R=Date.now(),k+=I*P,k=Math.round(k*100)/100,I<0?k=Math.max(_,k):k=Math.min(_,k),y._webAudio?l._volume=k:y.volume(k,l._id,!0),E&&(y._volume=k),(_<f&&k<=_||_>f&&k>=_)&&(clearInterval(l._interval),l._interval=null,l._fadeTo=null,y.volume(_,l._id),y._emit("fade",l._id))},D)},_stopFade:function(l){var f=this,_=f._soundById(l);return _&&_._interval&&(f._webAudio&&_._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(_._interval),_._interval=null,f.volume(_._fadeTo,l),_._fadeTo=null,f._emit("fade",l)),f},loop:function(){var l=this,f=arguments,_,b,S;if(f.length===0)return l._loop;if(f.length===1)if(typeof f[0]=="boolean")_=f[0],l._loop=_;else return S=l._soundById(parseInt(f[0],10)),S?S._loop:!1;else f.length===2&&(_=f[0],b=parseInt(f[1],10));for(var E=l._getSoundIds(b),y=0;y<E.length;y++)S=l._soundById(E[y]),S&&(S._loop=_,l._webAudio&&S._node&&S._node.bufferSource&&(S._node.bufferSource.loop=_,_&&(S._node.bufferSource.loopStart=S._start||0,S._node.bufferSource.loopEnd=S._stop,l.playing(E[y])&&(l.pause(E[y],!0),l.play(E[y],!0)))));return l},rate:function(){var l=this,f=arguments,_,b;if(f.length===0)b=l._sounds[0]._id;else if(f.length===1){var S=l._getSoundIds(),E=S.indexOf(f[0]);E>=0?b=parseInt(f[0],10):_=parseFloat(f[0])}else f.length===2&&(_=parseFloat(f[0]),b=parseInt(f[1],10));var y;if(typeof _=="number"){if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"rate",action:function(){l.rate.apply(l,f)}}),l;typeof b=="undefined"&&(l._rate=_),b=l._getSoundIds(b);for(var k=0;k<b.length;k++)if(y=l._soundById(b[k]),y){l.playing(b[k])&&(y._rateSeek=l.seek(b[k]),y._playStart=l._webAudio?t.ctx.currentTime:y._playStart),y._rate=_,l._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(_,t.ctx.currentTime):y._node&&(y._node.playbackRate=_);var I=l.seek(b[k]),O=(l._sprite[y._sprite][0]+l._sprite[y._sprite][1])/1e3-I,D=O*1e3/Math.abs(y._rate);(l._endTimers[b[k]]||!y._paused)&&(l._clearTimer(b[k]),l._endTimers[b[k]]=setTimeout(l._ended.bind(l,y),D)),l._emit("rate",y._id)}}else return y=l._soundById(b),y?y._rate:l._rate;return l},seek:function(){var l=this,f=arguments,_,b;if(f.length===0)l._sounds.length&&(b=l._sounds[0]._id);else if(f.length===1){var S=l._getSoundIds(),E=S.indexOf(f[0]);E>=0?b=parseInt(f[0],10):l._sounds.length&&(b=l._sounds[0]._id,_=parseFloat(f[0]))}else f.length===2&&(_=parseFloat(f[0]),b=parseInt(f[1],10));if(typeof b=="undefined")return 0;if(typeof _=="number"&&(l._state!=="loaded"||l._playLock))return l._queue.push({event:"seek",action:function(){l.seek.apply(l,f)}}),l;var y=l._soundById(b);if(y)if(typeof _=="number"&&_>=0){var k=l.playing(b);k&&l.pause(b,!0),y._seek=_,y._ended=!1,l._clearTimer(b),!l._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=_);var I=function(){k&&l.play(b,!0),l._emit("seek",b)};if(k&&!l._webAudio){var O=function(){l._playLock?setTimeout(O,0):I()};setTimeout(O,0)}else I()}else if(l._webAudio){var D=l.playing(b)?t.ctx.currentTime-y._playStart:0,R=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(R+D*Math.abs(y._rate))}else return y._node.currentTime;return l},playing:function(l){var f=this;if(typeof l=="number"){var _=f._soundById(l);return _?!_._paused:!1}for(var b=0;b<f._sounds.length;b++)if(!f._sounds[b]._paused)return!0;return!1},duration:function(l){var f=this,_=f._duration,b=f._soundById(l);return b&&(_=f._sprite[b._sprite][1]/1e3),_},state:function(){return this._state},unload:function(){for(var l=this,f=l._sounds,_=0;_<f.length;_++)f[_]._paused||l.stop(f[_]._id),l._webAudio||(l._clearSound(f[_]._node),f[_]._node.removeEventListener("error",f[_]._errorFn,!1),f[_]._node.removeEventListener(t._canPlayEvent,f[_]._loadFn,!1),f[_]._node.removeEventListener("ended",f[_]._endFn,!1),t._releaseHtml5Audio(f[_]._node)),delete f[_]._node,l._clearTimer(f[_]._id);var b=t._howls.indexOf(l);b>=0&&t._howls.splice(b,1);var S=!0;for(_=0;_<t._howls.length;_++)if(t._howls[_]._src===l._src||l._src.indexOf(t._howls[_]._src)>=0){S=!1;break}return o&&S&&delete o[l._src],t.noAudio=!1,l._state="unloaded",l._sounds=[],l=null,null},on:function(l,f,_,b){var S=this,E=S["_on"+l];return typeof f=="function"&&E.push(b?{id:_,fn:f,once:b}:{id:_,fn:f}),S},off:function(l,f,_){var b=this,S=b["_on"+l],E=0;if(typeof f=="number"&&(_=f,f=null),f||_)for(E=0;E<S.length;E++){var y=_===S[E].id;if(f===S[E].fn&&y||!f&&y){S.splice(E,1);break}}else if(l)b["_on"+l]=[];else{var k=Object.keys(b);for(E=0;E<k.length;E++)k[E].indexOf("_on")===0&&Array.isArray(b[k[E]])&&(b[k[E]]=[])}return b},once:function(l,f,_){var b=this;return b.on(l,f,_,1),b},_emit:function(l,f,_){for(var b=this,S=b["_on"+l],E=S.length-1;E>=0;E--)(!S[E].id||S[E].id===f||l==="load")&&(setTimeout(function(y){y.call(this,f,_)}.bind(b,S[E].fn),0),S[E].once&&b.off(l,S[E].fn,S[E].id));return b._loadQueue(l),b},_loadQueue:function(l){var f=this;if(f._queue.length>0){var _=f._queue[0];_.event===l&&(f._queue.shift(),f._loadQueue()),l||_.action()}return f},_ended:function(l){var f=this,_=l._sprite;if(!f._webAudio&&l._node&&!l._node.paused&&!l._node.ended&&l._node.currentTime<l._stop)return setTimeout(f._ended.bind(f,l),100),f;var b=!!(l._loop||f._sprite[_][2]);if(f._emit("end",l._id),!f._webAudio&&b&&f.stop(l._id,!0).play(l._id),f._webAudio&&b){f._emit("play",l._id),l._seek=l._start||0,l._rateSeek=0,l._playStart=t.ctx.currentTime;var S=(l._stop-l._start)*1e3/Math.abs(l._rate);f._endTimers[l._id]=setTimeout(f._ended.bind(f,l),S)}return f._webAudio&&!b&&(l._paused=!0,l._ended=!0,l._seek=l._start||0,l._rateSeek=0,f._clearTimer(l._id),f._cleanBuffer(l._node),t._autoSuspend()),!f._webAudio&&!b&&f.stop(l._id,!0),f},_clearTimer:function(l){var f=this;if(f._endTimers[l]){if(typeof f._endTimers[l]!="function")clearTimeout(f._endTimers[l]);else{var _=f._soundById(l);_&&_._node&&_._node.removeEventListener("ended",f._endTimers[l],!1)}delete f._endTimers[l]}return f},_soundById:function(l){for(var f=this,_=0;_<f._sounds.length;_++)if(l===f._sounds[_]._id)return f._sounds[_];return null},_inactiveSound:function(){var l=this;l._drain();for(var f=0;f<l._sounds.length;f++)if(l._sounds[f]._ended)return l._sounds[f].reset();return new a(l)},_drain:function(){var l=this,f=l._pool,_=0,b=0;if(!(l._sounds.length<f)){for(b=0;b<l._sounds.length;b++)l._sounds[b]._ended&&_++;for(b=l._sounds.length-1;b>=0;b--){if(_<=f)return;l._sounds[b]._ended&&(l._webAudio&&l._sounds[b]._node&&l._sounds[b]._node.disconnect(0),l._sounds.splice(b,1),_--)}}},_getSoundIds:function(l){var f=this;if(typeof l=="undefined"){for(var _=[],b=0;b<f._sounds.length;b++)_.push(f._sounds[b]._id);return _}else return[l]},_refreshBuffer:function(l){var f=this;return l._node.bufferSource=t.ctx.createBufferSource(),l._node.bufferSource.buffer=o[f._src],l._panner?l._node.bufferSource.connect(l._panner):l._node.bufferSource.connect(l._node),l._node.bufferSource.loop=l._loop,l._loop&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop||0),l._node.bufferSource.playbackRate.setValueAtTime(l._rate,t.ctx.currentTime),f},_cleanBuffer:function(l){var f=this,_=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&l.bufferSource&&(l.bufferSource.onended=null,l.bufferSource.disconnect(0),_))try{l.bufferSource.buffer=t._scratchBuffer}catch{}return l.bufferSource=null,f},_clearSound:function(l){var f=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);f||(l.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(l){this._parent=l,this.init()};a.prototype={init:function(){var l=this,f=l._parent;return l._muted=f._muted,l._loop=f._loop,l._volume=f._volume,l._rate=f._rate,l._seek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++t._counter,f._sounds.push(l),l.create(),l},create:function(){var l=this,f=l._parent,_=t._muted||l._muted||l._parent._muted?0:l._volume;return f._webAudio?(l._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),l._node.gain.setValueAtTime(_,t.ctx.currentTime),l._node.paused=!0,l._node.connect(t.masterGain)):t.noAudio||(l._node=t._obtainHtml5Audio(),l._errorFn=l._errorListener.bind(l),l._node.addEventListener("error",l._errorFn,!1),l._loadFn=l._loadListener.bind(l),l._node.addEventListener(t._canPlayEvent,l._loadFn,!1),l._endFn=l._endListener.bind(l),l._node.addEventListener("ended",l._endFn,!1),l._node.src=f._src,l._node.preload=f._preload===!0?"auto":f._preload,l._node.volume=_*t.volume(),l._node.load()),l},reset:function(){var l=this,f=l._parent;return l._muted=f._muted,l._loop=f._loop,l._volume=f._volume,l._rate=f._rate,l._seek=0,l._rateSeek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++t._counter,l},_errorListener:function(){var l=this;l._parent._emit("loaderror",l._id,l._node.error?l._node.error.code:0),l._node.removeEventListener("error",l._errorFn,!1)},_loadListener:function(){var l=this,f=l._parent;f._duration=Math.ceil(l._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),l._node.removeEventListener(t._canPlayEvent,l._loadFn,!1)},_endListener:function(){var l=this,f=l._parent;f._duration===1/0&&(f._duration=Math.ceil(l._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(l)),l._node.removeEventListener("ended",l._endFn,!1)}};var o={},s=function(l){var f=l._src;if(o[f]){l._duration=o[f].duration,d(l);return}if(/^data:[^;]+;base64,/.test(f)){for(var _=atob(f.split(",")[1]),b=new Uint8Array(_.length),S=0;S<_.length;++S)b[S]=_.charCodeAt(S);u(b.buffer,l)}else{var E=new XMLHttpRequest;E.open(l._xhr.method,f,!0),E.withCredentials=l._xhr.withCredentials,E.responseType="arraybuffer",l._xhr.headers&&Object.keys(l._xhr.headers).forEach(function(y){E.setRequestHeader(y,l._xhr.headers[y])}),E.onload=function(){var y=(E.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){l._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}u(E.response,l)},E.onerror=function(){l._webAudio&&(l._html5=!0,l._webAudio=!1,l._sounds=[],delete o[f],l.load())},c(E)}},c=function(l){try{l.send()}catch{l.onerror()}},u=function(l,f){var _=function(){f._emit("loaderror",null,"Decoding audio data failed.")},b=function(S){S&&f._sounds.length>0?(o[f._src]=S,d(f,S)):_()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(l).then(b).catch(_):t.ctx.decodeAudioData(l,b,_)},d=function(l,f){f&&!l._duration&&(l._duration=f.duration),Object.keys(l._sprite).length===0&&(l._sprite={__default:[0,l._duration*1e3]}),l._state!=="loaded"&&(l._state="loaded",l._emit("load"),l._loadQueue())},m=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var l=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),f=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),_=f?parseInt(f[1],10):null;if(l&&_&&_<9){var b=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!b&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof commonjsGlobal!="undefined"?(commonjsGlobal.HowlerGlobal=e,commonjsGlobal.Howler=t,commonjsGlobal.Howl=n,commonjsGlobal.Sound=a):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var a=n._howls.length-1;a>=0;a--)n._howls[a].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,a){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(n=typeof n!="number"?o._pos[1]:n,a=typeof a!="number"?o._pos[2]:a,typeof t=="number")o._pos=[t,n,a],typeof o.ctx.listener.positionX!="undefined"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(t,n,a,o,s,c){var u=this;if(!u.ctx||!u.ctx.listener)return u;var d=u._orientation;if(n=typeof n!="number"?d[1]:n,a=typeof a!="number"?d[2]:a,o=typeof o!="number"?d[3]:o,s=typeof s!="number"?d[4]:s,c=typeof c!="number"?d[5]:c,typeof t=="number")u._orientation=[t,n,a,o,s,c],typeof u.ctx.listener.forwardX!="undefined"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,n,a,o,s,c);else return d;return u},Howl.prototype.init=function(t){return function(n){var a=this;return a._orientation=n.orientation||[1,0,0],a._stereo=n.stereo||null,a._pos=n.pos||null,a._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle!="undefined"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle!="undefined"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain!="undefined"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel!="undefined"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance!="undefined"?n.maxDistance:1e4,panningModel:typeof n.panningModel!="undefined"?n.panningModel:"HRTF",refDistance:typeof n.refDistance!="undefined"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor!="undefined"?n.rolloffFactor:1},a._onstereo=n.onstereo?[{fn:n.onstereo}]:[],a._onpos=n.onpos?[{fn:n.onpos}]:[],a._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,n)}}),a;var o=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof n=="undefined")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var s=a._getSoundIds(n),c=0;c<s.length;c++){var u=a._soundById(s[c]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,o),o==="spatial"?typeof u._panner.positionX!="undefined"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",u._id);else return u._stereo}return a},Howl.prototype.pos=function(t,n,a,o){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,n,a,o)}}),s;if(n=typeof n!="number"?0:n,a=typeof a!="number"?-.5:a,typeof o=="undefined")if(typeof t=="number")s._pos=[t,n,a];else return s._pos;for(var c=s._getSoundIds(o),u=0;u<c.length;u++){var d=s._soundById(c[u]);if(d)if(typeof t=="number")d._pos=[t,n,a],d._node&&((!d._panner||d._panner.pan)&&e(d,"spatial"),typeof d._panner.positionX!="undefined"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setPosition(t,n,a)),s._emit("pos",d._id);else return d._pos}return s},Howl.prototype.orientation=function(t,n,a,o){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,n,a,o)}}),s;if(n=typeof n!="number"?s._orientation[1]:n,a=typeof a!="number"?s._orientation[2]:a,typeof o=="undefined")if(typeof t=="number")s._orientation=[t,n,a];else return s._orientation;for(var c=s._getSoundIds(o),u=0;u<c.length;u++){var d=s._soundById(c[u]);if(d)if(typeof t=="number")d._orientation=[t,n,a],d._node&&(d._panner||(d._pos||(d._pos=s._pos||[0,0,-.5]),e(d,"spatial")),typeof d._panner.orientationX!="undefined"?(d._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setOrientation(t,n,a)),s._emit("orientation",d._id);else return d._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,a,o,s;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")a=n[0],typeof o=="undefined"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle!="undefined"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle!="undefined"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain!="undefined"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel!="undefined"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance!="undefined"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance!="undefined"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor!="undefined"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel!="undefined"?a.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(n[0],10)),s?s._pannerAttr:t._pannerAttr;else n.length===2&&(a=n[0],o=parseInt(n[1],10));for(var c=t._getSoundIds(o),u=0;u<c.length;u++)if(s=t._soundById(c[u]),s){var d=s._pannerAttr;d={coneInnerAngle:typeof a.coneInnerAngle!="undefined"?a.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle!="undefined"?a.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain!="undefined"?a.coneOuterGain:d.coneOuterGain,distanceModel:typeof a.distanceModel!="undefined"?a.distanceModel:d.distanceModel,maxDistance:typeof a.maxDistance!="undefined"?a.maxDistance:d.maxDistance,refDistance:typeof a.refDistance!="undefined"?a.refDistance:d.refDistance,rolloffFactor:typeof a.rolloffFactor!="undefined"?a.rolloffFactor:d.rolloffFactor,panningModel:typeof a.panningModel!="undefined"?a.panningModel:d.panningModel};var m=s._panner;m?(m.coneInnerAngle=d.coneInnerAngle,m.coneOuterAngle=d.coneOuterAngle,m.coneOuterGain=d.coneOuterGain,m.distanceModel=d.distanceModel,m.maxDistance=d.maxDistance,m.refDistance=d.refDistance,m.rolloffFactor=d.rolloffFactor,m.panningModel=d.panningModel):(s._pos||(s._pos=t._pos||[0,0,-.5]),e(s,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,a=n._parent;n._orientation=a._orientation,n._stereo=a._stereo,n._pos=a._pos,n._pannerAttr=a._pannerAttr,t.call(this),n._stereo?a.stereo(n._stereo):n._pos&&a.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,a=n._parent;return n._orientation=a._orientation,n._stereo=a._stereo,n._pos=a._pos,n._pannerAttr=a._pannerAttr,n._stereo?a.stereo(n._stereo):n._pos?a.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,a._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(howler);function instance$v(r,e,t){let{soundFile:n=!1}=e,a=!1,o={};const s=()=>{o&&o.playing&&(o.stop(),o.unload(),o={})};return onDestroy(async()=>{s()}),r.$$set=c=>{"soundFile"in c&&t(0,n=c.soundFile)},r.$$.update=()=>{r.$$.dirty&3&&n&&(t(1,a="https://cdn.sanity.io/files/58ueii0w/production/"+get_1(n,"asset._ref","").replace("file-","").replace("-mp3",".mp3")),s(),o=new howler.Howl({src:[a],loop:!0,autoplay:!0}))},[n,a]}class AmbientAudio extends SvelteComponent{constructor(e){super(),init(this,e,instance$v,null,safe_not_equal,{soundFile:0})}}var Portal_svelte_svelte_type_style_lang="";function create_if_block$j(r){let e,t;return{c(){e=element("img"),this.h()},l(n){e=claim_element(n,"IMG",{src:!0}),this.h()},h(){src_url_equal(e.src,t=urlFor(r[0].iconImage).quality(100).height(100).url())||attr(e,"src",t)},m(n,a){insert_hydration(n,e,a)},p(n,a){a&1&&!src_url_equal(e.src,t=urlFor(n[0].iconImage).quality(100).height(100).url())&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_fragment$C(r){let e,t,n,a,o,s=r[0].iconImage&&create_if_block$j(r);return{c(){e=element("div"),s&&s.c(),this.h()},l(c){e=claim_element(c,"DIV",{class:!0,id:!0,alt:!0,style:!0});var u=children(e);s&&s.l(u),u.forEach(detach),this.h()},h(){attr(e,"class","portal svelte-1ulo7kp"),attr(e,"id",t=r[0]._id),attr(e,"alt",n=r[0].title),attr(e,"style",r[2])},m(c,u){insert_hydration(c,e,u),s&&s.m(e,null),r[5](e),o=!0},p(c,[u]){c[0].iconImage?s?s.p(c,u):(s=create_if_block$j(c),s.c(),s.m(e,null)):s&&(s.d(1),s=null),(!o||u&1&&t!==(t=c[0]._id))&&attr(e,"id",t),(!o||u&1&&n!==(n=c[0].title))&&attr(e,"alt",n)},i(c){o||(add_render_callback(()=>{a||(a=create_bidirectional_transition(e,fade,{},!0)),a.run(1)}),o=!0)},o(c){a||(a=create_bidirectional_transition(e,fade,{},!1)),a.run(0),o=!1},d(c){c&&detach(e),s&&s.d(),r[5](null),c&&a&&a.end()}}}function instance$u(r,e,t){let n;component_subscribe(r,showLabels,l=>t(4,n=l));let{portal:a={}}=e,o={},s={},c=a.y*GRID_SIZE,u=a.x*GRID_SIZE;const d=`transform: translateY(${c}px) translateX(${u}px); width: ${GRID_SIZE}px; height: ${GRID_SIZE}px; background-color: ${get_1(a,"backgroundColor.hex","")}; background-image: url("${get_1(a,"bgImageUrl","")}");"`;onMount(async()=>{t(3,s=tippy(o,{content:"door to "+get_1(a,"targetArea.title",""),arrow:!1,offset:[0,5],theme:"name",hideOnClick:!1,sticky:!0,trigger:"manual",flip:!1,placement:"bottom",popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",enabled:!1}]}}))});function m(l){binding_callbacks[l?"unshift":"push"](()=>{o=l,t(1,o)})}return r.$$set=l=>{"portal"in l&&t(0,a=l.portal)},r.$$.update=()=>{r.$$.dirty&24&&s.popper&&(n?s.show():s.hide())},[a,o,d,s,n,m]}class Portal extends SvelteComponent{constructor(e){super(),init(this,e,instance$u,create_fragment$C,safe_not_equal,{portal:0})}}function get_each_context$7(r,e,t){const n=r.slice();return n[1]=e[t],n}function create_each_block$7(r,e){let t,n,a;return n=new Portal({props:{portal:e[1]}}),{key:r,first:null,c(){t=empty(),create_component(n.$$.fragment),this.h()},l(o){t=empty(),claim_component(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,s){insert_hydration(o,t,s),mount_component(n,o,s),a=!0},p(o,s){e=o;const c={};s&1&&(c.portal=e[1]),n.$set(c)},i(o){a||(transition_in(n.$$.fragment,o),a=!0)},o(o){transition_out(n.$$.fragment,o),a=!1},d(o){o&&detach(t),destroy_component(n,o)}}}function create_fragment$B(r){let e=[],t=new Map,n,a,o=r[0];const s=c=>c[1]._id;for(let c=0;c<o.length;c+=1){let u=get_each_context$7(r,o,c),d=s(u);t.set(d,e[c]=create_each_block$7(d,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=empty()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);n=empty()},m(c,u){for(let d=0;d<e.length;d+=1)e[d].m(c,u);insert_hydration(c,n,u),a=!0},p(c,[u]){u&1&&(o=c[0],group_outros(),e=update_keyed_each(e,u,s,1,c,o,t,n.parentNode,outro_and_destroy_block,create_each_block$7,n,get_each_context$7),check_outros())},i(c){if(!a){for(let u=0;u<o.length;u+=1)transition_in(e[u]);a=!0}},o(c){for(let u=0;u<e.length;u+=1)transition_out(e[u]);a=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&detach(n)}}}function instance$t(r,e,t){let{portals:n={}}=e;return r.$$set=a=>{"portals"in a&&t(0,n=a.portals)},[n]}class Portals extends SvelteComponent{constructor(e){super(),init(this,e,instance$t,create_fragment$B,safe_not_equal,{portals:0})}}var TargetMarker_svelte_svelte_type_style_lang="";function create_fragment$A(r){let e,t;return{c(){e=element("div"),this.h()},l(n){e=claim_element(n,"DIV",{class:!0,style:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"class","target svelte-sfd7q3"),attr(e,"style",t="top: "+r[1]+"px; left: "+r[0]+"px;")},m(n,a){insert_hydration(n,e,a)},p(n,[a]){a&3&&t!==(t="top: "+n[1]+"px; left: "+n[0]+"px;")&&attr(e,"style",t)},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function instance$s(r,e,t){let{x:n=0}=e,{y:a=0}=e;return r.$$set=o=>{"x"in o&&t(0,n=o.x),"y"in o&&t(1,a=o.y)},[n,a]}class TargetMarker extends SvelteComponent{constructor(e){super(),init(this,e,instance$s,create_fragment$A,safe_not_equal,{x:0,y:1})}}var Clock_svelte_svelte_type_style_lang="";function create_if_block$i(r){let e,t,n,a,o=r[2].description+"",s,c,u=r[0].name+"",d,m;return{c(){e=element("span"),t=text("It\u2019s "),n=text(r[1]),a=text(" and "),s=text(o),c=text(" in "),d=text(u)},l(l){e=claim_element(l,"SPAN",{});var f=children(e);t=claim_text(f,"It\u2019s "),n=claim_text(f,r[1]),a=claim_text(f," and "),s=claim_text(f,o),c=claim_text(f," in "),d=claim_text(f,u),f.forEach(detach)},m(l,f){insert_hydration(l,e,f),append_hydration(e,t),append_hydration(e,n),append_hydration(e,a),append_hydration(e,s),append_hydration(e,c),append_hydration(e,d)},p(l,f){f&2&&set_data(n,l[1]),f&4&&o!==(o=l[2].description+"")&&set_data(s,o),f&1&&u!==(u=l[0].name+"")&&set_data(d,u)},i(l){m||add_render_callback(()=>{m=create_in_transition(e,fade,{}),m.start()})},o:noop$1,d(l){l&&detach(e)}}}function create_fragment$z(r){let e,t=r[3]&&r[0].name&&create_if_block$i(r);return{c(){e=element("div"),t&&t.c(),this.h()},l(n){e=claim_element(n,"DIV",{class:!0});var a=children(e);t&&t.l(a),a.forEach(detach),this.h()},h(){attr(e,"class","clock svelte-13is0nm")},m(n,a){insert_hydration(n,e,a),t&&t.m(e,null)},p(n,[a]){n[3]&&n[0].name?t?(t.p(n,a),a&9&&transition_in(t,1)):(t=create_if_block$i(n),t.c(),transition_in(t,1),t.m(e,null)):t&&(t.d(1),t=null)},i(n){transition_in(t)},o:noop$1,d(n){n&&detach(e),t&&t.d()}}}function instance$r(r,e,t){let n;component_subscribe(r,activeCity,l=>t(0,n=l));const a="a9b67d6b5ed093b28c410750ef6a70cd";let o,s={description:"",temperature:0},c=!1;const u=()=>{let l=new Date;n.timezone&&t(1,o=new Intl.DateTimeFormat("en-US",{timeZone:n.timezone,hour:"numeric",minute:"numeric"}).format(l))};setInterval(u,1e4),u();const d=l=>inRange_1(l,200,299)?"stormy":inRange_1(l,300,599)?"rainy":inRange_1(l,600,699)?"snowy":l==701||l==711?"misty":l==721||l==731?"hazy":l==741?"foggy":inRange_1(l,801,899)?"cloudy":"clear",m=(l,f)=>{t(3,c=!1),l&&fetch("https://api.openweathermap.org/data/2.5/weather?q="+l+"&appid="+a).then(_=>_.json()).then(_=>{has_1(_,"weather[0].description")&&(t(2,s.description=d(_.weather[0].id),s),t(2,s.temperature=Math.round((_.main.temp-273.15)*9/5+32),s),t(3,c=!0))})};return r.$$.update=()=>{r.$$.dirty&1&&(u(),m(n.name))},[n,o,s,c]}class Clock extends SvelteComponent{constructor(e){super(),init(this,e,instance$r,create_fragment$z,safe_not_equal,{})}}var slugify$1={exports:{}};(function(r,e){(function(t,n,a){r.exports=a(),r.exports.default=a()})("slugify",commonjsGlobal,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xA2":"cent","\xA3":"pound","\xA4":"currency","\xA5":"yen","\xA9":"(c)","\xAA":"a","\xAE":"(r)","\xBA":"o","\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xC6":"AE","\xC7":"C","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xD0":"D","\xD1":"N","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xDD":"Y","\xDE":"TH","\xDF":"ss","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xE6":"ae","\xE7":"c","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xF0":"d","\xF1":"n","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xFD":"y","\xFE":"th","\xFF":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010C":"C","\u010D":"c","\u010E":"D","\u010F":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011A":"E","\u011B":"e","\u011E":"G","\u011F":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012A":"i","\u012B":"i","\u012E":"I","\u012F":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013B":"L","\u013C":"l","\u013D":"L","\u013E":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014C":"O","\u014D":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015A":"S","\u015B":"s","\u015E":"S","\u015F":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016A":"u","\u016B":"u","\u016E":"U","\u016F":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017A":"z","\u017B":"Z","\u017C":"z","\u017D":"Z","\u017E":"z","\u018F":"E","\u0192":"f","\u01A0":"O","\u01A1":"o","\u01AF":"U","\u01B0":"u","\u01C8":"LJ","\u01C9":"lj","\u01CB":"NJ","\u01CC":"nj","\u0218":"S","\u0219":"s","\u021A":"T","\u021B":"t","\u0259":"e","\u02DA":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038A":"I","\u038C":"O","\u038E":"Y","\u038F":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039A":"K","\u039B":"L","\u039C":"M","\u039D":"N","\u039E":"3","\u039F":"O","\u03A0":"P","\u03A1":"R","\u03A3":"S","\u03A4":"T","\u03A5":"Y","\u03A6":"F","\u03A7":"X","\u03A8":"PS","\u03A9":"W","\u03AA":"I","\u03AB":"Y","\u03AC":"a","\u03AD":"e","\u03AE":"h","\u03AF":"i","\u03B0":"y","\u03B1":"a","\u03B2":"b","\u03B3":"g","\u03B4":"d","\u03B5":"e","\u03B6":"z","\u03B7":"h","\u03B8":"8","\u03B9":"i","\u03BA":"k","\u03BB":"l","\u03BC":"m","\u03BD":"n","\u03BE":"3","\u03BF":"o","\u03C0":"p","\u03C1":"r","\u03C2":"s","\u03C3":"s","\u03C4":"t","\u03C5":"y","\u03C6":"f","\u03C7":"x","\u03C8":"ps","\u03C9":"w","\u03CA":"i","\u03CB":"y","\u03CC":"o","\u03CD":"y","\u03CE":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040A":"NJ","\u040B":"C","\u040F":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041A":"K","\u041B":"L","\u041C":"M","\u041D":"N","\u041E":"O","\u041F":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042A":"U","\u042B":"Y","\u042C":"","\u042D":"E","\u042E":"Yu","\u042F":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043A":"k","\u043B":"l","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044A":"u","\u044B":"y","\u044C":"","\u044D":"e","\u044E":"yu","\u044F":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045A":"nj","\u045B":"c","\u045D":"u","\u045F":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049A":"KH","\u049B":"kh","\u04A2":"NG","\u04A3":"ng","\u04AE":"UE","\u04AF":"ue","\u04B0":"U","\u04B1":"u","\u04BA":"H","\u04BB":"h","\u04D8":"AE","\u04D9":"ae","\u04E8":"OE","\u04E9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E'","\u0538":"Y'","\u0539":"T'","\u053A":"JH","\u053B":"I","\u053C":"L","\u053D":"X","\u053E":"C'","\u053F":"K","\u0540":"H","\u0541":"D'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054A":"P","\u054B":"J","\u054C":"R'","\u054D":"S","\u054E":"V","\u054F":"T","\u0550":"R","\u0551":"C","\u0553":"P'","\u0554":"Q'","\u0555":"O''","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062A":"t","\u062B":"th","\u062C":"j","\u062D":"h","\u062E":"kh","\u062F":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063A":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064A":"y","\u064B":"an","\u064C":"on","\u064D":"en","\u064E":"a","\u064F":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067E":"p","\u0686":"ch","\u0698":"zh","\u06A9":"k","\u06AF":"g","\u06CC":"y","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9","\u0E3F":"baht","\u10D0":"a","\u10D1":"b","\u10D2":"g","\u10D3":"d","\u10D4":"e","\u10D5":"v","\u10D6":"z","\u10D7":"t","\u10D8":"i","\u10D9":"k","\u10DA":"l","\u10DB":"m","\u10DC":"n","\u10DD":"o","\u10DE":"p","\u10DF":"zh","\u10E0":"r","\u10E1":"s","\u10E2":"t","\u10E3":"u","\u10E4":"f","\u10E5":"k","\u10E6":"gh","\u10E7":"q","\u10E8":"sh","\u10E9":"ch","\u10EA":"ts","\u10EB":"dz","\u10EC":"ts","\u10ED":"ch","\u10EE":"kh","\u10EF":"j","\u10F0":"h","\u1E62":"S","\u1E63":"s","\u1E80":"W","\u1E81":"w","\u1E82":"W","\u1E83":"w","\u1E84":"W","\u1E85":"w","\u1E9E":"SS","\u1EA0":"A","\u1EA1":"a","\u1EA2":"A","\u1EA3":"a","\u1EA4":"A","\u1EA5":"a","\u1EA6":"A","\u1EA7":"a","\u1EA8":"A","\u1EA9":"a","\u1EAA":"A","\u1EAB":"a","\u1EAC":"A","\u1EAD":"a","\u1EAE":"A","\u1EAF":"a","\u1EB0":"A","\u1EB1":"a","\u1EB2":"A","\u1EB3":"a","\u1EB4":"A","\u1EB5":"a","\u1EB6":"A","\u1EB7":"a","\u1EB8":"E","\u1EB9":"e","\u1EBA":"E","\u1EBB":"e","\u1EBC":"E","\u1EBD":"e","\u1EBE":"E","\u1EBF":"e","\u1EC0":"E","\u1EC1":"e","\u1EC2":"E","\u1EC3":"e","\u1EC4":"E","\u1EC5":"e","\u1EC6":"E","\u1EC7":"e","\u1EC8":"I","\u1EC9":"i","\u1ECA":"I","\u1ECB":"i","\u1ECC":"O","\u1ECD":"o","\u1ECE":"O","\u1ECF":"o","\u1ED0":"O","\u1ED1":"o","\u1ED2":"O","\u1ED3":"o","\u1ED4":"O","\u1ED5":"o","\u1ED6":"O","\u1ED7":"o","\u1ED8":"O","\u1ED9":"o","\u1EDA":"O","\u1EDB":"o","\u1EDC":"O","\u1EDD":"o","\u1EDE":"O","\u1EDF":"o","\u1EE0":"O","\u1EE1":"o","\u1EE2":"O","\u1EE3":"o","\u1EE4":"U","\u1EE5":"u","\u1EE6":"U","\u1EE7":"u","\u1EE8":"U","\u1EE9":"u","\u1EEA":"U","\u1EEB":"u","\u1EEC":"U","\u1EED":"u","\u1EEE":"U","\u1EEF":"u","\u1EF0":"U","\u1EF1":"u","\u1EF2":"Y","\u1EF3":"y","\u1EF4":"Y","\u1EF5":"y","\u1EF6":"Y","\u1EF7":"y","\u1EF8":"Y","\u1EF9":"y","\u2013":"-","\u2018":"'","\u2019":"'","\u201C":"\\"","\u201D":"\\"","\u201E":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20A0":"ecu","\u20A2":"cruzeiro","\u20A3":"french franc","\u20A4":"lira","\u20A5":"mill","\u20A6":"naira","\u20A7":"peseta","\u20A8":"rupee","\u20A9":"won","\u20AA":"new shequel","\u20AB":"dong","\u20AC":"euro","\u20AD":"kip","\u20AE":"tugrik","\u20AF":"drachma","\u20B0":"penny","\u20B1":"peso","\u20B2":"guarani","\u20B3":"austral","\u20B4":"hryvnia","\u20B5":"cedi","\u20B8":"kazakhstani tenge","\u20B9":"indian rupee","\u20BA":"turkish lira","\u20BD":"russian ruble","\u20BF":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221E":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\uFDFC":"rial","\uFEF5":"laa","\uFEF7":"laa","\uFEF9":"lai","\uFEFB":"la"}`),n=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042A":"A","\u042C":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044A":"a","\u044C":"y"},"de":{"\xC4":"AE","\xE4":"ae","\xD6":"OE","\xF6":"oe","\xDC":"UE","\xFC":"ue","\xDF":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221E":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xA2":"centavos","\xA3":"libras","\xA4":"moneda","\u20A3":"francos","\u2211":"suma","\u221E":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xA2":"centime","\xA3":"livre","\xA4":"devise","\u20A3":"franc","\u2211":"somme","\u221E":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xA2":"centavo","\u2211":"soma","\xA3":"libra","\u221E":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xD8":"OE","\xF8":"oe","\xC5":"AA","\xE5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xF8rre end"},"nb":{"&":"og","\xC5":"AA","\xC6":"AE","\xD8":"OE","\xE5":"aa","\xE6":"ae","\xF8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xC5":"AA","\xC4":"AE","\xD6":"OE","\xE5":"aa","\xE4":"ae","\xF6":"oe"}}');function a(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var c=n[s.locale]||{},u=s.replacement===void 0?"-":s.replacement,d=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(l,f){var _=c[f]||t[f]||f;return _===u&&(_=" "),l+_.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),d&&(m=m.trim()),m=m.replace(/\s+/g,u),s.lower&&(m=m.toLowerCase()),m}return a.extend=function(o){Object.assign(t,o)},a})})(slugify$1);var slugify=slugify$1.exports,top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(r,e){return r.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(r,e){return r.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(r){return r?(r.nodeName||"").toLowerCase():null}function getWindow(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function isElement(r){var e=getWindow(r).Element;return r instanceof e||r instanceof Element}function isHTMLElement(r){var e=getWindow(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function isShadowRoot(r){if(typeof ShadowRoot=="undefined")return!1;var e=getWindow(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function applyStyles(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},a=e.attributes[t]||{},o=e.elements[t];!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,n),Object.keys(a).forEach(function(s){var c=a[s];c===!1?o.removeAttribute(s):o.setAttribute(s,c===!0?"":c)}))})}function effect$2(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var a=e.elements[n],o=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),c=s.reduce(function(u,d){return u[d]="",u},{});!isHTMLElement(a)||!getNodeName(a)||(Object.assign(a.style,c),Object.keys(o).forEach(function(u){a.removeAttribute(u)}))})}}var applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(r){return r.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getBoundingClientRect(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),n=1,a=1;if(isHTMLElement(r)&&e){var o=r.offsetHeight,s=r.offsetWidth;s>0&&(n=round(t.width)/s||1),o>0&&(a=round(t.height)/o||1)}return{width:t.width/n,height:t.height/a,top:t.top/a,right:t.right/n,bottom:t.bottom/a,left:t.left/n,x:t.left/n,y:t.top/a}}function getLayoutRect(r){var e=getBoundingClientRect(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function contains(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&isShadowRoot(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function getComputedStyle$1(r){return getWindow(r).getComputedStyle(r)}function isTableElement(r){return["table","td","th"].indexOf(getNodeName(r))>=0}function getDocumentElement(r){return((isElement(r)?r.ownerDocument:r.document)||window.document).documentElement}function getParentNode(r){return getNodeName(r)==="html"?r:r.assignedSlot||r.parentNode||(isShadowRoot(r)?r.host:null)||getDocumentElement(r)}function getTrueOffsetParent(r){return!isHTMLElement(r)||getComputedStyle$1(r).position==="fixed"?null:r.offsetParent}function getContainingBlock(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&isHTMLElement(r)){var n=getComputedStyle$1(r);if(n.position==="fixed")return null}var a=getParentNode(r);for(isShadowRoot(a)&&(a=a.host);isHTMLElement(a)&&["html","body"].indexOf(getNodeName(a))<0;){var o=getComputedStyle$1(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function getOffsetParent(r){for(var e=getWindow(r),t=getTrueOffsetParent(r);t&&isTableElement(t)&&getComputedStyle$1(t).position==="static";)t=getTrueOffsetParent(t);return t&&(getNodeName(t)==="html"||getNodeName(t)==="body"&&getComputedStyle$1(t).position==="static")?e:t||getContainingBlock(r)||e}function getMainAxisFromPlacement(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function within(r,e,t){return max(r,min(e,t))}function withinMaxClamp(r,e,t){var n=within(r,e,t);return n>t?t:n}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(r){return Object.assign({},getFreshSideObject(),r)}function expandToHashMap(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var toPaddingObject=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(r){var e,t=r.state,n=r.name,a=r.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,c=getBasePlacement(t.placement),u=getMainAxisFromPlacement(c),d=[left,right].indexOf(c)>=0,m=d?"height":"width";if(!(!o||!s)){var l=toPaddingObject(a.padding,t),f=getLayoutRect(o),_=u==="y"?top:left,b=u==="y"?bottom:right,S=t.rects.reference[m]+t.rects.reference[u]-s[u]-t.rects.popper[m],E=s[u]-t.rects.reference[u],y=getOffsetParent(o),k=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,I=S/2-E/2,O=l[_],D=k-f[m]-l[b],R=k/2-f[m]/2+I,P=within(O,R,D),W=u;t.modifiersData[n]=(e={},e[W]=P,e.centerOffset=P-R,e)}}function effect$1(r){var e=r.state,t=r.options,n=t.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!contains(e.elements.popper,a)||(e.elements.arrow=a))}var arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(r){return r.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(r){var e=r.x,t=r.y,n=window,a=n.devicePixelRatio||1;return{x:round(e*a)/a||0,y:round(t*a)/a||0}}function mapToStyles(r){var e,t=r.popper,n=r.popperRect,a=r.placement,o=r.variation,s=r.offsets,c=r.position,u=r.gpuAcceleration,d=r.adaptive,m=r.roundOffsets,l=r.isFixed,f=s.x,_=f===void 0?0:f,b=s.y,S=b===void 0?0:b,E=typeof m=="function"?m({x:_,y:S}):{x:_,y:S};_=E.x,S=E.y;var y=s.hasOwnProperty("x"),k=s.hasOwnProperty("y"),I=left,O=top,D=window;if(d){var R=getOffsetParent(t),P="clientHeight",W="clientWidth";if(R===getWindow(t)&&(R=getDocumentElement(t),getComputedStyle$1(R).position!=="static"&&c==="absolute"&&(P="scrollHeight",W="scrollWidth")),R=R,a===top||(a===left||a===right)&&o===end){O=bottom;var V=l&&R===D&&D.visualViewport?D.visualViewport.height:R[P];S-=V-n.height,S*=u?1:-1}if(a===left||(a===top||a===bottom)&&o===end){I=right;var L=l&&R===D&&D.visualViewport?D.visualViewport.width:R[W];_-=L-n.width,_*=u?1:-1}}var j=Object.assign({position:c},d&&unsetSides),z=m===!0?roundOffsetsByDPR({x:_,y:S}):{x:_,y:S};if(_=z.x,S=z.y,u){var q;return Object.assign({},j,(q={},q[O]=k?"0":"",q[I]=y?"0":"",q.transform=(D.devicePixelRatio||1)<=1?"translate("+_+"px, "+S+"px)":"translate3d("+_+"px, "+S+"px, 0)",q))}return Object.assign({},j,(e={},e[O]=k?S+"px":"",e[I]=y?_+"px":"",e.transform="",e))}function computeStyles(r){var e=r.state,t=r.options,n=t.gpuAcceleration,a=n===void 0?!0:n,o=t.adaptive,s=o===void 0?!0:o,c=t.roundOffsets,u=c===void 0?!0:c,d={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}},passive={passive:!0};function effect(r){var e=r.state,t=r.instance,n=r.options,a=n.scroll,o=a===void 0?!0:a,s=n.resize,c=s===void 0?!0:s,u=getWindow(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(m){m.addEventListener("scroll",t.update,passive)}),c&&u.addEventListener("resize",t.update,passive),function(){o&&d.forEach(function(m){m.removeEventListener("scroll",t.update,passive)}),c&&u.removeEventListener("resize",t.update,passive)}}var eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}},hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(r){return r.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(r){return r.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(r){var e=getWindow(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function getWindowScrollBarX(r){return getBoundingClientRect(getDocumentElement(r)).left+getWindowScroll(r).scrollLeft}function getViewportRect(r){var e=getWindow(r),t=getDocumentElement(r),n=e.visualViewport,a=t.clientWidth,o=t.clientHeight,s=0,c=0;return n&&(a=n.width,o=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=n.offsetLeft,c=n.offsetTop)),{width:a,height:o,x:s+getWindowScrollBarX(r),y:c}}function getDocumentRect(r){var e,t=getDocumentElement(r),n=getWindowScroll(r),a=(e=r.ownerDocument)==null?void 0:e.body,o=max(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=max(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-n.scrollLeft+getWindowScrollBarX(r),u=-n.scrollTop;return getComputedStyle$1(a||t).direction==="rtl"&&(c+=max(t.clientWidth,a?a.clientWidth:0)-o),{width:o,height:s,x:c,y:u}}function isScrollParent(r){var e=getComputedStyle$1(r),t=e.overflow,n=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+n)}function getScrollParent(r){return["html","body","#document"].indexOf(getNodeName(r))>=0?r.ownerDocument.body:isHTMLElement(r)&&isScrollParent(r)?r:getScrollParent(getParentNode(r))}function listScrollParents(r,e){var t;e===void 0&&(e=[]);var n=getScrollParent(r),a=n===((t=r.ownerDocument)==null?void 0:t.body),o=getWindow(n),s=a?[o].concat(o.visualViewport||[],isScrollParent(n)?n:[]):n,c=e.concat(s);return a?c:c.concat(listScrollParents(getParentNode(s)))}function rectToClientRect(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function getInnerBoundingClientRect(r){var e=getBoundingClientRect(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function getClientRectFromMixedType(r,e){return e===viewport?rectToClientRect(getViewportRect(r)):isElement(e)?getInnerBoundingClientRect(e):rectToClientRect(getDocumentRect(getDocumentElement(r)))}function getClippingParents(r){var e=listScrollParents(getParentNode(r)),t=["absolute","fixed"].indexOf(getComputedStyle$1(r).position)>=0,n=t&&isHTMLElement(r)?getOffsetParent(r):r;return isElement(n)?e.filter(function(a){return isElement(a)&&contains(a,n)&&getNodeName(a)!=="body"}):[]}function getClippingRect(r,e,t){var n=e==="clippingParents"?getClippingParents(r):[].concat(e),a=[].concat(n,[t]),o=a[0],s=a.reduce(function(c,u){var d=getClientRectFromMixedType(r,u);return c.top=max(d.top,c.top),c.right=min(d.right,c.right),c.bottom=min(d.bottom,c.bottom),c.left=max(d.left,c.left),c},getClientRectFromMixedType(r,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function computeOffsets(r){var e=r.reference,t=r.element,n=r.placement,a=n?getBasePlacement(n):null,o=n?getVariation(n):null,s=e.x+e.width/2-t.width/2,c=e.y+e.height/2-t.height/2,u;switch(a){case top:u={x:s,y:e.y-t.height};break;case bottom:u={x:s,y:e.y+e.height};break;case right:u={x:e.x+e.width,y:c};break;case left:u={x:e.x-t.width,y:c};break;default:u={x:e.x,y:e.y}}var d=a?getMainAxisFromPlacement(a):null;if(d!=null){var m=d==="y"?"height":"width";switch(o){case start:u[d]=u[d]-(e[m]/2-t[m]/2);break;case end:u[d]=u[d]+(e[m]/2-t[m]/2);break}}return u}function detectOverflow(r,e){e===void 0&&(e={});var t=e,n=t.placement,a=n===void 0?r.placement:n,o=t.boundary,s=o===void 0?clippingParents:o,c=t.rootBoundary,u=c===void 0?viewport:c,d=t.elementContext,m=d===void 0?popper:d,l=t.altBoundary,f=l===void 0?!1:l,_=t.padding,b=_===void 0?0:_,S=mergePaddingObject(typeof b!="number"?b:expandToHashMap(b,basePlacements)),E=m===popper?reference:popper,y=r.rects.popper,k=r.elements[f?E:m],I=getClippingRect(isElement(k)?k:k.contextElement||getDocumentElement(r.elements.popper),s,u),O=getBoundingClientRect(r.elements.reference),D=computeOffsets({reference:O,element:y,strategy:"absolute",placement:a}),R=rectToClientRect(Object.assign({},y,D)),P=m===popper?R:O,W={top:I.top-P.top+S.top,bottom:P.bottom-I.bottom+S.bottom,left:I.left-P.left+S.left,right:P.right-I.right+S.right},V=r.modifiersData.offset;if(m===popper&&V){var L=V[a];Object.keys(W).forEach(function(j){var z=[right,bottom].indexOf(j)>=0?1:-1,q=[top,bottom].indexOf(j)>=0?"y":"x";W[j]+=L[q]*z})}return W}function computeAutoPlacement(r,e){e===void 0&&(e={});var t=e,n=t.placement,a=t.boundary,o=t.rootBoundary,s=t.padding,c=t.flipVariations,u=t.allowedAutoPlacements,d=u===void 0?placements:u,m=getVariation(n),l=m?c?variationPlacements:variationPlacements.filter(function(b){return getVariation(b)===m}):basePlacements,f=l.filter(function(b){return d.indexOf(b)>=0});f.length===0&&(f=l);var _=f.reduce(function(b,S){return b[S]=detectOverflow(r,{placement:S,boundary:a,rootBoundary:o,padding:s})[getBasePlacement(S)],b},{});return Object.keys(_).sort(function(b,S){return _[b]-_[S]})}function getExpandedFallbackPlacements(r){if(getBasePlacement(r)===auto)return[];var e=getOppositePlacement(r);return[getOppositeVariationPlacement(r),e,getOppositeVariationPlacement(e)]}function flip(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var a=t.mainAxis,o=a===void 0?!0:a,s=t.altAxis,c=s===void 0?!0:s,u=t.fallbackPlacements,d=t.padding,m=t.boundary,l=t.rootBoundary,f=t.altBoundary,_=t.flipVariations,b=_===void 0?!0:_,S=t.allowedAutoPlacements,E=e.options.placement,y=getBasePlacement(E),k=y===E,I=u||(k||!b?[getOppositePlacement(E)]:getExpandedFallbackPlacements(E)),O=[E].concat(I).reduce(function(Z,te){return Z.concat(getBasePlacement(te)===auto?computeAutoPlacement(e,{placement:te,boundary:m,rootBoundary:l,padding:d,flipVariations:b,allowedAutoPlacements:S}):te)},[]),D=e.rects.reference,R=e.rects.popper,P=new Map,W=!0,V=O[0],L=0;L<O.length;L++){var j=O[L],z=getBasePlacement(j),q=getVariation(j)===start,Q=[top,bottom].indexOf(z)>=0,F=Q?"width":"height",Y=detectOverflow(e,{placement:j,boundary:m,rootBoundary:l,altBoundary:f,padding:d}),ee=Q?q?right:left:q?bottom:top;D[F]>R[F]&&(ee=getOppositePlacement(ee));var ce=getOppositePlacement(ee),me=[];if(o&&me.push(Y[z]<=0),c&&me.push(Y[ee]<=0,Y[ce]<=0),me.every(function(Z){return Z})){V=j,W=!1;break}P.set(j,me)}if(W)for(var ke=b?3:1,Ee=function(te){var J=O.find(function(X){var re=P.get(X);if(re)return re.slice(0,te).every(function(se){return se})});if(J)return V=J,"break"},C=ke;C>0;C--){var U=Ee(C);if(U==="break")break}e.placement!==V&&(e.modifiersData[n]._skip=!0,e.placement=V,e.reset=!0)}}var flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function isAnySideFullyClipped(r){return[top,right,bottom,left].some(function(e){return r[e]>=0})}function hide(r){var e=r.state,t=r.name,n=e.rects.reference,a=e.rects.popper,o=e.modifiersData.preventOverflow,s=detectOverflow(e,{elementContext:"reference"}),c=detectOverflow(e,{altBoundary:!0}),u=getSideOffsets(s,n),d=getSideOffsets(c,a,o),m=isAnySideFullyClipped(u),l=isAnySideFullyClipped(d);e.modifiersData[t]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:l},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":l})}var hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(r,e,t){var n=getBasePlacement(r),a=[left,top].indexOf(n)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,s=o[0],c=o[1];return s=s||0,c=(c||0)*a,[left,right].indexOf(n)>=0?{x:c,y:s}:{x:s,y:c}}function offset(r){var e=r.state,t=r.options,n=r.name,a=t.offset,o=a===void 0?[0,0]:a,s=placements.reduce(function(m,l){return m[l]=distanceAndSkiddingToXY(l,e.rects,o),m},{}),c=s[e.placement],u=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[n]=s}var offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(r){var e=r.state,t=r.name;e.modifiersData[t]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(r){return r==="x"?"y":"x"}function preventOverflow(r){var e=r.state,t=r.options,n=r.name,a=t.mainAxis,o=a===void 0?!0:a,s=t.altAxis,c=s===void 0?!1:s,u=t.boundary,d=t.rootBoundary,m=t.altBoundary,l=t.padding,f=t.tether,_=f===void 0?!0:f,b=t.tetherOffset,S=b===void 0?0:b,E=detectOverflow(e,{boundary:u,rootBoundary:d,padding:l,altBoundary:m}),y=getBasePlacement(e.placement),k=getVariation(e.placement),I=!k,O=getMainAxisFromPlacement(y),D=getAltAxis(O),R=e.modifiersData.popperOffsets,P=e.rects.reference,W=e.rects.popper,V=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,L=typeof V=="number"?{mainAxis:V,altAxis:V}:Object.assign({mainAxis:0,altAxis:0},V),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(!!R){if(o){var q,Q=O==="y"?top:left,F=O==="y"?bottom:right,Y=O==="y"?"height":"width",ee=R[O],ce=ee+E[Q],me=ee-E[F],ke=_?-W[Y]/2:0,Ee=k===start?P[Y]:W[Y],C=k===start?-W[Y]:-P[Y],U=e.elements.arrow,Z=_&&U?getLayoutRect(U):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),J=te[Q],X=te[F],re=within(0,P[Y],Z[Y]),se=I?P[Y]/2-ke-re-J-L.mainAxis:Ee-re-J-L.mainAxis,de=I?-P[Y]/2+ke+re+X+L.mainAxis:C+re+X+L.mainAxis,oe=e.elements.arrow&&getOffsetParent(e.elements.arrow),Ae=oe?O==="y"?oe.clientTop||0:oe.clientLeft||0:0,Me=(q=j==null?void 0:j[O])!=null?q:0,Xe=ee+se-Me-Ae,Be=ee+de-Me,G=within(_?min(ce,Xe):ce,ee,_?max(me,Be):me);R[O]=G,z[O]=G-ee}if(c){var le,_e=O==="x"?top:left,ue=O==="x"?bottom:right,be=R[D],ge=D==="y"?"height":"width",Ie=be+E[_e],T=be-E[ue],x=[top,left].indexOf(y)!==-1,$=(le=j==null?void 0:j[D])!=null?le:0,M=x?Ie:be-P[ge]-W[ge]-$+L.altAxis,H=x?be+P[ge]+W[ge]-$-L.altAxis:T,B=_&&x?withinMaxClamp(M,be,H):within(_?M:Ie,be,_?H:T);R[D]=B,z[D]=B-be}e.modifiersData[n]=z}}var preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function getNodeScroll(r){return r===getWindow(r)||!isHTMLElement(r)?getWindowScroll(r):getHTMLElementScroll(r)}function isElementScaled(r){var e=r.getBoundingClientRect(),t=round(e.width)/r.offsetWidth||1,n=round(e.height)/r.offsetHeight||1;return t!==1||n!==1}function getCompositeRect(r,e,t){t===void 0&&(t=!1);var n=isHTMLElement(e),a=isHTMLElement(e)&&isElementScaled(e),o=getDocumentElement(e),s=getBoundingClientRect(r,a),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!t)&&((getNodeName(e)!=="body"||isScrollParent(o))&&(c=getNodeScroll(e)),isHTMLElement(e)?(u=getBoundingClientRect(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=getWindowScrollBarX(o))),{x:s.left+c.scrollLeft-u.x,y:s.top+c.scrollTop-u.y,width:s.width,height:s.height}}function order(r){var e=new Map,t=new Set,n=[];r.forEach(function(o){e.set(o.name,o)});function a(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(c){if(!t.has(c)){var u=e.get(c);u&&a(u)}}),n.push(o)}return r.forEach(function(o){t.has(o.name)||a(o)}),n}function orderModifiers(r){var e=order(r);return modifierPhases.reduce(function(t,n){return t.concat(e.filter(function(a){return a.phase===n}))},[])}function debounce$2(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function mergeByName(r){var e=r.reduce(function(t,n){var a=t[n.name];return t[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function popperGenerator(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,a=e.defaultOptions,o=a===void 0?DEFAULT_OPTIONS:a;return function(c,u,d){d===void 0&&(d=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,o),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},l=[],f=!1,_={state:m,setOptions:function(y){var k=typeof y=="function"?y(m.options):y;S(),m.options=Object.assign({},o,m.options,k),m.scrollParents={reference:isElement(c)?listScrollParents(c):c.contextElement?listScrollParents(c.contextElement):[],popper:listScrollParents(u)};var I=orderModifiers(mergeByName([].concat(n,m.options.modifiers)));return m.orderedModifiers=I.filter(function(O){return O.enabled}),b(),_.update()},forceUpdate:function(){if(!f){var y=m.elements,k=y.reference,I=y.popper;if(!!areValidElements(k,I)){m.rects={reference:getCompositeRect(k,getOffsetParent(I),m.options.strategy==="fixed"),popper:getLayoutRect(I)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(L){return m.modifiersData[L.name]=Object.assign({},L.data)});for(var O=0;O<m.orderedModifiers.length;O++){if(m.reset===!0){m.reset=!1,O=-1;continue}var D=m.orderedModifiers[O],R=D.fn,P=D.options,W=P===void 0?{}:P,V=D.name;typeof R=="function"&&(m=R({state:m,options:W,name:V,instance:_})||m)}}}},update:debounce$2(function(){return new Promise(function(E){_.forceUpdate(),E(m)})}),destroy:function(){S(),f=!0}};if(!areValidElements(c,u))return _;_.setOptions(d).then(function(E){!f&&d.onFirstUpdate&&d.onFirstUpdate(E)});function b(){m.orderedModifiers.forEach(function(E){var y=E.name,k=E.options,I=k===void 0?{}:k,O=E.effect;if(typeof O=="function"){var D=O({state:m,name:y,instance:_,options:I}),R=function(){};l.push(D||R)}})}function S(){l.forEach(function(E){return E()}),l=[]}return _}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),personLink_svelte_svelte_type_style_lang="";function get_each_context$6(r,e,t){const n=r.slice();return n[13]=e[t],n}function create_if_block$h(r){let e,t=(r[1]?r[6](r[1]):r[0].title)+"",n,a,o,s,c,u=r[0].title+"",d,m,l,f,_,b,S,E,y=r[0].role&&create_if_block_3$4(r),k=r[0].groupTags&&create_if_block_2$8(r),I=r[0].mainImage&&create_if_block_1$c(r);return{c(){e=element("a"),a=space(),o=element("div"),s=element("div"),c=element("div"),d=text(u),m=space(),l=element("div"),y&&y.c(),f=space(),k&&k.c(),_=space(),b=element("div"),I&&I.c(),this.h()},l(O){e=claim_element(O,"A",{href:!0,"sveltekit:prefetch":!0,class:!0});var D=children(e);D.forEach(detach),a=claim_space(O),o=claim_element(O,"DIV",{class:!0});var R=children(o);s=claim_element(R,"DIV",{class:!0});var P=children(s);c=claim_element(P,"DIV",{class:!0});var W=children(c);d=claim_text(W,u),W.forEach(detach),m=claim_space(P),l=claim_element(P,"DIV",{class:!0});var V=children(l);y&&y.l(V),f=claim_space(V),k&&k.l(V),V.forEach(detach),P.forEach(detach),_=claim_space(R),b=claim_element(R,"DIV",{class:!0});var L=children(b);I&&I.l(L),L.forEach(detach),R.forEach(detach),this.h()},h(){attr(e,"href",n="/people/"+get_1(r[0],"slug.current")),attr(e,"sveltekit:prefetch",""),attr(e,"class","svelte-18s68xb"),attr(c,"class","name svelte-18s68xb"),attr(l,"class","badges"),attr(s,"class","column first svelte-18s68xb"),attr(b,"class","column second"),attr(o,"class","pop-up svelte-18s68xb")},m(O,D){insert_hydration(O,e,D),e.innerHTML=t,r[8](e),insert_hydration(O,a,D),insert_hydration(O,o,D),append_hydration(o,s),append_hydration(s,c),append_hydration(c,d),append_hydration(s,m),append_hydration(s,l),y&&y.m(l,null),append_hydration(l,f),k&&k.m(l,null),append_hydration(o,_),append_hydration(o,b),I&&I.m(b,null),r[9](o),S||(E=[listen$2(e,"mouseenter",r[4]),listen$2(e,"mouseleave",r[5])],S=!0)},p(O,D){D&3&&t!==(t=(O[1]?O[6](O[1]):O[0].title)+"")&&(e.innerHTML=t),D&1&&n!==(n="/people/"+get_1(O[0],"slug.current"))&&attr(e,"href",n),D&1&&u!==(u=O[0].title+"")&&set_data(d,u),O[0].role?y?y.p(O,D):(y=create_if_block_3$4(O),y.c(),y.m(l,f)):y&&(y.d(1),y=null),O[0].groupTags?k?k.p(O,D):(k=create_if_block_2$8(O),k.c(),k.m(l,null)):k&&(k.d(1),k=null),O[0].mainImage?I?I.p(O,D):(I=create_if_block_1$c(O),I.c(),I.m(b,null)):I&&(I.d(1),I=null)},d(O){O&&detach(e),r[8](null),O&&detach(a),O&&detach(o),y&&y.d(),k&&k.d(),I&&I.d(),r[9](null),S=!1,run_all(E)}}}function create_if_block_3$4(r){let e,t=roleToRoleName[r[0].role]+"",n;return{c(){e=element("div"),n=text(t),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);n=claim_text(o,t),o.forEach(detach),this.h()},h(){attr(e,"class","badge")},m(a,o){insert_hydration(a,e,o),append_hydration(e,n)},p(a,o){o&1&&t!==(t=roleToRoleName[a[0].role]+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_if_block_2$8(r){let e,t=r[0].groupTags,n=[];for(let a=0;a<t.length;a+=1)n[a]=create_each_block$6(get_each_context$6(r,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=empty()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=empty()},m(a,o){for(let s=0;s<n.length;s+=1)n[s].m(a,o);insert_hydration(a,e,o)},p(a,o){if(o&1){t=a[0].groupTags;let s;for(s=0;s<t.length;s+=1){const c=get_each_context$6(a,t,s);n[s]?n[s].p(c,o):(n[s]=create_each_block$6(c),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(a){destroy_each(n,a),a&&detach(e)}}}function create_each_block$6(r){let e,t=r[13].label+"",n;return{c(){e=element("div"),n=text(t),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);n=claim_text(o,t),o.forEach(detach),this.h()},h(){attr(e,"class","badge")},m(a,o){insert_hydration(a,e,o),append_hydration(e,n)},p(a,o){o&1&&t!==(t=a[13].label+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_if_block_1$c(r){let e,t,n;return{c(){e=element("img"),this.h()},l(a){e=claim_element(a,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){attr(e,"class","image"),attr(e,"alt",t=r[0].title),src_url_equal(e.src,n=urlFor(r[0].mainImage).quality(90).saturation(-100).width(100).height(100).url())||attr(e,"src",n)},m(a,o){insert_hydration(a,e,o)},p(a,o){o&1&&t!==(t=a[0].title)&&attr(e,"alt",t),o&1&&!src_url_equal(e.src,n=urlFor(a[0].mainImage).quality(90).saturation(-100).width(100).height(100).url())&&attr(e,"src",n)},d(a){a&&detach(e)}}}function create_fragment$y(r){let e,t=r[0]&&create_if_block$h(r);return{c(){t&&t.c(),e=empty()},l(n){t&&t.l(n),e=empty()},m(n,a){t&&t.m(n,a),insert_hydration(n,e,a)},p(n,[a]){n[0]?t?t.p(n,a):(t=create_if_block$h(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$1,o:noop$1,d(n){t&&t.d(n),n&&detach(e)}}}function instance$q(r,e,t){let{person:n=!1}=e,{overrideText:a=!1}=e,{personId:o=!1}=e,s={},c={},u={},d={};const m=()=>{u=createPopper(s,c,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[10,5]}},{name:"eventListeners",enabled:!1}]})},l=()=>{d.matches&&(console.log("SHOW"),c.classList.add("show"),u.setOptions(E=>Vt(Bt({},E),{modifiers:[...E.modifiers,{name:"eventListeners",enabled:!0}]})),u.update())},f=()=>{d.matches&&(console.log("hide"),c.classList.remove("show"),u.setOptions(E=>Vt(Bt({},E),{modifiers:[...E.modifiers,{name:"eventListeners",enabled:!1}]})))},_=E=>E.replace(/(?:\r\n|\r|\n)/g,"<br>");o&&(console.log("loading-data"),loadData('*[_id == "'+o+'"][0]').then(E=>{t(0,n=E),setTimeout(m,1e3)})),onMount(async()=>{d=window.matchMedia("(min-width: 700px)"),n&&d.matches&&m()});function b(E){binding_callbacks[E?"unshift":"push"](()=>{s=E,t(2,s)})}function S(E){binding_callbacks[E?"unshift":"push"](()=>{c=E,t(3,c)})}return r.$$set=E=>{"person"in E&&t(0,n=E.person),"overrideText"in E&&t(1,a=E.overrideText),"personId"in E&&t(7,o=E.personId)},[n,a,s,c,l,f,_,o,b,S]}class Person_link extends SvelteComponent{constructor(e){super(),init(this,e,instance$q,create_fragment$y,safe_not_equal,{person:0,overrideText:1,personId:7})}}var externalLink_svelte_svelte_type_style_lang="";function create_fragment$x(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d","M3.9378 1.68763V2.81271H1.12509V9.00068H7.31305V6.18797H8.43814V9.56322C8.43814 9.72074 8.38376 9.85387 8.275 9.96263C8.16624 10.0714 8.03311 10.1258 7.8756 10.1258H0.562543C0.40503 10.1258 0.271896 10.0714 0.163137 9.96263C0.0543785 9.85387 0 9.72074 0 9.56322V2.25017C0 2.09266 0.0543785 1.95952 0.163137 1.85077C0.271896 1.74201 0.40503 1.68763 0.562543 1.68763H3.9378ZM10.1258 0V4.50034H9.00068V1.9239L4.61285 6.30048L3.82529 5.51292L8.20187 1.12509H5.62543V0H10.1258Z"),attr(t,"class","svelte-18gy7aj"),attr(e,"width","11"),attr(e,"height","11"),attr(e,"viewBox","0 0 11 11"),attr(e,"fill","none"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","svelte-18gy7aj")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class External_link extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$x,safe_not_equal,{})}}function get_each_context_2(r,e,t){const n=r.slice();return n[6]=e[t],n}function get_each_context_1(r,e,t){const n=r.slice();return n[6]=e[t],n}function get_each_context$5(r,e,t){const n=r.slice();return n[6]=e[t],n}function create_if_block$g(r){let e,t,n,a;const o=[create_if_block_1$b,create_if_block_3$3,create_else_block_1$1],s=[];function c(u,d){return u[0].style=="h2"?0:u[0].style=="h3"?1:2}return e=c(r),t=s[e]=o[e](r),{c(){t.c(),n=empty()},l(u){t.l(u),n=empty()},m(u,d){s[e].m(u,d),insert_hydration(u,n,d),a=!0},p(u,d){let m=e;e=c(u),e===m?s[e].p(u,d):(group_outros(),transition_out(s[m],1,1,()=>{s[m]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=o[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){a||(transition_in(t),a=!0)},o(u){transition_out(t),a=!1},d(u){s[e].d(u),u&&detach(n)}}}function create_else_block_1$1(r){let e,t,n=r[0].children,a=[];for(let s=0;s<n.length;s+=1)a[s]=create_each_block_2(get_each_context_2(r,n,s));const o=s=>transition_out(a[s],1,1,()=>{a[s]=null});return{c(){e=element("p");for(let s=0;s<a.length;s+=1)a[s].c()},l(s){e=claim_element(s,"P",{});var c=children(e);for(let u=0;u<a.length;u+=1)a[u].l(c);c.forEach(detach)},m(s,c){insert_hydration(s,e,c);for(let u=0;u<a.length;u+=1)a[u].m(e,null);t=!0},p(s,c){if(c&3){n=s[0].children;let u;for(u=0;u<n.length;u+=1){const d=get_each_context_2(s,n,u);a[u]?(a[u].p(d,c),transition_in(a[u],1)):(a[u]=create_each_block_2(d),a[u].c(),transition_in(a[u],1),a[u].m(e,null))}for(group_outros(),u=n.length;u<a.length;u+=1)o(u);check_outros()}},i(s){if(!t){for(let c=0;c<n.length;c+=1)transition_in(a[c]);t=!0}},o(s){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);t=!1},d(s){s&&detach(e),destroy_each(a,s)}}}function create_if_block_3$3(r){let e,t=r[0].children,n=[];for(let a=0;a<t.length;a+=1)n[a]=create_each_block_1(get_each_context_1(r,t,a));return{c(){e=element("h3");for(let a=0;a<n.length;a+=1)n[a].c()},l(a){e=claim_element(a,"H3",{});var o=children(e);for(let s=0;s<n.length;s+=1)n[s].l(o);o.forEach(detach)},m(a,o){insert_hydration(a,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(a,o){if(o&1){t=a[0].children;let s;for(s=0;s<t.length;s+=1){const c=get_each_context_1(a,t,s);n[s]?n[s].p(c,o):(n[s]=create_each_block_1(c),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},i:noop$1,o:noop$1,d(a){a&&detach(e),destroy_each(n,a)}}}function create_if_block_1$b(r){let e,t,n=r[0].children,a=[];for(let o=0;o<n.length;o+=1)a[o]=create_each_block$5(get_each_context$5(r,n,o));return{c(){e=element("h2");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=claim_element(o,"H2",{id:!0});var s=children(e);for(let c=0;c<a.length;c+=1)a[c].l(s);s.forEach(detach),this.h()},h(){attr(e,"id",t=slugify(r[0].children[0].text,{lower:!0}))},m(o,s){insert_hydration(o,e,s);for(let c=0;c<a.length;c+=1)a[c].m(e,null)},p(o,s){if(s&1){n=o[0].children;let c;for(c=0;c<n.length;c+=1){const u=get_each_context$5(o,n,c);a[c]?a[c].p(u,s):(a[c]=create_each_block$5(u),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=n.length}s&1&&t!==(t=slugify(o[0].children[0].text,{lower:!0}))&&attr(e,"id",t)},i:noop$1,o:noop$1,d(o){o&&detach(e),destroy_each(a,o)}}}function create_else_block_2(r){let e=r[0].markDefs.find(c)._type==="link",t,n=r[0].markDefs.find(s)._type==="person",a,o;function s(...m){return r[2](r[6],...m)}function c(...m){return r[3](r[6],...m)}let u=e&&create_if_block_8$3(r),d=n&&create_if_block_7$3(r);return{c(){u&&u.c(),t=space(),d&&d.c(),a=empty()},l(m){u&&u.l(m),t=claim_space(m),d&&d.l(m),a=empty()},m(m,l){u&&u.m(m,l),insert_hydration(m,t,l),d&&d.m(m,l),insert_hydration(m,a,l),o=!0},p(m,l){r=m,l&1&&(e=r[0].markDefs.find(c)._type==="link"),e?u?(u.p(r,l),l&1&&transition_in(u,1)):(u=create_if_block_8$3(r),u.c(),transition_in(u,1),u.m(t.parentNode,t)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),l&1&&(n=r[0].markDefs.find(s)._type==="person"),n?d?(d.p(r,l),l&1&&transition_in(d,1)):(d=create_if_block_7$3(r),d.c(),transition_in(d,1),d.m(a.parentNode,a)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(m){o||(transition_in(u),transition_in(d),o=!0)},o(m){transition_out(u),transition_out(d),o=!1},d(m){u&&u.d(m),m&&detach(t),d&&d.d(m),m&&detach(a)}}}function create_if_block_6$3(r){let e,t=r[1](r[6].text)+"";return{c(){e=element("strong")},l(n){e=claim_element(n,"STRONG",{});var a=children(e);a.forEach(detach)},m(n,a){insert_hydration(n,e,a),e.innerHTML=t},p(n,a){a&1&&t!==(t=n[1](n[6].text)+"")&&(e.innerHTML=t)},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function create_if_block_5$3(r){let e,t=r[1](r[6].text)+"";return{c(){e=element("em")},l(n){e=claim_element(n,"EM",{});var a=children(e);a.forEach(detach)},m(n,a){insert_hydration(n,e,a),e.innerHTML=t},p(n,a){a&1&&t!==(t=n[1](n[6].text)+"")&&(e.innerHTML=t)},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function create_if_block_4$3(r){let e,t=r[1](r[6].text)+"",n;return{c(){e=new HtmlTagHydration,n=empty(),this.h()},l(a){e=claim_html_tag(a),n=empty(),this.h()},h(){e.a=n},m(a,o){e.m(t,a,o),insert_hydration(a,n,o)},p(a,o){o&1&&t!==(t=a[1](a[6].text)+"")&&e.p(t)},i:noop$1,o:noop$1,d(a){a&&detach(n),a&&e.d()}}}function create_if_block_8$3(r){let e,t,n=r[1](r[6].text)+"",a,o,s,c;o=new External_link({});function u(...d){return r[4](r[6],...d)}return{c(){e=element("a"),t=new HtmlTagHydration,a=space(),create_component(o.$$.fragment),this.h()},l(d){e=claim_element(d,"A",{href:!0});var m=children(e);t=claim_html_tag(m),a=claim_space(m),claim_component(o.$$.fragment,m),m.forEach(detach),this.h()},h(){t.a=a,attr(e,"href",s=r[0].markDefs.find(u).href)},m(d,m){insert_hydration(d,e,m),t.m(n,e),append_hydration(e,a),mount_component(o,e,null),c=!0},p(d,m){r=d,(!c||m&1)&&n!==(n=r[1](r[6].text)+"")&&t.p(n),(!c||m&1&&s!==(s=r[0].markDefs.find(u).href))&&attr(e,"href",s)},i(d){c||(transition_in(o.$$.fragment,d),c=!0)},o(d){transition_out(o.$$.fragment,d),c=!1},d(d){d&&detach(e),destroy_component(o)}}}function create_if_block_7$3(r){let e,t;function n(...a){return r[5](r[6],...a)}return e=new Person_link({props:{overrideText:r[6].text,personId:r[0].markDefs.find(n).link._ref}}),{c(){create_component(e.$$.fragment)},l(a){claim_component(e.$$.fragment,a)},m(a,o){mount_component(e,a,o),t=!0},p(a,o){r=a;const s={};o&1&&(s.overrideText=r[6].text),o&1&&(s.personId=r[0].markDefs.find(n).link._ref),e.$set(s)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_each_block_2(r){let e,t,n,a,o,s;const c=[create_if_block_4$3,create_if_block_5$3,create_if_block_6$3,create_else_block_2],u=[];function d(m,l){return l&1&&(e=null),l&1&&(t=null),!m[6].marks||m[6].marks.length===0?0:(e==null&&(e=!!m[6].marks.includes("em")),e?1:(t==null&&(t=!!m[6].marks.includes("strong")),t?2:3))}return n=d(r,-1),a=u[n]=c[n](r),{c(){a.c(),o=empty()},l(m){a.l(m),o=empty()},m(m,l){u[n].m(m,l),insert_hydration(m,o,l),s=!0},p(m,l){let f=n;n=d(m,l),n===f?u[n].p(m,l):(group_outros(),transition_out(u[f],1,1,()=>{u[f]=null}),check_outros(),a=u[n],a?a.p(m,l):(a=u[n]=c[n](m),a.c()),transition_in(a,1),a.m(o.parentNode,o))},i(m){s||(transition_in(a),s=!0)},o(m){transition_out(a),s=!1},d(m){u[n].d(m),m&&detach(o)}}}function create_each_block_1(r){let e=r[6].text+"",t;return{c(){t=text(e)},l(n){t=claim_text(n,e)},m(n,a){insert_hydration(n,t,a)},p(n,a){a&1&&e!==(e=n[6].text+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_else_block$5(r){let e,t=r[6].text+"",n;return{c(){e=element("strong"),n=text(t)},l(a){e=claim_element(a,"STRONG",{});var o=children(e);n=claim_text(o,t),o.forEach(detach)},m(a,o){insert_hydration(a,e,o),append_hydration(e,n)},p(a,o){o&1&&t!==(t=a[6].text+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_if_block_2$7(r){let e=r[6].text+"",t;return{c(){t=text(e)},l(n){t=claim_text(n,e)},m(n,a){insert_hydration(n,t,a)},p(n,a){a&1&&e!==(e=n[6].text+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_each_block$5(r){let e;function t(o,s){return!o[6].marks||o[6].marks.length===0?create_if_block_2$7:create_else_block$5}let n=t(r),a=n(r);return{c(){a.c(),e=empty()},l(o){a.l(o),e=empty()},m(o,s){a.m(o,s),insert_hydration(o,e,s)},p(o,s){n===(n=t(o))&&a?a.p(o,s):(a.d(1),a=n(o),a&&(a.c(),a.m(e.parentNode,e)))},d(o){a.d(o),o&&detach(e)}}}function create_fragment$w(r){let e,t,n=r[0].children&&r[0].children.length>0&&create_if_block$g(r);return{c(){n&&n.c(),e=empty()},l(a){n&&n.l(a),e=empty()},m(a,o){n&&n.m(a,o),insert_hydration(a,e,o),t=!0},p(a,[o]){a[0].children&&a[0].children.length>0?n?(n.p(a,o),o&1&&transition_in(n,1)):(n=create_if_block$g(a),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){n&&n.d(a),a&&detach(e)}}}function instance$p(r,e,t){let{b:n={}}=e;const a=d=>d.replace(/(?:\r\n|\r|\n)/g,"<br>"),o=(d,m)=>m._key===d.marks[0],s=(d,m)=>m._key===d.marks[0],c=(d,m)=>m._key===d.marks[0],u=(d,m)=>m._key===d.marks[0];return r.$$set=d=>{"b"in d&&t(0,n=d.b)},[n,a,o,s,c,u]}class Text extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$w,safe_not_equal,{b:0})}}var image_svelte_svelte_type_style_lang="";function create_if_block$f(r){let e,t,n;return t=new Blocks({props:{blocks:r[0].caption.content}}),{c(){e=element("figcaption"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"FIGCAPTION",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","svelte-1bbn2f1")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&1&&(s.blocks=a[0].caption.content),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$v(r){let e,t,n,a,o,s=has_1(r[0],"caption.content"),c,u=s&&create_if_block$f(r);return{c(){e=element("figure"),t=element("img"),o=space(),u&&u.c(),this.h()},l(d){e=claim_element(d,"FIGURE",{class:!0});var m=children(e);t=claim_element(m,"IMG",{src:!0,alt:!0,class:!0}),o=claim_space(m),u&&u.l(m),m.forEach(detach),this.h()},h(){src_url_equal(t.src,n=urlFor(r[0].asset).quality(90).saturation(-100).width(1e3).url())||attr(t,"src",n),attr(t,"alt",a=r[0].alt?r[0].alt:""),attr(t,"class","svelte-1bbn2f1"),attr(e,"class","svelte-1bbn2f1"),toggle_class(e,"left",r[0].layout=="left"),toggle_class(e,"right",r[0].layout=="right"),toggle_class(e,"full",r[0].fullWidth),toggle_class(e,"cover",r[0].coverAndCrop)},m(d,m){insert_hydration(d,e,m),append_hydration(e,t),append_hydration(e,o),u&&u.m(e,null),c=!0},p(d,[m]){(!c||m&1&&!src_url_equal(t.src,n=urlFor(d[0].asset).quality(90).saturation(-100).width(1e3).url()))&&attr(t,"src",n),(!c||m&1&&a!==(a=d[0].alt?d[0].alt:""))&&attr(t,"alt",a),m&1&&(s=has_1(d[0],"caption.content")),s?u?(u.p(d,m),m&1&&transition_in(u,1)):(u=create_if_block$f(d),u.c(),transition_in(u,1),u.m(e,null)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),m&1&&toggle_class(e,"left",d[0].layout=="left"),m&1&&toggle_class(e,"right",d[0].layout=="right"),m&1&&toggle_class(e,"full",d[0].fullWidth),m&1&&toggle_class(e,"cover",d[0].coverAndCrop)},i(d){c||(transition_in(u),c=!0)},o(d){transition_out(u),c=!1},d(d){d&&detach(e),u&&u.d()}}}function instance$o(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class Image extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$v,safe_not_equal,{b:0})}}var imageFromMainSite_svelte_svelte_type_style_lang="";function create_if_block$e(r){let e,t,n;return t=new Blocks({props:{blocks:r[0].caption.content}}),{c(){e=element("figcaption"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"FIGCAPTION",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","svelte-1bbn2f1")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&1&&(s.blocks=a[0].caption.content),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$u(r){let e,t,n,a,o,s=has_1(r[0],"caption.content"),c,u=s&&create_if_block$e(r);return{c(){e=element("figure"),t=element("img"),o=space(),u&&u.c(),this.h()},l(d){e=claim_element(d,"FIGURE",{class:!0});var m=children(e);t=claim_element(m,"IMG",{src:!0,alt:!0,class:!0}),o=claim_space(m),u&&u.l(m),m.forEach(detach),this.h()},h(){src_url_equal(t.src,n=urlForMainSite(r[0].asset).quality(90).saturation(-100).width(1e3).url())||attr(t,"src",n),attr(t,"alt",a=r[0].alt?r[0].alt:""),attr(t,"class","svelte-1bbn2f1"),attr(e,"class","svelte-1bbn2f1"),toggle_class(e,"left",r[0].layout=="left"),toggle_class(e,"right",r[0].layout=="right"),toggle_class(e,"full",r[0].fullWidth),toggle_class(e,"cover",r[0].coverAndCrop)},m(d,m){insert_hydration(d,e,m),append_hydration(e,t),append_hydration(e,o),u&&u.m(e,null),c=!0},p(d,[m]){(!c||m&1&&!src_url_equal(t.src,n=urlForMainSite(d[0].asset).quality(90).saturation(-100).width(1e3).url()))&&attr(t,"src",n),(!c||m&1&&a!==(a=d[0].alt?d[0].alt:""))&&attr(t,"alt",a),m&1&&(s=has_1(d[0],"caption.content")),s?u?(u.p(d,m),m&1&&transition_in(u,1)):(u=create_if_block$e(d),u.c(),transition_in(u,1),u.m(e,null)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),m&1&&toggle_class(e,"left",d[0].layout=="left"),m&1&&toggle_class(e,"right",d[0].layout=="right"),m&1&&toggle_class(e,"full",d[0].fullWidth),m&1&&toggle_class(e,"cover",d[0].coverAndCrop)},i(d){c||(transition_in(u),c=!0)},o(d){transition_out(u),c=!1},d(d){d&&detach(e),u&&u.d()}}}function instance$n(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class ImageFromMainSite extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$u,safe_not_equal,{b:0})}}var invertedBlock_svelte_svelte_type_style_lang="";function create_fragment$t(r){let e,t,n;return t=new Text({props:{b:r[0]}}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","inverted-block svelte-g37r8")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,[o]){const s={};o&1&&(s.b=a[0]),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function instance$m(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class InvertedBlock extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$t,safe_not_equal,{b:0})}}var blockBeam_svelte_svelte_type_style_lang="";function create_fragment$s(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{class:!0,d:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"class","st0 svelte-12vsv5"),attr(t,"d",`M323.1,136.7l-121.6,21.4 M316.2,109.3l-116,42.2 M304.3,83.3l-106.9,61.6 M287.8,60.7L193.2,140 M269.1,41
		l-79.3,94.4 M245.5,24.3L183.8,131 M219.2,12L177,127.9 M192.5,4.4l-21.4,121.4 M325,165.7H201.5 M2.4,136.7l121.6,21.4 M9.3,109.3
		l116,42.2 M21.2,83.3l106.9,61.6 M37.7,60.7l94.6,79.2 M56.4,41l79.3,94.4 M80,24.3L141.7,131 M106.3,12l42.2,115.8 M133,4.4
		l21.4,121.4 M161.9,1.8l0,123.3 M0.5,165.7H124`),attr(e,"version","1.1"),attr(e,"id","Layer_1"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(e,"x","0px"),attr(e,"y","0px"),attr(e,"viewBox","0 0 326.4 167.6"),set_style(e,"enable-background","new 0 0 326.4 167.6"),attr(e,"xml:space","preserve"),attr(e,"class","svelte-12vsv5")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class Block_beam extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$s,safe_not_equal,{})}}var logoBlock_svelte_svelte_type_style_lang="";function create_fragment$r(r){let e,t,n,a,o,s,c,u,d,m;return a=new Block_beam({}),d=new Text({props:{b:r[0]}}),{c(){e=element("div"),t=element("div"),n=element("div"),create_component(a.$$.fragment),o=space(),s=element("div"),c=space(),u=element("div"),create_component(d.$$.fragment),this.h()},l(l){e=claim_element(l,"DIV",{class:!0});var f=children(e);t=claim_element(f,"DIV",{class:!0});var _=children(t);n=claim_element(_,"DIV",{class:!0});var b=children(n);claim_component(a.$$.fragment,b),b.forEach(detach),o=claim_space(_),s=claim_element(_,"DIV",{class:!0}),children(s).forEach(detach),_.forEach(detach),c=claim_space(f),u=claim_element(f,"DIV",{class:!0});var S=children(u);claim_component(d.$$.fragment,S),S.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"class","beam svelte-1y9hgkm"),attr(s,"class","line svelte-1y9hgkm"),attr(t,"class","top-row svelte-1y9hgkm"),attr(u,"class","logoblock-text svelte-1y9hgkm"),attr(e,"class","logo-block svelte-1y9hgkm")},m(l,f){insert_hydration(l,e,f),append_hydration(e,t),append_hydration(t,n),mount_component(a,n,null),append_hydration(t,o),append_hydration(t,s),append_hydration(e,c),append_hydration(e,u),mount_component(d,u,null),m=!0},p(l,[f]){const _={};f&1&&(_.b=l[0]),d.$set(_)},i(l){m||(transition_in(a.$$.fragment,l),transition_in(d.$$.fragment,l),m=!0)},o(l){transition_out(a.$$.fragment,l),transition_out(d.$$.fragment,l),m=!1},d(l){l&&detach(e),destroy_component(a),destroy_component(d)}}}function instance$l(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class LogoBlock extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$r,safe_not_equal,{b:0})}}var embed_svelte_svelte_type_style_lang="";function create_if_block_2$6(r){let e,t;return{c(){e=element("iframe"),this.h()},l(n){e=claim_element(n,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"width","720"),attr(e,"height","480"),src_url_equal(e.src,t="https://www.youtube.com/embed/"+getVideoId(r[0].url).id)||attr(e,"src",t),attr(e,"frameborder","0"),attr(e,"allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),e.allowFullscreen=!0,attr(e,"class","svelte-23luwt")},m(n,a){insert_hydration(n,e,a)},p(n,a){a&1&&!src_url_equal(e.src,t="https://www.youtube.com/embed/"+getVideoId(n[0].url).id)&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_if_block_1$a(r){let e,t;return{c(){e=element("iframe"),this.h()},l(n){e=claim_element(n,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,byline:!0,color:!0,allow:!0,class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"width","720"),attr(e,"height","480"),src_url_equal(e.src,t="https://player.vimeo.com/video/"+getVideoId(r[0].url).id)||attr(e,"src",t),attr(e,"frameborder","0"),attr(e,"byline","false"),attr(e,"color","#ffffff"),attr(e,"allow","autoplay; fullscreen"),e.allowFullscreen=!0,attr(e,"class","svelte-23luwt")},m(n,a){insert_hydration(n,e,a)},p(n,a){a&1&&!src_url_equal(e.src,t="https://player.vimeo.com/video/"+getVideoId(n[0].url).id)&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_if_block$d(r){let e,t,n;return t=new Blocks({props:{blocks:r[0].caption.content}}),{c(){e=element("figcaption"),create_component(t.$$.fragment)},l(a){e=claim_element(a,"FIGCAPTION",{});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach)},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&1&&(s.blocks=a[0].caption.content),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$q(r){let e,t,n=r[0].url.includes("youtube"),a,o=r[0].url.includes("vimeo"),s,c=has_1(r[0],"caption.content"),u,d,m=n&&create_if_block_2$6(r),l=o&&create_if_block_1$a(r),f=c&&create_if_block$d(r);return{c(){e=element("div"),t=element("div"),m&&m.c(),a=space(),l&&l.c(),s=space(),f&&f.c(),u=empty(),this.h()},l(_){e=claim_element(_,"DIV",{class:!0});var b=children(e);t=claim_element(b,"DIV",{class:!0});var S=children(t);m&&m.l(S),a=claim_space(S),l&&l.l(S),S.forEach(detach),b.forEach(detach),s=claim_space(_),f&&f.l(_),u=empty(),this.h()},h(){attr(t,"class","inner svelte-23luwt"),attr(e,"class","embed svelte-23luwt")},m(_,b){insert_hydration(_,e,b),append_hydration(e,t),m&&m.m(t,null),append_hydration(t,a),l&&l.m(t,null),insert_hydration(_,s,b),f&&f.m(_,b),insert_hydration(_,u,b),d=!0},p(_,[b]){b&1&&(n=_[0].url.includes("youtube")),n?m?m.p(_,b):(m=create_if_block_2$6(_),m.c(),m.m(t,a)):m&&(m.d(1),m=null),b&1&&(o=_[0].url.includes("vimeo")),o?l?l.p(_,b):(l=create_if_block_1$a(_),l.c(),l.m(t,null)):l&&(l.d(1),l=null),b&1&&(c=has_1(_[0],"caption.content")),c?f?(f.p(_,b),b&1&&transition_in(f,1)):(f=create_if_block$d(_),f.c(),transition_in(f,1),f.m(u.parentNode,u)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(_){d||(transition_in(f),d=!0)},o(_){transition_out(f),d=!1},d(_){_&&detach(e),m&&m.d(),l&&l.d(),_&&detach(s),f&&f.d(_),_&&detach(u)}}}function instance$k(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class Embed extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$q,safe_not_equal,{b:0})}}var divider_svelte_svelte_type_style_lang="";function create_fragment$p(r){let e;return{c(){e=element("div"),this.h()},l(t){e=claim_element(t,"DIV",{class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"class","divider svelte-ibl5lr")},m(t,n){insert_hydration(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function instance$j(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class Divider extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$p,safe_not_equal,{b:0})}}var columns_svelte_svelte_type_style_lang="";function create_if_block_1$9(r){let e,t=r[0].title+"",n,a;return{c(){e=element("h2"),n=text(t),this.h()},l(o){e=claim_element(o,"H2",{id:!0,class:!0});var s=children(e);n=claim_text(s,t),s.forEach(detach),this.h()},h(){attr(e,"id",a=slugify(r[0].title,{lower:!0})),attr(e,"class","svelte-1yggcq")},m(o,s){insert_hydration(o,e,s),append_hydration(e,n)},p(o,s){s&1&&t!==(t=o[0].title+"")&&set_data(n,t),s&1&&a!==(a=slugify(o[0].title,{lower:!0}))&&attr(e,"id",a)},d(o){o&&detach(e)}}}function create_if_block$c(r){let e,t,n;return t=new Blocks({props:{blocks:r[0].columnContent.content}}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","inner svelte-1yggcq")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&1&&(s.blocks=a[0].columnContent.content),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$o(r){let e,t,n=has_1(r[0],"columnContent.content"),a,o=r[0].title&&create_if_block_1$9(r),s=n&&create_if_block$c(r);return{c(){e=element("div"),o&&o.c(),t=space(),s&&s.c(),this.h()},l(c){e=claim_element(c,"DIV",{class:!0});var u=children(e);o&&o.l(u),t=claim_space(u),s&&s.l(u),u.forEach(detach),this.h()},h(){attr(e,"class","columns svelte-1yggcq")},m(c,u){insert_hydration(c,e,u),o&&o.m(e,null),append_hydration(e,t),s&&s.m(e,null),a=!0},p(c,[u]){c[0].title?o?o.p(c,u):(o=create_if_block_1$9(c),o.c(),o.m(e,t)):o&&(o.d(1),o=null),u&1&&(n=has_1(c[0],"columnContent.content")),n?s?(s.p(c,u),u&1&&transition_in(s,1)):(s=create_if_block$c(c),s.c(),transition_in(s,1),s.m(e,null)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(c){a||(transition_in(s),a=!0)},o(c){transition_out(s),a=!1},d(c){c&&detach(e),o&&o.d(),s&&s.d()}}}function instance$i(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class Columns extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,create_fragment$o,safe_not_equal,{b:0})}}var donationWidget_svelte_svelte_type_style_lang="";function create_fragment$n(r){let e,t,n,a,o;return{c(){e=element("script"),n=space(),a=element("div"),o=element("div"),this.h()},l(s){const c=query_selector_all('[data-svelte="svelte-1cxe6br"]',document.head);e=claim_element(c,"SCRIPT",{src:!0});var u=children(e);u.forEach(detach),c.forEach(detach),n=claim_space(s),a=claim_element(s,"DIV",{class:!0});var d=children(a);o=claim_element(d,"DIV",{id:!0,class:!0}),children(o).forEach(detach),d.forEach(detach),this.h()},h(){src_url_equal(e.src,t="https://secure.givelively.org/widgets/simple_donation/the-eyebeam-atelier-inc/donate-to-eyebeam.js?show_suggested_amount_buttons=false&show_in_honor_of=false&address_required=false&has_required_custom_question=false")||attr(e,"src",t),attr(o,"id","give-lively-widget"),attr(o,"class","gl-simple-donation-widget"),attr(a,"class","donation-widget svelte-g1dluc")},m(s,c){append_hydration(document.head,e),insert_hydration(s,n,c),insert_hydration(s,a,c),append_hydration(a,o)},p:noop$1,i:noop$1,o:noop$1,d(s){detach(e),s&&detach(n),s&&detach(a)}}}function instance$h(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class DonationWidget extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$n,safe_not_equal,{b:0})}}var applicationButton_svelte_svelte_type_style_lang="";function create_else_block$4(r){let e,t,n,a,o,s,c=r[0].shortText+"",u,d,m,l=r[0].applicationEndDate&&create_if_block_4$2(),f=r[0].applicationEndDate&&create_if_block_3$2(r);return{c(){e=element("div"),t=element("div"),n=element("a"),l&&l.c(),a=space(),o=element("div"),s=element("div"),u=text(c),d=space(),f&&f.c(),this.h()},l(_){e=claim_element(_,"DIV",{class:!0});var b=children(e);t=claim_element(b,"DIV",{class:!0});var S=children(t);n=claim_element(S,"A",{href:!0,target:!0,class:!0});var E=children(n);l&&l.l(E),a=claim_space(E),o=claim_element(E,"DIV",{class:!0});var y=children(o);s=claim_element(y,"DIV",{class:!0});var k=children(s);u=claim_text(k,c),k.forEach(detach),d=claim_space(y),f&&f.l(y),y.forEach(detach),E.forEach(detach),S.forEach(detach),b.forEach(detach),this.h()},h(){attr(s,"class","short-text"),attr(o,"class","applications-text svelte-1dlavbd"),attr(n,"href",m=r[0].url),attr(n,"target","_blank"),attr(n,"class","button svelte-1dlavbd"),attr(t,"class","application-button-inner svelte-1dlavbd"),attr(e,"class","application-button-small svelte-1dlavbd")},m(_,b){insert_hydration(_,e,b),append_hydration(e,t),append_hydration(t,n),l&&l.m(n,null),append_hydration(n,a),append_hydration(n,o),append_hydration(o,s),append_hydration(s,u),append_hydration(o,d),f&&f.m(o,null)},p(_,b){_[0].applicationEndDate?l||(l=create_if_block_4$2(),l.c(),l.m(n,a)):l&&(l.d(1),l=null),b&1&&c!==(c=_[0].shortText+"")&&set_data(u,c),_[0].applicationEndDate?f?f.p(_,b):(f=create_if_block_3$2(_),f.c(),f.m(o,null)):f&&(f.d(1),f=null),b&1&&m!==(m=_[0].url)&&attr(n,"href",m)},i:noop$1,o:noop$1,d(_){_&&detach(e),l&&l.d(),f&&f.d()}}}function create_if_block$b(r){let e,t,n,a,o,s,c,u,d,m,l,f=has_1(r[0],"longText.content"),_,b,S,E=r[0].shortText+"",y,k,I,O=r[0].applicationEndDate&&create_if_block_2$5(r),D=f&&create_if_block_1$8(r);return{c(){e=element("div"),t=element("div"),n=element("div"),a=element("div"),o=element("div"),s=space(),c=element("div"),u=element("div"),d=text("APPLICATIONS ARE OPEN"),m=space(),O&&O.c(),l=space(),D&&D.c(),_=space(),b=element("div"),S=element("a"),y=text(E),this.h()},l(R){e=claim_element(R,"DIV",{class:!0});var P=children(e);t=claim_element(P,"DIV",{class:!0});var W=children(t);n=claim_element(W,"DIV",{class:!0});var V=children(n);a=claim_element(V,"DIV",{class:!0});var L=children(a);o=claim_element(L,"DIV",{class:!0}),children(o).forEach(detach),L.forEach(detach),s=claim_space(V),c=claim_element(V,"DIV",{class:!0});var j=children(c);u=claim_element(j,"DIV",{class:!0});var z=children(u);d=claim_text(z,"APPLICATIONS ARE OPEN"),z.forEach(detach),m=claim_space(j),O&&O.l(j),j.forEach(detach),V.forEach(detach),l=claim_space(W),D&&D.l(W),W.forEach(detach),_=claim_space(P),b=claim_element(P,"DIV",{class:!0});var q=children(b);S=claim_element(q,"A",{href:!0,target:!0,class:!0});var Q=children(S);y=claim_text(Q,E),Q.forEach(detach),q.forEach(detach),P.forEach(detach),this.h()},h(){attr(o,"class","circle svelte-1dlavbd"),attr(a,"class","col first"),attr(u,"class","headline svelte-1dlavbd"),attr(c,"class","col second svelte-1dlavbd"),attr(n,"class","top svelte-1dlavbd"),attr(t,"class","column first svelte-1dlavbd"),attr(S,"href",k=r[0].url),attr(S,"target","_blank"),attr(S,"class","apply-now svelte-1dlavbd"),attr(b,"class","column second svelte-1dlavbd"),attr(e,"class","application-button-large svelte-1dlavbd")},m(R,P){insert_hydration(R,e,P),append_hydration(e,t),append_hydration(t,n),append_hydration(n,a),append_hydration(a,o),append_hydration(n,s),append_hydration(n,c),append_hydration(c,u),append_hydration(u,d),append_hydration(c,m),O&&O.m(c,null),append_hydration(t,l),D&&D.m(t,null),append_hydration(e,_),append_hydration(e,b),append_hydration(b,S),append_hydration(S,y),I=!0},p(R,P){R[0].applicationEndDate?O?O.p(R,P):(O=create_if_block_2$5(R),O.c(),O.m(c,null)):O&&(O.d(1),O=null),P&1&&(f=has_1(R[0],"longText.content")),f?D?(D.p(R,P),P&1&&transition_in(D,1)):(D=create_if_block_1$8(R),D.c(),transition_in(D,1),D.m(t,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),(!I||P&1)&&E!==(E=R[0].shortText+"")&&set_data(y,E),(!I||P&1&&k!==(k=R[0].url))&&attr(S,"href",k)},i(R){I||(transition_in(D),I=!0)},o(R){transition_out(D),I=!1},d(R){R&&detach(e),O&&O.d(),D&&D.d()}}}function create_if_block_4$2(r){let e;return{c(){e=element("div"),this.h()},l(t){e=claim_element(t,"DIV",{class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"class","circle svelte-1dlavbd")},m(t,n){insert_hydration(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_3$2(r){let e,t,n=longFormatDate(r[0].applicationEndDate)+"",a;return{c(){e=element("div"),t=text("Applications Due by "),a=text(n),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var s=children(e);t=claim_text(s,"Applications Due by "),a=claim_text(s,n),s.forEach(detach),this.h()},h(){attr(e,"class","date svelte-1dlavbd")},m(o,s){insert_hydration(o,e,s),append_hydration(e,t),append_hydration(e,a)},p(o,s){s&1&&n!==(n=longFormatDate(o[0].applicationEndDate)+"")&&set_data(a,n)},d(o){o&&detach(e)}}}function create_if_block_2$5(r){let e,t,n=longFormatDate(r[0].applicationEndDate)+"",a;return{c(){e=element("div"),t=text("Due by "),a=text(n),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var s=children(e);t=claim_text(s,"Due by "),a=claim_text(s,n),s.forEach(detach),this.h()},h(){attr(e,"class","date svelte-1dlavbd")},m(o,s){insert_hydration(o,e,s),append_hydration(e,t),append_hydration(e,a)},p(o,s){s&1&&n!==(n=longFormatDate(o[0].applicationEndDate)+"")&&set_data(a,n)},d(o){o&&detach(e)}}}function create_if_block_1$8(r){let e,t,n;return t=new Blocks({props:{blocks:r[0].longText.content}}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","text svelte-1dlavbd")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&1&&(s.blocks=a[0].longText.content),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$m(r){let e,t,n,a;const o=[create_if_block$b,create_else_block$4],s=[];function c(u,d){return u[0].size=="large"?0:1}return e=c(r),t=s[e]=o[e](r),{c(){t.c(),n=empty()},l(u){t.l(u),n=empty()},m(u,d){s[e].m(u,d),insert_hydration(u,n,d),a=!0},p(u,[d]){let m=e;e=c(u),e===m?s[e].p(u,d):(group_outros(),transition_out(s[m],1,1,()=>{s[m]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=o[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){a||(transition_in(t),a=!0)},o(u){transition_out(t),a=!1},d(u){s[e].d(u),u&&detach(n)}}}function instance$g(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class ApplicationButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$m,safe_not_equal,{b:0})}}var arrowDown_svelte_svelte_type_style_lang="";function create_fragment$l(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d","M4.78393 7.78516L0.640486 0.608508L8.92737 0.608508L4.78393 7.78516Z"),attr(t,"class","svelte-hhwbji"),attr(e,"width","9"),attr(e,"height","8"),attr(e,"viewBox","0 0 9 8"),attr(e,"fill","none"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","svelte-hhwbji")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class Arrow_down extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$l,safe_not_equal,{})}}var arrowLeft_svelte_svelte_type_style_lang="";function create_fragment$k(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d","M-0.000488072 5.06677L7.17615 9.45473L7.17615 0.678818L-0.000488072 5.06677Z"),attr(t,"class","svelte-bl0yym"),attr(e,"width","8"),attr(e,"height","10"),attr(e,"viewBox","0 0 8 10"),attr(e,"fill","none"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","svelte-bl0yym")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class Arrow_left extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$k,safe_not_equal,{})}}var qa_svelte_svelte_type_style_lang="";function create_else_block$3(r){let e,t;return e=new Arrow_left({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$4(r){let e,t;return e=new Arrow_down({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$a(r){let e,t=has_1(r[0],"answer.content"),n,a=t&&create_if_block_1$7(r);return{c(){e=element("div"),a&&a.c(),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var s=children(e);a&&a.l(s),s.forEach(detach),this.h()},h(){attr(e,"class","answer svelte-nx2f1v")},m(o,s){insert_hydration(o,e,s),a&&a.m(e,null),n=!0},p(o,s){s&1&&(t=has_1(o[0],"answer.content")),t?a?(a.p(o,s),s&1&&transition_in(a,1)):(a=create_if_block_1$7(o),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(o){n||(transition_in(a),n=!0)},o(o){transition_out(a),n=!1},d(o){o&&detach(e),a&&a.d()}}}function create_if_block_1$7(r){let e,t;return e=new Blocks({props:{blocks:r[0].answer.content}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.blocks=n[0].answer.content),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$j(r){let e,t,n,a=r[0].question+"",o,s,c,u,d,m,l,f,_;const b=[create_if_block_2$4,create_else_block$3],S=[];function E(k,I){return k[1]?0:1}u=E(r),d=S[u]=b[u](r);let y=r[1]&&create_if_block$a(r);return{c(){e=element("div"),t=element("div"),n=element("div"),o=text(a),s=space(),c=element("div"),d.c(),m=space(),y&&y.c(),this.h()},l(k){e=claim_element(k,"DIV",{class:!0});var I=children(e);t=claim_element(I,"DIV",{class:!0});var O=children(t);n=claim_element(O,"DIV",{class:!0});var D=children(n);o=claim_text(D,a),D.forEach(detach),s=claim_space(O),c=claim_element(O,"DIV",{class:!0});var R=children(c);d.l(R),R.forEach(detach),O.forEach(detach),m=claim_space(I),y&&y.l(I),I.forEach(detach),this.h()},h(){attr(n,"class","text svelte-nx2f1v"),attr(c,"class","icon svelte-nx2f1v"),attr(t,"class","question svelte-nx2f1v"),attr(e,"class","qa svelte-nx2f1v")},m(k,I){insert_hydration(k,e,I),append_hydration(e,t),append_hydration(t,n),append_hydration(n,o),append_hydration(t,s),append_hydration(t,c),S[u].m(c,null),append_hydration(e,m),y&&y.m(e,null),l=!0,f||(_=listen$2(t,"click",r[2]),f=!0)},p(k,[I]){(!l||I&1)&&a!==(a=k[0].question+"")&&set_data(o,a);let O=u;u=E(k),u!==O&&(group_outros(),transition_out(S[O],1,1,()=>{S[O]=null}),check_outros(),d=S[u],d||(d=S[u]=b[u](k),d.c()),transition_in(d,1),d.m(c,null)),k[1]?y?(y.p(k,I),I&2&&transition_in(y,1)):(y=create_if_block$a(k),y.c(),transition_in(y,1),y.m(e,null)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(k){l||(transition_in(d),transition_in(y),l=!0)},o(k){transition_out(d),transition_out(y),l=!1},d(k){k&&detach(e),S[u].d(),y&&y.d(),f=!1,_()}}}function instance$f(r,e,t){let{item:n={}}=e,a=!1;const o=()=>{t(1,a=!a)};return r.$$set=s=>{"item"in s&&t(0,n=s.item)},[n,a,o]}class Qa extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$j,safe_not_equal,{item:0})}}var faq_svelte_svelte_type_style_lang="";function get_each_context$4(r,e,t){const n=r.slice();return n[1]=e[t],n}function create_each_block$4(r){let e,t;return e=new Qa({props:{item:r[1]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.item=n[1]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$i(r){let e,t,n=r[0].title+"",a,o,s,c,u,d=r[0].questionAnswer,m=[];for(let f=0;f<d.length;f+=1)m[f]=create_each_block$4(get_each_context$4(r,d,f));const l=f=>transition_out(m[f],1,1,()=>{m[f]=null});return{c(){e=element("div"),t=element("h2"),a=text(n),s=space(),c=element("div");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){e=claim_element(f,"DIV",{class:!0});var _=children(e);t=claim_element(_,"H2",{id:!0,class:!0});var b=children(t);a=claim_text(b,n),b.forEach(detach),s=claim_space(_),c=claim_element(_,"DIV",{class:!0});var S=children(c);for(let E=0;E<m.length;E+=1)m[E].l(S);S.forEach(detach),_.forEach(detach),this.h()},h(){attr(t,"id",o=slugify(r[0].title,{lower:!0})),attr(t,"class","svelte-1lh5ive"),attr(c,"class","faq-inner svelte-1lh5ive"),attr(e,"class","faq svelte-1lh5ive")},m(f,_){insert_hydration(f,e,_),append_hydration(e,t),append_hydration(t,a),append_hydration(e,s),append_hydration(e,c);for(let b=0;b<m.length;b+=1)m[b].m(c,null);u=!0},p(f,[_]){if((!u||_&1)&&n!==(n=f[0].title+"")&&set_data(a,n),(!u||_&1&&o!==(o=slugify(f[0].title,{lower:!0})))&&attr(t,"id",o),_&1){d=f[0].questionAnswer;let b;for(b=0;b<d.length;b+=1){const S=get_each_context$4(f,d,b);m[b]?(m[b].p(S,_),transition_in(m[b],1)):(m[b]=create_each_block$4(S),m[b].c(),transition_in(m[b],1),m[b].m(c,null))}for(group_outros(),b=d.length;b<m.length;b+=1)l(b);check_outros()}},i(f){if(!u){for(let _=0;_<d.length;_+=1)transition_in(m[_]);u=!0}},o(f){m=m.filter(Boolean);for(let _=0;_<m.length;_+=1)transition_out(m[_]);u=!1},d(f){f&&detach(e),destroy_each(m,f)}}}function instance$e(r,e,t){let{b:n={}}=e;return r.$$set=a=>{"b"in a&&t(0,n=a.b)},[n]}class Faq extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$i,safe_not_equal,{b:0})}}var playArrow_svelte_svelte_type_style_lang="";function create_fragment$h(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d","M0.123047 34.0552V0L20.5614 17.0276L0.123047 34.0552Z"),attr(t,"class","svelte-bl0yym"),attr(e,"width","21"),attr(e,"height","35"),attr(e,"viewBox","0 0 21 35"),attr(e,"fill","none"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","svelte-bl0yym")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class Play_arrow extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$h,safe_not_equal,{})}}var video_svelte_svelte_type_style_lang="";function create_catch_block$1(r){return{c:noop$1,l:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$1(r){let e,t,n,a,o,s,c=r[0].title+"",u,d,m=r[0].mainImage&&create_if_block$9(r);return a=new Play_arrow({}),{c(){e=element("a"),m&&m.c(),t=space(),n=element("div"),create_component(a.$$.fragment),o=space(),s=element("div"),u=text(c),this.h()},l(l){e=claim_element(l,"A",{href:!0,class:!0});var f=children(e);m&&m.l(f),t=claim_space(f),n=claim_element(f,"DIV",{class:!0});var _=children(n);claim_component(a.$$.fragment,_),_.forEach(detach),o=claim_space(f),s=claim_element(f,"DIV",{class:!0});var b=children(s);u=claim_text(b,c),b.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"class","icon svelte-139dsg8"),attr(s,"class","title svelte-139dsg8"),attr(e,"href","/videos/"+get_1(r[0],"slug.current")),attr(e,"class","video-block svelte-139dsg8")},m(l,f){insert_hydration(l,e,f),m&&m.m(e,null),append_hydration(e,t),append_hydration(e,n),mount_component(a,n,null),append_hydration(e,o),append_hydration(e,s),append_hydration(s,u),d=!0},p(l,f){l[0].mainImage&&m.p(l,f)},i(l){d||(transition_in(a.$$.fragment,l),d=!0)},o(l){transition_out(a.$$.fragment,l),d=!1},d(l){l&&detach(e),m&&m.d(),destroy_component(a)}}}function create_if_block$9(r){let e,t,n;return{c(){e=element("img"),this.h()},l(a){e=claim_element(a,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){attr(e,"class","main-image svelte-139dsg8"),attr(e,"alt",t=r[0].title),src_url_equal(e.src,n=urlFor(r[0].mainImage).quality(90).saturation(-100).width(400).url())||attr(e,"src",n)},m(a,o){insert_hydration(a,e,o)},p:noop$1,d(a){a&&detach(e)}}}function create_pending_block$1(r){return{c:noop$1,l:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_fragment$g(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!1,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:0,blocks:[,,,]};return handle_promise(r[0],n),{c(){e=empty(),n.block.c()},l(a){e=empty(),n.block.l(a)},m(a,o){insert_hydration(a,e,o),n.block.m(a,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,[o]){r=a,update_await_block_branch(n,r,o)},i(a){t||(transition_in(n.block),t=!0)},o(a){for(let o=0;o<3;o+=1){const s=n.blocks[o];transition_out(s)}t=!1},d(a){a&&detach(e),n.block.d(a),n.token=null,n=null}}}function instance$d(r,e,t){let{b:n={}}=e;const a=loadData("*[_id == $id][0]",{id:n.videoPost._ref});return r.$$set=o=>{"b"in o&&t(1,n=o.b)},[a,n]}class Video extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$g,safe_not_equal,{b:1})}}function get_each_context$3(r,e,t){const n=r.slice();return n[2]=e[t],n}function create_if_block_9$1(r){let e,t,n,a;const o=[create_if_block_10$1,create_if_block_11$1,create_else_block_1],s=[];function c(u,d){return u[2].style=="logoBlock"?0:u[2].style=="invertedBlock"?1:2}return e=c(r),t=s[e]=o[e](r),{c(){t.c(),n=empty()},l(u){t.l(u),n=empty()},m(u,d){s[e].m(u,d),insert_hydration(u,n,d),a=!0},p(u,d){let m=e;e=c(u),e===m?s[e].p(u,d):(group_outros(),transition_out(s[m],1,1,()=>{s[m]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=o[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){a||(transition_in(t),a=!0)},o(u){transition_out(t),a=!1},d(u){s[e].d(u),u&&detach(n)}}}function create_else_block_1(r){let e,t;return e=new Text({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_11$1(r){let e,t;return e=new InvertedBlock({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_10$1(r){let e,t;return e=new LogoBlock({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_7$2(r){let e,t,n,a;const o=[create_if_block_8$2,create_else_block$2],s=[];function c(u,d){return u[1]?0:1}return e=c(r),t=s[e]=o[e](r),{c(){t.c(),n=empty()},l(u){t.l(u),n=empty()},m(u,d){s[e].m(u,d),insert_hydration(u,n,d),a=!0},p(u,d){let m=e;e=c(u),e===m?s[e].p(u,d):(group_outros(),transition_out(s[m],1,1,()=>{s[m]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=o[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){a||(transition_in(t),a=!0)},o(u){transition_out(t),a=!1},d(u){s[e].d(u),u&&detach(n)}}}function create_else_block$2(r){let e,t;return e=new Image({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_8$2(r){let e,t;return e=new ImageFromMainSite({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$2(r){let e,t;return e=new Embed({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$2(r){let e,t;return e=new Divider({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$1(r){let e,t;return e=new Columns({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$1(r){let e,t;return e=new DonationWidget({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$3(r){let e,t;return e=new ApplicationButton({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$6(r){let e,t;return e=new Faq({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$8(r){let e,t;return e=new Video({props:{b:r[2]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.b=n[2]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$3(r){let e,t,n,a,o,s,c,u,d,m,l=r[2]._type=="block"&&create_if_block_9$1(r),f=r[2]._type=="image"&&create_if_block_7$2(r),_=r[2]._type=="embedBlock"&&create_if_block_6$2(r),b=r[2]._type=="dividerBlock"&&create_if_block_5$2(r),S=r[2]._type=="columnsBlock"&&create_if_block_4$1(r),E=r[2]._type=="donationWidget"&&create_if_block_3$1(r),y=r[2]._type=="applicationButton"&&create_if_block_2$3(r),k=r[2]._type=="faq"&&create_if_block_1$6(r),I=r[2]._type=="videoBlock"&&create_if_block$8(r);return{c(){l&&l.c(),e=space(),f&&f.c(),t=space(),_&&_.c(),n=space(),b&&b.c(),a=space(),S&&S.c(),o=space(),E&&E.c(),s=space(),y&&y.c(),c=space(),k&&k.c(),u=space(),I&&I.c(),d=empty()},l(O){l&&l.l(O),e=claim_space(O),f&&f.l(O),t=claim_space(O),_&&_.l(O),n=claim_space(O),b&&b.l(O),a=claim_space(O),S&&S.l(O),o=claim_space(O),E&&E.l(O),s=claim_space(O),y&&y.l(O),c=claim_space(O),k&&k.l(O),u=claim_space(O),I&&I.l(O),d=empty()},m(O,D){l&&l.m(O,D),insert_hydration(O,e,D),f&&f.m(O,D),insert_hydration(O,t,D),_&&_.m(O,D),insert_hydration(O,n,D),b&&b.m(O,D),insert_hydration(O,a,D),S&&S.m(O,D),insert_hydration(O,o,D),E&&E.m(O,D),insert_hydration(O,s,D),y&&y.m(O,D),insert_hydration(O,c,D),k&&k.m(O,D),insert_hydration(O,u,D),I&&I.m(O,D),insert_hydration(O,d,D),m=!0},p(O,D){O[2]._type=="block"?l?(l.p(O,D),D&1&&transition_in(l,1)):(l=create_if_block_9$1(O),l.c(),transition_in(l,1),l.m(e.parentNode,e)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros()),O[2]._type=="image"?f?(f.p(O,D),D&1&&transition_in(f,1)):(f=create_if_block_7$2(O),f.c(),transition_in(f,1),f.m(t.parentNode,t)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),O[2]._type=="embedBlock"?_?(_.p(O,D),D&1&&transition_in(_,1)):(_=create_if_block_6$2(O),_.c(),transition_in(_,1),_.m(n.parentNode,n)):_&&(group_outros(),transition_out(_,1,1,()=>{_=null}),check_outros()),O[2]._type=="dividerBlock"?b?(b.p(O,D),D&1&&transition_in(b,1)):(b=create_if_block_5$2(O),b.c(),transition_in(b,1),b.m(a.parentNode,a)):b&&(group_outros(),transition_out(b,1,1,()=>{b=null}),check_outros()),O[2]._type=="columnsBlock"?S?(S.p(O,D),D&1&&transition_in(S,1)):(S=create_if_block_4$1(O),S.c(),transition_in(S,1),S.m(o.parentNode,o)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()),O[2]._type=="donationWidget"?E?(E.p(O,D),D&1&&transition_in(E,1)):(E=create_if_block_3$1(O),E.c(),transition_in(E,1),E.m(s.parentNode,s)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),O[2]._type=="applicationButton"?y?(y.p(O,D),D&1&&transition_in(y,1)):(y=create_if_block_2$3(O),y.c(),transition_in(y,1),y.m(c.parentNode,c)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros()),O[2]._type=="faq"?k?(k.p(O,D),D&1&&transition_in(k,1)):(k=create_if_block_1$6(O),k.c(),transition_in(k,1),k.m(u.parentNode,u)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),O[2]._type=="videoBlock"?I?(I.p(O,D),D&1&&transition_in(I,1)):(I=create_if_block$8(O),I.c(),transition_in(I,1),I.m(d.parentNode,d)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros())},i(O){m||(transition_in(l),transition_in(f),transition_in(_),transition_in(b),transition_in(S),transition_in(E),transition_in(y),transition_in(k),transition_in(I),m=!0)},o(O){transition_out(l),transition_out(f),transition_out(_),transition_out(b),transition_out(S),transition_out(E),transition_out(y),transition_out(k),transition_out(I),m=!1},d(O){l&&l.d(O),O&&detach(e),f&&f.d(O),O&&detach(t),_&&_.d(O),O&&detach(n),b&&b.d(O),O&&detach(a),S&&S.d(O),O&&detach(o),E&&E.d(O),O&&detach(s),y&&y.d(O),O&&detach(c),k&&k.d(O),O&&detach(u),I&&I.d(O),O&&detach(d)}}}function create_fragment$f(r){let e,t,n=r[0],a=[];for(let s=0;s<n.length;s+=1)a[s]=create_each_block$3(get_each_context$3(r,n,s));const o=s=>transition_out(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=empty()},l(s){for(let c=0;c<a.length;c+=1)a[c].l(s);e=empty()},m(s,c){for(let u=0;u<a.length;u+=1)a[u].m(s,c);insert_hydration(s,e,c),t=!0},p(s,[c]){if(c&3){n=s[0];let u;for(u=0;u<n.length;u+=1){const d=get_each_context$3(s,n,u);a[u]?(a[u].p(d,c),transition_in(a[u],1)):(a[u]=create_each_block$3(d),a[u].c(),transition_in(a[u],1),a[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<a.length;u+=1)o(u);check_outros()}},i(s){if(!t){for(let c=0;c<n.length;c+=1)transition_in(a[c]);t=!0}},o(s){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)transition_out(a[c]);t=!1},d(s){destroy_each(a,s),s&&detach(e)}}}function instance$c(r,e,t){let{blocks:n=[]}=e,{mainSite:a=!1}=e;return r.$$set=o=>{"blocks"in o&&t(0,n=o.blocks),"mainSite"in o&&t(1,a=o.mainSite)},[n,a]}class Blocks extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$f,safe_not_equal,{blocks:0,mainSite:1})}}var fullBeam_svelte_svelte_type_style_lang="";function create_fragment$e(r){let e,t,n;return{c(){e=svg_element("svg"),t=svg_element("path"),n=svg_element("path"),this.h()},l(a){e=claim_svg_element(a,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,class:!0});var o=children(e);t=claim_svg_element(o,"path",{class:!0,d:!0}),children(t).forEach(detach),n=claim_svg_element(o,"path",{class:!0,d:!0}),children(n).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"class","st1 svelte-1wdefg6"),attr(t,"d","M0,8.8h6.8 M16.8,4.4l-5.9,3.3L16.8,4.4z M13.6,1.2l-3.4,5.7L13.6,1.2z M11.1,8.8H18 M1.2,4.4l5.9,3.3L1.2,4.4z M4.4,1.2l3.4,5.7L4.4,1.2z M9,0v6.6V0z"),attr(n,"class","st1 svelte-1wdefg6"),attr(n,"d","M1.2,13.1l5.9-3.3 M4.4,16.3l3.4-5.7 M16.8,13.1l-5.9-3.3 M13.6,16.3l-3.4-5.7 M9,17.4v-6.6"),attr(e,"version","1.1"),attr(e,"id","Layer_1"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(e,"x","0px"),attr(e,"y","0px"),attr(e,"viewBox","0 0 18 18"),set_style(e,"enable-background","new 0 0 18 18"),attr(e,"xml:space","preserve"),attr(e,"class","svelte-1wdefg6"),toggle_class(e,"black",r[0])},m(a,o){insert_hydration(a,e,o),append_hydration(e,t),append_hydration(e,n)},p(a,[o]){o&1&&toggle_class(e,"black",a[0])},i:noop$1,o:noop$1,d(a){a&&detach(e)}}}function instance$b(r,e,t){let{black:n=!1}=e;return r.$$set=a=>{"black"in a&&t(0,n=a.black)},[n]}class Full_beam extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$e,safe_not_equal,{black:0})}}var menubar_svelte_svelte_type_style_lang="";function get_each_context$2(r,e,t){const n=r.slice();return n[6]=e[t],n}function create_catch_block(r){return{c:noop$1,l:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block(r){let e,t,n,a=has_1(r[4],"content.content"),o,s=r[4].cities,c=[];for(let d=0;d<s.length;d+=1)c[d]=create_each_block$2(get_each_context$2(r,s,d));let u=a&&create_if_block_1$5(r);return{c(){e=element("div");for(let d=0;d<c.length;d+=1)c[d].c();t=space(),n=element("div"),u&&u.c(),this.h()},l(d){e=claim_element(d,"DIV",{class:!0});var m=children(e);for(let f=0;f<c.length;f+=1)c[f].l(m);m.forEach(detach),t=claim_space(d),n=claim_element(d,"DIV",{class:!0});var l=children(n);u&&u.l(l),l.forEach(detach),this.h()},h(){attr(e,"class","city-switches"),attr(n,"class","city-text svelte-y5o8h9")},m(d,m){insert_hydration(d,e,m);for(let l=0;l<c.length;l+=1)c[l].m(e,null);insert_hydration(d,t,m),insert_hydration(d,n,m),u&&u.m(n,null),o=!0},p(d,m){if(m&20){s=d[4].cities;let l;for(l=0;l<s.length;l+=1){const f=get_each_context$2(d,s,l);c[l]?c[l].p(f,m):(c[l]=create_each_block$2(f),c[l].c(),c[l].m(e,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=s.length}a&&u.p(d,m)},i(d){o||(transition_in(u),o=!0)},o(d){transition_out(u),o=!1},d(d){d&&detach(e),destroy_each(c,d),d&&detach(t),d&&detach(n),u&&u.d()}}}function create_each_block$2(r){let e,t=r[6].name+"",n,a,o,s;function c(){return r[5](r[6])}return{c(){e=element("div"),n=text(t),a=space(),this.h()},l(u){e=claim_element(u,"DIV",{class:!0});var d=children(e);n=claim_text(d,t),a=claim_space(d),d.forEach(detach),this.h()},h(){attr(e,"class","city-button svelte-y5o8h9"),toggle_class(e,"active",r[2]._key===r[6]._key)},m(u,d){insert_hydration(u,e,d),append_hydration(e,n),append_hydration(e,a),o||(s=listen$2(e,"click",c),o=!0)},p(u,d){r=u,d&20&&toggle_class(e,"active",r[2]._key===r[6]._key)},d(u){u&&detach(e),o=!1,s()}}}function create_if_block_1$5(r){let e,t,n;return t=new Blocks({props:{blocks:r[4].content.content}}),{c(){e=element("div"),create_component(t.$$.fragment)},l(a){e=claim_element(a,"DIV",{});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach)},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p:noop$1,i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_pending_block(r){return{c:noop$1,l:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block$7(r){let e,t=r[0].title+"",n;return{c(){e=text("/ "),n=text(t)},l(a){e=claim_text(a,"/ "),n=claim_text(a,t)},m(a,o){insert_hydration(a,e,o),insert_hydration(a,n,o)},p(a,o){o&1&&t!==(t=a[0].title+"")&&set_data(n,t)},d(a){a&&detach(e),a&&detach(n)}}}function create_fragment$d(r){let e,t,n,a,o,s,c,u,d,m,l,f,_,b,S,E,y,k,I,O,D,R,P,W,V,L,j,z,q,Q,F,Y,ee,ce;o=new Full_beam({props:{black:!0}});let me={ctx:r,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:4,blocks:[,,,]};handle_promise(r[4],me),R=new Arrow_down({});let ke=r[0].title&&create_if_block$7(r);return z=new Full_beam({}),F=new Clock({}),{c(){e=element("header"),t=element("div"),n=element("div"),a=element("div"),create_component(o.$$.fragment),s=text(`
      Settings`),c=space(),u=element("div"),d=element("div"),m=space(),l=element("div"),f=space(),_=element("div"),b=element("div"),S=text("City"),E=space(),me.block.c(),y=space(),k=element("nav"),I=element("div"),O=element("div"),D=element("span"),create_component(R.$$.fragment),P=space(),W=element("a"),V=text("open.eyebeam.org "),ke&&ke.c(),L=space(),j=element("div"),create_component(z.$$.fragment),q=space(),Q=element("div"),create_component(F.$$.fragment),this.h()},l(Ee){e=claim_element(Ee,"HEADER",{class:!0});var C=children(e);t=claim_element(C,"DIV",{class:!0});var U=children(t);n=claim_element(U,"DIV",{class:!0});var Z=children(n);a=claim_element(Z,"DIV",{class:!0});var te=children(a);claim_component(o.$$.fragment,te),te.forEach(detach),s=claim_text(Z,`
      Settings`),Z.forEach(detach),c=claim_space(U),u=claim_element(U,"DIV",{class:!0});var J=children(u);d=claim_element(J,"DIV",{class:!0}),children(d).forEach(detach),m=claim_space(J),l=claim_element(J,"DIV",{class:!0}),children(l).forEach(detach),f=claim_space(J),_=claim_element(J,"DIV",{class:!0});var X=children(_);b=claim_element(X,"DIV",{class:!0});var re=children(b);S=claim_text(re,"City"),re.forEach(detach),E=claim_space(X),me.block.l(X),X.forEach(detach),J.forEach(detach),U.forEach(detach),y=claim_space(C),k=claim_element(C,"NAV",{class:!0});var se=children(k);I=claim_element(se,"DIV",{class:!0});var de=children(I);O=claim_element(de,"DIV",{class:!0});var oe=children(O);D=claim_element(oe,"SPAN",{class:!0});var Ae=children(D);claim_component(R.$$.fragment,Ae),Ae.forEach(detach),P=claim_space(oe),W=claim_element(oe,"A",{href:!0,class:!0});var Me=children(W);V=claim_text(Me,"open.eyebeam.org "),ke&&ke.l(Me),Me.forEach(detach),oe.forEach(detach),L=claim_space(de),j=claim_element(de,"DIV",{class:!0});var Xe=children(j);claim_component(z.$$.fragment,Xe),Xe.forEach(detach),q=claim_space(de),Q=claim_element(de,"DIV",{class:!0});var Be=children(Q);claim_component(F.$$.fragment,Be),Be.forEach(detach),de.forEach(detach),se.forEach(detach),C.forEach(detach),this.h()},h(){attr(a,"class","tray-toggle svelte-y5o8h9"),attr(n,"class","settings-bar svelte-y5o8h9"),attr(d,"class","section theme svelte-y5o8h9"),attr(l,"class","section text svelte-y5o8h9"),attr(b,"class","section-header svelte-y5o8h9"),attr(_,"class","section city svelte-y5o8h9"),attr(u,"class","settings-content svelte-y5o8h9"),attr(t,"class","settings svelte-y5o8h9"),attr(D,"class","arrow-down svelte-y5o8h9"),attr(W,"href","/"),attr(W,"class","svelte-y5o8h9"),attr(O,"class","breadcrumbs svelte-y5o8h9"),attr(j,"class","tray-toggle svelte-y5o8h9"),attr(Q,"class","clock svelte-y5o8h9"),attr(I,"class","inner-text svelte-y5o8h9"),attr(k,"class","menubar svelte-y5o8h9"),attr(e,"class","svelte-y5o8h9"),toggle_class(e,"open",r[1])},m(Ee,C){insert_hydration(Ee,e,C),append_hydration(e,t),append_hydration(t,n),append_hydration(n,a),mount_component(o,a,null),append_hydration(n,s),append_hydration(t,c),append_hydration(t,u),append_hydration(u,d),append_hydration(u,m),append_hydration(u,l),append_hydration(u,f),append_hydration(u,_),append_hydration(_,b),append_hydration(b,S),append_hydration(_,E),me.block.m(_,me.anchor=null),me.mount=()=>_,me.anchor=null,append_hydration(e,y),append_hydration(e,k),append_hydration(k,I),append_hydration(I,O),append_hydration(O,D),mount_component(R,D,null),append_hydration(O,P),append_hydration(O,W),append_hydration(W,V),ke&&ke.m(W,null),append_hydration(I,L),append_hydration(I,j),mount_component(z,j,null),append_hydration(I,q),append_hydration(I,Q),mount_component(F,Q,null),Y=!0,ee||(ce=[listen$2(a,"click",r[3]),listen$2(n,"click",r[3]),listen$2(j,"click",r[3])],ee=!0)},p(Ee,[C]){r=Ee,update_await_block_branch(me,r,C),r[0].title?ke?ke.p(r,C):(ke=create_if_block$7(r),ke.c(),ke.m(W,null)):ke&&(ke.d(1),ke=null),C&2&&toggle_class(e,"open",r[1])},i(Ee){Y||(transition_in(o.$$.fragment,Ee),transition_in(me.block),transition_in(R.$$.fragment,Ee),transition_in(z.$$.fragment,Ee),transition_in(F.$$.fragment,Ee),Y=!0)},o(Ee){transition_out(o.$$.fragment,Ee);for(let C=0;C<3;C+=1){const U=me.blocks[C];transition_out(U)}transition_out(R.$$.fragment,Ee),transition_out(z.$$.fragment,Ee),transition_out(F.$$.fragment,Ee),Y=!1},d(Ee){Ee&&detach(e),destroy_component(o),me.block.d(),me.token=null,me=null,destroy_component(R),ke&&ke.d(),destroy_component(z),destroy_component(F),ee=!1,run_all(ce)}}}function instance$a(r,e,t){let n,a;component_subscribe(r,trayOpen,d=>t(1,n=d)),component_subscribe(r,activeCity,d=>t(2,a=d));let{currentRoom:o={}}=e;const s=loadDataFromMainSite('*[_id == "cities"][0]');s.then(d=>{d.cities&&d.cities[0]&&activeCity.set(d.cities[0])});const c=()=>{trayOpen.set(!n)},u=d=>{activeCity.set(d)};return r.$$set=d=>{"currentRoom"in d&&t(0,o=d.currentRoom)},[o,n,a,c,s,u]}class Menubar extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$d,safe_not_equal,{currentRoom:0})}}var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array!="undefined"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function byteLength(r){var e=getLens(r),t=e[0],n=e[1];return(t+n)*3/4-n}function _byteLength(r,e,t){return(e+t)*3/4-t}function toByteArray(r){var e,t=getLens(r),n=t[0],a=t[1],o=new Arr(_byteLength(r,n,a)),s=0,c=a>0?n-4:n,u;for(u=0;u<c;u+=4)e=revLookup[r.charCodeAt(u)]<<18|revLookup[r.charCodeAt(u+1)]<<12|revLookup[r.charCodeAt(u+2)]<<6|revLookup[r.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return a===2&&(e=revLookup[r.charCodeAt(u)]<<2|revLookup[r.charCodeAt(u+1)]>>4,o[s++]=e&255),a===1&&(e=revLookup[r.charCodeAt(u)]<<10|revLookup[r.charCodeAt(u+1)]<<4|revLookup[r.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function tripletToBase64(r){return lookup[r>>18&63]+lookup[r>>12&63]+lookup[r>>6&63]+lookup[r&63]}function encodeChunk(r,e,t){for(var n,a=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),a.push(tripletToBase64(n));return a.join("")}function fromByteArray(r){for(var e,t=r.length,n=t%3,a=[],o=16383,s=0,c=t-n;s<c;s+=o)a.push(encodeChunk(r,s,s+o>c?c:s+o));return n===1?(e=r[t-1],a.push(lookup[e>>2]+lookup[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],a.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),a.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,e){return function(t){return new Sha256(e,!0).update(t)[r]()}},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r)},e.update=function(a){return e.create().update(a)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n,r)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,e){return function(t,n){return new HmacSha256(t,e,!0).update(n)[r]()}},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(a){return new HmacSha256(a,r)},e.update=function(a,o){return e.create(a).update(o)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createHmacOutputMethod(n,r)}return e};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var e,t=typeof r;if(t!=="string"){if(t==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,a=0,o,s=r.length,c=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(o=this.start;a<s&&o<64;++a)c[o>>2]|=r[a]<<SHIFT[o++&3];else for(o=this.start;a<s&&o<64;++a)n=r.charCodeAt(a),n<128?c[o>>2]|=n<<SHIFT[o++&3]:n<2048?(c[o>>2]|=(192|n>>6)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(c[o>>2]|=(224|n>>12)<<SHIFT[o++&3],c[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++a)&1023),c[o>>2]|=(240|n>>18)<<SHIFT[o++&3],c[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],c[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],c[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,c=this.h7,u=this.blocks,d,m,l,f,_,b,S,E,y,k,I;for(d=16;d<64;++d)_=u[d-15],m=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=u[d-2],l=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,u[d]=u[d-16]+m+u[d-7]+l<<0;for(I=e&t,d=0;d<64;d+=4)this.first?(this.is224?(E=300032,_=u[0]-1413257819,c=_-150054599<<0,n=_+24177077<<0):(E=704751109,_=u[0]-210244248,c=_-1521486534<<0,n=_+143694565<<0),this.first=!1):(m=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),l=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),E=r&e,f=E^r&t^I,S=a&o^~a&s,_=c+l+S+K[d]+u[d],b=m+f,c=n+_<<0,n=_+b<<0),m=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),l=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),y=n&r,f=y^n&e^E,S=c&a^~c&o,_=s+l+S+K[d+1]+u[d+1],b=m+f,s=t+_<<0,t=_+b<<0,m=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),l=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),k=t&n,f=k^t&r^y,S=s&c^~s&a,_=o+l+S+K[d+2]+u[d+2],b=m+f,o=e+_<<0,e=_+b<<0,m=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),l=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),I=e&t,f=I^e&n^k,S=o&s^~o&c,_=a+l+S+K[d+3]+u[d+3],b=m+f,a=r+_<<0,r=_+b<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+a<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+c<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,c=this.h7,u=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(u+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),u},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,c=this.h7,u=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||u.push(c>>24&255,c>>16&255,c>>8&255,c&255),u},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r};function HmacSha256(r,e,t){var n,a=typeof r;if(a==="string"){var o=[],s=r.length,c=0,u;for(n=0;n<s;++n)u=r.charCodeAt(n),u<128?o[c++]=u:u<2048?(o[c++]=192|u>>6,o[c++]=128|u&63):u<55296||u>=57344?(o[c++]=224|u>>12,o[c++]=128|u>>6&63,o[c++]=128|u&63):(u=65536+((u&1023)<<10|r.charCodeAt(++n)&1023),o[c++]=240|u>>18,o[c++]=128|u>>12&63,o[c++]=128|u>>6&63,o[c++]=128|u&63);r=o}else if(a==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var d=[],m=[];for(n=0;n<64;++n){var l=r[n]||0;d[n]=92^l,m[n]=54^l}Sha256.call(this,e,t),this.update(m),this.oKeyPad=d,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256=sha256$1.exports;if(typeof Promise=="undefined")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(r){if(!(this instanceof Keycloak))return new Keycloak(r);for(var e=this,t,n=[],a,o={enable:!0,callbackList:[],interval:5},s=document.getElementsByTagName("script"),c=0;c<s.length;c++)(s[c].src.indexOf("keycloak.js")!==-1||s[c].src.indexOf("keycloak.min.js")!==-1)&&s[c].src.indexOf("version=")!==-1&&(e.iframeVersion=s[c].src.substring(s[c].src.indexOf("version=")+8).split("&")[0]);var u=!0,d=Ee(console.info),m=Ee(console.warn);e.init=function(C){e.authenticated=!1,a=ke();var U=["default","cordova","cordova-native"];if(C&&U.indexOf(C.adapter)>-1?t=ee(C.adapter):C&&typeof C.adapter=="object"?t=C.adapter:window.Cordova||window.cordova?t=ee("cordova"):t=ee(),C){if(typeof C.useNonce!="undefined"&&(u=C.useNonce),typeof C.checkLoginIframe!="undefined"&&(o.enable=C.checkLoginIframe),C.checkLoginIframeInterval&&(o.interval=C.checkLoginIframeInterval),C.onLoad==="login-required"&&(e.loginRequired=!0),C.responseMode)if(C.responseMode==="query"||C.responseMode==="fragment")e.responseMode=C.responseMode;else throw"Invalid value for responseMode";if(C.flow){switch(C.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=C.flow}if(C.timeSkew!=null&&(e.timeSkew=C.timeSkew),C.redirectUri&&(e.redirectUri=C.redirectUri),C.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=C.silentCheckSsoRedirectUri),typeof C.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=C.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,C.pkceMethod){if(C.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=C.pkceMethod}typeof C.enableLogging=="boolean"?e.enableLogging=C.enableLogging:e.enableLogging=!1,typeof C.scope=="string"&&(e.scope=C.scope),typeof C.messageReceiveTimeout=="number"&&C.messageReceiveTimeout>0?e.messageReceiveTimeout=C.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var Z=j(),te=j();te.promise.then(function(){e.onReady&&e.onReady(e.authenticated),Z.setSuccess(e.authenticated)}).catch(function(de){Z.setError(de)});var J=I();function X(){var de=function(Me){Me||(Ae.prompt="none"),e.login(Ae).then(function(){te.setSuccess()}).catch(function(Xe){te.setError(Xe)})},oe=function(){var Me=document.createElement("iframe"),Xe=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});Me.setAttribute("src",Xe),Me.setAttribute("title","keycloak-silent-check-sso"),Me.style.display="none",document.body.appendChild(Me);var Be=function(G){if(!(G.origin!==window.location.origin||Me.contentWindow!==G.source)){var le=W(G.data);k(le,te),document.body.removeChild(Me),window.removeEventListener("message",Be)}};window.addEventListener("message",Be)},Ae={};switch(C.onLoad){case"check-sso":o.enable?q().then(function(){F().then(function(Me){Me?te.setSuccess():e.silentCheckSsoRedirectUri?oe():de(!1)}).catch(function(Me){te.setError(Me)})}):e.silentCheckSsoRedirectUri?oe():de(!1);break;case"login-required":de(!0);break;default:throw"Invalid value for onLoad"}}function re(){var de=W(window.location.href);if(de&&window.history.replaceState(window.history.state,null,de.newUrl),de&&de.valid)return q().then(function(){k(de,te)}).catch(function(oe){te.setError(oe)});C?C.token&&C.refreshToken?(D(C.token,C.refreshToken,C.idToken),o.enable?q().then(function(){F().then(function(oe){oe?(e.onAuthSuccess&&e.onAuthSuccess(),te.setSuccess(),Q()):te.setSuccess()}).catch(function(oe){te.setError(oe)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),te.setSuccess()}).catch(function(oe){e.onAuthError&&e.onAuthError(),C.onLoad?X():te.setError(oe)})):C.onLoad?X():te.setSuccess():te.setSuccess()}function se(){var de=j(),oe=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",oe),de.setSuccess())};return document.addEventListener("readystatechange",oe),oe(),de.promise}return J.then(function(){se().then(Y).then(re).catch(function(de){Z.setError(de)})}),J.catch(function(de){Z.setError(de)}),Z.promise},e.login=function(C){return t.login(C)};function l(C){var U=null,Z=window.crypto||window.msCrypto;if(Z&&Z.getRandomValues&&window.Uint8Array)return U=new Uint8Array(C),Z.getRandomValues(U),U;U=new Array(C);for(var te=0;te<U.length;te++)U[te]=Math.floor(256*Math.random());return U}function f(C){return _(C,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function _(C,U){for(var Z=l(C),te=new Array(C),J=0;J<C;J++)te[J]=U.charCodeAt(Z[J]%U.length);return String.fromCharCode.apply(null,te)}function b(C,U){switch(C){case"S256":var Z=new Uint8Array(sha256.arrayBuffer(U)),te=base64Js.fromByteArray(Z).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return te;default:throw"Invalid value for pkceMethod"}}function S(C){var U={id_token:{acr:C}};return JSON.stringify(U)}e.createLoginUrl=function(C){var U=P(),Z=P(),te=t.redirectUri(C),J={state:U,nonce:Z,redirectUri:encodeURIComponent(te)};C&&C.prompt&&(J.prompt=C.prompt);var X;C&&C.action=="register"?X=e.endpoints.register():X=e.endpoints.authorize();var re=C&&C.scope||e.scope;re?re.indexOf("openid")===-1&&(re="openid "+re):re="openid";var se=X+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(te)+"&state="+encodeURIComponent(U)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(re);if(u&&(se=se+"&nonce="+encodeURIComponent(Z)),C&&C.prompt&&(se+="&prompt="+encodeURIComponent(C.prompt)),C&&C.maxAge&&(se+="&max_age="+encodeURIComponent(C.maxAge)),C&&C.loginHint&&(se+="&login_hint="+encodeURIComponent(C.loginHint)),C&&C.idpHint&&(se+="&kc_idp_hint="+encodeURIComponent(C.idpHint)),C&&C.action&&C.action!="register"&&(se+="&kc_action="+encodeURIComponent(C.action)),C&&C.locale&&(se+="&ui_locales="+encodeURIComponent(C.locale)),C&&C.acr){var de=S(C.acr);se+="&claims="+encodeURIComponent(de)}if(e.pkceMethod){var oe=f(96);J.pkceCodeVerifier=oe;var Ae=b(e.pkceMethod,oe);se+="&code_challenge="+Ae,se+="&code_challenge_method="+e.pkceMethod}return a.add(J),se},e.logout=function(C){return t.logout(C)},e.createLogoutUrl=function(C){var U=e.endpoints.logout()+"?post_logout_redirect_uri="+encodeURIComponent(t.redirectUri(C,!1))+"&id_token_hint="+encodeURIComponent(e.idToken);return U},e.register=function(C){return t.register(C)},e.createRegisterUrl=function(C){return C||(C={}),C.action="register",e.createLoginUrl(C)},e.createAccountUrl=function(C){var U=E(),Z=void 0;return typeof U!="undefined"&&(Z=U+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(t.redirectUri(C))),Z},e.accountManagement=function(){return t.accountManagement()},e.hasRealmRole=function(C){var U=e.realmAccess;return!!U&&U.roles.indexOf(C)>=0},e.hasResourceRole=function(C,U){if(!e.resourceAccess)return!1;var Z=e.resourceAccess[U||e.clientId];return!!Z&&Z.roles.indexOf(C)>=0},e.loadUserProfile=function(){var C=E()+"/account",U=new XMLHttpRequest;U.open("GET",C,!0),U.setRequestHeader("Accept","application/json"),U.setRequestHeader("Authorization","bearer "+e.token);var Z=j();return U.onreadystatechange=function(){U.readyState==4&&(U.status==200?(e.profile=JSON.parse(U.responseText),Z.setSuccess(e.profile)):Z.setError())},U.send(),Z.promise},e.loadUserInfo=function(){var C=e.endpoints.userinfo(),U=new XMLHttpRequest;U.open("GET",C,!0),U.setRequestHeader("Accept","application/json"),U.setRequestHeader("Authorization","bearer "+e.token);var Z=j();return U.onreadystatechange=function(){U.readyState==4&&(U.status==200?(e.userInfo=JSON.parse(U.responseText),Z.setSuccess(e.userInfo)):Z.setError())},U.send(),Z.promise},e.isTokenExpired=function(C){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return d("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var U=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(C){if(isNaN(C))throw"Invalid minValidity";U-=C}return U<0},e.updateToken=function(C){var U=j();if(!e.refreshToken)return U.setError(),U.promise;C=C||5;var Z=function(){var J=!1;if(C==-1?(J=!0,d("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(C))&&(J=!0,d("[KEYCLOAK] Refreshing token: token expired")),!J)U.setSuccess(!1);else{var X="grant_type=refresh_token&refresh_token="+e.refreshToken,re=e.endpoints.token();if(n.push(U),n.length==1){var se=new XMLHttpRequest;se.open("POST",re,!0),se.setRequestHeader("Content-type","application/x-www-form-urlencoded"),se.withCredentials=!0,X+="&client_id="+encodeURIComponent(e.clientId);var de=new Date().getTime();se.onreadystatechange=function(){if(se.readyState==4)if(se.status==200){d("[KEYCLOAK] Token refreshed"),de=(de+new Date().getTime())/2;var oe=JSON.parse(se.responseText);D(oe.access_token,oe.refresh_token,oe.id_token,de),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var Ae=n.pop();Ae!=null;Ae=n.pop())Ae.setSuccess(!0)}else{m("[KEYCLOAK] Failed to refresh token"),se.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var Ae=n.pop();Ae!=null;Ae=n.pop())Ae.setError(!0)}},se.send(X)}}};if(o.enable){var te=F();te.then(function(){Z()}).catch(function(J){U.setError(J)})}else Z();return U.promise},e.clearToken=function(){e.token&&(D(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function E(){if(typeof e.authServerUrl!="undefined")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function y(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function k(C,U){var Z=C.code,te=C.error,J=C.prompt,X=new Date().getTime();if(C.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(C.kc_action_status),te){if(J!="none"){var re={error:te,error_description:C.error_description};e.onAuthError&&e.onAuthError(re),U&&U.setError(re)}else U&&U.setSuccess();return}else e.flow!="standard"&&(C.access_token||C.id_token)&&Ae(C.access_token,null,C.id_token,!0);if(e.flow!="implicit"&&Z){var se="code="+Z+"&grant_type=authorization_code",de=e.endpoints.token(),oe=new XMLHttpRequest;oe.open("POST",de,!0),oe.setRequestHeader("Content-type","application/x-www-form-urlencoded"),se+="&client_id="+encodeURIComponent(e.clientId),se+="&redirect_uri="+C.redirectUri,C.pkceCodeVerifier&&(se+="&code_verifier="+C.pkceCodeVerifier),oe.withCredentials=!0,oe.onreadystatechange=function(){if(oe.readyState==4)if(oe.status==200){var Me=JSON.parse(oe.responseText);Ae(Me.access_token,Me.refresh_token,Me.id_token,e.flow==="standard"),Q()}else e.onAuthError&&e.onAuthError(),U&&U.setError()},oe.send(se)}function Ae(Me,Xe,Be,G){X=(X+new Date().getTime())/2,D(Me,Xe,Be,X),u&&(e.tokenParsed&&e.tokenParsed.nonce!=C.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=C.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=C.storedNonce)?(d("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),U&&U.setError()):G&&(e.onAuthSuccess&&e.onAuthSuccess(),U&&U.setSuccess())}}function I(C){var U=j(),Z;r?typeof r=="string"&&(Z=r):Z="keycloak.json";function te(oe){oe?e.endpoints={authorize:function(){return oe.authorization_endpoint},token:function(){return oe.token_endpoint},logout:function(){if(!oe.end_session_endpoint)throw"Not supported by the OIDC server";return oe.end_session_endpoint},checkSessionIframe:function(){if(!oe.check_session_iframe)throw"Not supported by the OIDC server";return oe.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!oe.userinfo_endpoint)throw"Not supported by the OIDC server";return oe.userinfo_endpoint}}:e.endpoints={authorize:function(){return E()+"/protocol/openid-connect/auth"},token:function(){return E()+"/protocol/openid-connect/token"},logout:function(){return E()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var Ae=E()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(Ae=Ae+"?version="+e.iframeVersion),Ae},thirdPartyCookiesIframe:function(){var Ae=E()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(Ae=Ae+"?version="+e.iframeVersion),Ae},register:function(){return E()+"/protocol/openid-connect/registrations"},userinfo:function(){return E()+"/protocol/openid-connect/userinfo"}}}if(Z){var J=new XMLHttpRequest;J.open("GET",Z,!0),J.setRequestHeader("Accept","application/json"),J.onreadystatechange=function(){if(J.readyState==4)if(J.status==200||O(J)){var oe=JSON.parse(J.responseText);e.authServerUrl=oe["auth-server-url"],e.realm=oe.realm,e.clientId=oe.resource,te(null),U.setSuccess()}else U.setError()},J.send()}else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var X=r.oidcProvider;if(X)if(typeof X=="string"){var de;X.charAt(X.length-1)=="/"?de=X+".well-known/openid-configuration":de=X+"/.well-known/openid-configuration";var J=new XMLHttpRequest;J.open("GET",de,!0),J.setRequestHeader("Accept","application/json"),J.onreadystatechange=function(){if(J.readyState==4)if(J.status==200||O(J)){var Ae=JSON.parse(J.responseText);te(Ae),U.setSuccess()}else U.setError()},J.send()}else te(X),U.setSuccess();else{if(!r.url){for(var re=document.getElementsByTagName("script"),se=0;se<re.length;se++)if(re[se].src.match(/.*keycloak\.js/)){r.url=re[se].src.substr(0,re[se].src.indexOf("/js/keycloak.js"));break}}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,te(null),U.setSuccess()}}return U.promise}function O(C){return C.status==0&&C.responseText&&C.responseURL.startsWith("file:")}function D(C,U,Z,te){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),U?(e.refreshToken=U,e.refreshTokenParsed=R(U)):(delete e.refreshToken,delete e.refreshTokenParsed),Z?(e.idToken=Z,e.idTokenParsed=R(Z)):(delete e.idToken,delete e.idTokenParsed),C){if(e.token=C,e.tokenParsed=R(C),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,te&&(e.timeSkew=Math.floor(te/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(d("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var J=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;d("[KEYCLOAK] Token expires in "+Math.round(J/1e3)+" s"),J<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,J)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function R(C){switch(C=C.split(".")[1],C=C.replace(/-/g,"+"),C=C.replace(/_/g,"/"),C.length%4){case 0:break;case 2:C+="==";break;case 3:C+="=";break;default:throw"Invalid token"}return C=decodeURIComponent(escape(atob(C))),C=JSON.parse(C),C}function P(){var C="0123456789abcdef",U=_(36,C).split("");U[14]="4",U[19]=C.substr(U[19]&3|8,1),U[8]=U[13]=U[18]=U[23]="-";var Z=U.join("");return Z}function W(C){var U=V(C);if(!!U){var Z=a.get(U.state);return Z&&(U.valid=!0,U.redirectUri=Z.redirectUri,U.storedNonce=Z.nonce,U.prompt=Z.prompt,U.pkceCodeVerifier=Z.pkceCodeVerifier),U}}function V(C){var U;switch(e.flow){case"standard":U=["code","state","session_state","kc_action_status"];break;case"implicit":U=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":U=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}U.push("error"),U.push("error_description"),U.push("error_uri");var Z=C.indexOf("?"),te=C.indexOf("#"),J,X;if(e.responseMode==="query"&&Z!==-1?(J=C.substring(0,Z),X=L(C.substring(Z+1,te!==-1?te:C.length),U),X.paramsString!==""&&(J+="?"+X.paramsString),te!==-1&&(J+=C.substring(te))):e.responseMode==="fragment"&&te!==-1&&(J=C.substring(0,te),X=L(C.substring(te+1),U),X.paramsString!==""&&(J+="#"+X.paramsString)),X&&X.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((X.oauthParams.code||X.oauthParams.error)&&X.oauthParams.state)return X.oauthParams.newUrl=J,X.oauthParams}else if(e.flow==="implicit"&&(X.oauthParams.access_token||X.oauthParams.error)&&X.oauthParams.state)return X.oauthParams.newUrl=J,X.oauthParams}}function L(C,U){for(var Z=C.split("&"),te={paramsString:"",oauthParams:{}},J=0;J<Z.length;J++){var X=Z[J].indexOf("="),re=Z[J].slice(0,X);U.indexOf(re)!==-1?te.oauthParams[re]=Z[J].slice(X+1):(te.paramsString!==""&&(te.paramsString+="&"),te.paramsString+=Z[J])}return te}function j(){var C={setSuccess:function(U){C.resolve(U)},setError:function(U){C.reject(U)}};return C.promise=new Promise(function(U,Z){C.resolve=U,C.reject=Z}),C.promise.success=function(U){return logPromiseDeprecation(),this.then(function(te){U(te)}),this},C.promise.error=function(U){return logPromiseDeprecation(),this.catch(function(te){U(te)}),this},C}function z(C,U,Z){var te=null,J=new Promise(function(X,re){te=setTimeout(function(){re({error:Z||"Promise is not settled within timeout of "+U+"ms"})},U)});return Promise.race([C,J]).finally(function(){clearTimeout(te)})}function q(){var C=j();if(!o.enable||o.iframe)return C.setSuccess(),C.promise;var U=document.createElement("iframe");o.iframe=U,U.onload=function(){var J=e.endpoints.authorize();J.charAt(0)==="/"?o.iframeOrigin=y():o.iframeOrigin=J.substring(0,J.indexOf("/",8)),C.setSuccess()};var Z=e.endpoints.checkSessionIframe();U.setAttribute("src",Z),U.setAttribute("title","keycloak-session-iframe"),U.style.display="none",document.body.appendChild(U);var te=function(J){if(!(J.origin!==o.iframeOrigin||o.iframe.contentWindow!==J.source)&&(J.data=="unchanged"||J.data=="changed"||J.data=="error")){J.data!="unchanged"&&e.clearToken();for(var X=o.callbackList.splice(0,o.callbackList.length),re=X.length-1;re>=0;--re){var se=X[re];J.data=="error"?se.setError():se.setSuccess(J.data=="unchanged")}}};return window.addEventListener("message",te,!1),C.promise}function Q(){o.enable&&e.token&&setTimeout(function(){F().then(function(C){C&&Q()})},o.interval*1e3)}function F(){var C=j();if(o.iframe&&o.iframeOrigin){var U=e.clientId+" "+(e.sessionId?e.sessionId:"");o.callbackList.push(C);var Z=o.iframeOrigin;o.callbackList.length==1&&o.iframe.contentWindow.postMessage(U,Z)}else C.setSuccess();return C.promise}function Y(){var C=j();if(o.enable||e.silentCheckSsoRedirectUri){var U=document.createElement("iframe");U.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),U.setAttribute("title","keycloak-3p-check-iframe"),U.style.display="none",document.body.appendChild(U);var Z=function(te){U.contentWindow===te.source&&(te.data!=="supported"&&te.data!=="unsupported"||(te.data==="unsupported"&&(o.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1),m("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(U),window.removeEventListener("message",Z),C.setSuccess()))};window.addEventListener("message",Z,!1)}else C.setSuccess();return z(C.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function ee(C){if(!C||C=="default")return{login:function(X){return window.location.replace(e.createLoginUrl(X)),j().promise},logout:function(X){return window.location.replace(e.createLogoutUrl(X)),j().promise},register:function(X){return window.location.replace(e.createRegisterUrl(X)),j().promise},accountManagement:function(){var X=e.createAccountUrl();if(typeof X!="undefined")window.location.href=X;else throw"Not supported by the OIDC server";return j().promise},redirectUri:function(X,re){return X&&X.redirectUri?X.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(C=="cordova"){o.enable=!1;var U=function(X,re,se){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(X,re,se):window.open(X,re,se)},Z=function(X){return X&&X.cordovaOptions?Object.keys(X.cordovaOptions).reduce(function(re,se){return re[se]=X.cordovaOptions[se],re},{}):{}},te=function(X){return Object.keys(X).reduce(function(re,se){return re.push(se+"="+X[se]),re},[]).join(",")},J=function(X){var re=Z(X);return re.location="no",X&&X.prompt=="none"&&(re.hidden="yes"),te(re)};return{login:function(X){var re=j(),se=J(X),de=e.createLoginUrl(X),oe=U(de,"_blank",se),Ae=!1,Me=!1,Xe=function(){Me=!0,oe.close()};return oe.addEventListener("loadstart",function(Be){if(Be.url.indexOf("http://localhost")==0){var G=W(Be.url);k(G,re),Xe(),Ae=!0}}),oe.addEventListener("loaderror",function(Be){if(!Ae)if(Be.url.indexOf("http://localhost")==0){var G=W(Be.url);k(G,re),Xe(),Ae=!0}else re.setError(),Xe()}),oe.addEventListener("exit",function(Be){Me||re.setError({reason:"closed_by_user"})}),re.promise},logout:function(X){var re=j(),se=e.createLogoutUrl(X),de=U(se,"_blank","location=no,hidden=yes,clearcache=yes"),oe;return de.addEventListener("loadstart",function(Ae){Ae.url.indexOf("http://localhost")==0&&de.close()}),de.addEventListener("loaderror",function(Ae){Ae.url.indexOf("http://localhost")==0||(oe=!0),de.close()}),de.addEventListener("exit",function(Ae){oe?re.setError():(e.clearToken(),re.setSuccess())}),re.promise},register:function(X){var re=j(),se=e.createRegisterUrl(),de=J(X),oe=U(se,"_blank",de);return oe.addEventListener("loadstart",function(Ae){if(Ae.url.indexOf("http://localhost")==0){oe.close();var Me=W(Ae.url);k(Me,re)}}),re.promise},accountManagement:function(){var X=e.createAccountUrl();if(typeof X!="undefined"){var re=U(X,"_blank","location=no");re.addEventListener("loadstart",function(se){se.url.indexOf("http://localhost")==0&&re.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(X){return"http://localhost"}}}if(C=="cordova-native")return o.enable=!1,{login:function(X){var re=j(),se=e.createLoginUrl(X);return universalLinks.subscribe("keycloak",function(de){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var oe=W(de.url);k(oe,re)}),window.cordova.plugins.browsertab.openUrl(se),re.promise},logout:function(X){var re=j(),se=e.createLogoutUrl(X);return universalLinks.subscribe("keycloak",function(de){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),re.setSuccess()}),window.cordova.plugins.browsertab.openUrl(se),re.promise},register:function(X){var re=j(),se=e.createRegisterUrl(X);return universalLinks.subscribe("keycloak",function(de){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var oe=W(de.url);k(oe,re)}),window.cordova.plugins.browsertab.openUrl(se),re.promise},accountManagement:function(){var X=e.createAccountUrl();if(typeof X!="undefined")window.cordova.plugins.browsertab.openUrl(X);else throw"Not supported by the OIDC server"},redirectUri:function(X){return X&&X.redirectUri?X.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+C}var ce=function(){if(!(this instanceof ce))return new ce;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var C=this;function U(){for(var Z=new Date().getTime(),te=0;te<localStorage.length;te++){var J=localStorage.key(te);if(J&&J.indexOf("kc-callback-")==0){var X=localStorage.getItem(J);if(X)try{var re=JSON.parse(X).expires;(!re||re<Z)&&localStorage.removeItem(J)}catch{localStorage.removeItem(J)}}}}C.get=function(Z){if(!!Z){var te="kc-callback-"+Z,J=localStorage.getItem(te);return J&&(localStorage.removeItem(te),J=JSON.parse(J)),U(),J}},C.add=function(Z){U();var te="kc-callback-"+Z.state;Z.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(te,JSON.stringify(Z))}},me=function(){if(!(this instanceof me))return new me;var C=this;C.get=function(J){if(!!J){var X=Z("kc-callback-"+J);if(te("kc-callback-"+J,"",U(-100)),X)return JSON.parse(X)}},C.add=function(J){te("kc-callback-"+J.state,JSON.stringify(J),U(60))},C.removeItem=function(J){te(J,"",U(-100))};var U=function(J){var X=new Date;return X.setTime(X.getTime()+J*60*1e3),X},Z=function(J){for(var X=J+"=",re=document.cookie.split(";"),se=0;se<re.length;se++){for(var de=re[se];de.charAt(0)==" ";)de=de.substring(1);if(de.indexOf(X)==0)return de.substring(X.length,de.length)}return""},te=function(J,X,re){var se=J+"="+X+"; expires="+re.toUTCString()+"; ";document.cookie=se}};function ke(){try{return new ce}catch{}return new me}function Ee(C){return function(){e.enableLogging&&C.apply(console,Array.prototype.slice.call(arguments))}}}const isAuthenticated=writable(!1),profile=writable(!1);let keycloak={};const updateUser=r=>new Promise(async(e,t)=>{console.log("updateUser",r);const n=new Headers;n.append("Content-Type","application/json");const a={method:"POST",headers:n,body:JSON.stringify(r),redirect:"follow"},o=await fetch("https://open-eyebeam.netlify.app/.netlify/functions/update-user",a);if(!o.ok){const c=`An error has occured: ${o.status}`;throw new Error(c)}const s=await o.json();console.log("userProfile",s),e(s)}),configureAuthClient=async()=>new Promise((r,e)=>{keycloak=new Keycloak({url:"https://hello.undersco.re/auth/",realm:"undersco_re",clientId:"underscore_openeyebeam"}),keycloak.init({onLoad:"check-sso",silentCheckSsoRedirectUri:window.location.origin+"/silent-check-sso.html"}).then(t=>{console.log(t?"authenticated":"not authenticated"),console.log("keycloak",keycloak),isAuthenticated.set(t),t?keycloak.loadUserProfile().then(async n=>{console.log("profile",n);const a=await updateUser(n);console.log("fullProfile",a),profile.set(a)}).catch(()=>{console.log("Failed to load user profile")}).finally(()=>{r()}):r()}).catch(t=>{console.log(t),console.log("failed to initialize"),e(t)})}),login=async()=>{console.log(window.location.origin),keycloak.login({redirectUri:window.location.origin})},logout=()=>{keycloak.logout({redirectUri:window.location.origin})};var AuthenticationBox_svelte_svelte_type_style_lang="";function create_else_block$1(r){let e;return{c(){e=text("Login")},l(t){e=claim_text(t,"Login")},m(t,n){insert_hydration(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block$6(r){let e,t=r[1]&&r[1].name?r[1].name+" (Log out)":"Log out",n;return{c(){e=element("div"),n=text(t)},l(a){e=claim_element(a,"DIV",{});var o=children(e);n=claim_text(o,t),o.forEach(detach)},m(a,o){insert_hydration(a,e,o),append_hydration(e,n)},p(a,o){o&2&&t!==(t=a[1]&&a[1].name?a[1].name+" (Log out)":"Log out")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_fragment$c(r){let e,t,n;function a(c,u){return c[0]?create_if_block$6:create_else_block$1}let o=a(r),s=o(r);return{c(){e=element("div"),s.c(),this.h()},l(c){e=claim_element(c,"DIV",{class:!0});var u=children(e);s.l(u),u.forEach(detach),this.h()},h(){attr(e,"class","auth-box svelte-1rukz97")},m(c,u){insert_hydration(c,e,u),s.m(e,null),t||(n=listen$2(e,"click",r[2]),t=!0)},p(c,[u]){o===(o=a(c))&&s?s.p(c,u):(s.d(1),s=o(c),s&&(s.c(),s.m(e,null)))},i:noop$1,o:noop$1,d(c){c&&detach(e),s.d(),t=!1,n()}}}function instance$9(r,e,t){let n,a;return component_subscribe(r,isAuthenticated,s=>t(0,n=s)),component_subscribe(r,profile,s=>t(1,a=s)),[n,a,()=>{n?logout():login()}]}class AuthenticationBox extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$c,safe_not_equal,{})}}var StreamPlayer_svelte_svelte_type_style_lang="";function create_if_block_2$2(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","720"),attr(t,"height","480"),src_url_equal(t.src,n=r[0])||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"color","#ffffff"),attr(t,"allow","autoplay; fullscreen"),attr(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,attr(t,"class","svelte-ldmhir"),attr(e,"class","peertube-container svelte-ldmhir")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n=a[0])&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_if_block_1$4(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","720"),attr(t,"height","480"),src_url_equal(t.src,n="https://player.vimeo.com/video/"+getVideoId(r[0]).id+"?autoplay=1")||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"scrolling","no"),attr(t,"byline","false"),attr(t,"color","#ffffff"),attr(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,attr(t,"class","svelte-ldmhir"),attr(e,"class","vimeo-container svelte-ldmhir")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n="https://player.vimeo.com/video/"+getVideoId(a[0]).id+"?autoplay=1")&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_if_block$5(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","1920"),attr(t,"height","1280"),src_url_equal(t.src,n="https://www.youtube.com/embed/"+getVideoId(r[0]).id+"?autoplay=1&rel=0&color=white")||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,attr(t,"class","svelte-ldmhir"),attr(e,"class","youtube-container svelte-ldmhir")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n="https://www.youtube.com/embed/"+getVideoId(a[0]).id+"?autoplay=1&rel=0&color=white")&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_fragment$b(r){let e,t,n,a,o,s,c;function u(l,f){if(f&1&&(n=null),f&1&&(a=null),f&1&&(o=null),n==null&&(n=!!(l[0].includes("youtube")||l[0].includes("youtu.be"))),n)return create_if_block$5;if(a==null&&(a=!!l[0].includes("vimeo")),a)return create_if_block_1$4;if(o==null&&(o=!!l[0].includes("undersco.re")),o)return create_if_block_2$2}let d=u(r,-1),m=d&&d(r);return{c(){e=element("div"),t=element("div"),m&&m.c(),this.h()},l(l){e=claim_element(l,"DIV",{class:!0});var f=children(e);t=claim_element(f,"DIV",{class:!0});var _=children(t);m&&m.l(_),_.forEach(detach),f.forEach(detach),this.h()},h(){attr(t,"class","embed svelte-ldmhir"),attr(e,"class","stream-container svelte-ldmhir")},m(l,f){insert_hydration(l,e,f),append_hydration(e,t),m&&m.m(t,null),c=!0},p(l,[f]){r=l,d===(d=u(r,f))&&m?m.p(r,f):(m&&m.d(1),m=d&&d(r),m&&(m.c(),m.m(t,null)))},i(l){c||(add_render_callback(()=>{s||(s=create_bidirectional_transition(e,fade,{duration:300,easing:quartOut},!0)),s.run(1)}),c=!0)},o(l){s||(s=create_bidirectional_transition(e,fade,{duration:300,easing:quartOut},!1)),s.run(0),c=!1},d(l){l&&detach(e),m&&m.d(),l&&s&&s.end()}}}function instance$8(r,e,t){let{streamUrl:n=""}=e;return r.$$set=a=>{"streamUrl"in a&&t(0,n=a.streamUrl)},[n]}class StreamPlayer extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$b,safe_not_equal,{streamUrl:0})}}var VideoPlayer_svelte_svelte_type_style_lang="";function create_if_block_2$1(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,color:!0,allow:!0,sandbox:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","720"),attr(t,"height","480"),src_url_equal(t.src,n=r[0])||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"color","#ffffff"),attr(t,"allow","autoplay; fullscreen"),attr(t,"sandbox","allow-same-origin allow-scripts allow-popups"),t.allowFullscreen=!0,attr(t,"class","svelte-174tb22"),attr(e,"class","peertube-container svelte-174tb22")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n=a[0])&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_if_block_1$3(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,scrolling:!0,byline:!0,color:!0,allow:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","720"),attr(t,"height","480"),src_url_equal(t.src,n="https://player.vimeo.com/video/"+getVideoId(r[0]).id)||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"scrolling","no"),attr(t,"byline","false"),attr(t,"color","#ffffff"),attr(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,attr(t,"class","svelte-174tb22"),attr(e,"class","vimeo-container svelte-174tb22")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n="https://player.vimeo.com/video/"+getVideoId(a[0]).id)&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_if_block$4(r){let e,t,n;return{c(){e=element("div"),t=element("iframe"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);t=claim_element(o,"IFRAME",{width:!0,height:!0,src:!0,frameborder:!0,allow:!0,class:!0}),children(t).forEach(detach),o.forEach(detach),this.h()},h(){attr(t,"width","1920"),attr(t,"height","1280"),src_url_equal(t.src,n="https://www.youtube.com/embed/"+getVideoId(r[0]).id+"?rel=0&color=white")||attr(t,"src",n),attr(t,"frameborder","no"),attr(t,"allow","autoplay; fullscreen"),t.allowFullscreen=!0,attr(t,"class","svelte-174tb22"),attr(e,"class","youtube-container svelte-174tb22")},m(a,o){insert_hydration(a,e,o),append_hydration(e,t)},p(a,o){o&1&&!src_url_equal(t.src,n="https://www.youtube.com/embed/"+getVideoId(a[0]).id+"?rel=0&color=white")&&attr(t,"src",n)},d(a){a&&detach(e)}}}function create_fragment$a(r){let e,t,n,a,o,s;function c(m,l){if(l&1&&(n=null),l&1&&(a=null),l&1&&(o=null),n==null&&(n=!!(m[0].includes("youtube")||m[0].includes("youtu.be"))),n)return create_if_block$4;if(a==null&&(a=!!m[0].includes("vimeo")),a)return create_if_block_1$3;if(o==null&&(o=!!m[0].includes("undersco.re")),o)return create_if_block_2$1}let u=c(r,-1),d=u&&u(r);return{c(){e=element("div"),t=element("div"),d&&d.c(),this.h()},l(m){e=claim_element(m,"DIV",{class:!0});var l=children(e);t=claim_element(l,"DIV",{class:!0});var f=children(t);d&&d.l(f),f.forEach(detach),l.forEach(detach),this.h()},h(){attr(t,"class","embed svelte-174tb22"),attr(e,"class","stream-container svelte-174tb22")},m(m,l){insert_hydration(m,e,l),append_hydration(e,t),d&&d.m(t,null)},p(m,[l]){r=m,u===(u=c(r,l))&&d?d.p(r,l):(d&&d.d(1),d=u&&u(r),d&&(d.c(),d.m(t,null)))},i(m){s||add_render_callback(()=>{s=create_in_transition(e,fade,{duration:300,easing:quartOut}),s.start()})},o:noop$1,d(m){m&&detach(e),d&&d.d()}}}function instance$7(r,e,t){let{streamUrl:n=""}=e;return r.$$set=a=>{"streamUrl"in a&&t(0,n=a.streamUrl)},[n]}class VideoPlayer extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$a,safe_not_equal,{streamUrl:0})}}var bulletinBoardEvent_svelte_svelte_type_style_lang="";function create_if_block$3(r){let e,t,n,a,o,s,c,u=dateTimeFormat(r[1].startDate)+"",d,m,l,f=r[1].title+"",_,b,S=has_1(r[1],"content.content"),E,y=S&&create_if_block_1$2(r);return{c(){e=element("div"),t=element("img"),o=space(),s=element("div"),c=element("div"),d=text(u),m=space(),l=element("div"),_=text(f),b=space(),y&&y.c(),this.h()},l(k){e=claim_element(k,"DIV",{class:!0});var I=children(e);t=claim_element(I,"IMG",{class:!0,alt:!0,src:!0}),I.forEach(detach),o=claim_space(k),s=claim_element(k,"DIV",{class:!0});var O=children(s);c=claim_element(O,"DIV",{class:!0});var D=children(c);d=claim_text(D,u),D.forEach(detach),m=claim_space(O),l=claim_element(O,"DIV",{class:!0});var R=children(l);_=claim_text(R,f),R.forEach(detach),b=claim_space(O),y&&y.l(O),O.forEach(detach),this.h()},h(){attr(t,"class","image svelte-1unfe15"),attr(t,"alt",n=r[1].title),src_url_equal(t.src,a=r[0].importEvent?urlForMainSite(r[1].mainImage).quality(90).saturation(-100).width(500).height(500).url():urlFor(r[1].mainImage).quality(90).saturation(-100).width(500).height(500).url())||attr(t,"src",a),attr(e,"class","image-container svelte-1unfe15"),attr(c,"class","date svelte-1unfe15"),attr(l,"class","title svelte-1unfe15"),attr(s,"class","text-container svelte-1unfe15")},m(k,I){insert_hydration(k,e,I),append_hydration(e,t),insert_hydration(k,o,I),insert_hydration(k,s,I),append_hydration(s,c),append_hydration(c,d),append_hydration(s,m),append_hydration(s,l),append_hydration(l,_),append_hydration(s,b),y&&y.m(s,null),E=!0},p(k,I){(!E||I&2&&n!==(n=k[1].title))&&attr(t,"alt",n),(!E||I&3&&!src_url_equal(t.src,a=k[0].importEvent?urlForMainSite(k[1].mainImage).quality(90).saturation(-100).width(500).height(500).url():urlFor(k[1].mainImage).quality(90).saturation(-100).width(500).height(500).url()))&&attr(t,"src",a),(!E||I&2)&&u!==(u=dateTimeFormat(k[1].startDate)+"")&&set_data(d,u),(!E||I&2)&&f!==(f=k[1].title+"")&&set_data(_,f),I&2&&(S=has_1(k[1],"content.content")),S?y?(y.p(k,I),I&2&&transition_in(y,1)):(y=create_if_block_1$2(k),y.c(),transition_in(y,1),y.m(s,null)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros())},i(k){E||(transition_in(y),E=!0)},o(k){transition_out(y),E=!1},d(k){k&&detach(e),k&&detach(o),k&&detach(s),y&&y.d()}}}function create_if_block_1$2(r){let e,t,n;return t=new Blocks({props:{blocks:r[1].content.content,mainSite:r[0].importEvent}}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","description")},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),n=!0},p(a,o){const s={};o&2&&(s.blocks=a[1].content.content),o&1&&(s.mainSite=a[0].importEvent),t.$set(s)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$9(r){let e,t,n=r[1]&&create_if_block$3(r);return{c(){e=element("div"),n&&n.c(),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);n&&n.l(o),o.forEach(detach),this.h()},h(){attr(e,"class","event svelte-1unfe15")},m(a,o){insert_hydration(a,e,o),n&&n.m(e,null),t=!0},p(a,[o]){a[1]?n?(n.p(a,o),o&2&&transition_in(n,1)):(n=create_if_block$3(a),n.c(),transition_in(n,1),n.m(e,null)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){a&&detach(e),n&&n.d()}}}function instance$6(r,e,t){let{event:n={}}=e,a=!1;return onMount(async()=>{n.importEvent?t(1,a=await loadDataFromMainSite("*[_id == '"+n.importedEvent+"'][0]")):t(1,a=n)}),r.$$set=o=>{"event"in o&&t(0,n=o.event)},[n,a]}class Bulletin_board_event extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$9,safe_not_equal,{event:0})}}var ArticleBox_svelte_svelte_type_style_lang="";function get_each_context$1(r,e,t){const n=r.slice();return n[7]=e[t],n}function create_if_block_8$1(r){let e,t;return{c(){e=element("div"),t=text(r[1]),this.h()},l(n){e=claim_element(n,"DIV",{class:!0});var a=children(e);t=claim_text(a,r[1]),a.forEach(detach),this.h()},h(){attr(e,"class","viewer-count svelte-at985a")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p(n,a){a&2&&set_data(t,n[1])},d(n){n&&detach(e)}}}function create_if_block_7$1(r){let e,t,n,a,o,s,c,u,d,m,l,f,_=r[0].events,b=[];for(let E=0;E<_.length;E+=1)b[E]=create_each_block$1(get_each_context$1(r,_,E));const S=E=>transition_out(b[E],1,1,()=>{b[E]=null});return{c(){e=element("div"),t=element("div"),n=element("h1"),a=text("Welcome to the Bulletin Board"),o=space(),s=element("div"),c=element("div"),u=text("Subscribe to Calendar"),d=space(),m=element("div");for(let E=0;E<b.length;E+=1)b[E].c();this.h()},l(E){e=claim_element(E,"DIV",{class:!0});var y=children(e);t=claim_element(y,"DIV",{class:!0});var k=children(t);n=claim_element(k,"H1",{});var I=children(n);a=claim_text(I,"Welcome to the Bulletin Board"),I.forEach(detach),o=claim_space(k),s=claim_element(k,"DIV",{class:!0});var O=children(s);c=claim_element(O,"DIV",{class:!0});var D=children(c);u=claim_text(D,"Subscribe to Calendar"),D.forEach(detach),O.forEach(detach),d=claim_space(k),m=claim_element(k,"DIV",{class:!0});var R=children(m);for(let P=0;P<b.length;P+=1)b[P].l(R);R.forEach(detach),k.forEach(detach),y.forEach(detach),this.h()},h(){attr(c,"class","action svelte-at985a"),attr(s,"class","bulletin-board-actions svelte-at985a"),attr(m,"class","bulletin-board-events"),attr(t,"class","inner svelte-at985a"),attr(e,"class","bulletin-board svelte-at985a"),toggle_class(e,"pushed",r[3])},m(E,y){insert_hydration(E,e,y),append_hydration(e,t),append_hydration(t,n),append_hydration(n,a),append_hydration(t,o),append_hydration(t,s),append_hydration(s,c),append_hydration(c,u),append_hydration(t,d),append_hydration(t,m);for(let k=0;k<b.length;k+=1)b[k].m(m,null);f=!0},p(E,y){if(y&1){_=E[0].events;let k;for(k=0;k<_.length;k+=1){const I=get_each_context$1(E,_,k);b[k]?(b[k].p(I,y),transition_in(b[k],1)):(b[k]=create_each_block$1(I),b[k].c(),transition_in(b[k],1),b[k].m(m,null))}for(group_outros(),k=_.length;k<b.length;k+=1)S(k);check_outros()}y&8&&toggle_class(e,"pushed",E[3])},i(E){if(!f){for(let y=0;y<_.length;y+=1)transition_in(b[y]);add_render_callback(()=>{l||(l=create_bidirectional_transition(e,fade,{},!0)),l.run(1)}),f=!0}},o(E){b=b.filter(Boolean);for(let y=0;y<b.length;y+=1)transition_out(b[y]);l||(l=create_bidirectional_transition(e,fade,{},!1)),l.run(0),f=!1},d(E){E&&detach(e),destroy_each(b,E),E&&l&&l.end()}}}function create_if_block_4(r){let e,t,n,a,o=r[2]&&r[2].title&&create_if_block_5$1(r);return{c(){e=element("div"),t=element("div"),o&&o.c(),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var c=children(e);t=claim_element(c,"DIV",{class:!0});var u=children(t);o&&o.l(u),u.forEach(detach),c.forEach(detach),this.h()},h(){attr(t,"class","inner svelte-at985a"),attr(e,"class","article svelte-at985a"),toggle_class(e,"pushed",r[3])},m(s,c){insert_hydration(s,e,c),append_hydration(e,t),o&&o.m(t,null),a=!0},p(s,c){s[2]&&s[2].title?o?(o.p(s,c),c&4&&transition_in(o,1)):(o=create_if_block_5$1(s),o.c(),transition_in(o,1),o.m(t,null)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),c&8&&toggle_class(e,"pushed",s[3])},i(s){a||(transition_in(o),add_render_callback(()=>{n||(n=create_bidirectional_transition(e,fade,{},!0)),n.run(1)}),a=!0)},o(s){transition_out(o),n||(n=create_bidirectional_transition(e,fade,{},!1)),n.run(0),a=!1},d(s){s&&detach(e),o&&o.d(),s&&n&&n.end()}}}function create_if_block_2(r){let e=has_1(r[0],"content.content"),t,n,a=e&&create_if_block_3(r);return{c(){a&&a.c(),t=empty()},l(o){a&&a.l(o),t=empty()},m(o,s){a&&a.m(o,s),insert_hydration(o,t,s),n=!0},p(o,s){s&1&&(e=has_1(o[0],"content.content")),e?a?(a.p(o,s),s&1&&transition_in(a,1)):(a=create_if_block_3(o),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(o){n||(transition_in(a),n=!0)},o(o){transition_out(a),n=!1},d(o){a&&a.d(o),o&&detach(t)}}}function create_if_block_1$1(r){let e,t,n,a;return t=new VideoPlayer({props:{streamUrl:r[0].videoUrl}}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var s=children(e);claim_component(t.$$.fragment,s),s.forEach(detach),this.h()},h(){attr(e,"class","video svelte-at985a"),toggle_class(e,"pushed",r[3])},m(o,s){insert_hydration(o,e,s),mount_component(t,e,null),a=!0},p(o,s){const c={};s&1&&(c.streamUrl=o[0].videoUrl),t.$set(c),s&8&&toggle_class(e,"pushed",o[3])},i(o){a||(transition_in(t.$$.fragment,o),add_render_callback(()=>{n||(n=create_bidirectional_transition(e,fade,{},!0)),n.run(1)}),a=!0)},o(o){transition_out(t.$$.fragment,o),n||(n=create_bidirectional_transition(e,fade,{},!1)),n.run(0),a=!1},d(o){o&&detach(e),destroy_component(t),o&&n&&n.end()}}}function create_each_block$1(r){let e,t;return e=new Bulletin_board_event({props:{event:r[7]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&1&&(o.event=n[7]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$1(r){let e=r[2].title+"",t,n,a=has_1(r[2],"content.content"),o,s,c=a&&create_if_block_6$1(r);return{c(){t=text(e),n=space(),c&&c.c(),o=empty()},l(u){t=claim_text(u,e),n=claim_space(u),c&&c.l(u),o=empty()},m(u,d){insert_hydration(u,t,d),insert_hydration(u,n,d),c&&c.m(u,d),insert_hydration(u,o,d),s=!0},p(u,d){(!s||d&4)&&e!==(e=u[2].title+"")&&set_data(t,e),d&4&&(a=has_1(u[2],"content.content")),a?c?(c.p(u,d),d&4&&transition_in(c,1)):(c=create_if_block_6$1(u),c.c(),transition_in(c,1),c.m(o.parentNode,o)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros())},i(u){s||(transition_in(c),s=!0)},o(u){transition_out(c),s=!1},d(u){u&&detach(t),u&&detach(n),c&&c.d(u),u&&detach(o)}}}function create_if_block_6$1(r){let e,t;return e=new Blocks({props:{blocks:r[2].content.content,mainSite:!0}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a&4&&(o.blocks=n[2].content.content),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3(r){let e,t,n,a,o;return n=new Blocks({props:{blocks:r[0].content.content}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var c=children(e);t=claim_element(c,"DIV",{class:!0});var u=children(t);claim_component(n.$$.fragment,u),u.forEach(detach),c.forEach(detach),this.h()},h(){attr(t,"class","inner svelte-at985a"),attr(e,"class","article svelte-at985a"),toggle_class(e,"pushed",r[3])},m(s,c){insert_hydration(s,e,c),append_hydration(e,t),mount_component(n,t,null),o=!0},p(s,c){const u={};c&1&&(u.blocks=s[0].content.content),n.$set(u),c&8&&toggle_class(e,"pushed",s[3])},i(s){o||(transition_in(n.$$.fragment,s),add_render_callback(()=>{a||(a=create_bidirectional_transition(e,fade,{},!0)),a.run(1)}),o=!0)},o(s){transition_out(n.$$.fragment,s),a||(a=create_bidirectional_transition(e,fade,{},!1)),a.run(0),o=!1},d(s){s&&detach(e),destroy_component(n),s&&a&&a.end()}}}function create_if_block$2(r){let e,t=r[0].infoText+"",n;return{c(){e=element("div"),n=text(t),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);n=claim_text(o,t),o.forEach(detach),this.h()},h(){attr(e,"class","info-text svelte-at985a")},m(a,o){insert_hydration(a,e,o),append_hydration(e,n)},p(a,o){o&1&&t!==(t=a[0].infoText+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_fragment$8(r){let e,t,n,a,o,s,c,u,d,m,l,f=r[0].contentType==="video"&&create_if_block_8$1(r);const _=[create_if_block_1$1,create_if_block_2,create_if_block_4,create_if_block_7$1],b=[];function S(y,k){return y[0].contentType==="video"?0:y[0].contentType==="text"?1:y[0].contentType==="importedPost"?2:y[0].isBulletinBoard?3:-1}~(o=S(r))&&(s=b[o]=_[o](r));let E=r[0].infoText&&create_if_block$2(r);return{c(){f&&f.c(),e=space(),t=element("div"),n=text("Return"),a=space(),s&&s.c(),c=space(),E&&E.c(),u=empty(),this.h()},l(y){f&&f.l(y),e=claim_space(y),t=claim_element(y,"DIV",{class:!0});var k=children(t);n=claim_text(k,"Return"),k.forEach(detach),a=claim_space(y),s&&s.l(y),c=claim_space(y),E&&E.l(y),u=empty(),this.h()},h(){attr(t,"class","return-button svelte-at985a")},m(y,k){f&&f.m(y,k),insert_hydration(y,e,k),insert_hydration(y,t,k),append_hydration(t,n),insert_hydration(y,a,k),~o&&b[o].m(y,k),insert_hydration(y,c,k),E&&E.m(y,k),insert_hydration(y,u,k),d=!0,m||(l=listen$2(t,"click",r[6]),m=!0)},p(y,[k]){y[0].contentType==="video"?f?f.p(y,k):(f=create_if_block_8$1(y),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);let I=o;o=S(y),o===I?~o&&b[o].p(y,k):(s&&(group_outros(),transition_out(b[I],1,1,()=>{b[I]=null}),check_outros()),~o?(s=b[o],s?s.p(y,k):(s=b[o]=_[o](y),s.c()),transition_in(s,1),s.m(c.parentNode,c)):s=null),y[0].infoText?E?E.p(y,k):(E=create_if_block$2(y),E.c(),E.m(u.parentNode,u)):E&&(E.d(1),E=null)},i(y){d||(transition_in(s),d=!0)},o(y){transition_out(s),d=!1},d(y){f&&f.d(y),y&&detach(e),y&&detach(t),y&&detach(a),~o&&b[o].d(y),y&&detach(c),E&&E.d(y),y&&detach(u),m=!1,l()}}}function instance$5(r,e,t){let n,a;component_subscribe(r,players,m=>t(5,n=m)),component_subscribe(r,trayOpen,m=>t(3,a=m));let{article:o={}}=e,s=0,c="",u;onMount(async()=>{enterArticle(o),o.contentType==="importedPost"&&o.importedPost&&t(2,u=await loadDataFromMainSite("*[_id == '"+o.importedPost+"'][0]"))}),onDestroy(async()=>{leaveArticle()});const d=()=>{activeArticle.set(!1)};return r.$$set=m=>{"article"in m&&t(0,o=m.article)},r.$$.update=()=>{if(r.$$.dirty&49){t(4,s=0);for(const[m,l]of Object.entries(n))l.viewing===o._id&&t(4,s++,s)}r.$$.dirty&16&&t(1,c=s===1?"You are the only one here.":`${s} people are here.`)},[o,c,u,a,s,n,d]}class ArticleBox extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$8,safe_not_equal,{article:0})}}var RoomDialog_svelte_svelte_type_style_lang="";function create_fragment$7(r){let e,t,n,a,o,s,c,u,d,m,l,f,_,b,S,E;return{c(){e=element("div"),t=element("div"),n=text(r[0]),a=space(),o=element("div"),s=element("div"),c=element("div"),u=text("\u25B8"),d=text(`
      Yes`),m=space(),l=element("div"),f=element("div"),_=text("\u25B8"),b=text(`
      No`),this.h()},l(y){e=claim_element(y,"DIV",{class:!0});var k=children(e);t=claim_element(k,"DIV",{});var I=children(t);n=claim_text(I,r[0]),I.forEach(detach),a=claim_space(k),o=claim_element(k,"DIV",{class:!0});var O=children(o);s=claim_element(O,"DIV",{class:!0,tabindex:!0,autofocus:!0});var D=children(s);c=claim_element(D,"DIV",{class:!0});var R=children(c);u=claim_text(R,"\u25B8"),R.forEach(detach),d=claim_text(D,`
      Yes`),D.forEach(detach),m=claim_space(O),l=claim_element(O,"DIV",{class:!0,tabindex:!0});var P=children(l);f=claim_element(P,"DIV",{class:!0});var W=children(f);_=claim_text(W,"\u25B8"),W.forEach(detach),b=claim_text(P,`
      No`),P.forEach(detach),O.forEach(detach),k.forEach(detach),this.h()},h(){attr(c,"class","marker svelte-pi72xu"),attr(s,"class","choice svelte-pi72xu"),attr(s,"tabindex","0"),attr(s,"autofocus",""),attr(f,"class","marker svelte-pi72xu"),attr(l,"class","choice svelte-pi72xu"),attr(l,"tabindex","0"),attr(o,"class","multiple-choice"),attr(e,"class","room-dialog-box svelte-pi72xu")},m(y,k){insert_hydration(y,e,k),append_hydration(e,t),append_hydration(t,n),append_hydration(e,a),append_hydration(e,o),append_hydration(o,s),append_hydration(s,c),append_hydration(c,u),append_hydration(s,d),append_hydration(o,m),append_hydration(o,l),append_hydration(l,f),append_hydration(f,_),append_hydration(l,b),s.focus(),S||(E=[listen$2(s,"click",r[3]),listen$2(s,"keydown",r[4]),listen$2(l,"click",r[5]),listen$2(l,"keydown",r[6])],S=!0)},p(y,[k]){k&1&&set_data(n,y[0])},i:noop$1,o:noop$1,d(y){y&&detach(e),S=!1,run_all(E)}}}function instance$4(r,e,t){const n=createEventDispatcher();let{text:a=""}=e,{roomId:o=""}=e;const s=m=>{n("room",{roomId:o})},c=m=>{m.code==="Enter"&&n("room",{roomId:o})},u=m=>{n("room",{roomId:!1})},d=m=>{m.code==="Enter"&&n("room",{roomId:!1})};return r.$$set=m=>{"text"in m&&t(0,a=m.text),"roomId"in m&&t(1,o=m.roomId)},[a,o,n,s,c,u,d]}class RoomDialog extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$7,safe_not_equal,{text:0,roomId:1})}}var RoomEntryBox_svelte_svelte_type_style_lang="";function create_fragment$6(r){let e,t,n,a;return t=new RoomDialog({props:{text:`Go to ${r[1]}?`,roomId:r[0]}}),t.$on("room",r[3]),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var s=children(e);claim_component(t.$$.fragment,s),s.forEach(detach),this.h()},h(){attr(e,"class","caption-container svelte-ukizaq")},m(o,s){insert_hydration(o,e,s),mount_component(t,e,null),a=!0},p(o,[s]){const c={};s&2&&(c.text=`Go to ${o[1]}?`),s&1&&(c.roomId=o[0]),t.$set(c)},i(o){a||(transition_in(t.$$.fragment,o),n||add_render_callback(()=>{n=create_in_transition(e,fade,{}),n.start()}),a=!0)},o(o){transition_out(t.$$.fragment,o),a=!1},d(o){o&&detach(e),destroy_component(t)}}}function instance$3(r,e,t){const n=createEventDispatcher();let{roomIntent:a=""}=e,{roomTitle:o=""}=e;const s=c=>{console.log(c),n("room",{roomId:c.detail.roomId})};return r.$$set=c=>{"roomIntent"in c&&t(0,a=c.roomIntent),"roomTitle"in c&&t(1,o=c.roomTitle)},[a,o,n,s]}class RoomEntryBox extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$6,safe_not_equal,{roomIntent:0,roomTitle:1})}}var triangleDown_svelte_svelte_type_style_lang="";function create_fragment$5(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d","M4.8474 7.78418L0.703963 0.607532L8.99084 0.607531L4.8474 7.78418Z"),attr(t,"class","svelte-fiesz8"),attr(e,"width","9"),attr(e,"height","8"),attr(e,"viewBox","0 0 9 8"),attr(e,"fill","none"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"class","svelte-fiesz8")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class Triangle_down extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$5,safe_not_equal,{})}}var Caption_svelte_svelte_type_style_lang="";function create_if_block$1(r){let e,t,n,a,o;return t=new Triangle_down({}),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var c=children(e);claim_component(t.$$.fragment,c),c.forEach(detach),this.h()},h(){attr(e,"class","next-caption svelte-10yrac0")},m(s,c){insert_hydration(s,e,c),mount_component(t,e,null),n=!0,a||(o=listen$2(e,"click",r[6]),a=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),a=!1,o()}}}function create_fragment$4(r){let e,t,n=renderBlockText(r[2].text.content)+"",a,o,s,c,u,d,m=r[1]<r[0].length-1&&create_if_block$1(r);return{c(){e=element("div"),t=element("div"),s=space(),m&&m.c(),this.h()},l(l){e=claim_element(l,"DIV",{class:!0});var f=children(e);t=claim_element(f,"DIV",{class:!0});var _=children(t);_.forEach(detach),s=claim_space(f),m&&m.l(f),f.forEach(detach),this.h()},h(){attr(t,"class","caption-box svelte-10yrac0"),attr(e,"class","caption-container svelte-10yrac0")},m(l,f){insert_hydration(l,e,f),append_hydration(e,t),t.innerHTML=n,append_hydration(e,s),m&&m.m(e,null),c=!0,u||(d=listen$2(t,"click",r[5]),u=!0)},p(l,[f]){r=l,(!c||f&4)&&n!==(n=renderBlockText(r[2].text.content)+"")&&(t.innerHTML=n),r[1]<r[0].length-1?m?(m.p(r,f),f&3&&transition_in(m,1)):(m=create_if_block$1(r),m.c(),transition_in(m,1),m.m(e,null)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(l){c||(add_render_callback(()=>{o&&o.end(1),a=create_in_transition(t,fade,r[4]),a.start()}),transition_in(m),c=!0)},o(l){a&&a.invalidate(),o=create_out_transition(t,fade,{duration:100}),transition_out(m),c=!1},d(l){l&&detach(e),l&&o&&o.end(),m&&m.d(),u=!1,d()}}}function instance$2(r,e,t){const n=createEventDispatcher(),a={duration:500};let{text:o=[]}=e,s=0,c=!1;o.length>0&&(c=o[s]);const u=m=>{s<o.length-1?(t(1,s++,s),t(2,c=o[s])):n("close")},d=m=>{t(1,s++,s),t(2,c=o[s])};return r.$$set=m=>{"text"in m&&t(0,o=m.text)},[o,s,c,n,a,u,d]}class Caption extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$4,safe_not_equal,{text:0})}}var Chat_svelte_svelte_type_style_lang="";function create_fragment$3(r){let e,t,n,a,o,s,c,u;return{c(){e=element("div"),t=element("div"),n=element("input"),a=space(),o=element("button"),s=text("Send"),this.h()},l(d){e=claim_element(d,"DIV",{class:!0});var m=children(e);t=claim_element(m,"DIV",{class:!0});var l=children(t);n=claim_element(l,"INPUT",{placeholder:!0,type:!0,maxlength:!0,class:!0}),a=claim_space(l),o=claim_element(l,"BUTTON",{class:!0});var f=children(o);s=claim_text(f,"Send"),f.forEach(detach),l.forEach(detach),m.forEach(detach),this.h()},h(){attr(n,"placeholder","Write a message..."),attr(n,"type","[text]"),attr(n,"maxlength","600"),attr(n,"class","svelte-oqrtp3"),attr(o,"class","svelte-oqrtp3"),attr(t,"class","chat-input svelte-oqrtp3"),attr(e,"class","chat-container svelte-oqrtp3")},m(d,m){insert_hydration(d,e,m),append_hydration(e,t),append_hydration(t,n),set_input_value(n,r[0]),append_hydration(t,a),append_hydration(t,o),append_hydration(o,s),c||(u=[listen$2(n,"input",r[3]),listen$2(n,"keydown",r[4]),listen$2(o,"click",r[1])],c=!0)},p(d,[m]){m&1&&set_input_value(n,d[0])},i:noop$1,o:noop$1,d(d){d&&detach(e),c=!1,run_all(u)}}}function instance$1(r,e,t){const n=createEventDispatcher();let a="";const o=()=>{n("submit",{text:a}),t(0,a="")};let{chatMessages:s=[]}=e;function c(){a=this.value,t(0,a)}const u=d=>{d.keyCode==13&&o()};return r.$$set=d=>{"chatMessages"in d&&t(2,s=d.chatMessages)},[a,o,s,c,u]}class Chat extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$3,safe_not_equal,{chatMessages:2})}}var SoundOn_svelte_svelte_type_style_lang="";function create_fragment$2(r){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),this.h()},l(n){e=claim_svg_element(n,"svg",{version:!0,id:!0,xmlns:!0,"xmlns:xlink":!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,class:!0});var a=children(e);t=claim_svg_element(a,"path",{d:!0,class:!0}),children(t).forEach(detach),a.forEach(detach),this.h()},h(){attr(t,"d",`M1.6,11.5l4.3,4.7l-1.3,1.2c-0.2,0.2-0.4,0.3-0.5,0.3c-0.1,0-0.3-0.1-0.5-0.3l-3.4-3.7C0.1,13.4,0,13.2,0,13.1
		c0-0.1,0.1-0.3,0.3-0.5L1.6,11.5z M9.5,3.1c0.7,0.2,1.4,0.4,2,0.8c0.6,0.4,1.2,0.9,1.7,1.5c0.5,0.6,1,1.1,1.3,1.8
		c0.4,0.7,0.6,1.4,0.7,2.1l-1.3,0c-0.1-0.6-0.3-1.2-0.6-1.7c-0.3-0.5-0.6-0.9-1-1.3c-0.4-0.4-0.8-0.8-1.3-1.1
		c-0.5-0.3-1-0.6-1.6-0.7L9.5,3.1z M9.7,0c1,0.2,1.9,0.6,2.9,1.2c0.9,0.6,1.8,1.4,2.7,2.3c0.8,0.9,1.5,1.9,2.1,2.9s0.8,2,0.9,3
		l-1.3,0c-0.1-0.8-0.4-1.7-0.8-2.5c-0.5-0.8-1.1-1.7-1.8-2.5c-0.7-0.8-1.5-1.4-2.3-2c-0.8-0.5-1.6-0.8-2.4-1L9.7,0z M4.1,2.1
		C4.2,2,4.3,1.9,4.5,2C4.6,2,4.8,2.1,5,2.3l10.5,11.3c0.2,0.2,0.3,0.4,0.3,0.6c0,0.1,0,0.3-0.2,0.4c-0.1,0.1-0.4,0.2-0.9,0.2
		l-7.9,0.4l-4.3-4.7l1.2-7.6c0-0.2,0.1-0.4,0.1-0.5C4,2.3,4,2.2,4.1,2.1`),attr(t,"class","svelte-1iwhujd"),attr(e,"version","1.1"),attr(e,"id","Layer_1"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(e,"x","0px"),attr(e,"y","0px"),attr(e,"viewBox","0 0 18.3 17.6"),set_style(e,"enable-background","new 0 0 18.3 17.6"),attr(e,"xml:space","preserve"),attr(e,"class","svelte-1iwhujd")},m(n,a){insert_hydration(n,e,a),append_hydration(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class SoundOn extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$2,safe_not_equal,{})}}var SoundOff_svelte_svelte_type_style_lang="";function create_fragment$1(r){let e,t,n,a,o;return{c(){e=svg_element("svg"),t=svg_element("path"),n=svg_element("path"),a=svg_element("path"),o=svg_element("path"),this.h()},l(s){e=claim_svg_element(s,"svg",{xmlns:!0,viewBox:!0,class:!0});var c=children(e);t=claim_svg_element(c,"path",{class:!0,d:!0}),children(t).forEach(detach),n=claim_svg_element(c,"path",{class:!0,d:!0}),children(n).forEach(detach),a=claim_svg_element(c,"path",{class:!0,d:!0}),children(a).forEach(detach),o=claim_svg_element(c,"path",{class:!0,d:!0}),children(o).forEach(detach),c.forEach(detach),this.h()},h(){attr(t,"class","a svelte-y4dmoz"),attr(t,"d","M1.6,11.5l4.3,4.7L4.6,17.4a.91.91,0,0,1-.5.3.91.91,0,0,1-.5-.3L.2,13.7a3.93,3.93,0,0,1-.2-.6.91.91,0,0,1,.3-.5Z"),attr(n,"class","b svelte-y4dmoz"),attr(n,"d","M9.5,3.1a7,7,0,0,1,2,.8,8,8,0,0,1,1.7,1.5,7.49,7.49,0,0,1,1.3,1.8,5.79,5.79,0,0,1,.7,2.1H13.9a4.92,4.92,0,0,0-.6-1.7,6.42,6.42,0,0,0-1-1.3A6.89,6.89,0,0,0,11,5.2a4.59,4.59,0,0,0-1.6-.7Z"),attr(a,"class","b svelte-y4dmoz"),attr(a,"d","M9.7,0a8.94,8.94,0,0,1,2.9,1.2,18.37,18.37,0,0,1,2.7,2.3,19.41,19.41,0,0,1,2.1,2.9,6.91,6.91,0,0,1,.9,3H17a8.09,8.09,0,0,0-.8-2.5,19.5,19.5,0,0,0-1.8-2.5,14.34,14.34,0,0,0-2.3-2,8.18,8.18,0,0,0-2.4-1Z"),attr(o,"class","a svelte-y4dmoz"),attr(o,"d","M4.1,2.1c.1-.1.2-.2.4-.1a.91.91,0,0,1,.5.3L15.5,13.6a.86.86,0,0,1,.3.6.4.4,0,0,1-.2.4,1.44,1.44,0,0,1-.9.2l-7.9.4L2.5,10.5,3.7,2.9a4.33,4.33,0,0,1,.1-.5c.2-.1.2-.2.3-.3"),attr(e,"xmlns","http://www.w3.org/2000/svg"),attr(e,"viewBox","0 0 18.3 17.7"),attr(e,"class","svelte-y4dmoz")},m(s,c){insert_hydration(s,e,c),append_hydration(e,t),append_hydration(e,n),append_hydration(e,a),append_hydration(e,o)},p:noop$1,i:noop$1,o:noop$1,d(s){s&&detach(e)}}}class SoundOff extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$1,safe_not_equal,{})}}var root=_root,now$1=function(){return root.Date.now()},now_1=now$1,isObject$1=isObject_1$1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(r,e,t){var n,a,o,s,c,u,d=0,m=!1,l=!1,f=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$1);e=toNumber(e)||0,isObject$1(t)&&(m=!!t.leading,l="maxWait"in t,o=l?nativeMax(toNumber(t.maxWait)||0,e):o,f="trailing"in t?!!t.trailing:f);function _(R){var P=n,W=a;return n=a=void 0,d=R,s=r.apply(W,P),s}function b(R){return d=R,c=setTimeout(y,e),m?_(R):s}function S(R){var P=R-u,W=R-d,V=e-P;return l?nativeMin(V,o-W):V}function E(R){var P=R-u,W=R-d;return u===void 0||P>=e||P<0||l&&W>=o}function y(){var R=now();if(E(R))return k(R);c=setTimeout(y,S(R))}function k(R){return c=void 0,f&&n?_(R):(n=a=void 0,s)}function I(){c!==void 0&&clearTimeout(c),d=0,n=u=a=c=void 0}function O(){return c===void 0?s:k(now())}function D(){var R=now(),P=E(R);if(n=arguments,a=this,u=R,P){if(c===void 0)return b(u);if(l)return clearTimeout(c),c=setTimeout(y,e),_(u)}return c===void 0&&(c=setTimeout(y,e)),s}return D.cancel=I,D.flush=O,D}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1$1,FUNC_ERROR_TEXT="Expected a function";function throttle(r,e,t){var n=!0,a=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(t)&&(n="leading"in t?!!t.leading:n,a="trailing"in t?!!t.trailing:a),debounce(r,e,{leading:n,maxWait:e,trailing:a})}var throttle_1=throttle;const keyReleased=writable(!0),initializeKeyboardHandler=()=>new Promise((r,e)=>{document.addEventListener("keydown",throttle_1(t=>{t.keyCode===38&&(keyReleased.set(!1),get_store_value(players)[get_store_value(localPlayer).uuid].y>0&&players.update(n=>(n[get_store_value(localPlayer).uuid].y-=1,n))),t.keyCode===40&&(keyReleased.set(!1),get_store_value(players)[get_store_value(localPlayer).uuid].y*GRID_SIZE<get_store_value(currentRoom).dimensions.height*GRID_SIZE-60&&players.update(n=>(n[get_store_value(localPlayer).uuid].y+=1,n))),t.keyCode===37&&(keyReleased.set(!1),get_store_value(players)[get_store_value(localPlayer).uuid].x>0&&players.update(n=>(n[get_store_value(localPlayer).uuid].x-=1,n))),t.keyCode===39&&(keyReleased.set(!1),get_store_value(players)[get_store_value(localPlayer).uuid].x*GRID_SIZE<get_store_value(currentRoom).dimensions.width*GRID_SIZE-60&&players.update(n=>(n[get_store_value(localPlayer).uuid].x+=1,n))),moveTo(get_store_value(players)[get_store_value(localPlayer).uuid].x,get_store_value(players)[get_store_value(localPlayer).uuid].y,!0)},100)),document.addEventListener("keyup",t=>{keyReleased.set(!0)}),r()}),transitionWorldOut=r=>new Promise((e,t)=>{let n=gsap.timeline();n.to(r,.5,{css:{opacity:0}}),n.play(),n.eventCallback("onComplete",()=>{e()})}),transitionWorldIn=r=>new Promise((e,t)=>{let n=gsap.timeline();n.to(r,.5,{css:{opacity:0}}),n.to(r,.5,{css:{opacity:1}}),n.play(),n.eventCallback("onComplete",()=>{e()})}),streams=writable([]),initializeStreamsHandler=async()=>{const r='*[_id == "streams"][0]';let e=await loadData(r);streams.set(e.activeStreams),client.listen(r).subscribe(t=>{console.log("UPDATE!!",t),streams.set(t.result.activeStreams)})};var __layout_svelte_svelte_type_style_lang="";function get_each_context(r,e,t){const n=r.slice();return n[31]=e[t],n}function create_if_block_13(r){let e,t,n;return t=new Room({props:{room:r[7],x:get_1(r[2][r[1].uuid],"x",100),y:get_1(r[2][r[1].uuid],"y",100),$$slots:{default:[create_default_slot]},$$scope:{ctx:r}}}),t.$on("move",r[19]),{c(){e=element("div"),create_component(t.$$.fragment),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var o=children(e);claim_component(t.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(e,"class","viewport svelte-10dwrrh"),toggle_class(e,"pushed",r[9]),toggle_class(e,"blurred",UI.state==STATE.ONBOARDING)},m(a,o){insert_hydration(a,e,o),mount_component(t,e,null),r[20](e),n=!0},p(a,o){const s={};o[0]&128&&(s.room=a[7]),o[0]&6&&(s.x=get_1(a[2][a[1].uuid],"x",100)),o[0]&6&&(s.y=get_1(a[2][a[1].uuid],"y",100)),o[0]&7316|o[1]&8&&(s.$$scope={dirty:o,ctx:a}),t.$set(s),o[0]&512&&toggle_class(e,"pushed",a[9])},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t),r[20](null)}}}function create_if_block_14(r){let e,t;return e=new TargetMarker({props:{x:r[11],y:r[12]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&2048&&(o.x=n[11]),a[0]&4096&&(o.y=n[12]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot(r){let e,t,n,a,o,s,c,u,d,m;e=new Players({props:{players:r[2],currentRoomId:r[7]._id,avatars:r[4]}}),n=new Objects({props:{objects:get_1(r[7],"objects",[])}}),o=new Zones({props:{zones:get_1(r[7],"zones",[])}}),c=new Portals({props:{portals:get_1(r[7],"portals",[])}});let l=r[10]&&create_if_block_14(r);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),a=space(),create_component(o.$$.fragment),s=space(),create_component(c.$$.fragment),u=space(),l&&l.c(),d=empty()},l(f){claim_component(e.$$.fragment,f),t=claim_space(f),claim_component(n.$$.fragment,f),a=claim_space(f),claim_component(o.$$.fragment,f),s=claim_space(f),claim_component(c.$$.fragment,f),u=claim_space(f),l&&l.l(f),d=empty()},m(f,_){mount_component(e,f,_),insert_hydration(f,t,_),mount_component(n,f,_),insert_hydration(f,a,_),mount_component(o,f,_),insert_hydration(f,s,_),mount_component(c,f,_),insert_hydration(f,u,_),l&&l.m(f,_),insert_hydration(f,d,_),m=!0},p(f,_){const b={};_[0]&4&&(b.players=f[2]),_[0]&128&&(b.currentRoomId=f[7]._id),_[0]&16&&(b.avatars=f[4]),e.$set(b);const S={};_[0]&128&&(S.objects=get_1(f[7],"objects",[])),n.$set(S);const E={};_[0]&128&&(E.zones=get_1(f[7],"zones",[])),o.$set(E);const y={};_[0]&128&&(y.portals=get_1(f[7],"portals",[])),c.$set(y),f[10]?l?(l.p(f,_),_[0]&1024&&transition_in(l,1)):(l=create_if_block_14(f),l.c(),transition_in(l,1),l.m(d.parentNode,d)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(f){m||(transition_in(e.$$.fragment,f),transition_in(n.$$.fragment,f),transition_in(o.$$.fragment,f),transition_in(c.$$.fragment,f),transition_in(l),m=!0)},o(f){transition_out(e.$$.fragment,f),transition_out(n.$$.fragment,f),transition_out(o.$$.fragment,f),transition_out(c.$$.fragment,f),transition_out(l),m=!1},d(f){destroy_component(e,f),f&&detach(t),destroy_component(n,f),f&&detach(a),destroy_component(o,f),f&&detach(s),destroy_component(c,f),f&&detach(u),l&&l.d(f),f&&detach(d)}}}function create_if_block_12(r){let e,t;return e=new AmbientAudio({props:{soundFile:r[7].backgroundSound}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&128&&(o.soundFile=n[7].backgroundSound),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_11(r){let e,t;return e=new AuthenticationBox({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_10(r){let e,t;return e=new StreamPlayer({props:{streamUrl:r[31].videoUrl}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&16384&&(o.streamUrl=n[31].videoUrl),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block(r){let e,t,n=(r[7]._id==r[31].parentArea._ref||r[6]._id==r[31].parentArea._ref)&&create_if_block_10(r);return{c(){n&&n.c(),e=empty()},l(a){n&&n.l(a),e=empty()},m(a,o){n&&n.m(a,o),insert_hydration(a,e,o),t=!0},p(a,o){a[7]._id==a[31].parentArea._ref||a[6]._id==a[31].parentArea._ref?n?(n.p(a,o),o[0]&16576&&transition_in(n,1)):(n=create_if_block_10(a),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){n&&n.d(a),a&&detach(e)}}}function create_if_block_9(r){let e,t;return e=new RoomEntryBox({props:{roomIntent:r[0],roomTitle:r[8][r[0]].title}}),e.$on("room",r[21]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&1&&(o.roomIntent=n[0]),a[0]&257&&(o.roomTitle=n[8][n[0]].title),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_7(r){let e,t,n=r[5]&&create_if_block_8(r);return{c(){n&&n.c(),e=empty()},l(a){n&&n.l(a),e=empty()},m(a,o){n&&n.m(a,o),insert_hydration(a,e,o),t=!0},p(a,o){a[5]?n?(n.p(a,o),o[0]&32&&transition_in(n,1)):(n=create_if_block_8(a),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){n&&n.d(a),a&&detach(e)}}}function create_if_block_8(r){let e,t;return e=new Caption({props:{text:r[5]}}),e.$on("close",r[22]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&32&&(o.text=n[5]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6(r){let e,t;return e=new ArticleBox({props:{article:r[15]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&32768&&(o.article=n[15]),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5(r){let e,t;return e=new Chat({props:{chatMessages:r[16].filter(r[23])}}),e.$on("submit",r[24]),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},p(n,a){const o={};a[0]&65664&&(o.chatMessages=n[16].filter(n[23])),e.$set(o)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block(r){let e,t,n,a,o,s,c,u,d,m,l;const f=[create_if_block_1,create_else_block],_=[];function b(S,E){return S[13]?0:1}return n=b(r),a=_[n]=f[n](r),{c(){e=element("div"),t=element("div"),a.c(),o=space(),s=element("div"),c=element("span"),u=text("abc"),this.h()},l(S){e=claim_element(S,"DIV",{class:!0});var E=children(e);t=claim_element(E,"DIV",{class:!0});var y=children(t);a.l(y),y.forEach(detach),o=claim_space(E),s=claim_element(E,"DIV",{class:!0});var k=children(s);c=claim_element(k,"SPAN",{class:!0});var I=children(c);u=claim_text(I,"abc"),I.forEach(detach),k.forEach(detach),E.forEach(detach),this.h()},h(){attr(t,"class","option sound svelte-10dwrrh"),attr(c,"class","svelte-10dwrrh"),attr(s,"class","option labels svelte-10dwrrh"),toggle_class(s,"on",r[17]),attr(e,"class","options svelte-10dwrrh")},m(S,E){insert_hydration(S,e,E),append_hydration(e,t),_[n].m(t,null),append_hydration(e,o),append_hydration(e,s),append_hydration(s,c),append_hydration(c,u),d=!0,m||(l=[listen$2(t,"click",r[25]),listen$2(s,"click",r[26])],m=!0)},p(S,E){let y=n;n=b(S),n!==y&&(group_outros(),transition_out(_[y],1,1,()=>{_[y]=null}),check_outros(),a=_[n],a||(a=_[n]=f[n](S),a.c()),transition_in(a,1),a.m(t,null)),E[0]&131072&&toggle_class(s,"on",S[17])},i(S){d||(transition_in(a),d=!0)},o(S){transition_out(a),d=!1},d(S){S&&detach(e),_[n].d(),m=!1,run_all(l)}}}function create_else_block(r){let e,t;return e=new SoundOff({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1(r){let e,t;return e=new SoundOn({}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,a){mount_component(e,n,a),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment(r){let e,t,n,a=has_1(r[7],"backgroundSound.asset")&&r[13],o,s,c,u,d,m,l,f,_,b,S,E;e=new Menubar({props:{currentRoom:r[7]}});let y=r[7]&&create_if_block_13(r),k=a&&create_if_block_12(r),I=create_if_block_11(),O=r[14],D=[];for(let F=0;F<O.length;F+=1)D[F]=create_each_block(get_each_context(r,O,F));const R=F=>transition_out(D[F],1,1,()=>{D[F]=null});let P=r[0]&&create_if_block_9(r),W=!r[9]&&!r[15]&&!r[0]&&create_if_block_7(r),V=r[15]&&create_if_block_6(r),L=!r[9]&&!r[15]&&create_if_block_5(r),j=UI.state==STATE.LOADING,z=UI.state==STATE.ERROR,q=UI.state==STATE.DISCONNECTED,Q=!r[9]&&!r[15]&&create_if_block(r);return{c(){create_component(e.$$.fragment),t=space(),y&&y.c(),n=space(),k&&k.c(),o=space(),I&&I.c(),s=space();for(let F=0;F<D.length;F+=1)D[F].c();c=space(),P&&P.c(),u=space(),W&&W.c(),d=space(),V&&V.c(),m=space(),L&&L.c(),l=space(),f=space(),_=space(),b=space(),Q&&Q.c(),S=empty()},l(F){claim_component(e.$$.fragment,F),t=claim_space(F),y&&y.l(F),n=claim_space(F),k&&k.l(F),o=claim_space(F),I&&I.l(F),s=claim_space(F);for(let Y=0;Y<D.length;Y+=1)D[Y].l(F);c=claim_space(F),P&&P.l(F),u=claim_space(F),W&&W.l(F),d=claim_space(F),V&&V.l(F),m=claim_space(F),L&&L.l(F),l=claim_space(F),f=claim_space(F),_=claim_space(F),b=claim_space(F),Q&&Q.l(F),S=empty()},m(F,Y){mount_component(e,F,Y),insert_hydration(F,t,Y),y&&y.m(F,Y),insert_hydration(F,n,Y),k&&k.m(F,Y),insert_hydration(F,o,Y),I&&I.m(F,Y),insert_hydration(F,s,Y);for(let ee=0;ee<D.length;ee+=1)D[ee].m(F,Y);insert_hydration(F,c,Y),P&&P.m(F,Y),insert_hydration(F,u,Y),W&&W.m(F,Y),insert_hydration(F,d,Y),V&&V.m(F,Y),insert_hydration(F,m,Y),L&&L.m(F,Y),insert_hydration(F,l,Y),insert_hydration(F,f,Y),insert_hydration(F,_,Y),insert_hydration(F,b,Y),Q&&Q.m(F,Y),insert_hydration(F,S,Y),E=!0},p(F,Y){const ee={};if(Y[0]&128&&(ee.currentRoom=F[7]),e.$set(ee),F[7]?y?(y.p(F,Y),Y[0]&128&&transition_in(y,1)):(y=create_if_block_13(F),y.c(),transition_in(y,1),y.m(n.parentNode,n)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros()),Y[0]&8320&&(a=has_1(F[7],"backgroundSound.asset")&&F[13]),a?k?(k.p(F,Y),Y[0]&8320&&transition_in(k,1)):(k=create_if_block_12(F),k.c(),transition_in(k,1),k.m(o.parentNode,o)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),Y[0]&16576){O=F[14];let ce;for(ce=0;ce<O.length;ce+=1){const me=get_each_context(F,O,ce);D[ce]?(D[ce].p(me,Y),transition_in(D[ce],1)):(D[ce]=create_each_block(me),D[ce].c(),transition_in(D[ce],1),D[ce].m(c.parentNode,c))}for(group_outros(),ce=O.length;ce<D.length;ce+=1)R(ce);check_outros()}F[0]?P?(P.p(F,Y),Y[0]&1&&transition_in(P,1)):(P=create_if_block_9(F),P.c(),transition_in(P,1),P.m(u.parentNode,u)):P&&(group_outros(),transition_out(P,1,1,()=>{P=null}),check_outros()),!F[9]&&!F[15]&&!F[0]?W?(W.p(F,Y),Y[0]&33281&&transition_in(W,1)):(W=create_if_block_7(F),W.c(),transition_in(W,1),W.m(d.parentNode,d)):W&&(group_outros(),transition_out(W,1,1,()=>{W=null}),check_outros()),F[15]?V?(V.p(F,Y),Y[0]&32768&&transition_in(V,1)):(V=create_if_block_6(F),V.c(),transition_in(V,1),V.m(m.parentNode,m)):V&&(group_outros(),transition_out(V,1,1,()=>{V=null}),check_outros()),!F[9]&&!F[15]?L?(L.p(F,Y),Y[0]&33280&&transition_in(L,1)):(L=create_if_block_5(F),L.c(),transition_in(L,1),L.m(l.parentNode,l)):L&&(group_outros(),transition_out(L,1,1,()=>{L=null}),check_outros()),!F[9]&&!F[15]?Q?(Q.p(F,Y),Y[0]&33280&&transition_in(Q,1)):(Q=create_if_block(F),Q.c(),transition_in(Q,1),Q.m(S.parentNode,S)):Q&&(group_outros(),transition_out(Q,1,1,()=>{Q=null}),check_outros())},i(F){if(!E){transition_in(e.$$.fragment,F),transition_in(y),transition_in(k),transition_in(I);for(let Y=0;Y<O.length;Y+=1)transition_in(D[Y]);transition_in(P),transition_in(W),transition_in(V),transition_in(L),transition_in(j),transition_in(z),transition_in(q),transition_in(Q),E=!0}},o(F){transition_out(e.$$.fragment,F),transition_out(y),transition_out(k),transition_out(I),D=D.filter(Boolean);for(let Y=0;Y<D.length;Y+=1)transition_out(D[Y]);transition_out(P),transition_out(W),transition_out(V),transition_out(L),transition_out(j),transition_out(z),transition_out(q),transition_out(Q),E=!1},d(F){destroy_component(e,F),F&&detach(t),y&&y.d(F),F&&detach(n),k&&k.d(F),F&&detach(o),I&&I.d(F),F&&detach(s),destroy_each(D,F),F&&detach(c),P&&P.d(F),F&&detach(u),W&&W.d(F),F&&detach(d),V&&V.d(F),F&&detach(m),L&&L.d(F),F&&detach(l),F&&detach(f),F&&detach(_),F&&detach(b),Q&&Q.d(F),F&&detach(S)}}}function instance(r,e,t){let n,a,o,s,c,u,d,m,l,f,_,b,S,E;component_subscribe(r,currentRoom,ee=>t(7,n=ee)),component_subscribe(r,profile,ee=>t(27,a=ee)),component_subscribe(r,localPlayer,ee=>t(1,o=ee)),component_subscribe(r,worldObject,ee=>t(8,s=ee)),component_subscribe(r,players,ee=>t(2,c=ee)),component_subscribe(r,trayOpen,ee=>t(9,u=ee)),component_subscribe(r,showTarget,ee=>t(10,d=ee)),component_subscribe(r,targetX,ee=>t(11,m=ee)),component_subscribe(r,targetY,ee=>t(12,l=ee)),component_subscribe(r,playSound,ee=>t(13,f=ee)),component_subscribe(r,streams,ee=>t(14,_=ee)),component_subscribe(r,activeArticle,ee=>t(15,b=ee)),component_subscribe(r,chatMessages,ee=>t(16,S=ee)),component_subscribe(r,showLabels,ee=>t(17,E=ee));let y={},k=!1,I=[],O=!1,D=!1;const R=()=>{if(n.portals&&Array.isArray(n.portals)){let ee=!1;n.portals.forEach(ce=>{c[o.uuid].x===ce.x&&c[o.uuid].y===ce.y&&(ee=ce.targetArea._id)}),ee?t(0,k=ee):t(0,k=!1)}},P=()=>{document.getElementById(o.uuid);let ee=!1;n.zones.forEach(ce=>{inRange_1(c[o.uuid].x,ce.x,ce.x+ce.dimensions.width)&&inRange_1(c[o.uuid].y,ce.y,ce.y+ce.dimensions.height)&&(ee=ce)}),ee?t(6,D=ee):t(6,D=!1)},W=async ee=>{let ce=s[ee];showLabels.set(!1),await transitionWorldOut(y),currentRoom.set(ce),goToRoom({id:ce._id,x:getRandomInt(4,6),y:getRandomInt(4,6)}),await transitionWorldIn(y),showLabels.set(!0),has_1(ce,"introductionTexts")?t(5,O=ce.introductionTexts):t(5,O=!1)};onMount(async()=>{infoLogger("__ => App starting...");try{await configureAuthClient()}catch(ce){errorLogger("Error in authentication:",ce)}infoLogger("\u2713 (1) Auth client configured "),await buildWorld(),infoLogger("\u2713 (2) World built");for(const[ce,me]of Object.entries(s))if(s[ce].mainArea){currentRoom.set(s[ce]);break}t(4,I=await loadAvatars()),infoLogger("\u2713 (3) Avatars loaded"),localPlayer.update(ce=>(ce.uuid=nanoid(),ce));let ee={uuid:o.uuid,name:a&&a.name?a.name:"Test player",shape:has_1(a,"avatar._ref")?a.avatar._ref:sample_1(I)._id,onboarded:!0,room:n._id,x:getRandomInt(10,30),y:getRandomInt(5,15)};await connectToGameServer(ee),infoLogger("\u2713 (4) Game server connected"),await initializeKeyboardHandler(),infoLogger("\u2713 (5) Keyboard initialized"),initializeStreamsHandler(),infoLogger("\u2713 (6) Stream listener initialized"),has_1(n,"introductionTexts")&&t(5,O=n.introductionTexts),infoLogger("\u2713 (7) Show main room introduction"),infoLogger("__ => App loaded")});const V=ee=>{moveTo(ee.detail.x,ee.detail.y,!1)};function L(ee){binding_callbacks[ee?"unshift":"push"](()=>{y=ee,t(3,y)})}const j=ee=>{ee.detail.roomId&&W(k),t(0,k=!1)},z=ee=>{t(5,O=!1)},q=ee=>ee.room===n._id,Q=ee=>{submitChat(ee,n)},F=()=>{playSound.set(!f)},Y=()=>{showLabels.set(!E)};return r.$$.update=()=>{r.$$.dirty[0]&1&&k&&t(5,O=!1),r.$$.dirty[0]&6&&c[o.uuid]&&(c[o.uuid].x||c[o.uuid].x)&&(R(),P())},[k,o,c,y,I,O,D,n,s,u,d,m,l,f,_,b,S,E,W,V,L,j,z,q,Q,F,Y]}class _layout extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{},null,[-1,-1])}}export{_layout as default};
